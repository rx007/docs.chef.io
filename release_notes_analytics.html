<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    
    <title>Release Notes: Chef Analytics &mdash; Chef Docs</title>
    <link rel="stylesheet" href="_static/chefv2.css" type="text/css" />
<link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
    URL_ROOT:    './',
    VERSION:     '',
    COLLAPSE_INDEX: false,
    FILE_SUFFIX: '.html',
    HAS_SOURCE:  true
  };
</script>
<script type="text/javascript" src="_static/jquery.js"></script>
<script type="text/javascript" src="_static/underscore.js"></script>
<script type="text/javascript" src="_static/doctools.js"></script>
<script type="text/javascript" src="_static/script.js"></script>

    <link rel="top" title="Chef Docs" href="index.html" />
    <link rel="next" title="Upgrading Chef Analytics" href="upgrade_analytics.html" />
    <link rel="prev" title="knife analytics" href="plugin_knife_analytics.html" /> 
  </head>
  <body role="document">
    <div class="body-wrap">

  <nav class="nav-main" role="navigation" data-topbar>
    <div class="nav-inner">
      <div class="left">
        <h1>
          <a href="https://learn.chef.io">
            <span>Learn Chef</span>
          </a>
        </h1>
      </div>

      <i id="nav-icon" class="fa fa-bars"></i>
      <a href="https://www.chef.io/">
        <img id="logo" src="_static/chef_logo_v2.svg" onerror="_static/chef_logo_v2.png"/>
      </a>

      <ul class="nav-links links-main">
        <li class="nav-link">
          <a href="https://learn.chef.io/tutorials">Tutorials</a>
        </li>
        <li class="nav-link">
          <a href="https://learn.chef.io/skills/">Skills Library</a>
        </li>
        <li class="nav-link is-active">
          <a href="https://docs.chef.io/">Docs</a>
        </li>
        <li class="nav-link">
          <a href="https://www.chef.io/training/">Training</a>
        </li>
      </ul>
    </div>
  </nav>





    <div class="document chef-docs">
    <nav class="nav-docs">
  <ul class="nav-docs-items" id="nav-docs-list">
    <li class="main-item dark-item docs-search">
      <form action="/search.html" method="get">
        <input type="text" placeholder="Search" id="docs-search" name="q">
        <input type="submit" class="submit-button" value="">
        <i class="fa fa-search icon-search"></i>
      </form>
   

    </li>
    
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Overview"> <!-- else item does not have custom image and should use FontAwesome icon -->

        <i class="fa fa-home icon-left"></i> Overview <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items"> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/platform_overview.html" title="Platform Overview">
            Platform Overview
          </a>
        </li>

         <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Community">
            Community
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/community.html" title="About the Community">
                About the Community
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/community_contributions.html" title="Contributing">
                Contributing
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/community_guidelines.html" title="Guidelines">
                Guidelines
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/style_guide.html" title="Docs Style Guide">
                Docs Style Guide
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Packages &amp; Platforms">
            Packages &amp; Platforms
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/packages.html" title="Packages">
                Packages
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/platforms.html" title="Platforms">
                Platforms
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_omnitruck.html" title="Omnitruck API">
                Omnitruck API
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_license.html" title="Licensing">
                Licensing
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Chef"> <!-- else item does not have custom image and should use FontAwesome icon -->

        <i class="fa fa-tasks icon-left"></i> Chef <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items">

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Getting Started">
            Getting Started
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_overview.html" title="Chef Overview">
                Chef Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/quick_start.html" title="Quick Start">
                Quick Start
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_system_requirements.html" title="System Requirements">
                System Requirements
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Release Notes">
                Release Notes
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/release_notes.html" title="Chef Client">
                    Chef Client
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/release_notes_chefdk.html" title="Chef Development Kit">
                    Chef Development Kit
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/release_notes_server.html" title="Chef Server">
                    Chef Server
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/release_notes_push_jobs.html" title="Chef Push Jobs">
                    Chef Push Jobs
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/release_notes_ohai.html" title="Ohai">
                    Ohai
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_deprecations_client.html" title="Deprecations">
                Deprecations
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Tutorials">
            Tutorials
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/learn-the-basics/" title="Learn the Basics">
                Learn the Basics
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/manage-a-node/" title="Manage a Node">
                Manage a Node
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/local-development/" title="Get started with Test Kitchen">
                Get started with Test Kitchen
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/manage-a-web-app/" title="Develop a web app cookbook">
                Develop a web app cookbook
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/inspec/" title="Verify with InSpec">
                Verify with InSpec
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/chefspec/" title="Unit test with ChefSpec">
                Unit test with ChefSpec
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/verify-style/" title="Verify code style">
                Verify code style
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/refactor-web-app-cookbook/" title="Refactor the web app cookbook">
                Refactor the web app cookbook
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Concepts">
            Concepts
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/workstation.html" title="Workstation">
                Workstation
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_repo.html" title="chef-repo">
                chef-repo
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/nodes.html" title="Nodes">
                Nodes
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_client.html" title="chef-client">
                chef-client
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_components.html" title="Server">
                Server
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_search.html" title="Search">
                Search
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/cookbooks.html" title="Cookbooks">
                Cookbooks
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/handlers.html" title="Handlers">
                Handlers
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/manage.html" title="Management Console">
                Management Console
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Policy">
                Policy
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/policy.html" title="About Policy">
                    About Policy
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/data_bags.html" title="Data Bags">
                    Data Bags
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/environments.html" title="Environments">
                    Environments
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/roles.html" title="Roles">
                    Roles
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/push_jobs.html" title="Push Jobs">
                Push Jobs
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/run_lists.html" title="Run-lists">
                Run-lists
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Security">
                Security
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/auth.html#authentication" title="Authentication">
                    Authentication
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/auth.html#authorization" title="Authorization">
                    Authorization
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/chef_private_keys.html" title="Private Keys">
                    Private Keys
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef_client.html#run-in-fips-mode" title="FIPS-mode">
                    FIPS-mode
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Supermarket">
                Supermarket
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/supermarket.html#public-supermarket" title="Public Supermarket">
                    Public Supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/supermarket.html#private-supermarket" title="Private Supermarket">
                    Private Supermarket
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/windows.html" title="Microsoft Windows">
                Microsoft Windows
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Appendix">
                Appendix
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/environment_variables.html" title="Env Variables">
                    Env Variables
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/errors.html" title="Troubleshooting">
                    Troubleshooting
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/glossary.html" title="Glossary">
                    Glossary
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Setup">
            Setup
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/proxies.html" title="Proxies">
                Proxies
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_dk.html" title="Workstation">
                Workstation
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Nodes">
                Nodes
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/install_bootstrap.html" title="Install via Bootstrap">
                    Install via Bootstrap
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_omnibus.html" title="Install via URL">
                    Install via URL
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_windows.html" title="Install on Windows">
                    Install on Windows
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/junos.html" title="Install on Junos OS">
                    Install on Junos OS
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef_client.html" title="chef-client (executable)">
                    chef-client (executable)
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_client.html" title="client.rb">
                    client.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/upgrade_client.html" title="Upgrades">
                    Upgrades
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/chef_client_security.html" title="Security">
                    Security
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Server">
                Server
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="https://manage.chef.io/signup" title="Hosted Chef Server">
                    Hosted Chef Server
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_server.html#standalone" title="Install Standalone">
                    Install Standalone
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_server_ha.html" title="Install High Availability">
                    Install High Availability
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/aws_marketplace.html" title="AWS Marketplace">
                    AWS Marketplace
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/azure_portal.html" title="Microsoft Azure">
                    Microsoft Azure
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/openstack.html" title="Openstack">
                    Openstack
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Supermarket">
                Supermarket
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="https://supermarket.chef.io" title="Public Supermarket">
                    Public Supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_supermarket.html" title="Install Private Supermarket">
                    Install Private Supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_supermarket.html#customize-supermarket" title="Customize Supermarket">
                    Customize Supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_supermarket.html#run-supermarket-in-kitchen" title="Run in Test Kitchen">
                    Run in Test Kitchen
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_server.html#install" title="Management Console">
                Management Console
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_push_jobs.html" title="Push Jobs">
                Push Jobs
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Integrations">
                Integrations
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/integrate_compliance_chef_server.html" title="w/Chef Compliance">
                    w/Chef Compliance
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/uninstall.html" title="Uninstall">
                Uninstall
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Cookbook Reference">
            Cookbook Reference
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/cookbooks.html" title="About Cookbooks">
                About Cookbooks
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/attributes.html" title="Attributes">
                Attributes
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/definitions.html" title="Definitions">
                Definitions
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/files.html" title="Files">
                Files
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/libraries.html" title="Libraries">
                Libraries
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Recipes">
                Recipes
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/recipes.html" title="About Recipes">
                    About Recipes
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/debug.html" title="Debug Recipes, Client Runs">
                    Debug Recipes, Client Runs
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Recipe DSL">
                Recipe DSL
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#attribute" title="attribute?">
                    attribute?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#control" title="control">
                    control
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#control-group" title="control_group">
                    control_group
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#cookbook-name" title="cookbook_name">
                    cookbook_name
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#data-bag" title="data_bag">
                    data_bag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#data-bag-item" title="data_bag_item">
                    data_bag_item
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#platform" title="platform?">
                    platform?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#platform-family" title="platform_family?">
                    platform_family?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#reboot-pending" title="reboot_pending?">
                    reboot_pending?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#recipe-name" title="recipe_name">
                    recipe_name
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-data-exists" title="registry_data_exists?">
                    registry_data_exists?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-get-subkeys" title="registry_get_subkeys">
                    registry_get_subkeys
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-get-values" title="registry_get_values">
                    registry_get_values
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-has-subkeys" title="registry_has_subkeys?">
                    registry_has_subkeys?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-key-exists" title="registry_key_exists?">
                    registry_key_exists?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-value-exists" title="registry_value_exists?">
                    registry_value_exists?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#resources" title="resources">
                    resources
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#search" title="search">
                    search
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#shell-out" title="shell_out">
                    shell_out
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#shell-out-bang" title="shell_out!">
                    shell_out!
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#shell-out-with-systems-locale" title="shell_out_with_systems_locale">
                    shell_out_with_systems_locale
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#tag-tagged-untag" title="tag">
                    tag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#tag-tagged-untag" title="tagged?">
                    tagged?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#tag-tagged-untag" title="untag">
                    untag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#value-for-platform" title="value_for_platform">
                    value_for_platform
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#value-for-platform-family" title="value_for_platform_family">
                    value_for_platform_family
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#helpers" title="Windows Platform Helpers">
                    Windows Platform Helpers
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Resources">
                Resources
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/resource.html" title="About Resources">
                    About Resources
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_common.html" title="Common Functionality">
                    Common Functionality
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/custom_resources.html" title="Custom Resources">
                    Custom Resources
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resources.html" title="All Resources (Single Page)">
                    All Resources (Single Page)
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_apt_package.html" title="apt_package">
                    apt_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_apt_repository.html" title="apt_repository">
                    apt_repository
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_apt_update.html" title="apt_update">
                    apt_update
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_bash.html" title="bash">
                    bash
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_batch.html" title="batch">
                    batch
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_bff_package.html" title="bff_package">
                    bff_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_breakpoint.html" title="breakpoint">
                    breakpoint
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_cab_package.html" title="cab_package">
                    cab_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_gem.html" title="chef_gem">
                    chef_gem
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_acl.html" title="chef_acl">
                    chef_acl
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_client.html" title="chef_client">
                    chef_client
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_container.html" title="chef_container">
                    chef_container
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_data_bag_item.html" title="chef_data_bag_item">
                    chef_data_bag_item
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_data_bag.html" title="chef_data_bag">
                    chef_data_bag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_environment.html" title="chef_environment">
                    chef_environment
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_group.html" title="chef_group">
                    chef_group
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_handler.html" title="chef_handler">
                    chef_handler
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_mirror.html" title="chef_mirror">
                    chef_mirror
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_node.html" title="chef_node">
                    chef_node
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_organization.html" title="chef_organization">
                    chef_organization
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_role.html" title="chef_role">
                    chef_role
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_user.html" title="chef_user">
                    chef_user
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chocolatey_package.html" title="chocolatey_package">
                    chocolatey_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_cookbook_file.html" title="cookbook_file">
                    cookbook_file
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_cron.html" title="cron">
                    cron
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_csh.html" title="csh">
                    csh
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_deploy.html" title="deploy">
                    deploy
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_directory.html" title="directory">
                    directory
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_dpkg_package.html" title="dpkg_package">
                    dpkg_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_dsc_resource.html" title="dsc_resource">
                    dsc_resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_dsc_script.html" title="dsc_script">
                    dsc_script
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_easy_install_package.html" title="easy_install_package">
                    easy_install_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_env.html" title="env">
                    env
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_erlang_call.html" title="erl_call">
                    erl_call
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_execute.html" title="execute">
                    execute
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_file.html" title="file">
                    file
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_freebsd_package.html" title="freebsd_package">
                    freebsd_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_gem_package.html" title="gem_package">
                    gem_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_git.html" title="git">
                    git
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_group.html" title="group">
                    group
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_homebrew_package.html" title="homebrew_package">
                    homebrew_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_http_request.html" title="http_request">
                    http_request
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ifconfig.html" title="ifconfig">
                    ifconfig
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ips_package.html" title="ips_package">
                    ips_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ksh.html" title="ksh">
                    ksh
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_launchd.html" title="launchd">
                    launchd
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_link.html" title="link">
                    link
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_log.html" title="log">
                    log
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_macports_package.html" title="macports_package">
                    macports_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_mdadm.html" title="mdadm">
                    mdadm
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_mount.html" title="mount">
                    mount
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_msu_package.html" title="msu_package">
                    msu_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ohai.html" title="ohai">
                    ohai
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_openbsd_package.html" title="openbsd_package">
                    openbsd_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_osx_profile.html" title="osx_profile">
                    osx_profile
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_package.html" title="package">
                    package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_pacman_package.html" title="pacman_package">
                    pacman_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_paludis_package.html" title="paludis_package">
                    paludis_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_perl.html" title="perl">
                    perl
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_portage_package.html" title="portage_package">
                    portage_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_powershell_script.html" title="powershell_script">
                    powershell_script
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_private_key.html" title="private_key">
                    private_key
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_public_key.html" title="public_key">
                    public_key
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_python.html" title="python">
                    python
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_reboot.html" title="reboot">
                    reboot
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_registry_key.html" title="registry_key">
                    registry_key
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_remote_directory.html" title="remote_directory">
                    remote_directory
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_remote_file.html" title="remote_file">
                    remote_file
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_route.html" title="route">
                    route
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_rpm_package.html" title="rpm_package">
                    rpm_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ruby.html" title="ruby">
                    ruby
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ruby_block.html" title="ruby_block">
                    ruby_block
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_script.html" title="script">
                    script
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_service.html" title="service">
                    service
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_smartos_package.html" title="smartos_package">
                    smartos_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_solaris_package.html" title="solaris_package">
                    solaris_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_subversion.html" title="subversion">
                    subversion
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_systemd_unit.html" title="systemd_unit">
                    systemd_unit
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_template.html" title="template">
                    template
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_user.html" title="user">
                    user
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_windows_package.html" title="windows_package">
                    windows_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_windows_service.html" title="windows_service">
                    windows_service
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_yum.html" title="yum_package">
                    yum_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_yum_repository.html" title="yum_repository">
                    yum_repository
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_examples.html" title="Examples (by Resource)">
                    Examples (by Resource)
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/templates.html" title="Templates">
                Templates
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/cookbook_repo.html" title="Cookbook Repo">
                Cookbook Repo
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_metadata.html" title="metadata.rb">
                metadata.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/cookbook_versions.html" title="Cookbook Versions">
                Cookbook Versions
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ruby.html" title="Ruby">
                Ruby
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Chef DK">
            Chef DK
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/about_chefdk.html" title="About the ChefDK">
                About the ChefDK
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/berkshelf.html" title="Berkshelf">
                Berkshelf
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_apply.html" title="chef-apply (executable)">
                chef-apply (executable)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_shell.html" title="chef-shell (executable)">
                chef-shell (executable)
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="chef (executable)">
                chef (executable)
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-env" title="chef env">
                    chef env
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-exec" title="chef exec">
                    chef exec
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-gem" title="chef gem">
                    chef gem
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-app" title="chef generate app">
                    chef generate app
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-attribute" title="chef generate attribute">
                    chef generate attribute
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-cookbook" title="chef generate cookbook">
                    chef generate cookbook
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-file" title="chef generate file">
                    chef generate file
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-lwrp" title="chef generate lwrp">
                    chef generate lwrp
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-recipe" title="chef generate recipe">
                    chef generate recipe
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-repo" title="chef generate repo">
                    chef generate repo
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-template" title="chef generate template">
                    chef generate template
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-provision" title="chef provision">
                    chef provision
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-shell-init" title="chef shell-init">
                    chef shell-init
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-verify" title="chef verify">
                    chef verify
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Chef Solo">
                Chef Solo
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/chef_solo.html" title="About Chef Solo">
                    About Chef Solo
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef_solo.html" title="chef-solo (executable)">
                    chef-solo (executable)
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_solo.html" title="solo.rb">
                    solo.rb
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_shell.html" title="chef-shell (executable)">
                chef-shell (executable)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_client.html#run-in-local-mode" title="chef-zero (local mode)">
                chef-zero (local mode)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_vault.html" title="chef-vault">
                chef-vault
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chefspec.html" title="ChefSpec">
                ChefSpec
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Configuration">
                Configuration
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/config_rb.html" title="config.rb">
                    config.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_client.html#d-directories" title="Multiple Config Files">
                    Multiple Config Files
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/cookstyle.html" title="cookstyle">
                cookstyle
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_delivery.html" title="Delivery CLI">
                Delivery CLI
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/foodcritic.html" title="Foodcritic">
                Foodcritic
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Test Kitchen">
                Test Kitchen
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/kitchen.html" title="About Test Kitchen">
                    About Test Kitchen
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_kitchen.html" title="kitchen (executable)">
                    kitchen (executable)
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_yml_kitchen.html" title=".kitchen.yml">
                    .kitchen.yml
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_kitchen_vagrant.html" title="kitchen-vagrant">
                    kitchen-vagrant
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Knife">
                Knife
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/knife.html" title="About Knife">
                    About Knife
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_common_options.html" title="Common Options">
                    Common Options
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_using.html" title="Using Knife">
                    Using Knife
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_knife.html" title="knife.rb">
                    knife.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_bootstrap.html" title="knife bootstrap">
                    knife bootstrap
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_client.html" title="knife client">
                    knife client
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_configure.html" title="knife configure">
                    knife configure
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_cookbook.html" title="knife cookbook">
                    knife cookbook
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_cookbook_site.html" title="knife cookbook site">
                    knife cookbook site
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_data_bag.html" title="knife data bag">
                    knife data bag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_delete.html" title="knife delete">
                    knife delete
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_deps.html" title="knife deps">
                    knife deps
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_diff.html" title="knife diff">
                    knife diff
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_download.html" title="knife download">
                    knife download
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_edit.html" title="knife edit">
                    knife edit
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_environment.html" title="knife environment">
                    knife environment
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_exec.html" title="knife exec">
                    knife exec
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_list.html" title="knife list">
                    knife list
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_node.html" title="knife node">
                    knife node
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_raw.html" title="knife raw">
                    knife raw
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_recipe_list.html" title="knife recipe list">
                    knife recipe list
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_role.html" title="knife role">
                    knife role
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_search.html" title="knife search">
                    knife search
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_serve.html" title="knife serve">
                    knife serve
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_show.html" title="knife show">
                    knife show
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_ssh.html" title="knife ssh">
                    knife ssh
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_ssl_check.html" title="knife ssl_check">
                    knife ssl_check
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_ssl_fetch.html" title="knife ssl_fetch">
                    knife ssl_fetch
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_status.html" title="knife status">
                    knife status
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_tag.html" title="knife tag">
                    knife tag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_upload.html" title="knife upload">
                    knife upload
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_user.html" title="knife user">
                    knife user
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_xargs.html" title="knife xargs">
                    knife xargs
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="knife opc">
                knife opc
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html" title="About knife opc">
                    About knife opc
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#knife-rb-configuration" title="knife.rb Configuration">
                    knife.rb Configuration
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-list" title="opc user list">
                    opc user list
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-show" title="opc user show">
                    opc user show
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-create" title="opc user create">
                    opc user create
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-delete" title="opc user delete">
                    opc user delete
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-edit" title="opc user edit">
                    opc user edit
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-password" title="opc user password">
                    opc user password
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-list" title="opc org list">
                    opc org list
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-show" title="opc org show">
                    opc org show
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-create" title="opc org create">
                    opc org create
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-delete" title="opc org delete">
                    opc org delete
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-user-add" title="opc org user add">
                    opc org user add
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-user-remove" title="opc org user remove">
                    opc org user remove
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_knife_spork.html" title="knife spork">
                knife spork
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="knife supermarket">
                knife supermarket
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html" title="About knife supermarket">
                    About knife supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#download" title="supermarket download">
                    supermarket download
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#install" title="supermarket install">
                    supermarket install
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#list" title="supermarket list">
                    supermarket list
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#search" title="supermarket search">
                    supermarket search
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#share" title="supermarket share">
                    supermarket share
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#show" title="supermarket show">
                    supermarket show
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#unshare" title="supermarket unshare">
                    supermarket unshare
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Ohai">
                Ohai
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/ohai.html" title="About Ohai">
                    About Ohai
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_ohai.html" title="ohai (executable)">
                    ohai (executable)
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Policyfile">
                Policyfile
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/policyfile.html" title="About Policyfile">
                    About Policyfile
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_policyfile.html" title="Policyfile.rb">
                    Policyfile.rb
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Provisioning">
                Provisioning
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/provisioning.html" title="About Provisioning">
                    About Provisioning
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_load_balancer.html" title="load_balancer resource">
                    load_balancer resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_machine.html" title="machine resource">
                    machine resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_machine_batch.html" title="machine_batch resource">
                    machine_batch resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_machine_execute.html" title="machine_execute resource">
                    machine_execute resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_machine_file.html" title="machine_file resource">
                    machine_file resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_machine_image.html" title="machine_image resource">
                    machine_image resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/provisioning_aws.html" title="AWS Driver Resources">
                    AWS Driver Resources
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/provisioning_fog.html" title="Fog Driver Resources">
                    Fog Driver Resources
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/provisioning_vagrant.html" title="Vagrant Driver Resources">
                    Vagrant Driver Resources
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_push_jobs_client.html" title="push-jobs-client (executable)">
                push-jobs-client (executable)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/rubocop.html" title="Rubocop">
                Rubocop
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Managing the Server">
            Managing the Server
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/runbook.html" title="Runbook (Single Page)">
                Runbook (Single Page)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_backup_restore.html" title="Backup &amp; Restore">
                Backup &amp; Restore
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_data.html" title="Data Storage">
                Data Storage
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_firewalls_and_ports.html" title="Firewalls &amp; Ports">
                Firewalls &amp; Ports
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_ldap.html" title="Active Directory &amp; LDAP">
                Active Directory &amp; LDAP
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_logs.html" title="Log Files">
                Log Files
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_monitor.html" title="Monitor">
                Monitor
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_orgs.html" title="Organizations &amp; Groups">
                Organizations &amp; Groups
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/secrets.html" title="Secrets">
                Secrets
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_security.html" title="Security">
                Security
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_services.html" title="Services">
                Services
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_tuning.html" title="Tuning">
                Tuning
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/upgrade_server.html" title="Upgrades">
                Upgrades
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/upgrade_server_ha_v2.html" title="Upgrade HA Cluster">
                Upgrade HA Cluster
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_users.html" title="Users">
                Users
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_server.html" title="chef-server-ctl">
                chef-server-ctl
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_backend.html" title="chef-backend-ctl">
                chef-backend-ctl
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_server.html" title="chef-server.rb">
                chef-server.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_opscode_expander.html" title="opscode-expander-ctl">
                opscode-expander-ctl
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_chef_server.html" title="Chef Server API">
                Chef Server API
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Push Jobs">
                Push Jobs
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_push_jobs.html" title="knife push jobs">
                    knife push jobs
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_push_jobs_client.html" title="push-jobs-client">
                    push-jobs-client
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_push_jobs_client.html" title="push-jobs-client.rb">
                    push-jobs-client.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_push_jobs_server.html" title="push-jobs-server.rb">
                    push-jobs-server.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/api_push_jobs.html" title="Push Jobs API">
                    Push Jobs API
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_sent_events.html" title="Server Sent Events">
                    Server Sent Events
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Supermarket">
                Supermarket
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/supermarket_logs.html" title="Log Files">
                    Log Files
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/supermarket_monitor.html" title="Monitoring">
                    Monitoring
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_supermarket.html" title="supermarket.rb">
                    supermarket.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html" title="knife supermarket">
                    knife supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_supermarket.html" title="supermarket-ctl">
                    supermarket-ctl
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/supermarket_api.html" title="Supermarket API">
                    Supermarket API
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Management Console">
                Management Console
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/server_configure_saml.html" title="Configure SAML">
                    Configure SAML
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_clients.html" title="Clients">
                    Clients
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_cookbooks.html" title="Cookbooks">
                    Cookbooks
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_data_bags.html" title="Data Bags">
                    Data Bags
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_environments.html" title="Environments">
                    Environments
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_nodes.html" title="Nodes">
                    Nodes
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_roles.html" title="Roles">
                    Roles
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_users.html#chef-manage" title="Users">
                    Users
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_manage.html" title="manage.rb">
                    manage.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_manage.html" title="chef-manage-ctl">
                    chef-manage-ctl
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Habitat"> <!-- if item has custom image -->

        <img class="icon-left" src="./_static/habitat-mark.png"></img> Habitat <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items"> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/habitat.html" title="Habitat Overview">
            Habitat Overview
          </a>
        </li>

         <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Tutorials">
            Tutorials
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://www.habitat.sh/tutorials/getting-started-overview" title="Getting started">
                Getting started
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="InSpec"> <!-- if item has custom image -->

        <img class="icon-left" src="./_static/inspec_logo.png"></img> InSpec <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items"> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/inspec.html" title="InSpec Overview">
            InSpec Overview
          </a>
        </li>

         <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Chef Automate"> <!-- else item does not have custom image and should use FontAwesome icon -->

        <i class="fa fa-cogs icon-left"></i> Chef Automate <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items">

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Getting Started">
            Getting Started
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_automate.html" title="Chef Automate Overview">
                Chef Automate Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_chef_automate.html" title="Installation Guide">
                Installation Guide
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Tutorials">
            Tutorials
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/automate/install" title="Get Started">
                Get Started
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/automate/visibility" title="Visibility into Infrastructure">
                Visibility into Infrastructure
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/automate/deploy-cookbook/" title="Deploy with Chef Automate">
                Deploy with Chef Automate
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/compliance-assess" title="Assess for Compliance">
                Assess for Compliance
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/compliance-remediate" title="Remediate Compliance Failures">
                Remediate Compliance Failures
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Setup">
            Setup
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_pipeline.html" title="Configure a Pipeline">
                Configure a Pipeline
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_json_delivery.html" title="Configure a Project">
                Configure a Project
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/setup_visibility_chef_automate.html" title="Configure Data Collection">
                Configure Data Collection
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Concepts">
            Concepts
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2">

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Workflow">
                Workflow
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/workflow.html" title="Workflow Overview">
                    Workflow Overview
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/delivery_manage_dependencies.html" title="Manage Dependencies">
                    Manage Dependencies
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/visibility.html" title="Visibility Overview">
                Visibility Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/compliance.html" title="Compliance Overview">
                Compliance Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/ctl_delivery.html" title="Delivery CLI">
            Delivery CLI
          </a>
        </li>

         <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Integrations">
            Integrations
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_delivery_bitbucket.html" title="w/Bitbucket">
                w/Bitbucket
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_delivery_smtp.html" title="w/Email (SMTP)">
                w/Email (SMTP)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_delivery_github.html" title="w/GitHub">
                w/GitHub
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_delivery_ldap.html" title="w/LDAP">
                w/LDAP
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_chef_automate_saml.html" title="w/SAML">
                w/SAML
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_delivery_slack.html" title="w/Slack">
                w/Slack
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Cookbooks">
            Cookbooks
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_build_cookbook.html" title="build-cookbook (cookbook)">
                build-cookbook (cookbook)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_truck.html" title="delivery-truck (cookbook)">
                delivery-truck (cookbook)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/publish_cookbooks_multiple_servers.html" title="Publish to Multiple Chef Servers">
                Publish to Multiple Chef Servers
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/dsl_delivery.html" title="Workflow DSL">
            Workflow DSL
          </a>
        </li>

         <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/job_dispatch.html" title="Job Dispatch">
            Job Dispatch
          </a>
        </li>

         <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Managing the Server">
            Managing the Server
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2">

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Backups">
                Backups
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/delivery_server_backup.html#configuration" title="Configuration">
                    Configuration
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/delivery_server_backup.html#create-backups" title="Create Backups">
                    Create Backups
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/delivery_server_backup.html#list-backups" title="List Backups">
                    List Backups
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/delivery_server_backup.html#delete-backups" title="Delete Backups">
                    Delete Backups
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/delivery_server_backup.html#restore-backups" title="Restore Backups">
                    Restore Backups
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/scaling_capacity_planning_chef_automate.html" title="Capacity Planning">
                Capacity Planning
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_delivery.html" title="Chef Automate API">
                Chef Automate API
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="automate-ctl">
                automate-ctl
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#cleanse" title="cleanse">
                    cleanse
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#create-enterprise" title="create-enterprise">
                    create-enterprise
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#create-user" title="create-user">
                    create-user
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-application" title="delete-application">
                    delete-application
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-enterprise" title="delete-enterprise">
                    delete-enterprise
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-project" title="delete-project">
                    delete-project
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-user" title="delete-user">
                    delete-user
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-visibility-node" title="delete-visibility-node">
                    delete-visibility-node
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-visibility-node-by-id" title="delete-visibility-node-by-id">
                    delete-visibility-node-by-id
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#gather-logs" title="gather-logs">
                    gather-logs
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#help" title="help">
                    help
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#install-runner" title="install-runner">
                    install-runner
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#list-applications" title="list-applications">
                    list-applications
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#list-enterprises" title="list-enterprises">
                    list-enterprises
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#list-users" title="list-users">
                    list-users
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#migrate-change-description" title="migrate-change-description">
                    migrate-change-description
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#migrate-patchset-diffs" title="migrate-patchset-diffs">
                    migrate-patchset-diffs
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#preflight-check" title="preflight-check">
                    preflight-check
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#reconfigure" title="reconfigure">
                    reconfigure
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#rename-enterprise" title="rename-enterprise">
                    rename-enterprise
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#reset-password" title="reset-password">
                    reset-password
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#restore-backup" title="restore-backup">
                    restore-backup
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#revoke-token" title="revoke-token">
                    revoke-token
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#show-config" title="show-config">
                    show-config
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#uninstall" title="uninstall">
                    uninstall
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#update-project-hooks" title="update-project-hooks">
                    update-project-hooks
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_delivery.html" title="delivery.rb">
                delivery.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_server_disaster_recovery.html" title="Disaster Recovery">
                Disaster Recovery
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/elasticsearch_and_kibana_auth.html" title="Elasticsearch &amp; Kibana Auth">
                Elasticsearch &amp; Kibana Auth
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/manage_indices_chef_automate.html" title="Manage Elasticsearch Indices">
                Manage Elasticsearch Indices
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/search_query_chef_automate.html" title="Node Search Reference">
                Node Search Reference
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_manage_secrets.html" title="Secrets">
                Secrets
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/stream_data_chef_automate.html" title="Stream Data">
                Stream Data
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_server_tuning.html" title="Tuning">
                Tuning
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/upgrade_chef_automate.html" title="Upgrades">
                Upgrades
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_users_and_roles.html" title="Users &amp; Roles">
                Users &amp; Roles
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Compliance scanner">
            Compliance scanner
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/compliance.html" title="Overview">
                Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/release_notes_compliance.html" title="Release Notes">
                Release Notes
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_compliance.html" title="Installation Guide">
                Installation Guide
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_compliance_chef_server.html" title="Integrate w/Chef Server">
                Integrate w/Chef Server
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_compliance_chef_automate.html" title="Integrate w/Chef Automate">
                Integrate w/Chef Automate
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/upgrade_compliance.html" title="Upgrade Compliance">
                Upgrade Compliance
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_compliance.html" title="chef-compliance.rb">
                chef-compliance.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_compliance.html" title="Chef Compliance API">
                Chef Compliance API
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/aws_opsworks_chef_automate.html" title="AWS OpsWorks for Chef Automate">
            AWS OpsWorks for Chef Automate
          </a>
        </li>

         <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/troubleshooting_chef_automate.html" title="Troubleshooting">
            Troubleshooting
          </a>
        </li>

         <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Legacy"> <!-- else item does not have custom image and should use FontAwesome icon -->

        <i class="fa fa-hdd-o icon-left"></i> Legacy <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items">

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Analytics">
            Analytics
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics.html" title="Overview">
                Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/release_notes_analytics.html" title="Release Notes">
                Release Notes
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_analytics.html" title="Install Standalone">
                Install Standalone
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/actions.html" title="Web UI">
                Web UI
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics_webui_tasks.html" title="Management Console">
                Management Console
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics_nodes_view.html" title="Nodes View">
                Nodes View
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics.html#integrations" title="Integrations">
                Integrations
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics_splunk.html" title="Splunk">
                Splunk
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics_rules.html" title="Rules">
                Rules
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics_monitor.html" title="Monitor">
                Monitor
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/upgrade_analytics.html" title="Upgrades">
                Upgrades
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_client_analytics.html" title="Chef Client for Analytics">
                Chef Client for Analytics
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_analytics.html" title="opscode-analytics-ctl">
                opscode-analytics-ctl
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_analytics.html" title="opscode-analytics.rb">
                opscode-analytics.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_knife_analytics.html" title="knife-analytics">
                knife-analytics
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_analytics.html" title="Analytics API">
                Analytics API
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/dsl_recipe_analytics.html" title="Recipe DSL for Analytics">
                Recipe DSL for Analytics
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Reporting">
            Reporting
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/reporting.html" title="Overview">
                Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_reporting.html" title="Install Reporting">
                Install Reporting
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_manage_reports.html" title="View Reports">
                View Reports
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_knife_reporting.html" title="knife reporting">
                knife reporting
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_reporting.html" title="opscode-reporting-ctl">
                opscode-reporting-ctl
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_reporting.html" title="opscode-reporting.rb">
                opscode-reporting.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_reporting.html" title="Reporting API">
                Reporting API
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Extension APIs"> <!-- else item does not have custom image and should use FontAwesome icon -->

        <i class="fa fa-clone icon-left"></i> Extension APIs <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items"> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/dsl_compliance.html" title="Compliance DSL">
            Compliance DSL
          </a>
        </li>

         <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Handlers">
            Handlers
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/handlers.html#custom-handlers" title="Custom Handlers">
                Custom Handlers
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/dsl_handler.html" title="Handler DSL">
                Handler DSL
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_community.html#handlers" title="Community Handlers">
                Community Handlers
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Knife Plugins">
            Knife Plugins
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_knife.html" title="About Cloud Plugins">
                About Cloud Plugins
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_knife_custom.html" title="Custom Plugins">
                Custom Plugins
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_community.html#knife" title="Community Plugins">
                Community Plugins
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Ohai Plugins">
            Ohai Plugins
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ohai_custom.html" title="Custom Plugins">
                Custom Plugins
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_community.html#ohai" title="Community Plugins">
                Community Plugins
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/plugin_community.html#chef-client" title="Chef Client Plugins">
            Chef Client Plugins
          </a>
        </li>

         <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li> <!-- /for item in navItems -->
    
    <li class="main-item dark-item">
      <a href="https://github.com/chef/chef-web-docs" title="Available on GitHub">
        <i class="fa fa-github icon-left"></i>
        Available on GitHub
      </a>
    </li>
    <li class="main-item dark-item">
      <a href="https://www.chef.io/chef/get-chef">
        <i class="fa fa-download icon-left"></i>
        Get Chef
      </a>
    </li>
    <li class="main-item dark-item">
      <a href="https://docs.chef.io/feedback.html">
        <i class="fa fa-commenting icon-left"></i>
        Send Feedback
      </a>
    </li>
    <li class="main-item dark-item">
      <a href="https://www.chef.io/support/">
        <i class="fa fa-support icon-left"></i>
        Support
      </a>
    </li>
    <li class="main-item dark-item">
      <a href="https://docs.chef.io/index.html">
        <i class="fa fa-map-o icon-left"></i>
        Site Map
      </a>
    </li>
    <li class="main-item dark-item">
      <a href="https://docs-archive.chef.io/">
        <i class="fa fa-archive icon-left"></i>
        Archive
      </a>
    </li>
  </ul>
</nav>
      <div class="documentwrapper"><div class="sphinxsidebar" role="navigation" aria-label="main navigation">
  <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Release Notes: Chef Analytics</a><ul>
<li><a class="reference internal" href="#what-s-new-1-4">What&#8217;s New (1.4)</a></li>
<li><a class="reference internal" href="#what-s-new-1-3">What&#8217;s New (1.3)</a><ul>
<li><a class="reference internal" href="#database-partitioning-and-management">Database Partitioning and Management</a></li>
<li><a class="reference internal" href="#important-notes-before-you-upgrade">Important Notes Before You Upgrade</a></li>
</ul>
</li>
<li><a class="reference internal" href="#what-s-new-1-2">What&#8217;s New (1.2)</a><ul>
<li><a class="reference internal" href="#nodes-view">Nodes View</a></li>
<li><a class="reference internal" href="#rabbitmq-queues">RabbitMQ Queues</a></li>
<li><a class="reference internal" href="#purge-node-information">Purge Node Information</a></li>
</ul>
</li>
<li><a class="reference internal" href="#what-s-new-1-1-5">What&#8217;s New (1.1.5)</a><ul>
<li><a class="reference internal" href="#slack-incoming-webhooks">Slack Incoming Webhooks</a></li>
<li><a class="reference internal" href="#chef-app-for-splunk">Chef App for Splunk</a></li>
<li><a class="reference internal" href="#rules">Rules</a><ul>
<li><a class="reference internal" href="#rule-syntax">Rule Syntax</a></li>
<li><a class="reference internal" href="#message-types">Message Types</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#chef-actions">Chef Actions</a><ul>
<li><a class="reference internal" href="#architecture">Architecture</a></li>
<li><a class="reference internal" href="#user-interface">User Interface</a></li>
</ul>
</li>
<li><a class="reference internal" href="#new-settings-for-data-retention">New settings for data retention</a></li>
<li><a class="reference internal" href="#chef-client-audit-mode">chef-client, audit-mode</a><ul>
<li><a class="reference internal" href="#the-audit-run">The Audit Run</a></li>
</ul>
</li>
<li><a class="reference internal" href="#control">control</a><ul>
<li><a class="reference internal" href="#directory-matcher">directory Matcher</a></li>
<li><a class="reference internal" href="#file-matcher">file Matcher</a></li>
<li><a class="reference internal" href="#package-matcher">package Matcher</a></li>
<li><a class="reference internal" href="#port-matcher">port Matcher</a></li>
<li><a class="reference internal" href="#service-matcher">service Matcher</a></li>
<li><a class="reference internal" href="#id1">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#control-group">control_group</a><ul>
<li><a class="reference internal" href="#id2">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#oc-id-service"><strong>oc-id</strong> Service</a></li>
<li><a class="reference internal" href="#knife-analytics">knife analytics</a><ul>
<li><a class="reference internal" href="#action-list">action list</a></li>
<li><a class="reference internal" href="#action-show">action show</a></li>
<li><a class="reference internal" href="#alert-list">alert list</a></li>
<li><a class="reference internal" href="#alert-show">alert show</a></li>
<li><a class="reference internal" href="#notification-list">notification list</a></li>
<li><a class="reference internal" href="#notification-show">notification show</a></li>
<li><a class="reference internal" href="#rule-list">rule list</a></li>
<li><a class="reference internal" href="#rule-show">rule show</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
</div>
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="release-notes-chef-analytics">
<h1>Release Notes: Chef Analytics<a class="headerlink" href="#release-notes-chef-analytics" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://github.com/chef/chef-web-docs/blob/master/chef_master/source/release_notes_analytics.rst">[edit on GitHub]</a></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This topic is meant to support existing customers using Analytics. The visibility capabilities of Chef Automate replace the features and functionality of Chef Analytics and we encourage customers to adopt Chef Automate going forward.</p>
</div>
<p>The Chef Analytics platform is a feature of Chef that provides real-time visibility into what is happening on the Chef server, including what&#8217;s changing, who made those changes, and when they occurred. Individuals may be notified of these changes in real-time. Use this visibility to verify compliance against internal controls.</p>
<div class="section" id="what-s-new-1-4">
<h2>What&#8217;s New (1.4)<a class="headerlink" href="#what-s-new-1-4" title="Permalink to this headline">¶</a></h2>
<p>The following items are new for Chef Analytics 1.4 and/or are changes from previous versions:</p>
<ul class="simple">
<li><strong>Chef MLSA</strong> Starting with Chef Analytics 1.4.0, the Chef MLSA must be accepted when reconfiguring the product. If the Chef MLSA has not already been accepted, the reconfigure process will prompt for a <tt class="docutils literal"><span class="pre">yes</span></tt> to accept it. Or run <tt class="docutils literal"><span class="pre">opscode-analytics-ctl</span> <span class="pre">reconfigure</span> <span class="pre">--accept-license</span></tt> to automatically accept the license.</li>
</ul>
</div>
<div class="section" id="what-s-new-1-3">
<h2>What&#8217;s New (1.3)<a class="headerlink" href="#what-s-new-1-3" title="Permalink to this headline">¶</a></h2>
<p>The following items are new for Chef Analytics 1.3 and/or are changes from previous versions. The short version:</p>
<ul class="simple">
<li><strong>Bug Fix</strong> Ability to scroll through the dropdown of organizations when they are longer than the page.</li>
<li><strong>Database Partitioning and Management</strong> Databse partitioning was added for easier management. This has consequences for upgrading so read below.</li>
</ul>
<div class="section" id="database-partitioning-and-management">
<h3>Database Partitioning and Management<a class="headerlink" href="#database-partitioning-and-management" title="Permalink to this headline">¶</a></h3>
<p>We&#8217;ve made it easier to manage your data by utilizing <tt class="docutils literal"><span class="pre">pg_partman</span></tt> supported partitioning in the database. It is enabled by default as of 1.3.0.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There are additional upgrade steps and concerns for the 1.3.0 upgrade. Please see the notes below for a short summary and be sure to follow the <a class="reference internal" href="upgrade_analytics.html"><em>1.3.0 upgrade instructions</em></a> when upgrading.</p>
</div>
<p>The largest table, activities, will allow partitions. The benefit of using partitions is that when old data is dropped the disk space is easily reclaimed.</p>
<p>By default, partitions will be enabled and the data retention timeline for activities is set to a year. These values are configurable via <a class="reference internal" href="config_rb_analytics.html"><em>opscode-analytics.rb</em></a>.</p>
</div>
<div class="section" id="important-notes-before-you-upgrade">
<h3>Important Notes Before You Upgrade<a class="headerlink" href="#important-notes-before-you-upgrade" title="Permalink to this headline">¶</a></h3>
<p>It is recommended that you use paritions but if you do not wish to do so, you must disable them before running reconfigure during your upgrade process (otherwise you cannot revert paritions without data loss). To disable paritions, add the following to your opscode-analytics.rb:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">features</span><span class="o">[</span><span class="s1">&#39;partitioning&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="kp">false</span>
</pre></div>
</div>
<p>Additionally, you will lose the ability to purge node data post upgrade. Node data is no longer being saved as of 1.2.0, but there might be older data in need of downsizing.</p>
<p>If you have disk space concerns, please run this command before reconfiguring to 1.3.0:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ opscode-analytics-ctl purge-nodes
</pre></div>
</div>
<p>Be sure to follow the <a class="reference internal" href="upgrade_analytics.html"><em>1.3.0 upgrade instructions</em></a> when upgrading.</p>
</div>
</div>
<div class="section" id="what-s-new-1-2">
<h2>What&#8217;s New (1.2)<a class="headerlink" href="#what-s-new-1-2" title="Permalink to this headline">¶</a></h2>
<p>The following items are new for Chef Analytics 1.2 and/or are changes from previous versions. The short version:</p>
<ul class="simple">
<li><strong>Nodes view</strong> The new <strong>Nodes</strong> view allows you to filter nodes by status: all nodes, nodes that failed to converge, nodes that are missing, and nodes that converged successfully.</li>
<li><strong>RabbitMQ queue tuning</strong> New settings in the Chef server version 12.3 configuration file that support the management of RabbitMQ queues to allow the size and behavior of the queue needed by Chef Analytics to be configured, including settings for the queue length monitor and for tuning the rabbitmq-management plugin.</li>
<li><strong>Purge node information</strong> Chef Analytics stores Ohai data for every chef-client run. Use the <tt class="docutils literal"><span class="pre">purge-nodes</span></tt> command in <tt class="docutils literal"><span class="pre">opscode-analytics-ctl</span></tt> to manage this volume of data.</li>
</ul>
<div class="section" id="nodes-view">
<h3>Nodes View<a class="headerlink" href="#nodes-view" title="Permalink to this headline">¶</a></h3>
<p>The <strong>Nodes</strong> view allows filtering of nodes by status:</p>
<ul class="simple">
<li>All nodes</li>
<li>Nodes that failed to converge</li>
<li>Nodes that are missing</li>
<li>Nodes that converged successfully</li>
</ul>
<a class="reference internal image-reference" href="_images/analytics_nodes_view.png"><img alt="_images/analytics_nodes_view.png" class="align-center" src="_images/analytics_nodes_view.png" style="width: 600px;" /></a>
</div>
<div class="section" id="rabbitmq-queues">
<h3>RabbitMQ Queues<a class="headerlink" href="#rabbitmq-queues" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Tuning the RabbitMQ queue settings requires Chef server, version 12.3. These settings must be configured in the chef-server.rb file.</p>
</div>
<p>If the RabbitMQ queue that is used by Chef Analytics stops consuming messages, the Chef server data partition will fill up and may affect the overall performance of the Chef server application itself. The settings for the RabbitMQ queue are tunable, including for queue length monitoring, queue capacity, maximum number of messages that can be in the queue before messages are dropped, the point at which messages are dropped, for settings used by the rabbitmq-management plugin, and so on.</p>
<p>The following settings may be used for tuning RabbitMQ queues used by Chef Analytics and the Chef server:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">rabbitmq['analytics_max_length']</span></tt></dt>
<dd>The maximum number of messages that can be queued before RabbitMQ automatically drops messages from the front of the queue to make room for new messages. Default value: <tt class="docutils literal"><span class="pre">10000</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">rabbitmq['drop_on_full_capacity']</span></tt></dt>
<dd>Specify if messages will stop being sent to the RabbitMQ queue when it is at capacity. Default value: <tt class="docutils literal"><span class="pre">true</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">rabbitmq['management_enabled']</span></tt></dt>
<dd>Specify if the rabbitmq-management plugin is enabled. Default value: <tt class="docutils literal"><span class="pre">true</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">rabbitmq['management_password']</span></tt></dt>
<dd>The rabbitmq-management plugin password. Default value: <tt class="docutils literal"><span class="pre">'chefrocks'</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">rabbitmq['management_port']</span></tt></dt>
<dd>The rabbitmq-management plugin port. Default value: <tt class="docutils literal"><span class="pre">15672</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">rabbitmq['management_user']</span></tt></dt>
<dd>The rabbitmq-management plugin user. Default value: <tt class="docutils literal"><span class="pre">'rabbitmgmt'</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">rabbitmq['prevent_erchef_startup_on_full_capacity']</span></tt></dt>
<dd>Specify if the Chef server will start when the monitored RabbitMQ queue is full. Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">rabbitmq['queue_at_capacity_affects_overall_status']</span></tt></dt>
<dd>Specify if the <tt class="docutils literal"><span class="pre">_status</span></tt> endpoint in the Chef server API will fail if the monitored queue is at capacity. Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">rabbitmq['queue_length_monitor_enabled']</span></tt></dt>
<dd>Specify if the queue length monitor is enabled. Default value: <tt class="docutils literal"><span class="pre">true</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">rabbitmq['queue_length_monitor_millis']</span></tt></dt>
<dd>The frequency (in milliseconds) at which the length of the RabbitMQ queue is checked. Default value: <tt class="docutils literal"><span class="pre">30000</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">rabbitmq['queue_length_monitor_timeout_millis']</span></tt></dt>
<dd>The timeout (in milliseconds) at which calls to the queue length monitor will stop if the Chef server is overloaded. Default value: <tt class="docutils literal"><span class="pre">5000</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">rabbitmq['queue_length_monitor_queue']</span></tt></dt>
<dd>The RabbitMQ queue that is observed by queue length monitor. Default value: <tt class="docutils literal"><span class="pre">'alaska'</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">rabbitmq['queue_length_monitor_vhost']</span></tt></dt>
<dd>The virtual host for the RabbitMQ queue that is observed by queue length monitor. Default value: <tt class="docutils literal"><span class="pre">'/analytics'</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">rabbitmq['rabbit_mgmt_http_cull_interval']</span></tt></dt>
<dd>The maximum cull interval (in seconds) for the HTTP connection pool that is used by the rabbitmq-management plugin. Default value: <tt class="docutils literal"><span class="pre">60</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">rabbitmq['rabbit_mgmt_http_init_count']</span></tt></dt>
<dd>The initial worker count for the HTTP connection pool that is used by the rabbitmq-management plugin. Default value: <tt class="docutils literal"><span class="pre">25</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">rabbitmq['rabbit_mgmt_http_max_age']</span></tt></dt>
<dd>The maximum connection worker age (in seconds) for the HTTP connection pool that is used by the rabbitmq-management plugin. Default value: <tt class="docutils literal"><span class="pre">70</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">rabbitmq['rabbit_mgmt_http_max_connection_duration']</span></tt></dt>
<dd>The maximum connection duration (in seconds) for the HTTP connection pool that is used by the rabbitmq-management plugin. Default value: <tt class="docutils literal"><span class="pre">70</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">rabbitmq['rabbit_mgmt_http_max_count']</span></tt></dt>
<dd>The maximum worker count for the HTTP connection pool that is used by the rabbitmq-management plugin. Default value: <tt class="docutils literal"><span class="pre">100</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">rabbitmq['rabbit_mgmt_ibrowse_options']</span></tt></dt>
<dd>An array of comma-separated key-value pairs of ibrowse options for the HTTP connection pool that is used by the rabbitmq-management plugin. Default value: <tt class="docutils literal"><span class="pre">'{connect_timeout,</span> <span class="pre">10000}'</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">rabbitmq['rabbit_mgmt_timeout']</span></tt></dt>
<dd>The timeout for the HTTP connection pool that is used by the rabbitmq-management plugin. Default value: <tt class="docutils literal"><span class="pre">30000</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">rabbitmq['ssl_versions']</span></tt></dt>
<dd>The SSL versions used by the rabbitmq-management plugin. (See also <a class="reference external" href="https://www.rabbitmq.com/ssl.html">https://www.rabbitmq.com/ssl.html</a>.) Default value: <tt class="docutils literal"><span class="pre">['tlsv1.2',</span> <span class="pre">'tlsv1.1']</span></tt>.</dd>
</dl>
</div>
<div class="section" id="purge-node-information">
<h3>Purge Node Information<a class="headerlink" href="#purge-node-information" title="Permalink to this headline">¶</a></h3>
<p>Chef Analytics stores Ohai data for every chef-client run. This data often takes up a considerable amount of disk space in PostgreSQL, which may lead to capacity and performance issues. A <tt class="docutils literal"><span class="pre">purge-nodes</span></tt> command has been added to <tt class="docutils literal"><span class="pre">opscode-analytics-ctl</span></tt>, which destructively removes node data from PostgreSQL.</p>
<p>To purge the Chef Analytics database of node information, run the following commands:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ opscode-analytics-ctl stop
$ opscode-analytics-ctl start postgresql
$ opscode-analytics-ctl purge-nodes
</pre></div>
</div>
<p>This command may take some time to run. Upon completion, restart Chef Analytics:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ opscode-analytics-ctl start
</pre></div>
</div>
</div>
</div>
<div class="section" id="what-s-new-1-1-5">
<h2>What&#8217;s New (1.1.5)<a class="headerlink" href="#what-s-new-1-1-5" title="Permalink to this headline">¶</a></h2>
<p>The following items are new for Chef Analytics 1.1.5 and/or are changes from previous versions. The short version:</p>
<ul class="simple">
<li><strong>Notifications to Slack using incoming webhooks</strong> Send Chef Analytics notifications to Slack in real time based on rules and notifications in Chef Analytics that are configured to send to the incoming webhooks functionality in Slack.</li>
<li><strong>Splunk application for Chef server</strong> Use the Chef App for Splunk to gather insights about nodes that are under management by Chef.</li>
<li><strong>Rules</strong> Use rules to generate notifications based on the results of tests run during the chef-client run.</li>
<li><strong>Actions</strong> Use Chef actions to view changes made to each node object, the run history for all nodes, the history of every cookbook (and cookbook version), how and where policy settings&#8212;roles, environments, and data bags&#8212;are applied, and which users made which changes.</li>
<li><strong>Reporting 1.2.2</strong> Reporting should be upgraded to version 1.2.2 for full funcationality with the Chef Analytics 1.1 release.</li>
<li><strong>oc-id service</strong> The <strong>oc-id</strong> service enables OAuth 2.0 authentication to the Chef server by Chef Analytics.</li>
<li><strong>knife-analytics plugin</strong> Use the <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">analytics</span></tt> subcommand to view information about actions, alerts, notifications, and rules that are managed by Chef Analytics.</li>
<li><strong>New settings for data retention</strong> The number of months for which activities data is kept is configurable. (New in Chef Analytics 1.1.5.)</li>
</ul>
<p>In addition, the following functionality is available in chef-client 12.4.1 to support building audit controls and running the chef-client in audit-mode:</p>
<ul class="simple">
<li><strong>chef-client may be run in audit-mode</strong> Use audit-mode to run audit controls against a node.</li>
<li><strong>control method added to Recipe DSL</strong> Use the <tt class="docutils literal"><span class="pre">control</span></tt> method to define specific tests that match directories, files, packages, ports, and services. A <tt class="docutils literal"><span class="pre">control</span></tt> method must be contained within a <tt class="docutils literal"><span class="pre">control_group</span></tt> block.</li>
<li><strong>control_group method added to Recipe DSL</strong> Use the <tt class="docutils literal"><span class="pre">control_group</span></tt> method to group one (or more) <tt class="docutils literal"><span class="pre">control</span></tt> methods together.</li>
</ul>
<div class="section" id="slack-incoming-webhooks">
<h3>Slack Incoming Webhooks<a class="headerlink" href="#slack-incoming-webhooks" title="Permalink to this headline">¶</a></h3>
<p>A webhook for Chef Analytics enables real-time event streams to be sent to arbitrary locations that support webhooks integrations. For example, channels in Slack may be configured to receive notifications from Chef Analytics by integrating with the incoming webhooks functionality in Slack.</p>
<ol class="arabic">
<li><p class="first">Create an incoming webhook in Slack. Choose the channel that will receive the incoming notification:</p>
<img alt="_images/analytics_slack_incoming_webhooks.png" src="_images/analytics_slack_incoming_webhooks.png" />
<p>and then click <strong>Add Incoming Webhooks Integration</strong>. Copy the URL that is generated by Slack. This will be needed by Chef Analytics.</p>
</li>
<li><p class="first">Log into Chef Analytics and create a <strong>Webhook</strong> notification:</p>
<img alt="_images/analytics_slack_notification.png" src="_images/analytics_slack_notification.png" />
</li>
<li><p class="first">Name the webhook&#8212;<tt class="docutils literal"><span class="pre">slack</span></tt>, for example&#8212;and then paste the URL that was provided by Slack:</p>
<img alt="_images/analytics_slack_http_configure.png" src="_images/analytics_slack_http_configure.png" />
<p>Click <strong>Save</strong>.</p>
</li>
<li><p class="first">Create a rule that uses this integration and test it. For example, configuring Chef Analytics to send a notification to Slack when a audit-mode run fails. First, create a simple rule to test the Slack integration. Configure a message to be sent to Slack for any action event that comes into Chef Analytics:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">rules</span> <span class="s1">&#39;org notifier&#39;</span>
  <span class="n">rule</span> <span class="n">on</span> <span class="n">action</span>
  <span class="k">when</span>
    <span class="kp">true</span>
  <span class="k">then</span>
    <span class="n">notify</span><span class="p">(</span><span class="s1">&#39;slack&#39;</span><span class="p">,</span> <span class="s1">&#39;{</span>
<span class="s1">      &quot;text&quot;: &quot;test from the blog post&quot;</span>
<span class="s1">    }&#39;</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>Slack expects a JSON document to be sent to the incoming webook integration from Chef Analytics. Chef Analytics supports multi-line notifications to be written. Use the <tt class="docutils literal"><span class="pre">'text'</span></tt> property in the rule to send the data as a JSON document.</p>
</li>
<li><p class="first">Finally, create a rule that is more specific to the Chef Analytics data, such as assigning an emoji and a name for the notification:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">rules</span> <span class="s1">&#39;failed-audit&#39;</span>
  <span class="n">rule</span> <span class="n">on</span> <span class="n">run_control_group</span>
  <span class="k">when</span>
    <span class="n">status</span> <span class="o">!=</span> <span class="s1">&#39;success&#39;</span>
  <span class="k">then</span>
    <span class="n">notify</span><span class="p">(</span><span class="s1">&#39;slack&#39;</span><span class="p">,</span> <span class="s1">&#39;{</span>
<span class="s1">      &quot;username&quot;: &quot;Audit Alarm&quot;,</span>
<span class="s1">      &quot;icon_emoji&quot;: &quot;:rotating_light:&quot;,</span>
<span class="s1">      &quot;text&quot;: &quot;{{message.name}} (cookbook {{message.cookbook_name}})\n</span>
<span class="s1">        had \&#39;{{message.number_failed}}\&#39; failed audit test(s)\n</span>
<span class="s1">        on node \&#39;{{message.run.node_name}}\&#39;\n</span>
<span class="s1">        in organization \&#39;{{message.organization_name}}\&#39;&quot;</span>
<span class="s1">    }&#39;</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>This will generate a message similar to:</p>
<img alt="_images/analytics_slack_message.png" src="_images/analytics_slack_message.png" />
</li>
</ol>
</div>
<div class="section" id="chef-app-for-splunk">
<h3>Chef App for Splunk<a class="headerlink" href="#chef-app-for-splunk" title="Permalink to this headline">¶</a></h3>
<p>Use the Chef App for Splunk to gather insights about nodes that are under management by Chef. The Chef App for Splunk requires Chef Analytics version 1.1.4 (or later).</p>
<a class="reference internal image-reference" href="_images/splunk_app_nodes_activity.png"><img alt="_images/splunk_app_nodes_activity.png" class="align-center" src="_images/splunk_app_nodes_activity.png" style="width: 600px;" /></a>
<a class="reference internal image-reference" href="_images/splunk_app_server_activity.png"><img alt="_images/splunk_app_server_activity.png" class="align-center" src="_images/splunk_app_server_activity.png" style="width: 600px;" /></a>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Splunk Enterprise is required to use the Chef App for Splunk. Splunk light does not support the installation of packaged Splunk applications.</p>
</div>
<p>To set up the Chef App for Splunk, do the following:</p>
<ol class="arabic">
<li><p class="first">Download and install Chef Analytics.</p>
</li>
<li><p class="first">Configure a notification for the Splunk server.</p>
</li>
<li><p class="first">Go to the <strong>Notifications</strong> tab in the Chef Analytics web user interface.</p>
</li>
<li><p class="first">Click the plus symbol (<strong>+</strong>) and select Splunk.</p>
</li>
<li><p class="first">Name the configuration. For example: <tt class="docutils literal"><span class="pre">splunk-notifier</span></tt>.</p>
</li>
<li><p class="first">Configure the hostname, port, username, and password for the Splunk server.</p>
</li>
<li><p class="first">The default port is <tt class="docutils literal"><span class="pre">8089</span></tt>; modify to match your Splunk install.</p>
</li>
<li><p class="first">You can choose what data to send to the Splunk server by type. Valid types are <tt class="docutils literal"><span class="pre">action</span></tt>, <tt class="docutils literal"><span class="pre">run_converge</span></tt>, <tt class="docutils literal"><span class="pre">run_resource</span></tt>, <tt class="docutils literal"><span class="pre">run_control</span></tt>, and <tt class="docutils literal"><span class="pre">run_control_group</span></tt>. Add the following rules to enable data to be sent to the Splunk server:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">rules</span> <span class="s1">&#39;Splunk&#39;</span>
  <span class="n">rule</span> <span class="n">on</span> <span class="n">action</span>
  <span class="k">when</span>
    <span class="kp">true</span>
  <span class="k">then</span>
    <span class="n">notify</span><span class="p">(</span><span class="s1">&#39;splunk-notifier&#39;</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="n">rule</span> <span class="n">on</span> <span class="n">run_converge</span>
  <span class="k">when</span>
    <span class="kp">true</span>
  <span class="k">then</span>
    <span class="n">notify</span><span class="p">(</span><span class="s1">&#39;splunk-notifier&#39;</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="n">rule</span> <span class="n">on</span> <span class="n">run_resource</span>
  <span class="k">when</span>
    <span class="kp">true</span>
  <span class="k">then</span>
    <span class="n">notify</span><span class="p">(</span><span class="s1">&#39;splunk-notifier&#39;</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
</li>
</ol>
<p>The <tt class="docutils literal"><span class="pre">rules</span></tt> block <strong>MUST</strong> be exactly as shown. If these rules do not match exactly, the Chef App for Splunk may not work correctly.</p>
</div>
<div class="section" id="rules">
<h3>Rules<a class="headerlink" href="#rules" title="Permalink to this headline">¶</a></h3>
<p>Chef Analytics includes a powerful rules processing system that allows notifications to be generated based on observed events in the data stream, such as:</p>
<ul class="simple">
<li>Cookbook uploads</li>
<li>Modifications to environments</li>
<li>Machines on which chef-client runs have failed</li>
<li>Machines on which audit-mode runs have failed</li>
<li>Resources that were updated as a result of a chef-client run</li>
</ul>
<p>Notifications may be sent to any email address, a chat service like HipChat or Slack, or to a webhook-based service for generic intergrations.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For more information about building rules for Chef Analytics, including the full rules syntax, see <a class="reference internal" href="analytics_rules.html"><em>Chef Analytics Rules</em></a>.</p>
</div>
<div class="section" id="rule-syntax">
<h4>Rule Syntax<a class="headerlink" href="#rule-syntax" title="Permalink to this headline">¶</a></h4>
<p>The syntax for a Chef Analytics rule is as follows:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>rules &#39;name&#39;
  with priority=n
  rule &#39;name&#39; on message_type
  when
    // comment
    function()
  then
    // comment
    function()
  otherwise
    // comment
    function()
  end

  rule ...
    ...
  end

  ...
end
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">rules</span></tt> defines a rules group which is comprised of individual rules (<tt class="docutils literal"><span class="pre">rule</span></tt>)</li>
<li><tt class="docutils literal"><span class="pre">rule</span></tt> defines an individual rule; each rule must be contained in its own <tt class="docutils literal"><span class="pre">rule</span></tt> block</li>
<li><tt class="docutils literal"><span class="pre">with</span> <span class="pre">priority=n</span></tt> is a positive or negative integer that defines the relative priority of a rules group as compared to all other rules groups</li>
<li><tt class="docutils literal"><span class="pre">'name'</span></tt> is name of the rule group and/or the name of the rule; required for <tt class="docutils literal"><span class="pre">rules</span></tt>, optional for each <tt class="docutils literal"><span class="pre">rule</span></tt></li>
<li><tt class="docutils literal"><span class="pre">message_type</span></tt> is one of the following: <tt class="docutils literal"><span class="pre">action</span></tt>, <tt class="docutils literal"><span class="pre">run_control</span></tt>, <tt class="docutils literal"><span class="pre">run_control_group</span></tt>, <tt class="docutils literal"><span class="pre">run_converge</span></tt>, <tt class="docutils literal"><span class="pre">run_resource</span></tt>, or <tt class="docutils literal"><span class="pre">run_start</span></tt></li>
<li><tt class="docutils literal"><span class="pre">when</span></tt> is a series of evaluations that result in <tt class="docutils literal"><span class="pre">true</span></tt> or <tt class="docutils literal"><span class="pre">false</span></tt></li>
<li><tt class="docutils literal"><span class="pre">then</span></tt> is a comma-separated group of statements that are used to test data</li>
<li><tt class="docutils literal"><span class="pre">otherwise</span></tt> is a comma-separated group of statements that are used to test data</li>
<li><tt class="docutils literal"><span class="pre">function()</span></tt> is a statement that tests a value in the JSON object; functions may be one of <tt class="docutils literal"><span class="pre">array:contains()</span></tt>, <tt class="docutils literal"><span class="pre">alert:&lt;level&gt;()</span></tt>, <tt class="docutils literal"><span class="pre">datetime:component()</span></tt>, <tt class="docutils literal"><span class="pre">get()</span></tt>, <tt class="docutils literal"><span class="pre">log()</span></tt>, or <tt class="docutils literal"><span class="pre">mustache_template()</span></tt>. (See &#8220;Functions&#8221; below for more information about the individual functions.)</li>
<li>A comment starts with two forward slashes&#8211;<tt class="docutils literal"><span class="pre">//</span></tt>&#8212;and continues to the end of the line on which the comment begins</li>
<li>Whitespace is ignored by the rules parser unless it contained within single- or double-quoted strings. For example, the parser will preserve the white space in <tt class="docutils literal"><span class="pre">'white</span> <span class="pre">space'</span></tt> and <tt class="docutils literal"><span class="pre">&quot;white</span> <span class="pre">space&quot;</span></tt></li>
</ul>
</div>
<div class="section" id="message-types">
<h4>Message Types<a class="headerlink" href="#message-types" title="Permalink to this headline">¶</a></h4>
<p>Each individual <tt class="docutils literal"><span class="pre">rule</span></tt> must be associated with a specific message type. As a rule is triggered during the chef-client run, a message is sent to the Chef Analytics server. A rule may be configured to send notifications about a message to recipients that are located outside of the Chef Analytics server.</p>
<p>A message type must be one of the following:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Message Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">action</span></tt></td>
<td>Use to build rules for messages about actions that occur on the Chef server.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">run_control</span></tt></td>
<td>Use to build rules for a single audit to be evaluated.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">run_control_group</span></tt></td>
<td>Use to build rules for a group of audits to be evaluated.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">run_converge</span></tt></td>
<td>Use to build rules for messages that are sent at the end of a chef-client run.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">run_resource</span></tt></td>
<td>Use to build rules for messages that are sent as each resource is converged during a chef-client run.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">run_start</span></tt></td>
<td>Use to build rules for messages that are sent at the start of a chef-client run.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="examples">
<h4>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h4>
<p><strong>Raise audit failure</strong></p>
<p>The following rule raises an alert when a <tt class="docutils literal"><span class="pre">run_control_group</span></tt> fails, signifying that one or more controls failed:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span> <span class="nx">rules</span> <span class="s2">&quot;throw errors on control group failure&quot;</span>
  <span class="nx">rule</span> <span class="nx">on</span> <span class="nx">run_converge</span>
  <span class="nx">when</span>
    <span class="kc">true</span>
  <span class="nx">then</span>
    <span class="nx">alert</span><span class="o">:</span><span class="nx">info</span><span class="p">(</span><span class="s2">&quot;Run converge detected at {{ message.end_time }} &quot;</span><span class="p">)</span>
  <span class="nx">end</span>

  <span class="nx">rule</span> <span class="nx">on</span> <span class="nx">run_control_group</span>
  <span class="nx">when</span>
    <span class="kc">true</span>
  <span class="nx">then</span>
    <span class="c1">// the run_control_group name will appear in double quotes</span>
    <span class="nx">alert</span><span class="o">:</span><span class="nx">info</span><span class="p">(</span><span class="s2">&quot;Run control group \&quot;{{ message.name }}\&quot; failed on {{ message.run.node_name }}&quot;</span><span class="p">)</span>
  <span class="nx">end</span>
<span class="nx">end</span>
</pre></div>
</div>
<p><strong>Use regular expressions</strong></p>
<p>The following rule shows using a regular expression:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>rules &quot;user-agent matching&quot;
  rule on action
  when
    get(#user_agent, false) != false
  then
    log(&quot;Something else set #user_agent&quot;)
  end

  rule on action
  when
    // match if the user_agent starts with the string &quot;Chef Manage&quot;
    user_agent =~ &quot;Chef Manage.*&quot;
  then
    // if #user_agent has been set before
    // this command will overwrite it&#39;s value
  set(#user_agent, &quot;Chef Manage&quot;)
  end

  rule on action
  when
    // match if the user_agent starts with the string &quot;Chef Client&quot;
    user_agent =~ &quot;Chef Client.*&quot;
  then
    set(#user_agent, &quot;Chef Client&quot;)
  end

  rule on action
  when
    get(#user_agent, false) != false
  then
    alert:info(&quot;User agent {{user_defined_values.#user_agent}}&quot;)
  end
end
</pre></div>
</div>
<p><strong>Verify resource updates</strong></p>
<p>The following rule verifies if resources have been updated on a <tt class="docutils literal"><span class="pre">run_converge</span></tt>:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">rules</span> <span class="s2">&quot;Match a run converge&quot;</span>
  <span class="n">rule</span> <span class="n">on</span> <span class="n">run_converge</span>
  <span class="k">when</span>
    <span class="n">total_resource_count</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span>
    <span class="n">updated_resource_count</span> <span class="o">&gt;</span> <span class="mi">0</span>
  <span class="k">then</span>
    <span class="ss">alert</span><span class="p">:</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Run converge detected at {{ message.end_time }} &quot;</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Verify run-lists</strong></p>
<p>The following rule verfies if a specific role appears in a run-list:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">rules</span> <span class="s2">&quot;Check a converge run_list&quot;</span>
  <span class="n">rule</span> <span class="n">on</span> <span class="n">run_converge</span>
  <span class="k">when</span>
    <span class="ss">array</span><span class="p">:</span><span class="n">contains</span><span class="p">(</span><span class="n">run_list</span><span class="p">,</span> <span class="s1">&#39;role[opscode-reporting]&#39;</span><span class="p">)</span>
  <span class="k">then</span>
    <span class="ss">alert</span><span class="p">:</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;run_list contains role[opscode-reporting]&quot;</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="chef-actions">
<h3>Chef Actions<a class="headerlink" href="#chef-actions" title="Permalink to this headline">¶</a></h3>
<p>The Chef server gathers a lot of data. For example:</p>
<ul class="simple">
<li>Changes made to each node object</li>
<li>The run history for all nodes</li>
<li>The history of every cookbook (and cookbook version)</li>
<li>How and where policy settings&#8212;roles, environments, and data bags&#8212;are applied</li>
<li>Which users made which changes</li>
</ul>
<p>The Chef Analytics server collects all of this data and makes it visible from the Chef Analytics user interface.</p>
<div class="section" id="architecture">
<h4>Architecture<a class="headerlink" href="#architecture" title="Permalink to this headline">¶</a></h4>
<p>The following diagram shows the major components of Chef Analytics and how the various actions relate to the major components of the Chef server. Chef Analytics uses a publish-subscribe messaging platform for components to publish messages about interesting events that are happening within each public API. The pub/sub platform provides some standard consumers of the information, including a database archiving component and web visualization. The data is searchable and stored long term for after-the-fact investigation and audit purposes.</p>
<img alt="_images/chef_actions.png" src="_images/chef_actions.png" />
<p>As events occur on the Chef server, the following happens:</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Stages</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>Chef Server</strong></td>
<td>Chef Analytics tracks all interactions from users (via knife and/or the Chef management console web user interface), the chef-client (via API calls to the Chef server during the chef-client run), cookbooks that are uploaded to the server, downloaded to individual nodes, the actions the chef-client takes on each node during the chef-client run).</td>
</tr>
<tr class="row-odd"><td><strong>WebUI</strong></td>
<td>The web user interface for Chef Analytics. It provides visibility into every action tracked by Chef Analytics, allows searching of the actions data store, and can be used to generate reports (CSV files, send emails, and so on).</td>
</tr>
<tr class="row-even"><td><strong>Actions Pipeline</strong></td>
<td>The Chef Analytics pipeline is used to parse each action as it is tracked, tagging each action with the appropriate tags, identifying which notifications (if any) should be sent for each specific action, identifying any custom actions (if any) that should be taken against each specific action, and then archiving each action to the data store.</td>
</tr>
<tr class="row-odd"><td><strong>Notifications</strong></td>
<td>Chef Analytics includes a few built-in notification engines: HipChat and email. Custom engines can be integrated using a simple webhook architecture via HTTP.</td>
</tr>
<tr class="row-even"><td><strong>Data Store</strong></td>
<td>The data store is a PostgreSQL database that is used to store all of the actions that are tracked by Chef Analytics. Users of the Chef Analytics web user interface interact with the data in the data store via the Actions API.</td>
</tr>
</tbody>
</table>
<p><strong>Data Tracking</strong></p>
<p>Chef Analytics tracks the following types of data:</p>
<ul class="simple">
<li>The name organization in which the event occurred, e.g. &#8220;chef&#8221;</li>
<li>The hostname for the node from which the request was initiated, e.g. &#8220;computer.chef.io&#8221; or &#8220;some.node.FQDN.com&#8221;</li>
<li>A unique identifier for the request, e.g. the chef-client run identifier for events generated during a chef-client run or the Reporting run identifier for events generated during reporting</li>
<li>The name of the entity that made the request, e.g. &#8220;grantmc&#8221;</li>
<li>The type of entity, e.g. &#8220;user&#8221;</li>
<li>The interface from which the request was initiated, e.g. knife, Chef management console, and so on, including the version for that interface</li>
<li>The requested action; this typically maps to a specific method in the Chef server API, such as <tt class="docutils literal"><span class="pre">create</span></tt>, <tt class="docutils literal"><span class="pre">read</span></tt>, <tt class="docutils literal"><span class="pre">update</span></tt>, and <tt class="docutils literal"><span class="pre">delete</span></tt></li>
<li>The Chef server object and type, e.g. &#8220;cookbook&#8221; and &#8220;apache&#8221; (for a cookbook named &#8220;apache&#8221;)</li>
<li>The version (and version number) for the Chef server object, e.g. &#8220;version&#8221; and &#8220;1.2.3&#8221;</li>
<li>The date and time at which the event happened</li>
</ul>
</div>
<div class="section" id="user-interface">
<h4>User Interface<a class="headerlink" href="#user-interface" title="Permalink to this headline">¶</a></h4>
<p>The Chef Analytics user interface allows you to:</p>
<ul class="simple">
<li>View actions on any Chef object. See changes to a node or role to track down bugs.</li>
<li>View actions for an organization. See all the actions in a production organization to measure the level of change at different times of the day and week.</li>
<li>Navigate to the Chef management console console. There&#8217;s one-click to access an object in the management console from the Chef Analytics page.</li>
<li>Fan-out messages for distribution. Send notifications from Chef to HipChat when cookbooks or roles have been uploaded.</li>
<li>Distinguish between knife, chef-client, and other clients. View the different types of client applications accessing the Chef server to spot unusual or unexpected behavior.</li>
<li>Correlate calls from a single client invocation. Group all the items that happened during a single client (e.g. chef-client, knife) invocation.</li>
<li>Browse actions for after-the-fact investigation. A persistent log can be saved on demand for auditing purposes or for analyzing information after an event has occurred. All messages are immutable. Non-modifiable messages are delivered reliably to the actions database. They can be used as a trusted source of data about changes to your infrastructure.</li>
</ul>
<img alt="_images/actions_log_ui.png" src="_images/actions_log_ui.png" />
<p>View diffs of Chef actions:</p>
<img alt="_images/actions_log_ui_diffs.png" src="_images/actions_log_ui_diffs.png" />
</div>
</div>
<div class="section" id="new-settings-for-data-retention">
<h3>New settings for data retention<a class="headerlink" href="#new-settings-for-data-retention" title="Permalink to this headline">¶</a></h3>
<p>The following settings are new for Chef Analytics version 1.1.5:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Setting</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">data_retention['month_interval_to_keep_activities']</span></tt></td>
<td>The number of months for which activities data is retained. Default value: <tt class="docutils literal"><span class="pre">3</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">data_retention['keep_all_data']</span></tt></td>
<td>Use to specify if all events are kept. If this setting is <tt class="docutils literal"><span class="pre">true</span></tt>, the <tt class="docutils literal"><span class="pre">month_interval_to_keep_activities</span></tt> value is ignored. Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="chef-client-audit-mode">
<h3>chef-client, audit-mode<a class="headerlink" href="#chef-client-audit-mode" title="Permalink to this headline">¶</a></h3>
<p>The chef-client may be run in audit-mode. Use audit-mode to evaluate custom rules&#8212;also referred to as audits&#8212;that are defined in recipes. audit-mode may be run in the following ways:</p>
<ul class="simple">
<li>By itself (i.e. a chef-client run that does not build the resource collection or converge the node)</li>
<li>As part of the chef-client run, where audit-mode runs after all resources have been converged on the node</li>
</ul>
<p>Each audit is authored within a recipe using the <tt class="docutils literal"><span class="pre">control_group</span></tt> and <tt class="docutils literal"><span class="pre">control</span></tt> methods that are part of the Recipe DSL. Recipes that contain audits are added to the run-list, after which they can be processed by the chef-client. Output will appear in the same location as the regular chef-client run (as specified by the <tt class="docutils literal"><span class="pre">log_location</span></tt> setting in the client.rb file).</p>
<p>Finished audits are reported back to the Chef server. From there, audits are sent to the Chef Analytics platform for further analysis, such as rules processing and visibility from the actions web user interface.</p>
<p>Use following option to run the chef-client in audit-mode mode:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--audit-mode</span> <span class="pre">MODE</span></tt></dt>
<dd>Enable audit-mode. Set to <tt class="docutils literal"><span class="pre">audit-only</span></tt> to skip the converge phase of the chef-client run and only perform audits. Possible values: <tt class="docutils literal"><span class="pre">audit-only</span></tt>, <tt class="docutils literal"><span class="pre">disabled</span></tt>, and <tt class="docutils literal"><span class="pre">enabled</span></tt>. Default value: <tt class="docutils literal"><span class="pre">disabled</span></tt>.</dd>
</dl>
<div class="section" id="the-audit-run">
<h4>The Audit Run<a class="headerlink" href="#the-audit-run" title="Permalink to this headline">¶</a></h4>
<p>The following diagram shows the stages of the audit-mode phase of the chef-client run, and then the list below the diagram describes in greater detail each of those stages.</p>
<img alt="_images/audit_run.png" src="_images/audit_run.png" />
<p>When the chef-client is run in audit-mode, the following happens:</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Stages</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>chef-client Run ID</strong></td>
<td>The chef-client run identifier is associated with each audit.</td>
</tr>
<tr class="row-odd"><td><strong>Configure the Node</strong></td>
<td>If audit-mode is run as part of the full chef-client run, audit-mode occurs after the chef-client has finished converging all resources in the resource collection.</td>
</tr>
<tr class="row-even"><td><strong>Audit node based on controls in cookbooks</strong></td>
<td>Each <tt class="docutils literal"><span class="pre">control_group</span></tt> and <tt class="docutils literal"><span class="pre">control</span></tt> block found in any recipe that was part of the run-list of for the node is evaluated, with each expression in each <tt class="docutils literal"><span class="pre">control</span></tt> block verified against the state of the node.</td>
</tr>
<tr class="row-odd"><td><strong>Upload audit data to the Chef server</strong></td>
<td>When audit-mode mode is complete, the data is uploaded to the Chef server.</td>
</tr>
<tr class="row-even"><td><strong>Send to Chef Analytics</strong></td>
<td>Most of this data is passed to the Chef Analytics platform for further analysis, such as rules processing (for notification events triggered by expected or unexpected audit outcomes) and visibility from the actions web user interface.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="control">
<h3>control<a class="headerlink" href="#control" title="Permalink to this headline">¶</a></h3>
<p>A control is an automated test that is built into a cookbook, and then used to test the state of the system for compliance. Compliance can be many things. For example, ensuring that file and directory management meets specific internal IT policies&#8212;&#8221;Does the file exist?&#8221;, &#8220;Do the correct users or groups have access to this directory?&#8221;. Compliance may also be complex, such as helping to ensure goals defined by large-scale compliance frameworks such as PCI, HIPAA, and Sarbanes-Oxley can be met.</p>
<p>Use the <tt class="docutils literal"><span class="pre">control</span></tt> method to define a specific series of tests that comprise an individual audit. A <tt class="docutils literal"><span class="pre">control</span></tt> method MUST be contained within a <tt class="docutils literal"><span class="pre">control_group</span></tt> block. A <tt class="docutils literal"><span class="pre">control_group</span></tt> block may contain multiple <tt class="docutils literal"><span class="pre">control</span></tt> methods.</p>
<p>The syntax for the <tt class="docutils literal"><span class="pre">control</span></tt> method is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">control_group</span> <span class="s1">&#39;audit name&#39;</span> <span class="k">do</span>
  <span class="n">control</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s1">&#39;should do something&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">something</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="o">/.</span><span class="n">to_not</span> <span class="n">be_something</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">control_group</span></tt> groups one (or more) <tt class="docutils literal"><span class="pre">control</span></tt> blocks</li>
<li><tt class="docutils literal"><span class="pre">control</span> <span class="pre">'name'</span> <span class="pre">do</span></tt> defines an individual audit</li>
<li>Each <tt class="docutils literal"><span class="pre">control</span></tt> block must define at least one validation</li>
<li>Each <tt class="docutils literal"><span class="pre">it</span></tt> statement defines a single validation. <tt class="docutils literal"><span class="pre">it</span></tt> statements are processed individually when the chef-client is run in audit-mode</li>
<li>An <tt class="docutils literal"><span class="pre">expect(something).to/.to_not</span> <span class="pre">be_something</span></tt> is a statement that represents the individual test. In other words, this statement tests if something is expected to be (or not be) something. For example, a test that expects the PostgreSQL pacakge to not be installed would be similar to <tt class="docutils literal"><span class="pre">expect(package('postgresql')).to_not</span> <span class="pre">be_installed</span></tt> and a test that ensures a service is enabled would be similar to <tt class="docutils literal"><span class="pre">expect(service('init')).to</span> <span class="pre">be_enabled</span></tt></li>
<li>An <tt class="docutils literal"><span class="pre">it</span></tt> statement may contain multiple <tt class="docutils literal"><span class="pre">expect</span></tt> statements</li>
</ul>
<div class="section" id="directory-matcher">
<h4>directory Matcher<a class="headerlink" href="#directory-matcher" title="Permalink to this headline">¶</a></h4>
<p>Matchers are available for directories. Use this matcher to define audits for directories that test if the directory exists, is mounted, and if it is linked to. This matcher uses the same matching syntax&#8212;<tt class="docutils literal"><span class="pre">expect(file('foo'))</span></tt>&#8212;as the files. The following matchers are available for directories:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Matcher</th>
<th class="head">Description, Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">be_directory</span></tt></td>
<td><p class="first">Use to test if directory exists. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be a directory&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/var/directory&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_directory</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">be_linked_to</span></tt></td>
<td><p class="first">Use to test if a subject is linked to the named directory. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be linked to the named directory&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/directory&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_linked_to</span><span class="p">(</span><span class="s1">&#39;/etc/some/other/directory&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">be_mounted</span></tt></td>
<td><p class="first">Use to test if a directory is mounted. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be mounted&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_mounted</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For directories with a single attribute that requires testing:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be mounted with an ext4 partition&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_mounted</span><span class="o">.</span><span class="n">with</span><span class="p">(</span> <span class="ss">:type</span> <span class="o">=&gt;</span> <span class="s1">&#39;ext4&#39;</span> <span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For directories with multiple attributes that require testing:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be mounted only with certain attributes&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_mounted</span><span class="o">.</span><span class="n">only_with</span><span class="p">(</span>
    <span class="ss">:attribute</span> <span class="o">=&gt;</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span>
    <span class="ss">:attribute</span> <span class="o">=&gt;</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span>
<span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="file-matcher">
<h4>file Matcher<a class="headerlink" href="#file-matcher" title="Permalink to this headline">¶</a></h4>
<p>Matchers are available for files and directories. Use this matcher to define audits for files that test if the file exists, its version, if it is is executable, writable, or readable, who owns it, verify checksums (both MD5 and SHA-256) and so on. The following matchers are available for files:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Matcher</th>
<th class="head">Description, Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">be_executable</span></tt></td>
<td><p class="first">Use to test if a file is executable. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be executable&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_executable</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For a file that is executable by its owner:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be executable by owner&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_executable</span><span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="s1">&#39;owner&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For a file that is executable by a group:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be executable by group members&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_executable</span><span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="s1">&#39;group&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For a file that is executable by a specific user:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be executable by user foo&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_executable</span><span class="o">.</span><span class="n">by_user</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">be_file</span></tt></td>
<td><p class="first">Use to test if a file exists. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be a file&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_file</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">be_grouped_into</span></tt></td>
<td><p class="first">Use to test if a file is grouped into the named group. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be grouped into foo&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_grouped_into</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">be_linked_to</span></tt></td>
<td><p class="first">Use to test if a subject is linked to the named file. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be linked to the named file&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_linked_to</span><span class="p">(</span><span class="s1">&#39;/etc/some/other/file&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">be_mode</span></tt></td>
<td><p class="first">Use to test if a file is set to the specified mode. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be mode 440&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_mode</span><span class="p">(</span><span class="mi">440</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">be_owned_by</span></tt></td>
<td><p class="first">Use to test if a file is owned by the named owner. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be owned by the root user&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/sudoers&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_owned_by</span><span class="p">(</span><span class="s1">&#39;root&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">be_readable</span></tt></td>
<td><p class="first">Use to test if a file is readable. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be readable&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_readable</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For a file that is readable by its owner:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be readable by owner&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_readable</span><span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="s1">&#39;owner&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For a file that is readable by a group:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be readable by group members&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_readable</span><span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="s1">&#39;group&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For a file that is readable by a specific user:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be readable by user foo&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_readable</span><span class="o">.</span><span class="n">by_user</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">be_socket</span></tt></td>
<td><p class="first">Use to test if a file exists as a socket. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be a socket&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/var/file.sock&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_socket</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">be_symlink</span></tt></td>
<td><p class="first">Use to test if a file exists as a symbolic link. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be a symlink&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_symlink</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">be_version</span></tt></td>
<td><p class="first">Microsoft Windows only. Use to test if a file is the specified version. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be version 1.2&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;C:\\Windows\\path\\to\\file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_version</span><span class="p">(</span><span class="s1">&#39;1.2&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">be_writable</span></tt></td>
<td><p class="first">Use to test if a file is writable. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be writable&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_writable</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For a file that is writable by its owner:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be writable by owner&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_writable</span><span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="s1">&#39;owner&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For a file that is writable by a group:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be writable by group members&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_writable</span><span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="s1">&#39;group&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For a file that is writable by a specific user:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be writable by user foo&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_writable</span><span class="o">.</span><span class="n">by_user</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">contain</span></tt></td>
<td><p class="first">Use to test if a file contains specific contents. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should contain docs.chef.io&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">contain</span><span class="p">(</span><span class="s1">&#39;docs.chef.io&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="package-matcher">
<h4>package Matcher<a class="headerlink" href="#package-matcher" title="Permalink to this headline">¶</a></h4>
<p>Matchers are available for packages and may be used to define audits that test if a package or a package version is installed. The following matchers are available:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Matcher</th>
<th class="head">Description, Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">be_installed</span></tt></td>
<td><p class="first">Use to test if the named package is installed. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be installed&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">package</span><span class="p">(</span><span class="s1">&#39;httpd&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_installed</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For a specific package version:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be installed&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">package</span><span class="p">(</span><span class="s1">&#39;httpd&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_installed</span><span class="o">.</span><span class="n">with_version</span><span class="p">(</span><span class="s1">&#39;0.1.2&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="port-matcher">
<h4>port Matcher<a class="headerlink" href="#port-matcher" title="Permalink to this headline">¶</a></h4>
<p>Matchers are available for ports and may be used to define audits that test if a port is listening. The following matchers are available:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Matcher</th>
<th class="head">Description, Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">be_listening</span></tt></td>
<td><p class="first">Use to test if the named port is listening. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be listening&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">port</span><span class="p">(</span><span class="mi">23</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_listening</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For a named port that is not listening:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should not be listening&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">port</span><span class="p">(</span><span class="mi">23</span><span class="p">))</span><span class="o">.</span><span class="n">to_not</span> <span class="n">be_listening</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For a specific port type use <tt class="docutils literal"><span class="pre">.with('port_type')</span></tt>. For example, UDP:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be listening with UDP&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">port</span><span class="p">(</span><span class="mi">23</span><span class="p">))</span><span class="o">.</span><span class="n">to_not</span> <span class="n">be_listening</span><span class="o">.</span><span class="n">with</span><span class="p">(</span><span class="s1">&#39;udp&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For UDP, version 6:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be listening with UDP6&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">port</span><span class="p">(</span><span class="mi">23</span><span class="p">))</span><span class="o">.</span><span class="n">to_not</span> <span class="n">be_listening</span><span class="o">.</span><span class="n">with</span><span class="p">(</span><span class="s1">&#39;udp6&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For TCP/IP:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be listening with TCP&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">port</span><span class="p">(</span><span class="mi">23</span><span class="p">))</span><span class="o">.</span><span class="n">to_not</span> <span class="n">be_listening</span><span class="o">.</span><span class="n">with</span><span class="p">(</span><span class="s1">&#39;tcp&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For TCP/IP, version 6:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be listening with TCP6&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">port</span><span class="p">(</span><span class="mi">23</span><span class="p">))</span><span class="o">.</span><span class="n">to_not</span> <span class="n">be_listening</span><span class="o">.</span><span class="n">with</span><span class="p">(</span><span class="s1">&#39;tcp6&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="service-matcher">
<h4>service Matcher<a class="headerlink" href="#service-matcher" title="Permalink to this headline">¶</a></h4>
<p>Matchers are available for services and may be used to define audits that test for conditions related to services, such as if they are enabled, running, have the correct startup mode, and so on. The following matchers are available:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Matcher</th>
<th class="head">Description, Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">be_enabled</span></tt></td>
<td><p class="first">Use to test if the named service is enabled (i.e. will start up automatically). For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be enabled&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">service</span><span class="p">(</span><span class="s1">&#39;ntpd&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_enabled</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For a service that is enabled at a given run level:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be enabled at the specified run level&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">service</span><span class="p">(</span><span class="s1">&#39;ntpd&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_enabled</span><span class="o">.</span><span class="n">with_level</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">be_installed</span></tt></td>
<td><p class="first">Microsoft Windows only. Use to test if the named service is installed on the Microsoft Windows platform. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be installed&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">service</span><span class="p">(</span><span class="s1">&#39;DNS Client&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_installed</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">be_running</span></tt></td>
<td><p class="first">Use to test if the named service is running. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be running&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">service</span><span class="p">(</span><span class="s1">&#39;ntpd&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_running</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For a service that is running under supervisor:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be running under supervisor&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">service</span><span class="p">(</span><span class="s1">&#39;ntpd&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_running</span><span class="o">.</span><span class="n">under</span><span class="p">(</span><span class="s1">&#39;supervisor&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<p>or daemontools:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be running under daemontools&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">service</span><span class="p">(</span><span class="s1">&#39;ntpd&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_running</span><span class="o">.</span><span class="n">under</span><span class="p">(</span><span class="s1">&#39;daemontools&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<p>or Upstart:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be running under upstart&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">service</span><span class="p">(</span><span class="s1">&#39;ntpd&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_running</span><span class="o">.</span><span class="n">under</span><span class="p">(</span><span class="s1">&#39;upstart&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">be_monitored_by</span></tt></td>
<td><p class="first">Use to test if the named service is being monitored by the named monitoring application. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be monitored by&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">service</span><span class="p">(</span><span class="s1">&#39;ntpd&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_monitored_by</span><span class="p">(</span><span class="s1">&#39;monit&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">have_start_mode</span></tt></td>
<td><p class="first">Microsoft Windows only. Use to test if the named service&#8217;s startup mode is correct on the Microsoft Windows platform. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should start manually&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">service</span><span class="p">(</span><span class="s1">&#39;DNS Client&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">have_start_mode</span><span class="o">.</span><span class="n">Manual</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id1">
<h4>Examples<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p><strong>A package is installed</strong></p>
<p>For example, a package is installed:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">control_group</span> <span class="s1">&#39;audit name&#39;</span> <span class="k">do</span>
  <span class="n">control</span> <span class="s1">&#39;mysql package&#39;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s1">&#39;should be installed&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">package</span><span class="p">(</span><span class="s1">&#39;mysql&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_installed</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">control_group</span></tt> block is processed when the chef-client run is run in audit-mode. If the audit was successful, the chef-client will return output similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>Audit Mode
  mysql package
    should be installed
</pre></div>
</div>
<p>If an audit was unsuccessful, the chef-client will return output similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>Starting audit phase

Audit Mode
  mysql package
  should be installed <span class="o">(</span>FAILED - 1<span class="o">)</span>

Failures:

1<span class="o">)</span> Audit Mode mysql package should be installed
  Failure/Error: expect<span class="o">(</span>package<span class="o">(</span><span class="s1">&#39;mysql&#39;</span><span class="o">))</span>.to be_installed.with_version<span class="o">(</span><span class="s1">&#39;5.6&#39;</span><span class="o">)</span>
    expected Package <span class="s1">&#39;mysql&#39;</span> to be installed
  <span class="c1"># /var/chef/cache/cookbooks/grantmc/recipes/default.rb:22:in &#39;block (3 levels) in from_file&#39;</span>

Finished in 0.5745 seconds <span class="o">(</span>files took 0.46481 seconds to load<span class="o">)</span>
<span class="m">1</span> examples, <span class="m">1</span> failures

Failed examples:

rspec /var/chef/cache/cookbooks/grantmc/recipes/default.rb:21 <span class="c1"># Audit Mode mysql package should be installed</span>
</pre></div>
</div>
<p><strong>A package version is installed</strong></p>
<p>A package that is installed with a specific version:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">control_group</span> <span class="s1">&#39;audit name&#39;</span> <span class="k">do</span>
  <span class="n">control</span> <span class="s1">&#39;mysql package&#39;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s1">&#39;should be installed&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">package</span><span class="p">(</span><span class="s1">&#39;mysql&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_installed</span><span class="o">.</span><span class="n">with_version</span><span class="p">(</span><span class="s1">&#39;5.6&#39;</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>A package is not installed</strong></p>
<p>A package that is not installed:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">control_group</span> <span class="s1">&#39;audit name&#39;</span> <span class="k">do</span>
  <span class="n">control</span> <span class="s1">&#39;postgres package&#39;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s1">&#39;should not be installed&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">package</span><span class="p">(</span><span class="s1">&#39;postgresql&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to_not</span> <span class="n">be_installed</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>If the audit was successful, the chef-client will return output similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>Audit Mode
  postgres audit
    postgres package
      is not installed
</pre></div>
</div>
<p><strong>A service is enabled</strong></p>
<p>A service that is enabled and running:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">control_group</span> <span class="s1">&#39;audit name&#39;</span> <span class="k">do</span>
  <span class="n">control</span> <span class="s1">&#39;mysql service&#39;</span> <span class="k">do</span>
    <span class="n">let</span><span class="p">(</span><span class="ss">:mysql_service</span><span class="p">)</span> <span class="p">{</span> <span class="n">service</span><span class="p">(</span><span class="s1">&#39;mysql&#39;</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="s1">&#39;should be enabled&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">mysql_service</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_enabled</span>
    <span class="k">end</span>
    <span class="n">it</span> <span class="s1">&#39;should be running&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">mysql_service</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_running</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>If the audit was successful, the chef-client will return output similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>Audit Mode
  mysql service audit
    mysql service
      is enabled
      is running
</pre></div>
</div>
<p><strong>A configuration file contains specific settings</strong></p>
<p>The following example shows how to verify <tt class="docutils literal"><span class="pre">sshd</span></tt> configration, including whether it&#8217;s installed, what the permissions are, and how it can be accessed:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">control_group</span> <span class="s1">&#39;check sshd configuration&#39;</span> <span class="k">do</span>

  <span class="n">control</span> <span class="s1">&#39;sshd package&#39;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s1">&#39;should be installed&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">package</span><span class="p">(</span><span class="s1">&#39;openssh-server&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_installed</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="n">control</span> <span class="s1">&#39;sshd configuration&#39;</span> <span class="k">do</span>
    <span class="n">let</span><span class="p">(</span><span class="ss">:config_file</span><span class="p">)</span> <span class="p">{</span> <span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/ssh/sshd_config&#39;</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="s1">&#39;should exist with the right permissions&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_file</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_mode</span><span class="p">(</span><span class="mi">644</span><span class="p">)</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_owned_by</span><span class="p">(</span><span class="s1">&#39;root&#39;</span><span class="p">)</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_grouped_into</span><span class="p">(</span><span class="s1">&#39;root&#39;</span><span class="p">)</span>
    <span class="k">end</span>
    <span class="n">it</span> <span class="s1">&#39;should not permit RootLogin&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_file</span><span class="o">.</span><span class="n">content</span><span class="p">)</span><span class="o">.</span><span class="n">to_not</span> <span class="n">match</span><span class="p">(</span><span class="sr">/^PermitRootLogin yes/</span><span class="p">)</span>
    <span class="k">end</span>
    <span class="n">it</span> <span class="s1">&#39;should explicitly not permit PasswordAuthentication&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_file</span><span class="o">.</span><span class="n">content</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">match</span><span class="p">(</span><span class="sr">/^PasswordAuthentication no/</span><span class="p">)</span>
    <span class="k">end</span>
    <span class="n">it</span> <span class="s1">&#39;should force privilege separation&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_file</span><span class="o">.</span><span class="n">content</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">match</span><span class="p">(</span><span class="sr">/^UsePrivilegeSeparation sandbox/</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">let(:config_file)</span> <span class="pre">{</span> <span class="pre">file('/etc/ssh/sshd_config')</span> <span class="pre">}</span></tt> uses the <tt class="docutils literal"><span class="pre">file</span></tt> matcher to test specific settings within the <tt class="docutils literal"><span class="pre">sshd</span></tt> configuration file</li>
</ul>
<p><strong>A file contains desired permissions and contents</strong></p>
<p>The following example shows how to verify that a file has the desired permissions and contents:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">controls</span> <span class="s1">&#39;mysql config&#39;</span> <span class="k">do</span>
  <span class="n">control</span> <span class="s1">&#39;mysql config file&#39;</span> <span class="k">do</span>
    <span class="n">let</span><span class="p">(</span><span class="ss">:config_file</span><span class="p">)</span> <span class="p">{</span> <span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/mysql/my.cnf&#39;</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="s1">&#39;exists with correct permissions&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_file</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_mode</span><span class="p">(</span><span class="mo">0400</span><span class="p">)</span>
    <span class="k">end</span>
    <span class="n">it</span> <span class="s1">&#39;contains required configuration&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">its</span><span class="p">(</span><span class="s1">&#39;contents&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">match</span><span class="p">(</span><span class="sr">/default-time-zone=&#39;UTC&#39;/</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>If the audit was successful, the chef-client will return output similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>Audit Mode
  mysql config
    mysql config file
      exists with correct permissions
      contains required configuration
</pre></div>
</div>
</div>
</div>
<div class="section" id="control-group">
<h3>control_group<a class="headerlink" href="#control-group" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">control_group</span></tt> method to define a group of <tt class="docutils literal"><span class="pre">control</span></tt> methods that comprise a single audit. The name of each <tt class="docutils literal"><span class="pre">control_group</span></tt> must be unique within the organization.</p>
<p>The syntax for the <tt class="docutils literal"><span class="pre">control_group</span></tt> method is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">control_group</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
  <span class="n">control</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s1">&#39;should do something&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">something</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="o">/.</span><span class="n">to_not</span> <span class="n">be_something</span>
    <span class="k">end</span>
  <span class="k">end</span>
  <span class="n">control</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
    <span class="o">...</span>
  <span class="k">end</span>
  <span class="o">...</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">control_group</span></tt> groups one (or more) <tt class="docutils literal"><span class="pre">control</span></tt> blocks</li>
<li><tt class="docutils literal"><span class="pre">'name'</span></tt> is the unique name for the <tt class="docutils literal"><span class="pre">control_group</span></tt>; the chef-client will raise an exception if duplicate <tt class="docutils literal"><span class="pre">control_group</span></tt> names are present</li>
<li><tt class="docutils literal"><span class="pre">control</span></tt> defines each individual audit within the <tt class="docutils literal"><span class="pre">control_group</span></tt> block. There is no limit to the number of <tt class="docutils literal"><span class="pre">control</span></tt> blocks that may defined within a <tt class="docutils literal"><span class="pre">control_group</span></tt> block</li>
</ul>
<div class="section" id="id2">
<h4>Examples<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p><strong>control_group block with multiple control blocks</strong></p>
<p>The following <tt class="docutils literal"><span class="pre">control_group</span></tt> ensures that MySQL is installed, that PostgreSQL is not installed, and that the services and configuration files associated with MySQL are configured correctly:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">control_group</span> <span class="s1">&#39;Audit Mode&#39;</span> <span class="k">do</span>

  <span class="n">control</span> <span class="s1">&#39;mysql package&#39;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s1">&#39;should be installed&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">package</span><span class="p">(</span><span class="s1">&#39;mysql&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_installed</span><span class="o">.</span><span class="n">with_version</span><span class="p">(</span><span class="s1">&#39;5.6&#39;</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="n">control</span> <span class="s1">&#39;postgres package&#39;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s1">&#39;should not be installed&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">package</span><span class="p">(</span><span class="s1">&#39;postgresql&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to_not</span> <span class="n">be_installed</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="n">control</span> <span class="s1">&#39;mysql service&#39;</span> <span class="k">do</span>
    <span class="n">let</span><span class="p">(</span><span class="ss">:mysql_service</span><span class="p">)</span> <span class="p">{</span> <span class="n">service</span><span class="p">(</span><span class="s1">&#39;mysql&#39;</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="s1">&#39;should be enabled&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">mysql_service</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_enabled</span>
    <span class="k">end</span>
    <span class="n">it</span> <span class="s1">&#39;should be running&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">mysql_service</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_running</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="n">control</span> <span class="s1">&#39;mysql config directory&#39;</span> <span class="k">do</span>
    <span class="n">let</span><span class="p">(</span><span class="ss">:config_dir</span><span class="p">)</span> <span class="p">{</span> <span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/mysql&#39;</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="s1">&#39;should exist with correct permissions&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_dir</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_directory</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_dir</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_mode</span><span class="p">(</span><span class="mo">0700</span><span class="p">)</span>
    <span class="k">end</span>
    <span class="n">it</span> <span class="s1">&#39;should be owned by the db user&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_dir</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_owned_by</span><span class="p">(</span><span class="s1">&#39;db_service_user&#39;</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="n">control</span> <span class="s1">&#39;mysql config file&#39;</span> <span class="k">do</span>
    <span class="n">let</span><span class="p">(</span><span class="ss">:config_file</span><span class="p">)</span> <span class="p">{</span> <span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/mysql/my.cnf&#39;</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="s1">&#39;should exist with correct permissions&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_file</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_mode</span><span class="p">(</span><span class="mo">0400</span><span class="p">)</span>
    <span class="k">end</span>
    <span class="n">it</span> <span class="s1">&#39;should contain required configuration&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_file</span><span class="o">.</span><span class="n">content</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">match</span><span class="p">(</span><span class="sr">/default-time-zone=&#39;UTC&#39;/</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">control_group</span></tt> block is processed when the chef-client is run in audit-mode. If the chef-client run was successful, the chef-client will return output similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>Audit Mode
  mysql package
    should be installed
  postgres package
    should not be installed
  mysql service
    should be enabled
    should be running
  mysql config directory
    should exist with correct permissions
    should be owned by the db user
  mysql config file
    should exist with correct permissions
    should contain required configuration
</pre></div>
</div>
<p>If an audit was unsuccessful, the chef-client will return output similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>Starting audit phase

Audit Mode
  mysql package
  should be installed <span class="o">(</span>FAILED - 1<span class="o">)</span>
postgres package
  should not be installed
mysql service
  should be enabled <span class="o">(</span>FAILED - 2<span class="o">)</span>
  should be running <span class="o">(</span>FAILED - 3<span class="o">)</span>
mysql config directory
  should exist with correct permissions <span class="o">(</span>FAILED - 4<span class="o">)</span>
  should be owned by the db user <span class="o">(</span>FAILED - 5<span class="o">)</span>
mysql config file
  should exist with correct permissions <span class="o">(</span>FAILED - 6<span class="o">)</span>
  should contain required configuration <span class="o">(</span>FAILED - 7<span class="o">)</span>

Failures:

1<span class="o">)</span> Audit Mode mysql package should be installed
  Failure/Error: expect<span class="o">(</span>package<span class="o">(</span><span class="s1">&#39;mysql&#39;</span><span class="o">))</span>.to be_installed.with_version<span class="o">(</span><span class="s1">&#39;5.6&#39;</span><span class="o">)</span>
    expected Package <span class="s1">&#39;mysql&#39;</span> to be installed
  <span class="c1"># /var/chef/cache/cookbooks/grantmc/recipes/default.rb:22:in &#39;block (3 levels) in from_file&#39;</span>

2<span class="o">)</span> Audit Mode mysql service should be enabled
  Failure/Error: expect<span class="o">(</span>mysql_service<span class="o">)</span>.to be_enabled
    expected Service <span class="s1">&#39;mysql&#39;</span> to be enabled
  <span class="c1"># /var/chef/cache/cookbooks/grantmc/recipes/default.rb:35:in &#39;block (3 levels) in from_file&#39;</span>

3<span class="o">)</span> Audit Mode mysql service should be running
   Failure/Error: expect<span class="o">(</span>mysql_service<span class="o">)</span>.to be_running
    expected Service <span class="s1">&#39;mysql&#39;</span> to be running
  <span class="c1"># /var/chef/cache/cookbooks/grantmc/recipes/default.rb:38:in &#39;block (3 levels) in from_file&#39;</span>

4<span class="o">)</span> Audit Mode mysql config directory should exist with correct permissions
  Failure/Error: expect<span class="o">(</span>config_dir<span class="o">)</span>.to be_directory
    expected <span class="sb">`</span>File <span class="s1">&#39;/etc/mysql&#39;</span>.directory?<span class="sb">`</span> to <span class="k">return</span> true, got <span class="nb">false</span>
  <span class="c1"># /var/chef/cache/cookbooks/grantmc/recipes/default.rb:45:in &#39;block (3 levels) in from_file&#39;</span>

5<span class="o">)</span> Audit Mode mysql config directory should be owned by the db user
  Failure/Error: expect<span class="o">(</span>config_dir<span class="o">)</span>.to be_owned_by<span class="o">(</span><span class="s1">&#39;db_service_user&#39;</span><span class="o">)</span>
    expected <span class="sb">`</span>File <span class="s1">&#39;/etc/mysql&#39;</span>.owned_by?<span class="o">(</span><span class="s1">&#39;db_service_user&#39;</span><span class="o">)</span><span class="sb">`</span> to <span class="k">return</span> true, got <span class="nb">false</span>
  <span class="c1"># /var/chef/cache/cookbooks/grantmc/recipes/default.rb:49:in &#39;block (3 levels) in from_file&#39;</span>

6<span class="o">)</span> Audit Mode mysql config file should exist with correct permissions
  Failure/Error: expect<span class="o">(</span>config_file<span class="o">)</span>.to be_file
    expected <span class="sb">`</span>File <span class="s1">&#39;/etc/mysql/my.cnf&#39;</span>.file?<span class="sb">`</span> to <span class="k">return</span> true, got <span class="nb">false</span>
  <span class="c1"># /var/chef/cache/cookbooks/grantmc/recipes/default.rb:56:in &#39;block (3 levels) in from_file&#39;</span>

7<span class="o">)</span> Audit Mode mysql config file should contain required configuration
  Failure/Error: expect<span class="o">(</span>config_file.content<span class="o">)</span>.to match<span class="o">(</span>/default-time-zone<span class="o">=</span><span class="s1">&#39;UTC&#39;</span>/<span class="o">)</span>
    expected <span class="s1">&#39;-n\n&#39;</span> to match /default-time-zone<span class="o">=</span><span class="s1">&#39;UTC&#39;</span>/
    Diff:
    @@ -1,2 +1,2 @@
    -/default-time-zone<span class="o">=</span><span class="s1">&#39;UTC&#39;</span>/
    +-n
  <span class="c1"># /var/chef/cache/cookbooks/grantmc/recipes/default.rb:60:in &#39;block (3 levels) in from_file&#39;</span>

Finished in 0.5745 seconds <span class="o">(</span>files took 0.46481 seconds to load<span class="o">)</span>
<span class="m">8</span> examples, <span class="m">7</span> failures

Failed examples:

rspec /var/chef/cache/cookbooks/grantmc/recipes/default.rb:21 <span class="c1"># Audit Mode mysql package should be installed</span>
rspec /var/chef/cache/cookbooks/grantmc/recipes/default.rb:34 <span class="c1"># Audit Mode mysql service should be enabled</span>
rspec /var/chef/cache/cookbooks/grantmc/recipes/default.rb:37 <span class="c1"># Audit Mode mysql service should be running</span>
rspec /var/chef/cache/cookbooks/grantmc/recipes/default.rb:44 <span class="c1"># Audit Mode mysql config directory should exist with correct permissions</span>
rspec /var/chef/cache/cookbooks/grantmc/recipes/default.rb:48 <span class="c1"># Audit Mode mysql config directory should be owned by the db user</span>
rspec /var/chef/cache/cookbooks/grantmc/recipes/default.rb:55 <span class="c1"># Audit Mode mysql config file should exist with correct permissions</span>
rspec /var/chef/cache/cookbooks/grantmc/recipes/default.rb:59 <span class="c1"># Audit Mode mysql config file should contain required configuration</span>
Auditing <span class="nb">complete</span>
</pre></div>
</div>
<p><strong>Duplicate control_group names</strong></p>
<p>If two <tt class="docutils literal"><span class="pre">control_group</span></tt> blocks have the same name, the chef-client will raise an exception. For example, the following <tt class="docutils literal"><span class="pre">control_group</span></tt> blocks exist in different cookbooks:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">control_group</span> <span class="s1">&#39;basic control group&#39;</span> <span class="k">do</span>
  <span class="n">it</span> <span class="s1">&#39;should pass&#39;</span> <span class="k">do</span>
    <span class="n">expect</span><span class="p">(</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">control_group</span> <span class="s1">&#39;basic control group&#39;</span> <span class="k">do</span>
  <span class="n">it</span> <span class="s1">&#39;should pass&#39;</span> <span class="k">do</span>
    <span class="n">expect</span><span class="p">(</span><span class="mi">3</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">eq</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>Because the two <tt class="docutils literal"><span class="pre">control_group</span></tt> block names are identical, the chef-client will return an exception similar to:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="no">Synchronizing</span> <span class="ss">Cookbooks</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">audit_test</span>
<span class="no">Compiling</span> <span class="no">Cookbooks</span><span class="o">...</span>

<span class="o">================================================================================</span>
<span class="no">Recipe</span> <span class="no">Compile</span> <span class="no">Error</span> <span class="k">in</span> <span class="sr">/Users/</span><span class="n">grantmc</span><span class="o">/.</span><span class="n">cache</span><span class="o">/</span><span class="n">chef</span><span class="o">/</span><span class="n">cache</span><span class="o">/</span><span class="n">cookbooks</span>
                        <span class="sr">/audit_test/</span><span class="n">recipes</span><span class="o">/</span><span class="n">error_duplicate_control_groups</span><span class="o">.</span><span class="n">rb</span>
<span class="o">================================================================================</span>

<span class="no">Chef</span><span class="o">::</span><span class="no">Exceptions</span><span class="o">::</span><span class="no">AuditControlGroupDuplicate</span>
<span class="o">--------------------------------------------</span>
<span class="no">Audit</span> <span class="n">control</span> <span class="n">group</span> <span class="n">with</span> <span class="nb">name</span> <span class="s1">&#39;basic control group&#39;</span> <span class="n">has</span> <span class="n">already</span> <span class="n">been</span> <span class="n">defined</span>

<span class="no">Cookbook</span> <span class="ss">Trace</span><span class="p">:</span>
<span class="o">---------------</span>
<span class="sr">/Users/</span><span class="n">grantmc</span><span class="o">/.</span><span class="n">cache</span><span class="o">/</span><span class="n">chef</span><span class="o">/</span><span class="n">cache</span><span class="o">/</span><span class="n">cookbooks</span>
<span class="sr">/audit_test/</span><span class="n">recipes</span><span class="o">/</span><span class="n">error_duplicate_control_groups</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">13</span><span class="ss">:in</span> <span class="s1">&#39;from_file&#39;</span>

<span class="no">Relevant</span> <span class="no">File</span> <span class="ss">Content</span><span class="p">:</span>
<span class="o">----------------------</span>
<span class="sr">/Users/</span><span class="n">grantmc</span><span class="o">/.</span><span class="n">cache</span><span class="o">/</span><span class="n">chef</span><span class="o">/</span><span class="n">cache</span><span class="o">/</span><span class="n">cookbooks</span><span class="o">/</span><span class="n">audit_test</span><span class="o">/</span><span class="n">recipes</span><span class="o">/</span><span class="n">error_duplicate_control_groups</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span>

<span class="n">control_group</span> <span class="s1">&#39;basic control group&#39;</span> <span class="k">do</span>
  <span class="n">it</span> <span class="s1">&#39;should pass&#39;</span> <span class="k">do</span>
    <span class="n">expect</span><span class="p">(</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">control_group</span> <span class="s1">&#39;basic control group&#39;</span> <span class="k">do</span>
  <span class="n">it</span> <span class="s1">&#39;should pass&#39;</span> <span class="k">do</span>
    <span class="n">expect</span><span class="p">(</span><span class="mi">3</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">eq</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="no">Running</span> <span class="ss">handlers</span><span class="p">:</span>
<span class="o">[</span><span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mi">15</span><span class="ss">T09</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">14</span><span class="o">-</span><span class="mi">08</span><span class="p">:</span><span class="mo">00</span><span class="o">]</span> <span class="ss">ERROR</span><span class="p">:</span> <span class="no">Running</span> <span class="n">exception</span> <span class="n">handlers</span>
<span class="no">Running</span> <span class="n">handlers</span> <span class="n">complete</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="oc-id-service">
<h3><strong>oc-id</strong> Service<a class="headerlink" href="#oc-id-service" title="Permalink to this headline">¶</a></h3>
<p>The <strong>oc-id</strong> service enables OAuth 2.0 authentication to the Chef server by external applications, including Chef Supermarket and Chef Analytics. OAuth 2.0 uses token-based authentication, where external applications use tokens that are issued by the <strong>oc-id</strong> provider. No special credentials&#8212;<tt class="docutils literal"><span class="pre">webui_priv.pem</span></tt> or privileged keys&#8212;are stored on the external application.</p>
<dl class="docutils">
<dt>These settings are configured in the</dt>
<dd>chef-server.rb file.</dd>
</dl>
</div>
<div class="section" id="knife-analytics">
<h3>knife analytics<a class="headerlink" href="#knife-analytics" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">analytics</span></tt> subcommand to view information about actions, audits, notifications, and rules that are managed by Chef Analytics.</p>
<div class="section" id="action-list">
<h4>action list<a class="headerlink" href="#action-list" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">action</span> <span class="pre">list</span></tt> argument to view a list of actions on the Chef Analytics server for the specified dates and times.</p>
<p><strong>Syntax</strong></p>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife action list
</pre></div>
</div>
<p><strong>Options</strong></p>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--analytics-server-url</span> <span class="pre">HOST</span></tt></dt>
<dd>The URL of the server on which Chef Analytics is running, including the organization name. For example: <tt class="docutils literal"><span class="pre">https://analytics.chef.io/org-name</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-b</span> <span class="pre">TIME</span></tt>, <tt class="docutils literal"><span class="pre">--before</span> <span class="pre">TIME</span></tt></dt>
<dd>The time before which data is returned.</dd>
<dt><tt class="docutils literal"><span class="pre">--identity-server-url</span> <span class="pre">HOST</span></tt></dt>
<dd>The URL of the server on which the <strong>oc-id</strong> service is running. The <strong>oc-id</strong> service is used by Chef Analytics when communicating with the Chef server.</dd>
<dt><tt class="docutils literal"><span class="pre">-p</span> <span class="pre">N</span></tt>, <tt class="docutils literal"><span class="pre">--page</span> <span class="pre">N</span></tt></dt>
<dd>The number of pages to be returned. Default value: <tt class="docutils literal"><span class="pre">1</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-s</span> <span class="pre">TIME</span></tt>, <tt class="docutils literal"><span class="pre">--since</span> <span class="pre">TIME</span></tt></dt>
<dd>The time after which data is returned.</dd>
</dl>
</div>
<div class="section" id="action-show">
<h4>action show<a class="headerlink" href="#action-show" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">action</span> <span class="pre">show</span></tt> argument to view the specified action.</p>
<p><strong>Syntax</strong></p>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife action show ID
</pre></div>
</div>
<p><strong>Options</strong></p>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--analytics-server-url</span> <span class="pre">HOST</span></tt></dt>
<dd>The URL of the server on which Chef Analytics is running, including the organization name. For example: <tt class="docutils literal"><span class="pre">https://analytics.chef.io/org-name</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--identity-server-url</span> <span class="pre">HOST</span></tt></dt>
<dd>The URL of the server on which the <strong>oc-id</strong> service is running. The <strong>oc-id</strong> service is used by Chef Analytics when communicating with the Chef server.</dd>
</dl>
</div>
<div class="section" id="alert-list">
<h4>alert list<a class="headerlink" href="#alert-list" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">alert</span> <span class="pre">list</span></tt> argument to view a list of alerts on the Chef Analytics server for the specified dates and times.</p>
<p><strong>Syntax</strong></p>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife alert list
</pre></div>
</div>
<p><strong>Options</strong></p>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--analytics-server-url</span> <span class="pre">HOST</span></tt></dt>
<dd>The URL of the server on which Chef Analytics is running, including the organization name. For example: <tt class="docutils literal"><span class="pre">https://analytics.chef.io/org-name</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-b</span> <span class="pre">TIME</span></tt>, <tt class="docutils literal"><span class="pre">--before</span> <span class="pre">TIME</span></tt></dt>
<dd>The time before which data is returned.</dd>
<dt><tt class="docutils literal"><span class="pre">--identity-server-url</span> <span class="pre">HOST</span></tt></dt>
<dd>The URL of the server on which the <strong>oc-id</strong> service is running. The <strong>oc-id</strong> service is used by Chef Analytics when communicating with the Chef server.</dd>
<dt><tt class="docutils literal"><span class="pre">-p</span> <span class="pre">N</span></tt>, <tt class="docutils literal"><span class="pre">--page</span> <span class="pre">N</span></tt></dt>
<dd>The number of pages to be returned. Default value: <tt class="docutils literal"><span class="pre">1</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-s</span> <span class="pre">TIME</span></tt>, <tt class="docutils literal"><span class="pre">--since</span> <span class="pre">TIME</span></tt></dt>
<dd>The time after which data is returned.</dd>
</dl>
</div>
<div class="section" id="alert-show">
<h4>alert show<a class="headerlink" href="#alert-show" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">alert</span> <span class="pre">show</span></tt> argument to view the specified alert.</p>
<p><strong>Syntax</strong></p>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife alert show ID
</pre></div>
</div>
<p><strong>Options</strong></p>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--analytics-server-url</span> <span class="pre">HOST</span></tt></dt>
<dd>The URL of the server on which Chef Analytics is running, including the organization name. For example: <tt class="docutils literal"><span class="pre">https://analytics.chef.io/org-name</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--identity-server-url</span> <span class="pre">HOST</span></tt></dt>
<dd>The URL of the server on which the <strong>oc-id</strong> service is running. The <strong>oc-id</strong> service is used by Chef Analytics when communicating with the Chef server.</dd>
</dl>
</div>
<div class="section" id="notification-list">
<h4>notification list<a class="headerlink" href="#notification-list" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">notification</span> <span class="pre">list</span></tt> argument to view a list of notifications on the Chef Analytics server for the specified dates and times.</p>
<p><strong>Syntax</strong></p>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife notification list
</pre></div>
</div>
<p><strong>Options</strong></p>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--analytics-server-url</span> <span class="pre">HOST</span></tt></dt>
<dd>The URL of the server on which Chef Analytics is running, including the organization name. For example: <tt class="docutils literal"><span class="pre">https://analytics.chef.io/org-name</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-b</span> <span class="pre">TIME</span></tt>, <tt class="docutils literal"><span class="pre">--before</span> <span class="pre">TIME</span></tt></dt>
<dd>The time before which data is returned.</dd>
<dt><tt class="docutils literal"><span class="pre">--identity-server-url</span> <span class="pre">HOST</span></tt></dt>
<dd>The URL of the server on which the <strong>oc-id</strong> service is running. The <strong>oc-id</strong> service is used by Chef Analytics when communicating with the Chef server.</dd>
<dt><tt class="docutils literal"><span class="pre">-p</span> <span class="pre">N</span></tt>, <tt class="docutils literal"><span class="pre">--page</span> <span class="pre">N</span></tt></dt>
<dd>The number of pages to be returned. Default value: <tt class="docutils literal"><span class="pre">1</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-s</span> <span class="pre">TIME</span></tt>, <tt class="docutils literal"><span class="pre">--since</span> <span class="pre">TIME</span></tt></dt>
<dd>The time after which data is returned.</dd>
</dl>
</div>
<div class="section" id="notification-show">
<h4>notification show<a class="headerlink" href="#notification-show" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">notification</span> <span class="pre">show</span></tt> argument to view the specified notification.</p>
<p><strong>Syntax</strong></p>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife notification show ID
</pre></div>
</div>
<p><strong>Options</strong></p>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--analytics-server-url</span> <span class="pre">HOST</span></tt></dt>
<dd>The URL of the server on which Chef Analytics is running.</dd>
<dt><tt class="docutils literal"><span class="pre">--identity-server-url</span> <span class="pre">HOST</span></tt></dt>
<dd>The URL of the server on which the <strong>oc-id</strong> service is running. The <strong>oc-id</strong> service is used by Chef Analytics when communicating with the Chef server.</dd>
</dl>
</div>
<div class="section" id="rule-list">
<h4>rule list<a class="headerlink" href="#rule-list" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">rule</span> <span class="pre">list</span></tt> argument to view a list of rules on the Chef Analytics server for the specified dates and times.</p>
<p><strong>Syntax</strong></p>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife rule list
</pre></div>
</div>
<p><strong>Options</strong></p>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--analytics-server-url</span> <span class="pre">HOST</span></tt></dt>
<dd>The URL of the server on which Chef Analytics is running.</dd>
<dt><tt class="docutils literal"><span class="pre">-b</span> <span class="pre">TIME</span></tt>, <tt class="docutils literal"><span class="pre">--before</span> <span class="pre">TIME</span></tt></dt>
<dd>The time before which data is returned.</dd>
<dt><tt class="docutils literal"><span class="pre">--identity-server-url</span> <span class="pre">HOST</span></tt></dt>
<dd>The URL of the server on which the <strong>oc-id</strong> service is running. The <strong>oc-id</strong> service is used by Chef Analytics when communicating with the Chef server.</dd>
<dt><tt class="docutils literal"><span class="pre">-p</span> <span class="pre">N</span></tt>, <tt class="docutils literal"><span class="pre">--page</span> <span class="pre">N</span></tt></dt>
<dd>The number of pages to be returned. Default value: <tt class="docutils literal"><span class="pre">1</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-s</span> <span class="pre">TIME</span></tt>, <tt class="docutils literal"><span class="pre">--since</span> <span class="pre">TIME</span></tt></dt>
<dd>The time after which data is returned.</dd>
</dl>
</div>
<div class="section" id="rule-show">
<h4>rule show<a class="headerlink" href="#rule-show" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">rule</span> <span class="pre">show</span></tt> argument to view the specified rule.</p>
<p><strong>Syntax</strong></p>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife rule show ID
</pre></div>
</div>
<p><strong>Options</strong></p>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--analytics-server-url</span> <span class="pre">HOST</span></tt></dt>
<dd>The URL of the server on which Chef Analytics is running.</dd>
<dt><tt class="docutils literal"><span class="pre">--identity-server-url</span> <span class="pre">HOST</span></tt></dt>
<dd>The URL of the server on which the <strong>oc-id</strong> service is running. The <strong>oc-id</strong> service is used by Chef Analytics when communicating with the Chef server.</dd>
</dl>
</div>
</div>
</div>
</div>


          </div>


          <div class="footer" role="contentinfo">
                &copy; Copyright: This work is licensed under a Creative Commons Attribution 3.0 Unported License.
              This page is about: current version of Chef.
            <a href="/feedback.html">Provide feedback on Chef documentation</a>.
            </div>

<!-- Start of Async Google Analytics Code -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-6369228-7', 'auto', {'legacyCookieDomain': '.chef.io', 'allowLinker': true});
  ga('send', 'pageview');

  var trackOutboundLink = function(url) {
    if (ga.q) {
     document.location = url;
    } else {
      ga('send', 'event', 'outbound', 'click', url, {'hitCallback':
        function () {
          document.location = url;
        }
      });
    }
  };
</script>
<!-- End of Async Google Analytics Code -->

<!-- Start of Marketo Analytics Code -->
<script type="text/javascript">
(function() {
  var didInit = false;
  function initMunchkin() {
    if(didInit === false) {
      didInit = true;
      Munchkin.init('255-VFB-268');
    }
  }
  var s = document.createElement('script');
  s.type = 'text/javascript';
  s.async = true;
  s.src = document.location.protocol + '//munchkin.marketo.net/munchkin.js';
  s.onreadystatechange = function() {
    if (this.readyState == 'complete' || this.readyState == 'loaded') {
      initMunchkin();
    }
  };
  s.onload = initMunchkin;
  document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>
<!-- End of Marketo Analytics Code -->

<!-- Start of DemandBase Analytics Code -->
<script type="text/javascript">
	(function(d,b,a,s,e){ var t = b.createElement(a),
		fs = b.getElementsByTagName(a)[0]; t.async=1; t.id=e;
		t.src=('https:'==document.location.protocol ? 'https://' : 'http://') + s;
		fs.parentNode.insertBefore(t, fs); })
	(window,document,'script','scripts.demandbase.com/zH7sZrWR.min.js','demandbase_js_lib');
</script>
<!-- End of DemandBase Analytics Code -->

<!-- Start of Segment Analytics Code -->
<script type="text/javascript">
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="4.0.0";
  analytics.load("RtyoRfLf1ZETiJcIfkKND3Wq1K1LhYHx");
  analytics.page();
  }}();
</script>
<!-- End of Segment Analytics Code -->


        </div>
      </div>

      <div class="clearer"></div>
    </div>

  </div>
  </body>
</html>