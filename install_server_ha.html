<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    
    <title>High Availability: Backend Cluster &mdash; Chef Docs</title>
    <link rel="stylesheet" href="_static/chefv2.css" type="text/css" />
<link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
    URL_ROOT:    './',
    VERSION:     '',
    COLLAPSE_INDEX: false,
    FILE_SUFFIX: '.html',
    HAS_SOURCE:  true
  };
</script>
<script type="text/javascript" src="_static/jquery.js"></script>
<script type="text/javascript" src="_static/underscore.js"></script>
<script type="text/javascript" src="_static/doctools.js"></script>
<script type="text/javascript" src="_static/script.js"></script>

    <link rel="top" title="Chef Docs" href="index.html" />
    <link rel="next" title="High Availability: AWS (DEPRECATED)" href="install_server_ha_aws.html" />
    <link rel="prev" title="Install the Chef Server" href="install_server.html" /> 
  </head>
  <body role="document">
    <div class="body-wrap">

  <nav class="nav-main" role="navigation" data-topbar>
    <div class="nav-inner">
      <div class="left">
        <h1>
          <a href="https://learn.chef.io">
            <span>Learn Chef</span>
          </a>
        </h1>
      </div>

      <i id="nav-icon" class="fa fa-bars"></i>
      <a href="https://www.chef.io/">
        <img id="logo" src="_static/chef_logo_v2.svg" onerror="_static/chef_logo_v2.png"/>
      </a>

      <ul class="nav-links links-main">
        <li class="nav-link">
          <a href="https://learn.chef.io/tutorials">Tutorials</a>
        </li>
        <li class="nav-link">
          <a href="https://learn.chef.io/skills/">Skills Library</a>
        </li>
        <li class="nav-link is-active">
          <a href="https://docs.chef.io/">Docs</a>
        </li>
        <li class="nav-link">
          <a href="https://www.chef.io/training/">Training</a>
        </li>
      </ul>
    </div>
  </nav>





    <div class="document chef-docs">
    <nav class="nav-docs">
  <ul class="nav-docs-items" id="nav-docs-list">
    <li class="main-item dark-item docs-search">
      <form action="/search.html" method="get">
        <input type="text" placeholder="Search" id="docs-search" name="q">
        <input type="submit" class="submit-button" value="">
        <i class="fa fa-search icon-search"></i>
      </form>
   

    </li>
    
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Overview"> <!-- else item does not have custom image and should use FontAwesome icon -->

        <i class="fa fa-home icon-left"></i> Overview <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items"> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/platform_overview.html" title="Platform Overview">
            Platform Overview
          </a>
        </li>

         <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Community">
            Community
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/community.html" title="About the Community">
                About the Community
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/community_contributions.html" title="Contributing">
                Contributing
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/community_guidelines.html" title="Guidelines">
                Guidelines
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/style_guide.html" title="Docs Style Guide">
                Docs Style Guide
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Packages &amp; Platforms">
            Packages &amp; Platforms
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/packages.html" title="Packages">
                Packages
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/platforms.html" title="Platforms">
                Platforms
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_omnitruck.html" title="Omnitruck API">
                Omnitruck API
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_license.html" title="Licensing">
                Licensing
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Chef"> <!-- else item does not have custom image and should use FontAwesome icon -->

        <i class="fa fa-tasks icon-left"></i> Chef <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items">

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Getting Started">
            Getting Started
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_overview.html" title="Chef Overview">
                Chef Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/quick_start.html" title="Quick Start">
                Quick Start
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_system_requirements.html" title="System Requirements">
                System Requirements
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Release Notes">
                Release Notes
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/release_notes.html" title="Chef Client">
                    Chef Client
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/release_notes_chefdk.html" title="Chef Development Kit">
                    Chef Development Kit
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/release_notes_server.html" title="Chef Server">
                    Chef Server
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/release_notes_push_jobs.html" title="Chef Push Jobs">
                    Chef Push Jobs
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/release_notes_ohai.html" title="Ohai">
                    Ohai
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_deprecations_client.html" title="Deprecations">
                Deprecations
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Tutorials">
            Tutorials
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/learn-the-basics/" title="Learn the Basics">
                Learn the Basics
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/manage-a-node/" title="Manage a Node">
                Manage a Node
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/local-development/" title="Get started with Test Kitchen">
                Get started with Test Kitchen
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/manage-a-web-app/" title="Develop a web app cookbook">
                Develop a web app cookbook
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/inspec/" title="Verify with InSpec">
                Verify with InSpec
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/chefspec/" title="Unit test with ChefSpec">
                Unit test with ChefSpec
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/verify-style/" title="Verify code style">
                Verify code style
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/refactor-web-app-cookbook/" title="Refactor the web app cookbook">
                Refactor the web app cookbook
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Concepts">
            Concepts
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/workstation.html" title="Workstation">
                Workstation
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_repo.html" title="chef-repo">
                chef-repo
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/nodes.html" title="Nodes">
                Nodes
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_client.html" title="chef-client">
                chef-client
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_components.html" title="Server">
                Server
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_search.html" title="Search">
                Search
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/cookbooks.html" title="Cookbooks">
                Cookbooks
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/handlers.html" title="Handlers">
                Handlers
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/manage.html" title="Management Console">
                Management Console
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Policy">
                Policy
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/policy.html" title="About Policy">
                    About Policy
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/data_bags.html" title="Data Bags">
                    Data Bags
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/environments.html" title="Environments">
                    Environments
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/roles.html" title="Roles">
                    Roles
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/push_jobs.html" title="Push Jobs">
                Push Jobs
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/run_lists.html" title="Run-lists">
                Run-lists
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Security">
                Security
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/auth.html#authentication" title="Authentication">
                    Authentication
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/auth.html#authorization" title="Authorization">
                    Authorization
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/chef_private_keys.html" title="Private Keys">
                    Private Keys
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef_client.html#run-in-fips-mode" title="FIPS-mode">
                    FIPS-mode
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Supermarket">
                Supermarket
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/supermarket.html#public-supermarket" title="Public Supermarket">
                    Public Supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/supermarket.html#private-supermarket" title="Private Supermarket">
                    Private Supermarket
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/windows.html" title="Microsoft Windows">
                Microsoft Windows
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Appendix">
                Appendix
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/environment_variables.html" title="Env Variables">
                    Env Variables
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/errors.html" title="Troubleshooting">
                    Troubleshooting
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/glossary.html" title="Glossary">
                    Glossary
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Setup">
            Setup
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/proxies.html" title="Proxies">
                Proxies
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_dk.html" title="Workstation">
                Workstation
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Nodes">
                Nodes
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/install_bootstrap.html" title="Install via Bootstrap">
                    Install via Bootstrap
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_omnibus.html" title="Install via URL">
                    Install via URL
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_windows.html" title="Install on Windows">
                    Install on Windows
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/junos.html" title="Install on Junos OS">
                    Install on Junos OS
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef_client.html" title="chef-client (executable)">
                    chef-client (executable)
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_client.html" title="client.rb">
                    client.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/upgrade_client.html" title="Upgrades">
                    Upgrades
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/chef_client_security.html" title="Security">
                    Security
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Server">
                Server
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="https://manage.chef.io/signup" title="Hosted Chef Server">
                    Hosted Chef Server
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_server.html#standalone" title="Install Standalone">
                    Install Standalone
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_server_ha.html" title="Install High Availability">
                    Install High Availability
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/aws_marketplace.html" title="AWS Marketplace">
                    AWS Marketplace
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/azure_portal.html" title="Microsoft Azure">
                    Microsoft Azure
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/openstack.html" title="Openstack">
                    Openstack
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Supermarket">
                Supermarket
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="https://supermarket.chef.io" title="Public Supermarket">
                    Public Supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_supermarket.html" title="Install Private Supermarket">
                    Install Private Supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_supermarket.html#customize-supermarket" title="Customize Supermarket">
                    Customize Supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_supermarket.html#run-supermarket-in-kitchen" title="Run in Test Kitchen">
                    Run in Test Kitchen
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_server.html#install" title="Management Console">
                Management Console
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_push_jobs.html" title="Push Jobs">
                Push Jobs
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Integrations">
                Integrations
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/integrate_compliance_chef_server.html" title="w/Chef Compliance">
                    w/Chef Compliance
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/uninstall.html" title="Uninstall">
                Uninstall
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Cookbook Reference">
            Cookbook Reference
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/cookbooks.html" title="About Cookbooks">
                About Cookbooks
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/attributes.html" title="Attributes">
                Attributes
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/definitions.html" title="Definitions">
                Definitions
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/files.html" title="Files">
                Files
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/libraries.html" title="Libraries">
                Libraries
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Recipes">
                Recipes
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/recipes.html" title="About Recipes">
                    About Recipes
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/debug.html" title="Debug Recipes, Client Runs">
                    Debug Recipes, Client Runs
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Recipe DSL">
                Recipe DSL
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#attribute" title="attribute?">
                    attribute?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#control" title="control">
                    control
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#control-group" title="control_group">
                    control_group
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#cookbook-name" title="cookbook_name">
                    cookbook_name
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#data-bag" title="data_bag">
                    data_bag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#data-bag-item" title="data_bag_item">
                    data_bag_item
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#platform" title="platform?">
                    platform?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#platform-family" title="platform_family?">
                    platform_family?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#reboot-pending" title="reboot_pending?">
                    reboot_pending?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#recipe-name" title="recipe_name">
                    recipe_name
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-data-exists" title="registry_data_exists?">
                    registry_data_exists?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-get-subkeys" title="registry_get_subkeys">
                    registry_get_subkeys
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-get-values" title="registry_get_values">
                    registry_get_values
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-has-subkeys" title="registry_has_subkeys?">
                    registry_has_subkeys?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-key-exists" title="registry_key_exists?">
                    registry_key_exists?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-value-exists" title="registry_value_exists?">
                    registry_value_exists?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#resources" title="resources">
                    resources
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#search" title="search">
                    search
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#shell-out" title="shell_out">
                    shell_out
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#shell-out-bang" title="shell_out!">
                    shell_out!
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#shell-out-with-systems-locale" title="shell_out_with_systems_locale">
                    shell_out_with_systems_locale
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#tag-tagged-untag" title="tag">
                    tag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#tag-tagged-untag" title="tagged?">
                    tagged?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#tag-tagged-untag" title="untag">
                    untag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#value-for-platform" title="value_for_platform">
                    value_for_platform
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#value-for-platform-family" title="value_for_platform_family">
                    value_for_platform_family
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#helpers" title="Windows Platform Helpers">
                    Windows Platform Helpers
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Resources">
                Resources
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/resource.html" title="About Resources">
                    About Resources
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_common.html" title="Common Functionality">
                    Common Functionality
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/custom_resources.html" title="Custom Resources">
                    Custom Resources
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resources.html" title="All Resources (Single Page)">
                    All Resources (Single Page)
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_apt_package.html" title="apt_package">
                    apt_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_apt_repository.html" title="apt_repository">
                    apt_repository
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_apt_update.html" title="apt_update">
                    apt_update
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_bash.html" title="bash">
                    bash
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_batch.html" title="batch">
                    batch
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_bff_package.html" title="bff_package">
                    bff_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_breakpoint.html" title="breakpoint">
                    breakpoint
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_cab_package.html" title="cab_package">
                    cab_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_gem.html" title="chef_gem">
                    chef_gem
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_acl.html" title="chef_acl">
                    chef_acl
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_client.html" title="chef_client">
                    chef_client
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_container.html" title="chef_container">
                    chef_container
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_data_bag_item.html" title="chef_data_bag_item">
                    chef_data_bag_item
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_data_bag.html" title="chef_data_bag">
                    chef_data_bag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_environment.html" title="chef_environment">
                    chef_environment
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_group.html" title="chef_group">
                    chef_group
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_handler.html" title="chef_handler">
                    chef_handler
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_mirror.html" title="chef_mirror">
                    chef_mirror
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_node.html" title="chef_node">
                    chef_node
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_organization.html" title="chef_organization">
                    chef_organization
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_role.html" title="chef_role">
                    chef_role
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_user.html" title="chef_user">
                    chef_user
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chocolatey_package.html" title="chocolatey_package">
                    chocolatey_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_cookbook_file.html" title="cookbook_file">
                    cookbook_file
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_cron.html" title="cron">
                    cron
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_csh.html" title="csh">
                    csh
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_deploy.html" title="deploy">
                    deploy
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_directory.html" title="directory">
                    directory
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_dpkg_package.html" title="dpkg_package">
                    dpkg_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_dsc_resource.html" title="dsc_resource">
                    dsc_resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_dsc_script.html" title="dsc_script">
                    dsc_script
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_easy_install_package.html" title="easy_install_package">
                    easy_install_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_env.html" title="env">
                    env
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_erlang_call.html" title="erl_call">
                    erl_call
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_execute.html" title="execute">
                    execute
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_file.html" title="file">
                    file
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_freebsd_package.html" title="freebsd_package">
                    freebsd_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_gem_package.html" title="gem_package">
                    gem_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_git.html" title="git">
                    git
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_group.html" title="group">
                    group
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_homebrew_package.html" title="homebrew_package">
                    homebrew_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_http_request.html" title="http_request">
                    http_request
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ifconfig.html" title="ifconfig">
                    ifconfig
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ips_package.html" title="ips_package">
                    ips_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ksh.html" title="ksh">
                    ksh
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_launchd.html" title="launchd">
                    launchd
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_link.html" title="link">
                    link
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_log.html" title="log">
                    log
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_macports_package.html" title="macports_package">
                    macports_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_mdadm.html" title="mdadm">
                    mdadm
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_mount.html" title="mount">
                    mount
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_msu_package.html" title="msu_package">
                    msu_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ohai.html" title="ohai">
                    ohai
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_openbsd_package.html" title="openbsd_package">
                    openbsd_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_osx_profile.html" title="osx_profile">
                    osx_profile
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_package.html" title="package">
                    package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_pacman_package.html" title="pacman_package">
                    pacman_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_paludis_package.html" title="paludis_package">
                    paludis_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_perl.html" title="perl">
                    perl
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_portage_package.html" title="portage_package">
                    portage_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_powershell_script.html" title="powershell_script">
                    powershell_script
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_private_key.html" title="private_key">
                    private_key
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_public_key.html" title="public_key">
                    public_key
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_python.html" title="python">
                    python
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_reboot.html" title="reboot">
                    reboot
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_registry_key.html" title="registry_key">
                    registry_key
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_remote_directory.html" title="remote_directory">
                    remote_directory
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_remote_file.html" title="remote_file">
                    remote_file
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_route.html" title="route">
                    route
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_rpm_package.html" title="rpm_package">
                    rpm_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ruby.html" title="ruby">
                    ruby
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ruby_block.html" title="ruby_block">
                    ruby_block
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_script.html" title="script">
                    script
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_service.html" title="service">
                    service
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_smartos_package.html" title="smartos_package">
                    smartos_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_solaris_package.html" title="solaris_package">
                    solaris_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_subversion.html" title="subversion">
                    subversion
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_systemd_unit.html" title="systemd_unit">
                    systemd_unit
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_template.html" title="template">
                    template
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_user.html" title="user">
                    user
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_windows_package.html" title="windows_package">
                    windows_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_windows_service.html" title="windows_service">
                    windows_service
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_yum.html" title="yum_package">
                    yum_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_yum_repository.html" title="yum_repository">
                    yum_repository
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_examples.html" title="Examples (by Resource)">
                    Examples (by Resource)
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/templates.html" title="Templates">
                Templates
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/cookbook_repo.html" title="Cookbook Repo">
                Cookbook Repo
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_metadata.html" title="metadata.rb">
                metadata.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/cookbook_versions.html" title="Cookbook Versions">
                Cookbook Versions
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ruby.html" title="Ruby">
                Ruby
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Chef DK">
            Chef DK
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/about_chefdk.html" title="About the ChefDK">
                About the ChefDK
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/berkshelf.html" title="Berkshelf">
                Berkshelf
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_apply.html" title="chef-apply (executable)">
                chef-apply (executable)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_shell.html" title="chef-shell (executable)">
                chef-shell (executable)
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="chef (executable)">
                chef (executable)
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-env" title="chef env">
                    chef env
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-exec" title="chef exec">
                    chef exec
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-gem" title="chef gem">
                    chef gem
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-app" title="chef generate app">
                    chef generate app
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-attribute" title="chef generate attribute">
                    chef generate attribute
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-cookbook" title="chef generate cookbook">
                    chef generate cookbook
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-file" title="chef generate file">
                    chef generate file
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-lwrp" title="chef generate lwrp">
                    chef generate lwrp
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-recipe" title="chef generate recipe">
                    chef generate recipe
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-repo" title="chef generate repo">
                    chef generate repo
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-template" title="chef generate template">
                    chef generate template
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-provision" title="chef provision">
                    chef provision
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-shell-init" title="chef shell-init">
                    chef shell-init
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-verify" title="chef verify">
                    chef verify
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Chef Solo">
                Chef Solo
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/chef_solo.html" title="About Chef Solo">
                    About Chef Solo
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef_solo.html" title="chef-solo (executable)">
                    chef-solo (executable)
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_solo.html" title="solo.rb">
                    solo.rb
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_shell.html" title="chef-shell (executable)">
                chef-shell (executable)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_client.html#run-in-local-mode" title="chef-zero (local mode)">
                chef-zero (local mode)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_vault.html" title="chef-vault">
                chef-vault
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chefspec.html" title="ChefSpec">
                ChefSpec
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Configuration">
                Configuration
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/config_rb.html" title="config.rb">
                    config.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_client.html#d-directories" title="Multiple Config Files">
                    Multiple Config Files
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/cookstyle.html" title="cookstyle">
                cookstyle
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_delivery.html" title="Delivery CLI">
                Delivery CLI
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/foodcritic.html" title="Foodcritic">
                Foodcritic
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Test Kitchen">
                Test Kitchen
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/kitchen.html" title="About Test Kitchen">
                    About Test Kitchen
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_kitchen.html" title="kitchen (executable)">
                    kitchen (executable)
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_yml_kitchen.html" title=".kitchen.yml">
                    .kitchen.yml
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_kitchen_vagrant.html" title="kitchen-vagrant">
                    kitchen-vagrant
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Knife">
                Knife
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/knife.html" title="About Knife">
                    About Knife
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_common_options.html" title="Common Options">
                    Common Options
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_using.html" title="Using Knife">
                    Using Knife
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_knife.html" title="knife.rb">
                    knife.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_bootstrap.html" title="knife bootstrap">
                    knife bootstrap
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_client.html" title="knife client">
                    knife client
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_configure.html" title="knife configure">
                    knife configure
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_cookbook.html" title="knife cookbook">
                    knife cookbook
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_cookbook_site.html" title="knife cookbook site">
                    knife cookbook site
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_data_bag.html" title="knife data bag">
                    knife data bag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_delete.html" title="knife delete">
                    knife delete
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_deps.html" title="knife deps">
                    knife deps
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_diff.html" title="knife diff">
                    knife diff
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_download.html" title="knife download">
                    knife download
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_edit.html" title="knife edit">
                    knife edit
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_environment.html" title="knife environment">
                    knife environment
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_exec.html" title="knife exec">
                    knife exec
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_list.html" title="knife list">
                    knife list
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_node.html" title="knife node">
                    knife node
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_raw.html" title="knife raw">
                    knife raw
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_recipe_list.html" title="knife recipe list">
                    knife recipe list
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_role.html" title="knife role">
                    knife role
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_search.html" title="knife search">
                    knife search
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_serve.html" title="knife serve">
                    knife serve
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_show.html" title="knife show">
                    knife show
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_ssh.html" title="knife ssh">
                    knife ssh
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_ssl_check.html" title="knife ssl_check">
                    knife ssl_check
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_ssl_fetch.html" title="knife ssl_fetch">
                    knife ssl_fetch
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_status.html" title="knife status">
                    knife status
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_tag.html" title="knife tag">
                    knife tag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_upload.html" title="knife upload">
                    knife upload
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_user.html" title="knife user">
                    knife user
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_xargs.html" title="knife xargs">
                    knife xargs
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="knife opc">
                knife opc
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html" title="About knife opc">
                    About knife opc
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#knife-rb-configuration" title="knife.rb Configuration">
                    knife.rb Configuration
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-list" title="opc user list">
                    opc user list
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-show" title="opc user show">
                    opc user show
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-create" title="opc user create">
                    opc user create
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-delete" title="opc user delete">
                    opc user delete
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-edit" title="opc user edit">
                    opc user edit
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-password" title="opc user password">
                    opc user password
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-list" title="opc org list">
                    opc org list
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-show" title="opc org show">
                    opc org show
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-create" title="opc org create">
                    opc org create
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-delete" title="opc org delete">
                    opc org delete
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-user-add" title="opc org user add">
                    opc org user add
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-user-remove" title="opc org user remove">
                    opc org user remove
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_knife_spork.html" title="knife spork">
                knife spork
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="knife supermarket">
                knife supermarket
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html" title="About knife supermarket">
                    About knife supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#download" title="supermarket download">
                    supermarket download
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#install" title="supermarket install">
                    supermarket install
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#list" title="supermarket list">
                    supermarket list
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#search" title="supermarket search">
                    supermarket search
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#share" title="supermarket share">
                    supermarket share
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#show" title="supermarket show">
                    supermarket show
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#unshare" title="supermarket unshare">
                    supermarket unshare
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Ohai">
                Ohai
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/ohai.html" title="About Ohai">
                    About Ohai
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_ohai.html" title="ohai (executable)">
                    ohai (executable)
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Policyfile">
                Policyfile
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/policyfile.html" title="About Policyfile">
                    About Policyfile
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_policyfile.html" title="Policyfile.rb">
                    Policyfile.rb
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Provisioning">
                Provisioning
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/provisioning.html" title="About Provisioning">
                    About Provisioning
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_load_balancer.html" title="load_balancer resource">
                    load_balancer resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_machine.html" title="machine resource">
                    machine resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_machine_batch.html" title="machine_batch resource">
                    machine_batch resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_machine_execute.html" title="machine_execute resource">
                    machine_execute resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_machine_file.html" title="machine_file resource">
                    machine_file resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_machine_image.html" title="machine_image resource">
                    machine_image resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/provisioning_aws.html" title="AWS Driver Resources">
                    AWS Driver Resources
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/provisioning_fog.html" title="Fog Driver Resources">
                    Fog Driver Resources
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/provisioning_vagrant.html" title="Vagrant Driver Resources">
                    Vagrant Driver Resources
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_push_jobs_client.html" title="push-jobs-client (executable)">
                push-jobs-client (executable)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/rubocop.html" title="Rubocop">
                Rubocop
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Managing the Server">
            Managing the Server
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/runbook.html" title="Runbook (Single Page)">
                Runbook (Single Page)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_backup_restore.html" title="Backup &amp; Restore">
                Backup &amp; Restore
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_data.html" title="Data Storage">
                Data Storage
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_firewalls_and_ports.html" title="Firewalls &amp; Ports">
                Firewalls &amp; Ports
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_ldap.html" title="Active Directory &amp; LDAP">
                Active Directory &amp; LDAP
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_logs.html" title="Log Files">
                Log Files
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_monitor.html" title="Monitor">
                Monitor
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_orgs.html" title="Organizations &amp; Groups">
                Organizations &amp; Groups
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/secrets.html" title="Secrets">
                Secrets
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_security.html" title="Security">
                Security
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_services.html" title="Services">
                Services
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_tuning.html" title="Tuning">
                Tuning
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/upgrade_server.html" title="Upgrades">
                Upgrades
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/upgrade_server_ha_v2.html" title="Upgrade HA Cluster">
                Upgrade HA Cluster
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_users.html" title="Users">
                Users
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_server.html" title="chef-server-ctl">
                chef-server-ctl
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_backend.html" title="chef-backend-ctl">
                chef-backend-ctl
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_server.html" title="chef-server.rb">
                chef-server.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_opscode_expander.html" title="opscode-expander-ctl">
                opscode-expander-ctl
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_chef_server.html" title="Chef Server API">
                Chef Server API
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Push Jobs">
                Push Jobs
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_push_jobs.html" title="knife push jobs">
                    knife push jobs
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_push_jobs_client.html" title="push-jobs-client">
                    push-jobs-client
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_push_jobs_client.html" title="push-jobs-client.rb">
                    push-jobs-client.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_push_jobs_server.html" title="push-jobs-server.rb">
                    push-jobs-server.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/api_push_jobs.html" title="Push Jobs API">
                    Push Jobs API
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_sent_events.html" title="Server Sent Events">
                    Server Sent Events
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Supermarket">
                Supermarket
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/supermarket_logs.html" title="Log Files">
                    Log Files
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/supermarket_monitor.html" title="Monitoring">
                    Monitoring
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_supermarket.html" title="supermarket.rb">
                    supermarket.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html" title="knife supermarket">
                    knife supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_supermarket.html" title="supermarket-ctl">
                    supermarket-ctl
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/supermarket_api.html" title="Supermarket API">
                    Supermarket API
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Management Console">
                Management Console
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/server_configure_saml.html" title="Configure SAML">
                    Configure SAML
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_clients.html" title="Clients">
                    Clients
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_cookbooks.html" title="Cookbooks">
                    Cookbooks
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_data_bags.html" title="Data Bags">
                    Data Bags
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_environments.html" title="Environments">
                    Environments
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_nodes.html" title="Nodes">
                    Nodes
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_roles.html" title="Roles">
                    Roles
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_users.html#chef-manage" title="Users">
                    Users
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_manage.html" title="manage.rb">
                    manage.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_manage.html" title="chef-manage-ctl">
                    chef-manage-ctl
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Habitat"> <!-- if item has custom image -->

        <img class="icon-left" src="./_static/habitat-mark.png"></img> Habitat <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items"> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/habitat.html" title="Habitat Overview">
            Habitat Overview
          </a>
        </li>

         <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Tutorials">
            Tutorials
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://www.habitat.sh/tutorials/getting-started-overview" title="Getting started">
                Getting started
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="InSpec"> <!-- if item has custom image -->

        <img class="icon-left" src="./_static/inspec_logo.png"></img> InSpec <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items"> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/inspec.html" title="InSpec Overview">
            InSpec Overview
          </a>
        </li>

         <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Chef Automate"> <!-- else item does not have custom image and should use FontAwesome icon -->

        <i class="fa fa-cogs icon-left"></i> Chef Automate <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items">

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Getting Started">
            Getting Started
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_automate.html" title="Chef Automate Overview">
                Chef Automate Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_chef_automate.html" title="Installation Guide">
                Installation Guide
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Tutorials">
            Tutorials
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/automate/install" title="Get Started">
                Get Started
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/automate/visibility" title="Visibility into Infrastructure">
                Visibility into Infrastructure
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/automate/deploy-cookbook/" title="Deploy with Chef Automate">
                Deploy with Chef Automate
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/compliance-assess" title="Assess for Compliance">
                Assess for Compliance
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/compliance-remediate" title="Remediate Compliance Failures">
                Remediate Compliance Failures
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Setup">
            Setup
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_pipeline.html" title="Configure a Pipeline">
                Configure a Pipeline
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_json_delivery.html" title="Configure a Project">
                Configure a Project
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/setup_visibility_chef_automate.html" title="Configure Data Collection">
                Configure Data Collection
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Concepts">
            Concepts
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2">

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Workflow">
                Workflow
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/workflow.html" title="Workflow Overview">
                    Workflow Overview
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/delivery_manage_dependencies.html" title="Manage Dependencies">
                    Manage Dependencies
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/visibility.html" title="Visibility Overview">
                Visibility Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/compliance.html" title="Compliance Overview">
                Compliance Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/ctl_delivery.html" title="Delivery CLI">
            Delivery CLI
          </a>
        </li>

         <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Integrations">
            Integrations
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_delivery_bitbucket.html" title="w/Bitbucket">
                w/Bitbucket
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_delivery_smtp.html" title="w/Email (SMTP)">
                w/Email (SMTP)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_delivery_github.html" title="w/GitHub">
                w/GitHub
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_delivery_ldap.html" title="w/LDAP">
                w/LDAP
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_chef_automate_saml.html" title="w/SAML">
                w/SAML
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_delivery_slack.html" title="w/Slack">
                w/Slack
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Cookbooks">
            Cookbooks
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_build_cookbook.html" title="build-cookbook (cookbook)">
                build-cookbook (cookbook)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_truck.html" title="delivery-truck (cookbook)">
                delivery-truck (cookbook)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/publish_cookbooks_multiple_servers.html" title="Publish to Multiple Chef Servers">
                Publish to Multiple Chef Servers
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/dsl_delivery.html" title="Workflow DSL">
            Workflow DSL
          </a>
        </li>

         <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/job_dispatch.html" title="Job Dispatch">
            Job Dispatch
          </a>
        </li>

         <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Managing the Server">
            Managing the Server
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2">

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Backups">
                Backups
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/delivery_server_backup.html#configuration" title="Configuration">
                    Configuration
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/delivery_server_backup.html#create-backups" title="Create Backups">
                    Create Backups
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/delivery_server_backup.html#list-backups" title="List Backups">
                    List Backups
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/delivery_server_backup.html#delete-backups" title="Delete Backups">
                    Delete Backups
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/delivery_server_backup.html#restore-backups" title="Restore Backups">
                    Restore Backups
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/scaling_capacity_planning_chef_automate.html" title="Capacity Planning">
                Capacity Planning
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_delivery.html" title="Chef Automate API">
                Chef Automate API
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="automate-ctl">
                automate-ctl
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#cleanse" title="cleanse">
                    cleanse
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#create-enterprise" title="create-enterprise">
                    create-enterprise
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#create-user" title="create-user">
                    create-user
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-application" title="delete-application">
                    delete-application
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-enterprise" title="delete-enterprise">
                    delete-enterprise
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-project" title="delete-project">
                    delete-project
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-user" title="delete-user">
                    delete-user
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-visibility-node" title="delete-visibility-node">
                    delete-visibility-node
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-visibility-node-by-id" title="delete-visibility-node-by-id">
                    delete-visibility-node-by-id
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#gather-logs" title="gather-logs">
                    gather-logs
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#help" title="help">
                    help
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#install-runner" title="install-runner">
                    install-runner
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#list-applications" title="list-applications">
                    list-applications
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#list-enterprises" title="list-enterprises">
                    list-enterprises
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#list-users" title="list-users">
                    list-users
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#migrate-change-description" title="migrate-change-description">
                    migrate-change-description
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#migrate-patchset-diffs" title="migrate-patchset-diffs">
                    migrate-patchset-diffs
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#preflight-check" title="preflight-check">
                    preflight-check
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#reconfigure" title="reconfigure">
                    reconfigure
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#rename-enterprise" title="rename-enterprise">
                    rename-enterprise
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#reset-password" title="reset-password">
                    reset-password
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#restore-backup" title="restore-backup">
                    restore-backup
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#revoke-token" title="revoke-token">
                    revoke-token
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#show-config" title="show-config">
                    show-config
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#uninstall" title="uninstall">
                    uninstall
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#update-project-hooks" title="update-project-hooks">
                    update-project-hooks
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_delivery.html" title="delivery.rb">
                delivery.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_server_disaster_recovery.html" title="Disaster Recovery">
                Disaster Recovery
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/elasticsearch_and_kibana_auth.html" title="Elasticsearch &amp; Kibana Auth">
                Elasticsearch &amp; Kibana Auth
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/manage_indices_chef_automate.html" title="Manage Elasticsearch Indices">
                Manage Elasticsearch Indices
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/search_query_chef_automate.html" title="Node Search Reference">
                Node Search Reference
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_manage_secrets.html" title="Secrets">
                Secrets
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/stream_data_chef_automate.html" title="Stream Data">
                Stream Data
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_server_tuning.html" title="Tuning">
                Tuning
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/upgrade_chef_automate.html" title="Upgrades">
                Upgrades
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_users_and_roles.html" title="Users &amp; Roles">
                Users &amp; Roles
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Compliance scanner">
            Compliance scanner
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/compliance.html" title="Overview">
                Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/release_notes_compliance.html" title="Release Notes">
                Release Notes
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_compliance.html" title="Installation Guide">
                Installation Guide
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_compliance_chef_server.html" title="Integrate w/Chef Server">
                Integrate w/Chef Server
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_compliance_chef_automate.html" title="Integrate w/Chef Automate">
                Integrate w/Chef Automate
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/upgrade_compliance.html" title="Upgrade Compliance">
                Upgrade Compliance
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_compliance.html" title="chef-compliance.rb">
                chef-compliance.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_compliance.html" title="Chef Compliance API">
                Chef Compliance API
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/aws_opsworks_chef_automate.html" title="AWS OpsWorks for Chef Automate">
            AWS OpsWorks for Chef Automate
          </a>
        </li>

         <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/troubleshooting_chef_automate.html" title="Troubleshooting">
            Troubleshooting
          </a>
        </li>

         <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Legacy"> <!-- else item does not have custom image and should use FontAwesome icon -->

        <i class="fa fa-hdd-o icon-left"></i> Legacy <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items">

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Analytics">
            Analytics
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics.html" title="Overview">
                Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/release_notes_analytics.html" title="Release Notes">
                Release Notes
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_analytics.html" title="Install Standalone">
                Install Standalone
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/actions.html" title="Web UI">
                Web UI
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics_webui_tasks.html" title="Management Console">
                Management Console
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics_nodes_view.html" title="Nodes View">
                Nodes View
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics.html#integrations" title="Integrations">
                Integrations
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics_splunk.html" title="Splunk">
                Splunk
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics_rules.html" title="Rules">
                Rules
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics_monitor.html" title="Monitor">
                Monitor
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/upgrade_analytics.html" title="Upgrades">
                Upgrades
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_client_analytics.html" title="Chef Client for Analytics">
                Chef Client for Analytics
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_analytics.html" title="opscode-analytics-ctl">
                opscode-analytics-ctl
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_analytics.html" title="opscode-analytics.rb">
                opscode-analytics.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_knife_analytics.html" title="knife-analytics">
                knife-analytics
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_analytics.html" title="Analytics API">
                Analytics API
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/dsl_recipe_analytics.html" title="Recipe DSL for Analytics">
                Recipe DSL for Analytics
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Reporting">
            Reporting
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/reporting.html" title="Overview">
                Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_reporting.html" title="Install Reporting">
                Install Reporting
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_manage_reports.html" title="View Reports">
                View Reports
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_knife_reporting.html" title="knife reporting">
                knife reporting
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_reporting.html" title="opscode-reporting-ctl">
                opscode-reporting-ctl
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_reporting.html" title="opscode-reporting.rb">
                opscode-reporting.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_reporting.html" title="Reporting API">
                Reporting API
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Extension APIs"> <!-- else item does not have custom image and should use FontAwesome icon -->

        <i class="fa fa-clone icon-left"></i> Extension APIs <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items"> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/dsl_compliance.html" title="Compliance DSL">
            Compliance DSL
          </a>
        </li>

         <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Handlers">
            Handlers
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/handlers.html#custom-handlers" title="Custom Handlers">
                Custom Handlers
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/dsl_handler.html" title="Handler DSL">
                Handler DSL
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_community.html#handlers" title="Community Handlers">
                Community Handlers
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Knife Plugins">
            Knife Plugins
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_knife.html" title="About Cloud Plugins">
                About Cloud Plugins
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_knife_custom.html" title="Custom Plugins">
                Custom Plugins
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_community.html#knife" title="Community Plugins">
                Community Plugins
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Ohai Plugins">
            Ohai Plugins
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ohai_custom.html" title="Custom Plugins">
                Custom Plugins
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_community.html#ohai" title="Community Plugins">
                Community Plugins
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/plugin_community.html#chef-client" title="Chef Client Plugins">
            Chef Client Plugins
          </a>
        </li>

         <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li> <!-- /for item in navItems -->
    
    <li class="main-item dark-item">
      <a href="https://github.com/chef/chef-web-docs" title="Available on GitHub">
        <i class="fa fa-github icon-left"></i>
        Available on GitHub
      </a>
    </li>
    <li class="main-item dark-item">
      <a href="https://www.chef.io/chef/get-chef">
        <i class="fa fa-download icon-left"></i>
        Get Chef
      </a>
    </li>
    <li class="main-item dark-item">
      <a href="https://docs.chef.io/feedback.html">
        <i class="fa fa-commenting icon-left"></i>
        Send Feedback
      </a>
    </li>
    <li class="main-item dark-item">
      <a href="https://www.chef.io/support/">
        <i class="fa fa-support icon-left"></i>
        Support
      </a>
    </li>
    <li class="main-item dark-item">
      <a href="https://docs.chef.io/index.html">
        <i class="fa fa-map-o icon-left"></i>
        Site Map
      </a>
    </li>
    <li class="main-item dark-item">
      <a href="https://docs-archive.chef.io/">
        <i class="fa fa-archive icon-left"></i>
        Archive
      </a>
    </li>
  </ul>
</nav>
      <div class="documentwrapper"><div class="sphinxsidebar" role="navigation" aria-label="main navigation">
  <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">High Availability: Backend Cluster</a><ul>
<li><a class="reference internal" href="#overview">Overview</a><ul>
<li><a class="reference internal" href="#key-differences-from-standalone-chef-server">Key Differences From Standalone Chef server</a></li>
</ul>
</li>
<li><a class="reference internal" href="#recommended-cluster-topology">Recommended Cluster Topology</a><ul>
<li><a class="reference internal" href="#nodes">Nodes</a></li>
<li><a class="reference internal" href="#network-services">Network Services</a></li>
<li><a class="reference internal" href="#network-port-requirements">Network Port Requirements</a><ul>
<li><a class="reference internal" href="#inbound-from-load-balancer-to-frontend-group">Inbound from load balancer to frontend group</a></li>
<li><a class="reference internal" href="#inbound-from-frontend-group-to-backend-cluster">Inbound from frontend group to backend cluster</a></li>
<li><a class="reference internal" href="#peer-communication-backend-cluster">Peer communication, backend cluster</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#installation">Installation</a><ul>
<li><a class="reference internal" href="#step-1-create-cluster">Step 1: Create Cluster</a></li>
<li><a class="reference internal" href="#step-2-shared-credentials">Step 2: Shared Credentials</a></li>
<li><a class="reference internal" href="#step-3-install-and-configure-remaining-backend-nodes">Step 3: Install and Configure remaining backend nodes</a></li>
<li><a class="reference internal" href="#step-4-generate-chef-server-configuration">Step 4: Generate Chef server Configuration</a></li>
<li><a class="reference internal" href="#step-5-install-and-configure-first-frontend">Step 5: Install and Configure First Frontend</a></li>
<li><a class="reference internal" href="#adding-more-frontends">Adding More Frontends</a></li>
<li><a class="reference internal" href="#upgrading-chef-server-on-the-frontend-machines">Upgrading chef-server on the frontend machines</a></li>
<li><a class="reference internal" href="#configuring-front-end-and-backend-members-on-different-networks">Configuring front end and backend members on different networks</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cluster-security-considerations">Cluster Security Considerations</a><ul>
<li><a class="reference internal" href="#communication-between-nodes">Communication Between Nodes</a></li>
<li><a class="reference internal" href="#communication-between-frontend-group-backend-cluster">Communication Between Frontend Group &amp; Backend Cluster</a></li>
<li><a class="reference internal" href="#securing-communication">Securing Communication</a></li>
<li><a class="reference internal" href="#services-and-secrets">Services and Secrets</a><ul>
<li><a class="reference internal" href="#chef-server-frontend">Chef Server Frontend</a></li>
</ul>
</li>
<li><a class="reference internal" href="#software-versions">Software Versions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#chef-backend-rb-options">chef-backend.rb options</a><ul>
<li><a class="reference internal" href="#common-runit-flags-for-any-backend-service">Common &#8216;Runit&#8217; flags for any backend service</a></li>
<li><a class="reference internal" href="#postgresql-settings">PostgreSQL settings</a></li>
<li><a class="reference internal" href="#postgresql-settings-given-to-postgresql-conf">PostgreSQL settings given to <tt class="docutils literal"><span class="pre">postgresql.conf</span></tt></a></li>
<li><a class="reference internal" href="#etcd-settings">etcd settings</a></li>
<li><a class="reference internal" href="#elastic-search-jvm-settings">Elastic Search JVM settings</a></li>
<li><a class="reference internal" href="#elastic-search-configuration">Elastic Search configuration</a></li>
<li><a class="reference internal" href="#chef-ha-backend-leader-management-service-settings">Chef HA backend leader management service settings</a></li>
<li><a class="reference internal" href="#chef-ha-backend-leader-health-status-settings">Chef HA backend leader health status settings</a></li>
<li><a class="reference internal" href="#chef-ha-backend-leader-connection-pool-settings">Chef HA backend leader connection pool settings</a></li>
<li><a class="reference internal" href="#ssl-settings">SSL settings</a></li>
</ul>
</li>
<li><a class="reference internal" href="#chef-backend-ctl">chef-backend-ctl</a><ul>
<li><a class="reference internal" href="#backup">backup</a><ul>
<li><a class="reference internal" href="#syntax">Syntax</a></li>
<li><a class="reference internal" href="#options">Options</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cleanse">cleanse</a><ul>
<li><a class="reference internal" href="#id1">Syntax</a></li>
<li><a class="reference internal" href="#id2">Options</a></li>
<li><a class="reference internal" href="#id3">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cluster-status">cluster-status</a><ul>
<li><a class="reference internal" href="#id4">Syntax</a></li>
<li><a class="reference internal" href="#id5">Options</a></li>
<li><a class="reference internal" href="#id6">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#create-cluster">create-cluster</a><ul>
<li><a class="reference internal" href="#id7">Syntax</a></li>
<li><a class="reference internal" href="#id8">Options</a></li>
<li><a class="reference internal" href="#id9">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#demote">demote</a><ul>
<li><a class="reference internal" href="#id10">Syntax</a></li>
<li><a class="reference internal" href="#id11">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#force-leader">force-leader</a><ul>
<li><a class="reference internal" href="#id12">Syntax</a></li>
<li><a class="reference internal" href="#id13">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#gather-logs">gather-logs</a></li>
<li><a class="reference internal" href="#gen-sample-backend-config">gen-sample-backend-config</a><ul>
<li><a class="reference internal" href="#id14">Syntax</a></li>
<li><a class="reference internal" href="#example-output">Example Output</a></li>
</ul>
</li>
<li><a class="reference internal" href="#gen-server-config">gen-server-config</a><ul>
<li><a class="reference internal" href="#id15">Syntax</a></li>
<li><a class="reference internal" href="#configure-the-frontend">Configure the Frontend</a></li>
<li><a class="reference internal" href="#id16">Example Output</a></li>
</ul>
</li>
<li><a class="reference internal" href="#help">help</a></li>
<li><a class="reference internal" href="#join-cluster">join-cluster</a><ul>
<li><a class="reference internal" href="#id17">Syntax</a></li>
<li><a class="reference internal" href="#id18">Options</a></li>
<li><a class="reference internal" href="#id19">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#promote">promote</a><ul>
<li><a class="reference internal" href="#id20">Syntax</a></li>
<li><a class="reference internal" href="#id21">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#reconfigure">reconfigure</a></li>
<li><a class="reference internal" href="#remove-node">remove-node</a><ul>
<li><a class="reference internal" href="#id22">Syntax</a></li>
<li><a class="reference internal" href="#id23">Options</a></li>
<li><a class="reference internal" href="#id24">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#restore">restore</a><ul>
<li><a class="reference internal" href="#id25">Syntax</a></li>
<li><a class="reference internal" href="#id26">Options</a></li>
<li><a class="reference internal" href="#id27">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#set-cluster-failover">set-cluster-failover</a><ul>
<li><a class="reference internal" href="#id28">Syntax</a></li>
</ul>
</li>
<li><a class="reference internal" href="#set-node-failover">set-node-failover</a><ul>
<li><a class="reference internal" href="#id29">Syntax</a></li>
</ul>
</li>
<li><a class="reference internal" href="#show-config">show-config</a></li>
<li><a class="reference internal" href="#status">status</a></li>
<li><a class="reference internal" href="#uninstall">uninstall</a></li>
<li><a class="reference internal" href="#service-subcommands">Service Subcommands</a><ul>
<li><a class="reference internal" href="#hup">hup</a></li>
<li><a class="reference internal" href="#int">int</a></li>
<li><a class="reference internal" href="#kill">kill</a></li>
<li><a class="reference internal" href="#once">once</a></li>
<li><a class="reference internal" href="#restart">restart</a></li>
<li><a class="reference internal" href="#service-list">service-list</a></li>
<li><a class="reference internal" href="#start">start</a></li>
<li><a class="reference internal" href="#stop">stop</a></li>
<li><a class="reference internal" href="#tail">tail</a></li>
<li><a class="reference internal" href="#term">term</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
</div>
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="high-availability-backend-cluster">
<h1>High Availability: Backend Cluster<a class="headerlink" href="#high-availability-backend-cluster" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://github.com/chef/chef-web-docs/blob/master/chef_master/source/install_server_ha.rst">[edit on GitHub]</a></p>
<a class="reference internal image-reference" href="_images/chef_automate_full.png"><img alt="_images/chef_automate_full.png" src="_images/chef_automate_full.png" style="width: 40px; height: 17px;" /></a>
<p>This topic introduces the underlying concepts behind the architecture
of the highly available Chef server cluster. The topic then
describes the setup and installation process for a highly available
Chef server cluster comprised of five nodes.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This feature is included as part of the Chef Automate license agreement and is <a class="reference external" href="https://www.chef.io/pricing/">available via subscription</a>.</p>
</div>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The Chef server can operate in a high availability configuration
that provides automated load balancing and failover for stateful
components in the system architecture. This type of configuration
typically splits the servers into two segments: The backend cluster,
and the frontend group.</p>
<ul class="simple">
<li>The frontend group, comprised of one (or more) nodes running the
Chef server. Nodes in the frontend group handle requests to the
Chef server API and access to the Chef management console. Frontend group
nodes should be load balanced, and may be scaled horizontally by
increasing the number of nodes available to handle requests.</li>
<li>The backend cluster, typically comprised of three nodes working
together, provides highly available data persistence for the
frontend group.</li>
</ul>
<img src="_images/chef_server_ha_cluster.svg" /><div class="section" id="key-differences-from-standalone-chef-server">
<h3>Key Differences From Standalone Chef server<a class="headerlink" href="#key-differences-from-standalone-chef-server" title="Permalink to this headline">¶</a></h3>
<p>There are several key differences between the highly available Chef server cluster and a standalone Chef server instance.</p>
<ul class="simple">
<li>While Apache Solr is used in standalone Chef server instances,
in the highly available Chef server cluster it is replaced with
Elasticsearch. Elasticsearch provides more flexible clustering
options while maintaining search API compatibility with Apache Solr.</li>
<li>Writes to the search engine and the database are handled
asynchronously via RabbitMQ and chef-expander in standalone
Chef server instances. However, the highly available Chef server
cluster writes to the search engine and the database
simultaneously. As such the RabbitMQ and chef-expander services
are no longer present in the highly available Chef server cluster.</li>
<li>Standalone Chef server instances write Bookshelf data to
the filesystem. In a highly available Chef server cluster, Bookshelf data is written to the database.</li>
</ul>
</div>
</div>
<div class="section" id="recommended-cluster-topology">
<h2>Recommended Cluster Topology<a class="headerlink" href="#recommended-cluster-topology" title="Permalink to this headline">¶</a></h2>
<div class="section" id="nodes">
<h3>Nodes<a class="headerlink" href="#nodes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Three backend cluster nodes</li>
<li>One or more frontend group nodes</li>
</ul>
</div>
<div class="section" id="network-services">
<h3>Network Services<a class="headerlink" href="#network-services" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A load balancer between the rest of the network, and the frontend
group (Not provided). Because management console session data is
stored on each node in the frontend group individually, the load
balancer should be configured with sticky sessions.</li>
</ul>
</div>
<div class="section" id="network-port-requirements">
<h3>Network Port Requirements<a class="headerlink" href="#network-port-requirements" title="Permalink to this headline">¶</a></h3>
<div class="section" id="inbound-from-load-balancer-to-frontend-group">
<h4>Inbound from load balancer to frontend group<a class="headerlink" href="#inbound-from-load-balancer-to-frontend-group" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>TCP 80 (HTTP)</li>
<li>TCP 443 (HTTPS)</li>
</ul>
</div>
<div class="section" id="inbound-from-frontend-group-to-backend-cluster">
<h4>Inbound from frontend group to backend cluster<a class="headerlink" href="#inbound-from-frontend-group-to-backend-cluster" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>TCP 2379 (etcd)</li>
<li>TCP 5432 (PostgreSQL)</li>
<li>TCP 7331 (leaderl)</li>
<li>TCP 9200 (Elasticsearch)</li>
</ul>
</div>
<div class="section" id="peer-communication-backend-cluster">
<h4>Peer communication, backend cluster<a class="headerlink" href="#peer-communication-backend-cluster" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>2379 (etcd)</li>
<li>2380 (etcd)</li>
<li>5432 (PostgreSQL)</li>
<li>9200 (Elasticsearch)</li>
<li>9300 (Elasticsearch)</li>
</ul>
</div>
</div>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>These instructions assume you are using the following versions or newer:</p>
<ul class="simple">
<li>chef-server  : 12.5.0</li>
<li>chef-backend : 0.8.0</li>
</ul>
<p>Download <a class="reference external" href="https://downloads.chef.io/chef-server/">Chef server</a> and <a class="reference external" href="https://downloads.chef.io/chef-backend/">Chef High Availability (chef-backend)</a> if you do not have them already.</p>
<p>Before creating the backend HA cluster and building at least one Chef server to be part of the frontend group, verify:</p>
<ul class="simple">
<li>The user who will install and build the backend HA cluster and
frontend group has root access to all nodes.</li>
<li>The number of backend and frontend nodes that are desired. It is
required to have 3 backend nodes, but the number of frontend nodes
may vary from a single node to a load-balanced tiered configuration.</li>
<li>SSH access to all boxes that will belong to the backend HA cluster
from the node that will be the initial bootstrap.</li>
<li>A time synchronization policy is in place, such as Network Time Protocol (NTP). Drift of
less than 1.5 seconds must exist across all nodes in the backend HA
cluster.</li>
</ul>
<div class="section" id="step-1-create-cluster">
<h3>Step 1: Create Cluster<a class="headerlink" href="#step-1-create-cluster" title="Permalink to this headline">¶</a></h3>
<p>The first node must be bootstrapped to initialize the cluster. The
node used to bootstrap the cluster will be the cluster leader when the
cluster comes online. After bootstrap completes this node is no
different from any other back-end node.</p>
<ol class="arabic">
<li><p class="first">Install the chef-backend package on the first backend node as root</p>
</li>
<li><p class="first">Update <tt class="docutils literal"><span class="pre">/etc/chef-backend/chef-backend.rb</span></tt> with the following
content:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">publish_address</span> <span class="s1">&#39;external_IP_address_of_this_leader_box&#39;</span> <span class="c1"># External ip address of this backend box</span>
</pre></div>
</div>
</li>
<li><p class="first">Run <tt class="docutils literal"><span class="pre">chef-backend-ctl</span> <span class="pre">create-cluster</span></tt></p>
</li>
</ol>
</div>
<div class="section" id="step-2-shared-credentials">
<h3>Step 2: Shared Credentials<a class="headerlink" href="#step-2-shared-credentials" title="Permalink to this headline">¶</a></h3>
<p>The credentials file <tt class="docutils literal"><span class="pre">/etc/chef-backend/chef-backend-secrets.json</span></tt>
generated by bootstrapping must be shared with the other nodes.  You
may copy them directly, or expose them via a common mounted location.</p>
<p>For example, to copy using ssh:</p>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ scp /etc/chef-backend/chef-backend-secrets.json &lt;USER&gt;@&lt;IP_BE2&gt;:/home/&lt;USER&gt;
$ scp /etc/chef-backend/chef-backend-secrets.json &lt;USER&gt;@&lt;IP_BE3&gt;:/home/&lt;USER&gt;
</pre></div>
</div>
</div></blockquote>
<p>Delete this file from the destination after Step 4 has been completed
for each backend being joined to the cluster.</p>
</div>
<div class="section" id="step-3-install-and-configure-remaining-backend-nodes">
<h3>Step 3: Install and Configure remaining backend nodes<a class="headerlink" href="#step-3-install-and-configure-remaining-backend-nodes" title="Permalink to this headline">¶</a></h3>
<p>For each additional node do the following in sequence (if you attempt
to join nodes in parallel the cluster may fail to become available):</p>
<ol class="arabic">
<li><p class="first">Install backend package on the node.</p>
</li>
<li><p class="first">As root or with sudo:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl join-cluster &lt;IP_BE1&gt; -s ~/home/&lt;USER&gt;/chef-backend-secrets.json
</pre></div>
</div>
</li>
<li><p class="first">Answer the prompts regarding which public IP to use. As an alternative, you may specify them on the <tt class="docutils literal"><span class="pre">chef-backend</span> <span class="pre">join-cluster</span></tt> command line.  See <tt class="docutils literal"><span class="pre">chef-backend-ctl</span> <span class="pre">join-cluster</span> <span class="pre">--help</span></tt> for more information.</p>
</li>
<li><p class="first">If you copied the shared <tt class="docutils literal"><span class="pre">chef-backend-secrets.json</span></tt> file to a user HOME directory on this host, remove it now.</p>
</li>
<li><p class="first">Repeat these steps for each follower node, after which the cluster is online and available. From any node in the backend HA cluster, run the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl status
</pre></div>
</div>
<p>should return something like:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>Service        Local Status        Time in State  Distributed Node Status
elasticsearch  running <span class="o">(</span>pid 6661<span class="o">)</span>  1d 5h 59m 41s  state: green<span class="p">;</span> nodes online: 3/3
etcd           running <span class="o">(</span>pid 6742<span class="o">)</span>  1d 5h 59m 39s  health: green<span class="p">;</span> healthy nodes: 3/3
leaderl        running <span class="o">(</span>pid 6788<span class="o">)</span>  1d 5h 59m 35s  leader: 1<span class="p">;</span> waiting: 0<span class="p">;</span> follower: 2<span class="p">;</span> total: 3
postgresql     running <span class="o">(</span>pid 6640<span class="o">)</span>  1d 5h 59m 43s  leader: 1<span class="p">;</span> offline: 0<span class="p">;</span> syncing: 0<span class="p">;</span> synced: 2
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="step-4-generate-chef-server-configuration">
<h3>Step 4: Generate Chef server Configuration<a class="headerlink" href="#step-4-generate-chef-server-configuration" title="Permalink to this headline">¶</a></h3>
<p>Log into the node from Step 1, and we will generate our chef-server frontend node configuration:</p>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl gen-server-config &lt;FE1-FQDN&gt; -f chef-server.rb.FE1
$ scp chef-server.rb.FE1 USER@&lt;IP_FE1&gt;:/home/&lt;USER&gt;
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><tt class="docutils literal"><span class="pre">/etc/chef-backend/chef-backend-secrets.json</span></tt> is <em>not</em> made available to Chef server frontend nodes.</p>
</div>
</div>
<div class="section" id="step-5-install-and-configure-first-frontend">
<h3>Step 5: Install and Configure First Frontend<a class="headerlink" href="#step-5-install-and-configure-first-frontend" title="Permalink to this headline">¶</a></h3>
<p>On the first frontend node, assuming that the generated configuration was copied as detailed in Step 4:</p>
<ol class="arabic simple">
<li>Install the current chef-server-core package</li>
<li>Run <tt class="docutils literal"><span class="pre">cp</span> <span class="pre">/home/&lt;USER&gt;/chef-server.rb.&lt;FE1&gt;</span> <span class="pre">/etc/opscode/chef-server.rb</span></tt></li>
<li>As the root user, run <tt class="docutils literal"><span class="pre">chef-server-ctl</span> <span class="pre">reconfigure</span></tt></li>
</ol>
</div>
<div class="section" id="adding-more-frontends">
<h3>Adding More Frontends<a class="headerlink" href="#adding-more-frontends" title="Permalink to this headline">¶</a></h3>
<p>For each additional frontend node you wish to add to your cluster:</p>
<ol class="arabic">
<li><p class="first">Generate a new <tt class="docutils literal"><span class="pre">chef-server.rb</span></tt> from any of the backend nodes via</p>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl gen-server-config &lt;FE_NAME-FQDN&gt; &gt; chef-server.rb.&lt;FE_NAME&gt;
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Copy it to <tt class="docutils literal"><span class="pre">/etc/opscode</span></tt> on the new frontend node.</p>
</li>
<li><p class="first">From the first frontend node configured in Step 5, copy the
following files from the first frontend to <tt class="docutils literal"><span class="pre">/etc/opscode</span></tt> on the
new frontend node:</p>
<ul class="simple">
<li>/etc/opscode/private-chef-secrets.json</li>
<li>/etc/opscode/webui_priv.pem</li>
<li>/etc/opscode/webui_pub.pem</li>
<li>/etc/opscode/pivotal.pem</li>
</ul>
</li>
</ol>
<p># On the new frontend node: <tt class="docutils literal"><span class="pre">mkdir</span> <span class="pre">-p</span> <span class="pre">/var/opt/opscode/upgrades/</span></tt></p>
<ol class="arabic simple">
<li>From the first frontend node, copy <tt class="docutils literal"><span class="pre">/var/opt/opscode/upgrades/migration-level</span></tt> to the same location on the new node.</li>
<li>On the new frontend run: <tt class="docutils literal"><span class="pre">touch</span> <span class="pre">/var/opt/opscode/bootstrapped</span></tt></li>
<li>On the new frontend run: <tt class="docutils literal"><span class="pre">chef-server-ctl</span> <span class="pre">reconfigure</span></tt> as root</li>
</ol>
</div>
<div class="section" id="upgrading-chef-server-on-the-frontend-machines">
<h3>Upgrading chef-server on the frontend machines<a class="headerlink" href="#upgrading-chef-server-on-the-frontend-machines" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>On any of the frontends follow documentation from: <a class="reference external" href="https://docs.chef.io/upgrade_server.html#standalone">https://docs.chef.io/upgrade_server.html#standalone</a> to upgrade</li>
<li>On each of the remaining frontends, copy <tt class="docutils literal"><span class="pre">/var/opt/opscode/upgrades/migration-level</span></tt> from first upgraded frontend to <tt class="docutils literal"><span class="pre">/var/opt/opscode/upgrades/migration-level</span></tt> on current box.</li>
</ol>
</div>
<div class="section" id="configuring-front-end-and-backend-members-on-different-networks">
<h3>Configuring front end and backend members on different networks<a class="headerlink" href="#configuring-front-end-and-backend-members-on-different-networks" title="Permalink to this headline">¶</a></h3>
<p>By default, PostgreSQL only allows systems on its local network to connect to the database server that runs it and the <tt class="docutils literal"><span class="pre">pg_hba.conf</span></tt> used by PostgreSQL controls network access to the server. The default <tt class="docutils literal"><span class="pre">pg_hba.conf</span></tt> has the following four entries:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>host    all         all         samehost               md5
hostssl replication replicator  samehost               md5
host    all         all         samenet                md5
hostssl replication replicator  samenet                md5
</pre></div>
</div>
<p>To allow other systems to connect, such as members of a frontend group that might exist on a different network, you will need to authorize that usage by adding the following line to the <tt class="docutils literal"><span class="pre">/etc/chef-backend/chef-backend.rb</span></tt> file on all of the backend members.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>postgresql.md5_auth_cidr_addresses = [&quot;samehost&quot;, &quot;samenet&quot;, &quot;&lt;YOURNET IN CIDR&gt;&quot;]
</pre></div>
</div>
<p>Afer setting the <tt class="docutils literal"><span class="pre">md5_auth_cidr_addresses</span></tt> value and reconfiguring the server, two entries will be created in <tt class="docutils literal"><span class="pre">pg_hba.conf</span></tt> for each value in the <tt class="docutils literal"><span class="pre">md5_auth_cidr_addresses</span></tt> array. Existing values in <tt class="docutils literal"><span class="pre">pg_hba.conf</span></tt> will be overwritten by the values in the array, so we must also specify &#8220;samehost&#8221; and &#8220;samenet&#8221;, which will continue to allow systems on a local network to connect to PostgreSQL.</p>
<p>For example, if a frontend host at 192.168.1.3 can reach a backend member over the network, but the backend’s local network is 192.168.2.x, you would add the following line to <tt class="docutils literal"><span class="pre">/etc/chef-backend/chef-backend.rb</span></tt></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>postgresql.md5_auth_cidr_addresses = [&quot;samehost&quot;, &quot;samenet&quot;, &quot;192.168.1.3/24&quot;]
</pre></div>
</div>
<p>which would result in the following two entries being added to the <tt class="docutils literal"><span class="pre">pg_hba.conf</span></tt> file.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>host    all         all         samehost               md5
hostssl replication replicator  samehost               md5
host    all         all         samenet                md5
hostssl replication replicator  samenet                md5
host    all         all         192.168.1.3/24         md5
hostssl replication replicator  192.168.1.3/24         md5
</pre></div>
</div>
<p>Running <tt class="docutils literal"><span class="pre">chef-server-ctl</span> <span class="pre">reconfigure</span></tt> on all the backends will allow that frontend to complete its connection.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>chef-server-ctl reconfigure
</pre></div>
</div>
</div>
</div>
<div class="section" id="cluster-security-considerations">
<h2>Cluster Security Considerations<a class="headerlink" href="#cluster-security-considerations" title="Permalink to this headline">¶</a></h2>
<p>A backend cluster is expected to run in a trusted environment. This means that untrusted users that communicate with and/or eavesdrop on services provided by the backend cluster can potentially view sensitive data.</p>
<div class="section" id="communication-between-nodes">
<h3>Communication Between Nodes<a class="headerlink" href="#communication-between-nodes" title="Permalink to this headline">¶</a></h3>
<p>PostgreSQL communication between nodes in the backend cluster is encrypted, and uses password authentication. All other communication in the backend cluster is unauthenticated and happens in the clear
(without encryption).</p>
</div>
<div class="section" id="communication-between-frontend-group-backend-cluster">
<h3>Communication Between Frontend Group &amp; Backend Cluster<a class="headerlink" href="#communication-between-frontend-group-backend-cluster" title="Permalink to this headline">¶</a></h3>
<p>PostgreSQL communication from nodes in the frontend group to the leader of the backend cluster uses password authentication, but communication happens in the clear (without encryption).</p>
<p>Elasticsearch communication is unauthenticated and happens in the clear (without encryption).</p>
</div>
<div class="section" id="securing-communication">
<h3>Securing Communication<a class="headerlink" href="#securing-communication" title="Permalink to this headline">¶</a></h3>
<p>Because most of the peer communication between nodes in the backend cluster happens in the clear, the backend cluster is vulnerable to passive monitoring of network traffic between nodes. To help prevent an active attacker from intercepting or changing cluster data, Chef recommends using iptables or an equivalent network ACL tool to restrict access to PostgreSQL, Elasticsearch and etcd to only hosts that need access.</p>
<p>By service role, access requirements are as follows:</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Service</th>
<th class="head">Access Requirements</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PostgreSQL</td>
<td>All backend cluster members and all Chef server frontend group nodes.</td>
</tr>
<tr class="row-odd"><td>Elasticsearch</td>
<td>All backend cluster members and all Chef server frontend group nodes.</td>
</tr>
<tr class="row-even"><td>etcd</td>
<td>All backend cluster members and all Chef server frontend group nodes.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="services-and-secrets">
<h3>Services and Secrets<a class="headerlink" href="#services-and-secrets" title="Permalink to this headline">¶</a></h3>
<p>Communication with PostgreSQL requires password authentication. The backend cluster generates PostgreSQL users and passwords during the initial cluster-create. These passwords are present in the following files on disk:</p>
<table border="1" class="docutils">
<colgroup>
<col width="62%" />
<col width="14%" />
<col width="14%" />
<col width="10%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Secret</th>
<th class="head">Owner</th>
<th class="head">Group</th>
<th class="head">Mode</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">/etc/chef-backend/secrets.json</span></tt></td>
<td><tt class="docutils literal"><span class="pre">root</span></tt></td>
<td><tt class="docutils literal"><span class="pre">chef_pgsql</span></tt></td>
<td><tt class="docutils literal"><span class="pre">0640</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">/var/opt/chef-backend/leaderl/data/sys.config</span></tt></td>
<td><tt class="docutils literal"><span class="pre">chef_pgsql</span></tt></td>
<td><tt class="docutils literal"><span class="pre">chef_pgsql</span></tt></td>
<td><tt class="docutils literal"><span class="pre">0600</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">/var/opt/chef-backend/PostgreSQL/9.5/recovery.conf</span></tt></td>
<td><tt class="docutils literal"><span class="pre">chef_pgsql</span></tt></td>
<td><tt class="docutils literal"><span class="pre">chef_pgsql</span></tt></td>
<td><tt class="docutils literal"><span class="pre">0600</span></tt></td>
</tr>
</tbody>
</table>
<p>The following services run on each node in the backend cluster. The user account under which the service runs as listed the second column:</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Service</th>
<th class="head">Process Owner</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">postgresql</span></tt></td>
<td><tt class="docutils literal"><span class="pre">chef_pgsql</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">elasticsearch</span></tt></td>
<td><tt class="docutils literal"><span class="pre">chef-backend</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">etcd</span></tt></td>
<td><tt class="docutils literal"><span class="pre">chef-backend</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">leaderl</span></tt></td>
<td><tt class="docutils literal"><span class="pre">chef_pgsql</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">epmd</span></tt></td>
<td><tt class="docutils literal"><span class="pre">chef_pgsql</span></tt> (or first user launching an erlang process)</td>
</tr>
</tbody>
</table>
<div class="section" id="chef-server-frontend">
<h4>Chef Server Frontend<a class="headerlink" href="#chef-server-frontend" title="Permalink to this headline">¶</a></h4>
<p>The <tt class="docutils literal"><span class="pre">chef-backend-ctl</span> <span class="pre">gen-server-config</span></tt> command, which can be run as root from any node in the backend cluster, will automatically generate a configuration file containing the superuser database access credentials for the backend cluster PostgreSQL instance.</p>
</div>
</div>
<div class="section" id="software-versions">
<h3>Software Versions<a class="headerlink" href="#software-versions" title="Permalink to this headline">¶</a></h3>
<p>The backend HA cluster uses the omnibus installer (<a class="reference external" href="https://github.com/chef/omnibus">https://github.com/chef/omnibus</a>) to package all of the software
necessary to run the services included in the backend cluster. For a full list of the software packages included (and their versions), see the file located at <tt class="docutils literal"><span class="pre">/opt/chef-backend/version-manifest.json</span></tt>.</p>
<p>Do not attempt to upgrade individual components of the omnibus package. Due to the way omnibus packages are built, modifying any of the individual components in the package will lead to cluster instability. If the latest version of the backend cluster is providing an out-of-date package, please bring it to the attention of Chef by filling out a ticket with <a class="reference external" href="mailto:support&#37;&#52;&#48;chef&#46;io">support<span>&#64;</span>chef<span>&#46;</span>io</a>.</p>
</div>
</div>
<div class="section" id="chef-backend-rb-options">
<h2>chef-backend.rb options<a class="headerlink" href="#chef-backend-rb-options" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">chef-backend.rb</span></tt> file is generated using <tt class="docutils literal"><span class="pre">chef-backend-ctl</span> <span class="pre">gen-sample-backend-config</span></tt> and controls most of the various feature and configuration flags going into a Chef HA backend node.  A number of these options control the reliability, stability and uptime of the backend PostgreSQL databases, the elastic search index, and the leader election system. Please refrain from changing them unless you have been advised to do so.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">fqdn</span></tt>  Host name of this node.</li>
<li><tt class="docutils literal"><span class="pre">hide_sensitive</span></tt>  Set to <tt class="docutils literal"><span class="pre">false</span></tt> if you wish to print deltas of sensitive files and templates during <tt class="docutils literal"><span class="pre">chef-backend-ctl</span> <span class="pre">reconfigure</span></tt> runs.  <tt class="docutils literal"><span class="pre">true</span></tt> by default.</li>
<li><tt class="docutils literal"><span class="pre">ip_version</span></tt>  Set to either <tt class="docutils literal"><span class="pre">'ipv4'</span></tt> or <tt class="docutils literal"><span class="pre">'ipv6'</span></tt>. <tt class="docutils literal"><span class="pre">'ipv4'</span></tt> by default.</li>
<li><tt class="docutils literal"><span class="pre">publish_address</span></tt>  Externally resolvable IP address of this back-end node.</li>
</ul>
<div class="section" id="common-runit-flags-for-any-backend-service">
<h3>Common &#8216;Runit&#8217; flags for any backend service<a class="headerlink" href="#common-runit-flags-for-any-backend-service" title="Permalink to this headline">¶</a></h3>
<p>See <a class="reference external" href="https://github.com/chef-cookbooks/runit">https://github.com/chef-cookbooks/runit</a> for details.  Many of the flags are repeated across the various backend services - they are only documented once at the top here.  The same defaults are used unless specified below.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">postgresql.enable</span></tt> Sets up and runs this service.  <tt class="docutils literal"><span class="pre">true</span></tt> by default.</li>
<li><tt class="docutils literal"><span class="pre">postgresql.environment</span></tt>  A hash of environment variables with their values as content used in the service&#8217;s env directory.</li>
<li><tt class="docutils literal"><span class="pre">postgresql.log_directory</span></tt>  The directory where the svlogd log service will run. <tt class="docutils literal"><span class="pre">'/var/log/chef-backend/postgresql/&lt;version&gt;'</span></tt> by default.</li>
<li><tt class="docutils literal"><span class="pre">postgresql.log_rotation.file_maxbytes</span></tt>  The maximum size a log file can grow to before it is automatically rotated.  <tt class="docutils literal"><span class="pre">104857600</span></tt> by default (100MB).</li>
<li><tt class="docutils literal"><span class="pre">postgresql.log_rotation.num_to_keep</span></tt>  The maximum number of log files that will be retained after rotation.  <tt class="docutils literal"><span class="pre">10</span></tt> by default.</li>
<li><tt class="docutils literal"><span class="pre">etcd.enable</span></tt></li>
<li><tt class="docutils literal"><span class="pre">etcd.log_directory</span></tt>  <tt class="docutils literal"><span class="pre">'/var/log/chef-backend/etcd'</span></tt> by default</li>
<li><tt class="docutils literal"><span class="pre">etcd.log_rotation.file_maxbytes</span></tt></li>
<li><tt class="docutils literal"><span class="pre">etcd.log_rotation.num_to_keep</span></tt></li>
<li><tt class="docutils literal"><span class="pre">elasticsearch.enable</span></tt></li>
<li><tt class="docutils literal"><span class="pre">elasticsearch.log_directory</span></tt>  <tt class="docutils literal"><span class="pre">'/var/log/chef-backend/elasticsearch'</span></tt> by default.  Also affects <tt class="docutils literal"><span class="pre">path.logs</span></tt> in the elastic search configuration yml.</li>
<li><tt class="docutils literal"><span class="pre">elasticsearch.log_rotation.file_maxbytes</span></tt></li>
<li><tt class="docutils literal"><span class="pre">elasticsearch.log_rotation.num_to_keep</span></tt></li>
<li><tt class="docutils literal"><span class="pre">leaderl.enable</span></tt></li>
<li><tt class="docutils literal"><span class="pre">leaderl.log_directory</span></tt>  <tt class="docutils literal"><span class="pre">'/var/log/chef-backend/leaderl'</span></tt> by default.</li>
<li><tt class="docutils literal"><span class="pre">leaderl.start_down</span></tt>  Set the default state of the runit service to &#8216;down&#8217; by creating &lt;sv_dir&gt;/down file.  <tt class="docutils literal"><span class="pre">true</span></tt> by default.</li>
<li><tt class="docutils literal"><span class="pre">leaderl.log_rotation.file_maxbytes</span></tt></li>
<li><tt class="docutils literal"><span class="pre">leaderl.log_rotation.num_to_keep</span></tt></li>
</ul>
</div>
<div class="section" id="postgresql-settings">
<h3>PostgreSQL settings<a class="headerlink" href="#postgresql-settings" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">postgresql.db_superuser</span></tt>  Super user account to create.  Password is in chef-backend-secrets.json.  <tt class="docutils literal"><span class="pre">'chef_pgsql'</span></tt> by default.</li>
<li><tt class="docutils literal"><span class="pre">postgresql.md5_auth_cidr_addresses</span></tt>  A list of authorized addresses from which other backend nodes can connect to perform streaming replication. <tt class="docutils literal"><span class="pre">samehost</span></tt> and <tt class="docutils literal"><span class="pre">samenet</span></tt> are special symbols to allow connections from the this node&#8217;s IP address and its subnet.  You may also use <tt class="docutils literal"><span class="pre">all</span></tt> to match any IP address.  You may specify a hostname or IP address in CIDR format (<tt class="docutils literal"><span class="pre">172.20.143.89/32</span></tt> for a single host, or <tt class="docutils literal"><span class="pre">172.20.143.0/24</span></tt> for a small network.  See <a class="reference external" href="https://www.postgresql.org/docs/9.5/static/auth-pg-hba-conf.html">https://www.postgresql.org/docs/9.5/static/auth-pg-hba-conf.html</a> for alternative formats.  <tt class="docutils literal"><span class="pre">[&quot;samehost&quot;,</span> <span class="pre">&quot;samenet&quot;]</span></tt> by default.</li>
<li><tt class="docutils literal"><span class="pre">postgresql.replication_user</span></tt>  Username used by postgres streaming replicator when accessing this node.  <tt class="docutils literal"><span class="pre">'replicator'</span></tt> by default.</li>
<li><tt class="docutils literal"><span class="pre">postgresql.username</span></tt>  <tt class="docutils literal"><span class="pre">'chef_pgsql'</span></tt> by default.</li>
</ul>
</div>
<div class="section" id="postgresql-settings-given-to-postgresql-conf">
<h3>PostgreSQL settings given to <tt class="docutils literal"><span class="pre">postgresql.conf</span></tt><a class="headerlink" href="#postgresql-settings-given-to-postgresql-conf" title="Permalink to this headline">¶</a></h3>
<p>See <a class="reference external" href="https://www.postgresql.org/docs/9.5/static/runtime-config.html">https://www.postgresql.org/docs/9.5/static/runtime-config.html</a> for details.  Some defaults are provided:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">postgresql.archive_command</span> <span class="pre">''</span></tt></li>
<li><tt class="docutils literal"><span class="pre">postgresql.archive_mode</span> <span class="pre">'off'</span></tt></li>
<li><tt class="docutils literal"><span class="pre">postgresql.archive_timeout</span> <span class="pre">0</span></tt></li>
<li><tt class="docutils literal"><span class="pre">postgresql.checkpoint_completion_target</span> <span class="pre">0.5</span></tt></li>
<li><tt class="docutils literal"><span class="pre">postgresql.checkpoint_timeout</span> <span class="pre">'5min'</span></tt></li>
<li><tt class="docutils literal"><span class="pre">postgresql.checkpoint_warning</span> <span class="pre">'30s'</span></tt></li>
<li><tt class="docutils literal"><span class="pre">postgresql.effective_cache_size</span></tt>  Automatically calculated based on available memory.</li>
<li><tt class="docutils literal"><span class="pre">postgresql.hot_standby</span> <span class="pre">'on'</span></tt></li>
<li><tt class="docutils literal"><span class="pre">postgresql.keepalives_count</span> <span class="pre">2</span></tt>  Sets <tt class="docutils literal"><span class="pre">tcp_keepalives_count</span></tt></li>
<li><tt class="docutils literal"><span class="pre">postgresql.keepalives_idle</span> <span class="pre">60</span></tt>  Sets <tt class="docutils literal"><span class="pre">tcp_keepalives_idle</span></tt></li>
<li><tt class="docutils literal"><span class="pre">postgresql.keepalives_interval</span> <span class="pre">15</span></tt>  Sets <tt class="docutils literal"><span class="pre">tcp_keepalives_interval</span></tt></li>
<li><tt class="docutils literal"><span class="pre">postgresql.log_checkpoints</span> <span class="pre">true</span></tt></li>
<li><tt class="docutils literal"><span class="pre">postgresql.log_min_duration_statement</span> <span class="pre">-1</span></tt></li>
<li><tt class="docutils literal"><span class="pre">postgresql.max_connections</span> <span class="pre">350</span></tt></li>
<li><tt class="docutils literal"><span class="pre">postgresql.max_replication_slots</span> <span class="pre">12</span></tt></li>
<li><tt class="docutils literal"><span class="pre">postgresql.max_wal_senders</span> <span class="pre">12</span></tt></li>
<li><tt class="docutils literal"><span class="pre">postgresql.max_wal_size</span> <span class="pre">64</span></tt></li>
<li><tt class="docutils literal"><span class="pre">postgresql.min_wal_size</span> <span class="pre">5</span></tt></li>
<li><tt class="docutils literal"><span class="pre">postgresql.port</span> <span class="pre">5432</span></tt></li>
<li><tt class="docutils literal"><span class="pre">postgresql.shared_buffers</span></tt>  Automatically calculated based on available memory.</li>
<li><tt class="docutils literal"><span class="pre">postgresql.wal_keep_segments</span> <span class="pre">32</span></tt></li>
<li><tt class="docutils literal"><span class="pre">postgresql.wal_level</span> <span class="pre">'hot_standby'</span></tt></li>
<li><tt class="docutils literal"><span class="pre">postgresql.wal_log_hints</span> <span class="pre">on</span></tt></li>
<li><tt class="docutils literal"><span class="pre">postgresql.work_mem</span> <span class="pre">'8MB'</span></tt></li>
</ul>
</div>
<div class="section" id="etcd-settings">
<h3>etcd settings<a class="headerlink" href="#etcd-settings" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">etcd.client_port</span> <span class="pre">2379</span></tt> Port to use for ETCD_LISTEN_CLIENT_URLS
and ETCD_ADVERTISE_CLIENT_URLS.</li>
<li><tt class="docutils literal"><span class="pre">etcd.peer_port</span> <span class="pre">2380</span></tt> Port to use for ETCD_LISTEN_PEER_URLS and
ETCD_ADVERTISE_PEER_URLS.</li>
</ul>
<p>The following settings relate to etcd&#8217;s consensus protocol. Chef
Backend builds its own leader election on top of etcd&#8217;s consensus
protocol. Updating these settings may be advisable if you are seeing
frequent failover events as a result of spurious etcd connection
timeouts. The current defaults assume a high-latency environment, such
those you might find if deploying Chef Backend to various cloud
providers.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">etcd.heartbeat_interval</span> <span class="pre">500</span></tt> ETCD_HEARTBEAT_INTERVAL in
milliseconds. This is the frequency at which the leader will send
heartbeats to followers. Etcd&#8217;s documentation recommends that this
is set roughly to the round-trip times between members. (The default
before 1.2 was 100)</li>
<li><tt class="docutils literal"><span class="pre">etcd.election_timeout</span> <span class="pre">5000</span></tt> ETCD_ELECTION_TIMEOUT in
milliseconds. This controls how long an etcd node will wait for
heartbeat before triggering an election. Per Etcd&#8217;s documentation,
this should be 5 to 10 times larger than the
<tt class="docutils literal"><span class="pre">etcd.heartbeat_interval</span></tt>. Increasing <tt class="docutils literal"><span class="pre">etcd.election_timeout</span></tt>
increases the time it will take for <tt class="docutils literal"><span class="pre">etcd</span></tt> to detect a
failure. (The default value before 1.2 was 1000)</li>
<li><tt class="docutils literal"><span class="pre">etcd.snapshot_count</span> <span class="pre">5000</span></tt> ETCD_SNAPSHOT_COUNT which is the number
of committed transactions to trigger a snapshot to disk.</li>
</ul>
<p>For all of these settings see
<a class="reference external" href="https://coreos.com/etcd/docs/latest/tuning.html">https://coreos.com/etcd/docs/latest/tuning.html</a> for more details</p>
</div>
<div class="section" id="elastic-search-jvm-settings">
<h3>Elastic Search JVM settings<a class="headerlink" href="#elastic-search-jvm-settings" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">elasticsearch.heap_size</span></tt>  Automatically computed by elastic search based on available memory. Specify in MB if you wish to override.</li>
<li><tt class="docutils literal"><span class="pre">elasticsearch.java_opts</span></tt>  Flags to directly pass to the JVM when launching elastic search.  If you override a heap flag here, the setting here takes precedence.</li>
<li><tt class="docutils literal"><span class="pre">elasticsearch.new_size</span></tt>  Java heap&#8217;s new generation size.</li>
</ul>
</div>
<div class="section" id="elastic-search-configuration">
<h3>Elastic Search configuration<a class="headerlink" href="#elastic-search-configuration" title="Permalink to this headline">¶</a></h3>
<p>See <a class="reference external" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/setup-configuration.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/setup-configuration.html</a> for details.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">elasticsearch.plugins_directory</span> <span class="pre">'/var/opt/chef-backend/elasticsearch/plugins'</span></tt>  Sets <tt class="docutils literal"><span class="pre">path.plugins</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">elasticsearch.port</span> <span class="pre">9200</span></tt>  Sets <tt class="docutils literal"><span class="pre">http.port</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">elasticsearch.scripts_directory</span> <span class="pre">'/var/opt/chef-backend/elasticsearch/scripts'</span></tt>  Sets <tt class="docutils literal"><span class="pre">path.scripts</span></tt>.</li>
</ul>
</div>
<div class="section" id="chef-ha-backend-leader-management-service-settings">
<h3>Chef HA backend leader management service settings<a class="headerlink" href="#chef-ha-backend-leader-management-service-settings" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">leaderl.db_timeout</span></tt> Socket timeout when connecting to PostgreSQL
in milliseconds.  <tt class="docutils literal"><span class="pre">2000</span></tt> by default.</li>
<li><tt class="docutils literal"><span class="pre">leaderl.http_acceptors</span></tt> Http threads that responds to monitorng
and leadership status requests from HAProxy.  <tt class="docutils literal"><span class="pre">10</span></tt> by default.</li>
<li><tt class="docutils literal"><span class="pre">leaderl.http_address</span></tt> The addess that leaderl listens on. This
address should not be <tt class="docutils literal"><span class="pre">127.0.0.1</span></tt>.  It should be reachable from
any front-end node.  <tt class="docutils literal"><span class="pre">'0.0.0.0'</span></tt> by default.</li>
<li><tt class="docutils literal"><span class="pre">leaderl.http_port</span></tt>  <tt class="docutils literal"><span class="pre">7331</span></tt> by default.</li>
<li><tt class="docutils literal"><span class="pre">leaderl.leader_ttl_seconds</span></tt>  The number of seconds it takes the
leader key to expire.  Increasing this value will increase the
amount of time the cluster will take to recognize a failed leader.
Lowering this value may leade to frequent leadership changes and
thrashing. <tt class="docutils literal"><span class="pre">30</span></tt> by default (<tt class="docutils literal"><span class="pre">10</span></tt> by default before 1.2).</li>
<li><tt class="docutils literal"><span class="pre">leaderl.required_active_followers</span></tt> The number of followers that
must be syncing via a PostgreSQL replication slot before a new
leader will return 200 to /leader HTTP requests.  If an existing
leader fails to maintain this quorum of followers, the /leader
endpoint will return 503 but active connections will still be able
to complete their writes to the database.  0 by default.</li>
<li><tt class="docutils literal"><span class="pre">leaderl.runsv_group</span></tt> The group that sensitive password files will
belong to.  This is used internally for test purposes and should
never be modified otherwise.  <tt class="docutils literal"><span class="pre">'chef_pgsql'</span></tt> by default.</li>
<li><tt class="docutils literal"><span class="pre">leaderl.status_internal_update_interval_seconds</span></tt> How often we
check for a change in the leader service&#8217;s status.  5 seconds by
default.</li>
<li><tt class="docutils literal"><span class="pre">leaderl.status_post_update_interval_seconds</span></tt> How often etcd is
updated with the leader service&#8217;s current status.  10 seconds by
default.</li>
<li><tt class="docutils literal"><span class="pre">leaderl.username</span> <span class="pre">'chef_pgsql'</span></tt></li>
<li><tt class="docutils literal"><span class="pre">leaderl.log_rotation.max_messages_per_second</span></tt> Rate limit for the
number of messanges that the Erlang error_logger will output.
<tt class="docutils literal"><span class="pre">1000</span></tt> by default.</li>
<li><tt class="docutils literal"><span class="pre">leaderl.etcd_pool.ibrowse_options</span></tt> Internal options to affect how
requests to etcd are made (see
<a class="reference external" href="https://github.com/cmullaparthi/ibrowse/blob/master/doc/ibrowse.html">https://github.com/cmullaparthi/ibrowse/blob/master/doc/ibrowse.html</a>).</li>
</ul>
</div>
<div class="section" id="chef-ha-backend-leader-health-status-settings">
<h3>Chef HA backend leader health status settings<a class="headerlink" href="#chef-ha-backend-leader-health-status-settings" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">leaderl.health_check.interval_seconds</span></tt> How frequently, in
seconds, to poll the service for health status.  We recommend
setting this to at least 5 times the value of
<tt class="docutils literal"><span class="pre">leaderl.leader_ttl_seconds</span></tt>. 5 by default (2 by default before
version 1.2)</li>
<li><tt class="docutils literal"><span class="pre">leaderl.health_check.max_bytes_behind_leader</span></tt>  Limit on maximum different between elected leader and current node in bytes.  <tt class="docutils literal"><span class="pre">52428800</span></tt> (50MB) by default.</li>
<li><tt class="docutils literal"><span class="pre">leaderl.health_check.max_elasticsearch_failures</span></tt>  Number of Elastic Search API failures allowed before health check fails.  5 by default.</li>
<li><tt class="docutils literal"><span class="pre">leaderl.health_check.max_etcd_failures</span></tt>  Number of etcd failures allowed before health check fails.  5 by default.</li>
<li><tt class="docutils literal"><span class="pre">leaderl.health_check.max_pgsql_failures</span></tt>  Number of PostgreSQL connection failures allowed before health check fails.  5 by default.</li>
</ul>
</div>
<div class="section" id="chef-ha-backend-leader-connection-pool-settings">
<h3>Chef HA backend leader connection pool settings<a class="headerlink" href="#chef-ha-backend-leader-connection-pool-settings" title="Permalink to this headline">¶</a></h3>
<p>See <a class="reference external" href="https://github.com/seth/pooler/blob/master/README.org">https://github.com/seth/pooler/blob/master/README.org</a> for details.  These are internal settings that affect the responsivity, uptime and reliability of the backend cluster.  They should not be modified unless you are advised to do so by Support.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">leaderl.etcd_pool.cull_interval_seconds</span> <span class="pre">60</span></tt></li>
<li><tt class="docutils literal"><span class="pre">leaderl.etcd_pool.http_timeout_ms</span> <span class="pre">5000</span></tt></li>
<li><tt class="docutils literal"><span class="pre">leaderl.etcd_pool.init_count</span> <span class="pre">10</span></tt></li>
<li><tt class="docutils literal"><span class="pre">leaderl.etcd_pool.max_age_seconds</span> <span class="pre">60</span></tt></li>
<li><tt class="docutils literal"><span class="pre">leaderl.etcd_pool.max_connection_duration_seconds</span> <span class="pre">300</span></tt></li>
<li><tt class="docutils literal"><span class="pre">leaderl.etcd_pool.max_count</span> <span class="pre">10</span></tt></li>
</ul>
</div>
<div class="section" id="ssl-settings">
<h3>SSL settings<a class="headerlink" href="#ssl-settings" title="Permalink to this headline">¶</a></h3>
<p>If <tt class="docutils literal"><span class="pre">certificate</span></tt> and <tt class="docutils literal"><span class="pre">certificate_key</span></tt> are nil, the SSL Certificate will be auto-generated using the other parameters provided.  Otherwise, they are on-disk locations to user-provided certificate.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">ssl.certificate</span></tt>  Provide this path if you have a pre-generated SSL cert.</li>
<li><tt class="docutils literal"><span class="pre">ssl.certificate_key</span></tt>  Provide this path if you have a pre-generated SSL cert.</li>
<li><tt class="docutils literal"><span class="pre">ssl.ciphers</span></tt>  Ordered list of allowed SSL ciphers.  This will be updated based on security considerations and the version of OpenSSL being shipped.</li>
<li><tt class="docutils literal"><span class="pre">ssl.company_name</span></tt></li>
<li><tt class="docutils literal"><span class="pre">ssl.country_name</span></tt></li>
<li><tt class="docutils literal"><span class="pre">ssl.data_dir</span></tt>  Where certificates will be stored.  <tt class="docutils literal"><span class="pre">'/var/opt/chef-backend/ssl/'</span></tt> by default</li>
<li><tt class="docutils literal"><span class="pre">ssl.duration</span></tt>  3650 days by default (10 years).</li>
<li><tt class="docutils literal"><span class="pre">ssl.key_length</span></tt>  2048 by default.</li>
<li><tt class="docutils literal"><span class="pre">ssl.organizational_unit_name</span></tt></li>
</ul>
</div>
</div>
<div class="section" id="chef-backend-ctl">
<h2>chef-backend-ctl<a class="headerlink" href="#chef-backend-ctl" title="Permalink to this headline">¶</a></h2>
<p>The Chef server backend HA cluster includes a command-line utility named chef-backend-ctl. This command-line tool is used to manage the Chef server backend HA cluster, start and stop individual services, and tail Chef server log files.</p>
<div class="section" id="backup">
<h3>backup<a class="headerlink" href="#backup" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">backup</span></tt> subcommand is to backup the data for a node in the backend HA cluster. This command is typically run against a follower node. Use the <tt class="docutils literal"><span class="pre">--force</span></tt> option to run this command against all nodes in the backend HA cluster. The backup is created as a tar.gz file and is located in <tt class="docutils literal"><span class="pre">/var/opt/chef-backup/</span></tt>.</p>
<div class="section" id="syntax">
<h4>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline">¶</a></h4>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl backup <span class="o">(</span>options<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="options">
<h4>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h4>
<p>This subcommand has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">-f</span></tt>, <tt class="docutils literal"><span class="pre">--force</span></tt></dt>
<dd>Force a backup on all machines in the backend HA cluster, including the leader.</dd>
<dt><tt class="docutils literal"><span class="pre">-y</span></tt>, <tt class="docutils literal"><span class="pre">--yes</span></tt></dt>
<dd>Do not prompt for confirmation.</dd>
</dl>
</div>
<div class="section" id="examples">
<h4>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h4>
<p><strong>Backup a node in the backend HA cluster</strong></p>
<p>From a follower node, run the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl backup
</pre></div>
</div>
</div>
</div>
<div class="section" id="cleanse">
<h3>cleanse<a class="headerlink" href="#cleanse" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">cleanse</span></tt> subcommand is used to re-set a machine in the Chef server backend HA cluster to the state it was in prior to the first time the <tt class="docutils literal"><span class="pre">reconfigure</span></tt> subcommand is run. This command will destroy all data, configuration files, and logs. The software that was put on-disk by the package installation will remain; re-run <tt class="docutils literal"><span class="pre">chef-backend-ctl</span> <span class="pre">reconfigure</span></tt> to recreate the default data and configuration files.</p>
<div class="section" id="id1">
<h4>Syntax<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl cleanse
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h4>Options<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p>This subcommand has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--with-external</span></tt></dt>
<dd>Use to specify that data on an external PostgreSQL database should be removed.</dd>
</dl>
</div>
<div class="section" id="id3">
<h4>Examples<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p>None.</p>
</div>
</div>
<div class="section" id="cluster-status">
<h3>cluster-status<a class="headerlink" href="#cluster-status" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">cluster-status</span></tt> subcommand to return a list of all accessible nodes, their role (leader, follower), and the status for PostgreSQL and Elasticsearch.</p>
<div class="section" id="id4">
<h4>Syntax<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl cluster-status <span class="o">(</span>options<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id5">
<h4>Options<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<p>This subcommand has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--json</span></tt></dt>
<dd>Return cluster health information as JSON.</dd>
</dl>
</div>
<div class="section" id="id6">
<h4>Examples<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<p><strong>Return cluster health data as JSON</strong></p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl cluster-status --json
</pre></div>
</div>
</div>
</div>
<div class="section" id="create-cluster">
<h3>create-cluster<a class="headerlink" href="#create-cluster" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">create-cluster</span></tt> subcommand to initialize the cluster state, including the PostgreSQL data store, and then bootstrap the first node in a backend HA cluster or assist in the recovery of the entire backend HA cluster.</p>
<div class="section" id="id7">
<h4>Syntax<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl create-cluster <span class="o">(</span>options<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id8">
<h4>Options<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<p>This subcommand has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--elasticsearch-wait-time</span></tt></dt>
<dd>The maximum amount of time (in seconds) to wait for Elasticsearch to start. Default value: <tt class="docutils literal"><span class="pre">30</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--etcd-wait-time</span></tt></dt>
<dd>The maximum amount of time (in seconds) to wait for etcd to start. Default value: <tt class="docutils literal"><span class="pre">30</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--quorum-loss-recovery</span></tt></dt>
<dd><p class="first">Resets the cluster identifier in etcd to this node.</p>
<p class="last">If nodes in a backend HA cluster are not available, etcd may not be able to form a cluster. If etcd cannot form a cluster, rebuild the cluster. First reset the cluster identifier on an active node, rebuild the nodes that will be part of the cluster, and then rejoin the rebuilt nodes to the cluster by using the <tt class="docutils literal"><span class="pre">chef-backend-ctl</span> <span class="pre">join-cluster</span></tt> subcommand.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">-y</span></tt>, <tt class="docutils literal"><span class="pre">--yes</span></tt></dt>
<dd>Do not prompt for confirmation.</dd>
</dl>
</div>
<div class="section" id="id9">
<h4>Examples<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<p>None.</p>
</div>
</div>
<div class="section" id="demote">
<h3>demote<a class="headerlink" href="#demote" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">demote</span></tt> subcommand to demote the current leader in the backend HA cluster, after which a new leader is elected from the group of available followers in the backend HA cluster. This command will:</p>
<ul class="simple">
<li>Complete with an exit code of <tt class="docutils literal"><span class="pre">0</span></tt> if the original leader was demoted and a new leader was elected successfully.</li>
<li>Return an error message and a non-zero exit code if leader election is prevented because failover has been disabled (for either the cluster or the node) or if a new leader could not be elected within the allowed time.</li>
</ul>
<div class="section" id="id10">
<h4>Syntax<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h4>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl demote
</pre></div>
</div>
</div>
<div class="section" id="id11">
<h4>Examples<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<p>None.</p>
</div>
</div>
<div class="section" id="force-leader">
<h3>force-leader<a class="headerlink" href="#force-leader" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">force-leader</span></tt> subcommand to force the node from which the command is run to become the leader in the backend HA cluster if there is not already an elected leader.</p>
<p>This command should only be run if:</p>
<ul class="simple">
<li>The backend cluster appears to not have an elected and available leader</li>
<li>All of the nodes in the backend HA cluster are believed to be in a healthy state; if one (or more) nodes are not healthy, first remove the unhealthy nodes, rebuild, and then rejoin them to the cluster</li>
</ul>
<p>This command will:</p>
<ul>
<li><p class="first">Run the <tt class="docutils literal"><span class="pre">chef-backend-ctl</span> <span class="pre">cluster-status</span></tt> subcommand to determine if a leader exists.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Nodes in the backend HA cluster may not be visible to each other when they are located in network parititions. This may prevent a cluster status check from discovering that a leader exists. If nodes exist on network parititions, to prevent this scenario, first run <tt class="docutils literal"><span class="pre">chef-backend-ctl</span> <span class="pre">cluster-status</span></tt>, and then verify the expected number of nodes in the backend HA cluster as healthy and <tt class="docutils literal"><span class="pre">waiting_for_leader</span></tt> before running this command.</p>
</div>
</li>
<li><p class="first">Complete with an exit code of <tt class="docutils literal"><span class="pre">0</span></tt> if the node from which the command is run becomes the leader.</p>
</li>
<li><p class="first">Return an error message and a non-zero exit code if a leader already exists.</p>
</li>
</ul>
<div class="section" id="id12">
<h4>Syntax<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h4>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl force-leader
</pre></div>
</div>
</div>
<div class="section" id="id13">
<h4>Examples<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h4>
<p>None.</p>
</div>
</div>
<div class="section" id="gather-logs">
<h3>gather-logs<a class="headerlink" href="#gather-logs" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">gather-logs</span></tt> subcommand to gather the log files for a machine in the Chef server backend HA cluster into a tarball that contains all of the important log files and system information.</p>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl gather-logs
</pre></div>
</div>
</div>
<div class="section" id="gen-sample-backend-config">
<h3>gen-sample-backend-config<a class="headerlink" href="#gen-sample-backend-config" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">gen-sample-backend-config</span></tt> subcommand to generate output that contains all of the backend HA cluster settings along with their default values. Use this subcommand to get the values for <tt class="docutils literal"><span class="pre">publish_address</span></tt> and <tt class="docutils literal"><span class="pre">vip_interface</span></tt> prior to bootstrapping a new node for the backend HA cluster.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Service-specific configuration settings&#8212;<tt class="docutils literal"><span class="pre">etcd</span></tt>, <tt class="docutils literal"><span class="pre">elasticsearch</span></tt>, <tt class="docutils literal"><span class="pre">leaderl</span></tt>, and <tt class="docutils literal"><span class="pre">postgresl</span></tt>&#8212;are generated automatically by the backend and should only be tuned under guidance from Chef. Service-specific configuration settings must be identical on all nodes in the backend HA cluster unless directed otherwise.</p>
</div>
<div class="section" id="id14">
<h4>Syntax<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h4>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl gen-sample-backend-config
</pre></div>
</div>
</div>
<div class="section" id="example-output">
<h4>Example Output<a class="headerlink" href="#example-output" title="Permalink to this headline">¶</a></h4>
<p>The following example shows the results of running the <tt class="docutils literal"><span class="pre">chef-backend-ctl</span> <span class="pre">gen-sample-backend-config</span></tt> subcommand. The settings and output will vary, depending on the configuration. The <tt class="docutils literal"><span class="pre">elasticsearch</span></tt>, <tt class="docutils literal"><span class="pre">etcd</span></tt>, <tt class="docutils literal"><span class="pre">leaderl</span></tt>, and <tt class="docutils literal"><span class="pre">postgresql</span></tt> settings are generated automatically and should not be modified:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">fqdn</span> <span class="o">=</span> <span class="s1">&#39;be1&#39;</span>
<span class="n">hide_sensitive</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">ip_version</span> <span class="o">=</span> <span class="s1">&#39;ipv4&#39;</span>
<span class="n">publish_address</span> <span class="o">=</span> <span class="s1">&#39;10.0.2.15&#39;</span>
<span class="n">vip</span> <span class="o">=</span> <span class="s1">&#39;10.0.2.15&#39;</span>
<span class="n">vip_interface</span> <span class="o">=</span> <span class="s1">&#39;eth0&#39;</span>
<span class="n">etcd</span><span class="o">.</span><span class="n">client_port</span> <span class="o">=</span> <span class="mi">2379</span>
<span class="n">etcd</span><span class="o">.</span><span class="n">enable</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">etcd</span><span class="o">.</span><span class="n">log_directory</span> <span class="o">=</span> <span class="s1">&#39;/var/log/chef-backend/etcd&#39;</span>
<span class="n">etcd</span><span class="o">.</span><span class="n">peer_port</span> <span class="o">=</span> <span class="mi">2380</span>
<span class="n">etcd</span><span class="o">.</span><span class="n">log_rotation</span><span class="o">.</span><span class="n">file_maxbytes</span> <span class="o">=</span> <span class="mi">104857600</span>
<span class="n">etcd</span><span class="o">.</span><span class="n">log_rotation</span><span class="o">.</span><span class="n">num_to_keep</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">archive_command</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">archive_mode</span> <span class="o">=</span> <span class="s1">&#39;off&#39;</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">archive_timeout</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">checkpoint_completion_target</span> <span class="o">=</span> <span class="mi">0</span><span class="o">.</span><span class="mi">5</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">checkpoint_timeout</span> <span class="o">=</span> <span class="s1">&#39;5min&#39;</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">checkpoint_warning</span> <span class="o">=</span> <span class="s1">&#39;30s&#39;</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">data_dir</span> <span class="o">=</span> <span class="s1">&#39;/var/opt/chef-backend/postgresql/9.5/data&#39;</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">db_superuser</span> <span class="o">=</span> <span class="s1">&#39;chef_pgsql&#39;</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">effective_cache_size</span> <span class="o">=</span> <span class="s1">&#39;496MB&#39;</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">enable</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">hot_standby</span> <span class="o">=</span> <span class="s1">&#39;on&#39;</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">keepalives_count</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">keepalives_idle</span> <span class="o">=</span> <span class="mi">60</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">keepalives_interval</span> <span class="o">=</span> <span class="mi">15</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">log_directory</span> <span class="o">=</span> <span class="s1">&#39;/var/log/chef-backend/postgresql/9.5&#39;</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">log_min_duration_statement</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">max_connections</span> <span class="o">=</span> <span class="mi">350</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">max_replication_slots</span> <span class="o">=</span> <span class="mi">12</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">max_wal_senders</span> <span class="o">=</span> <span class="mi">12</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">max_wal_size</span> <span class="o">=</span> <span class="mi">64</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">md5_auth_cidr_addresses</span> <span class="o">=</span> <span class="s1">&#39;[&quot;samehost&quot;, &quot;samenet&quot;]&#39;</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">min_wal_size</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">port</span> <span class="o">=</span> <span class="mi">5432</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">replication_user</span> <span class="o">=</span> <span class="s1">&#39;replicator&#39;</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">shared_buffers</span> <span class="o">=</span> <span class="s1">&#39;248MB&#39;</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">shmall</span> <span class="o">=</span> <span class="mi">4194304</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">shmmax</span> <span class="o">=</span> <span class="mi">17179869184</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="s1">&#39;chef_pgsql&#39;</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">wal_keep_segments</span> <span class="o">=</span> <span class="mi">32</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">wal_level</span> <span class="o">=</span> <span class="s1">&#39;hot_standby&#39;</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">wal_log_hints</span> <span class="o">=</span> <span class="s1">&#39;on&#39;</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">work_mem</span> <span class="o">=</span> <span class="s1">&#39;8MB&#39;</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">log_rotation</span><span class="o">.</span><span class="n">file_maxbytes</span> <span class="o">=</span> <span class="mi">104857600</span>
<span class="n">postgresql</span><span class="o">.</span><span class="n">log_rotation</span><span class="o">.</span><span class="n">num_to_keep</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">elasticsearch</span><span class="o">.</span><span class="n">data_dir</span> <span class="o">=</span> <span class="s1">&#39;/var/opt/chef-backend/elasticsearch/data&#39;</span>
<span class="n">elasticsearch</span><span class="o">.</span><span class="n">enable</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">elasticsearch</span><span class="o">.</span><span class="n">heap_size</span> <span class="o">=</span> <span class="mi">248</span>
<span class="n">elasticsearch</span><span class="o">.</span><span class="n">java_opts</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="n">elasticsearch</span><span class="o">.</span><span class="n">log_directory</span> <span class="o">=</span> <span class="s1">&#39;/var/log/chef-backend/elasticsearch&#39;</span>
<span class="n">elasticsearch</span><span class="o">.</span><span class="n">new_size</span> <span class="o">=</span> <span class="mi">32</span>
<span class="n">elasticsearch</span><span class="o">.</span><span class="n">plugins_directory</span> <span class="o">=</span> <span class="s1">&#39;/var/opt/chef-backend/elasticsearch/plugins&#39;</span>
<span class="n">elasticsearch</span><span class="o">.</span><span class="n">port</span> <span class="o">=</span> <span class="mi">9200</span>
<span class="n">elasticsearch</span><span class="o">.</span><span class="n">scripts_directory</span> <span class="o">=</span> <span class="s1">&#39;/var/opt/chef-backend/elasticsearch/scripts&#39;</span>
<span class="n">elasticsearch</span><span class="o">.</span><span class="n">temp_directory</span> <span class="o">=</span> <span class="s1">&#39;/var/opt/chef-backend/elasticsearch/&#39;</span>
<span class="n">elasticsearch</span><span class="o">.</span><span class="n">log_rotation</span><span class="o">.</span><span class="n">file_maxbytes</span> <span class="o">=</span> <span class="mi">104857600</span>
<span class="n">elasticsearch</span><span class="o">.</span><span class="n">log_rotation</span><span class="o">.</span><span class="n">num_to_keep</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">leaderl</span><span class="o">.</span><span class="n">control_worker_timeout_seconds</span> <span class="o">=</span> <span class="mi">30</span>
<span class="n">leaderl</span><span class="o">.</span><span class="n">db_timeout</span> <span class="o">=</span> <span class="mi">2000</span>
<span class="n">leaderl</span><span class="o">.</span><span class="n">enable</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">leaderl</span><span class="o">.</span><span class="n">health_check_interval_seconds</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">leaderl</span><span class="o">.</span><span class="n">leader_ttl_seconds</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">leaderl</span><span class="o">.</span><span class="n">log_directory</span> <span class="o">=</span> <span class="s1">&#39;/var/log/chef-backend/leaderl&#39;</span>
<span class="n">leaderl</span><span class="o">.</span><span class="n">status_internal_update_interval_seconds</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">leaderl</span><span class="o">.</span><span class="n">status_post_update_interval_seconds</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">leaderl</span><span class="o">.</span><span class="n">log_rotation</span><span class="o">.</span><span class="n">file_maxbytes</span> <span class="o">=</span> <span class="mi">104857600</span>
<span class="n">leaderl</span><span class="o">.</span><span class="n">log_rotation</span><span class="o">.</span><span class="n">max_messages_per_second</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">leaderl</span><span class="o">.</span><span class="n">log_rotation</span><span class="o">.</span><span class="n">num_to_keep</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">leaderl</span><span class="o">.</span><span class="n">etcd_pool</span><span class="o">.</span><span class="n">cull_interval_seconds</span> <span class="o">=</span> <span class="mi">60</span>
<span class="n">leaderl</span><span class="o">.</span><span class="n">etcd_pool</span><span class="o">.</span><span class="n">http_timeout_ms</span> <span class="o">=</span> <span class="mi">5000</span>
<span class="n">leaderl</span><span class="o">.</span><span class="n">etcd_pool</span><span class="o">.</span><span class="n">ibrowse_options</span> <span class="o">=</span> <span class="s1">&#39;{inactivity_timeout, infinity}&#39;</span>
<span class="n">leaderl</span><span class="o">.</span><span class="n">etcd_pool</span><span class="o">.</span><span class="n">init_count</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">leaderl</span><span class="o">.</span><span class="n">etcd_pool</span><span class="o">.</span><span class="n">max_age_seconds</span> <span class="o">=</span> <span class="mi">60</span>
<span class="n">leaderl</span><span class="o">.</span><span class="n">etcd_pool</span><span class="o">.</span><span class="n">max_connection_duration_seconds</span> <span class="o">=</span> <span class="mi">300</span>
<span class="n">leaderl</span><span class="o">.</span><span class="n">etcd_pool</span><span class="o">.</span><span class="n">max_count</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">ssl</span><span class="o">.</span><span class="n">certificate</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">ssl</span><span class="o">.</span><span class="n">certificate_key</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">ssl</span><span class="o">.</span><span class="n">ciphers</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span> <span class="n">list</span> <span class="n">of</span> <span class="n">cipers</span><span class="p">,</span> <span class="ow">not</span> <span class="n">shown</span><span class="p">)</span>
<span class="n">ssl</span><span class="o">.</span><span class="n">company_name</span> <span class="o">=</span> <span class="s1">&#39;YouCorp&#39;</span>
<span class="n">ssl</span><span class="o">.</span><span class="n">country_name</span> <span class="o">=</span> <span class="s1">&#39;US&#39;</span>
<span class="n">ssl</span><span class="o">.</span><span class="n">data_dir</span> <span class="o">=</span> <span class="s1">&#39;/var/opt/chef-backend/ssl/&#39;</span>
<span class="n">ssl</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="mi">3650</span>
<span class="n">ssl</span><span class="o">.</span><span class="n">key_length</span> <span class="o">=</span> <span class="mi">2048</span>
<span class="n">ssl</span><span class="o">.</span><span class="n">organizational_unit_name</span> <span class="o">=</span> <span class="s1">&#39;Operations&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="gen-server-config">
<h3>gen-server-config<a class="headerlink" href="#gen-server-config" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">gen-server-config</span></tt> subcommand to generate output for the <tt class="docutils literal"><span class="pre">chef-server.rb</span></tt> configuration file. This command may be run from any machine in the backend HA cluster, but must be run separately for each node that is part of the frontend group. This command will:</p>
<ul class="simple">
<li>Complete with an exit code of <tt class="docutils literal"><span class="pre">0</span></tt> if the <tt class="docutils literal"><span class="pre">chef-server.rb</span></tt> file is created successfully.</li>
<li>Return an error message and a non-zero exit code if a node has  not been bootstrapped or joined or if a FQDN is not provided.</li>
</ul>
<div class="section" id="id15">
<h4>Syntax<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h4>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl gen-server-config FQDN
</pre></div>
</div>
</div>
<div class="section" id="configure-the-frontend">
<h4>Configure the Frontend<a class="headerlink" href="#configure-the-frontend" title="Permalink to this headline">¶</a></h4>
<ol class="arabic">
<li><p class="first">On any node in the backend HA cluster, run the following command for each node in the frontend group:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl gen-server-config FQDN -f chef-server.rb.fqdn
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">FQDN</span></tt> is the FQDN for the frontend machine. The generated <tt class="docutils literal"><span class="pre">chef-server.rb</span></tt> file will contain all of the values necessary for any frontend Chef server to connect to and bootstrap against the backend HA cluster.</p>
</li>
<li><p class="first">On each frontend machine, install the <tt class="docutils literal"><span class="pre">chef-server-core</span></tt> package (version 12.4.0 or higher).</p>
</li>
<li><p class="first">On each frontend machine, copy the generated <tt class="docutils literal"><span class="pre">chef-server.rb</span></tt>.fqdn to <tt class="docutils literal"><span class="pre">/etc/opscode/chef-server.rb</span></tt>.</p>
</li>
<li><p class="first">On each frontend machine, with root permission, run the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-server-ctl reconfigure
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="id16">
<h4>Example Output<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h4>
<p>The following example shows the results of running the <tt class="docutils literal"><span class="pre">chef-backend-ctl</span> <span class="pre">gen-server-config</span></tt> subcommand. The settings and output will vary, depending on the configuration. These settings should be modified carefully:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">fqdn</span> <span class="s2">&quot;frontend1.chef-demo.com&quot;</span>
<span class="n">postgresql</span><span class="o">[</span><span class="s1">&#39;external&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">postgresql</span><span class="o">[</span><span class="s1">&#39;vip&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;192.168.33.220&#39;</span>
<span class="n">postgresql</span><span class="o">[</span><span class="s1">&#39;db_superuser&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;chef_pgsql&#39;</span>
<span class="n">postgresql</span><span class="o">[</span><span class="s1">&#39;db_superuser_password&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;...6810e52a01e562&#39;</span>
<span class="n">opscode_solr4</span><span class="o">[</span><span class="s1">&#39;external&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">opscode_solr4</span><span class="o">[</span><span class="s1">&#39;external_url&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;http://192.168.33.220:9200&#39;</span>
<span class="n">opscode_erchef</span><span class="o">[</span><span class="s1">&#39;search_provider&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;elasticsearch&#39;</span>
<span class="n">opscode_erchef</span><span class="o">[</span><span class="s1">&#39;search_queue_mode&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;batch&#39;</span>
<span class="n">bookshelf</span><span class="o">[</span><span class="s1">&#39;storage_type&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="ss">:sql</span>
<span class="n">rabbitmq</span><span class="o">[</span><span class="s1">&#39;enable&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">rabbitmq</span><span class="o">[</span><span class="s1">&#39;management_enabled&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">rabbitmq</span><span class="o">[</span><span class="s1">&#39;queue_length_monitor_enabled&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">opscode_expander</span><span class="o">[</span><span class="s1">&#39;enable&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">dark_launch</span><span class="o">[</span><span class="s1">&#39;actions&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">opscode_erchef</span><span class="o">[</span><span class="s1">&#39;nginx_bookshelf_caching&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="ss">:on</span>
<span class="n">opscode_erchef</span><span class="o">[</span><span class="s1">&#39;s3_url_expiry_window_size&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;50%&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">opscode_solr4</span></tt>, <tt class="docutils literal"><span class="pre">postgresql</span></tt>, and <tt class="docutils literal"><span class="pre">rabbitmq</span></tt> services are disabled in this configuration file for the frontend machines when running the Chef server with a backend HA cluster.</p>
</div>
</div>
</div>
<div class="section" id="help">
<h3>help<a class="headerlink" href="#help" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">help</span></tt> subcommand to print a list of all available chef-backend-ctl commands.</p>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl <span class="nb">help</span>
</pre></div>
</div>
</div>
<div class="section" id="join-cluster">
<h3>join-cluster<a class="headerlink" href="#join-cluster" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">join-cluster</span></tt> subcommand to configure a node to be a member of the backend HA cluster as a peer of the node at the specified <tt class="docutils literal"><span class="pre">PEER_NODE_IP</span></tt> IP address. This command will query the existing cluster to identify any necessary configuration information. If the <tt class="docutils literal"><span class="pre">--publish-address</span></tt> and <tt class="docutils literal"><span class="pre">--vip-interface</span></tt> options are not specified, and are specified in <tt class="docutils literal"><span class="pre">chef-backend.rb</span></tt>, the command will prompt with a list of items from which to choose.</p>
<p>This command will return an error message and a non-zero exit code when:</p>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">--secrets-file-path</span></tt> option is specified, a non-empty secrets file already exists at <tt class="docutils literal"><span class="pre">/etc/chef-backend/secrets.json</span></tt>, and the user declines to overwrite it.</li>
<li>The <tt class="docutils literal"><span class="pre">--secrets-file-path</span></tt> option is specified, but does not specify a valid file and/or the file at <tt class="docutils literal"><span class="pre">/etc/chef-backend/secrets.json</span></tt> is empty or does not exist.</li>
<li>The IP address specified by the <tt class="docutils literal"><span class="pre">--publish-address</span></tt> option does not exist on the node.</li>
<li>The interface specified by the <tt class="docutils literal"><span class="pre">--vip-interface</span></tt> option does not exist on the node.</li>
<li>Any IP address on the node is already registered in the backend HA cluster.</li>
<li>The node is already configured for the backend HA cluster and the <tt class="docutils literal"><span class="pre">--recovery</span></tt> option is not specified.</li>
<li>The <tt class="docutils literal"><span class="pre">--recovery</span></tt> option is specified, but no existing installation is found.</li>
<li><tt class="docutils literal"><span class="pre">--publish-address</span></tt> and/or <tt class="docutils literal"><span class="pre">--vip-interface</span></tt> are specified, but a non-empty <tt class="docutils literal"><span class="pre">chef-backend.rb</span></tt> file already exists. (This command will not overwrite a <tt class="docutils literal"><span class="pre">chef-backend.rb</span></tt> file.)</li>
</ul>
<p>If successful, this command will generate a <tt class="docutils literal"><span class="pre">chef-backend.rb</span></tt> file at <tt class="docutils literal"><span class="pre">/etc/chef-backend/chef-backend.rb</span></tt> with the values for the <tt class="docutils literal"><span class="pre">publish_address</span></tt>, <tt class="docutils literal"><span class="pre">vip_interface</span></tt>, and <tt class="docutils literal"><span class="pre">vip</span></tt> added automatically.</p>
<div class="section" id="id17">
<h4>Syntax<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h4>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl join-cluster PEER_NODE_IP <span class="o">(</span>options<span class="o">)</span>
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">PEER_NODE_IP</span></tt> is the IP address of a peer in the cluster to be joined.</p>
</div>
<div class="section" id="id18">
<h4>Options<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h4>
<p>This subcommand has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">-i</span> <span class="pre">INTERFACE</span></tt>, <tt class="docutils literal"><span class="pre">--vip-interface</span> <span class="pre">INTERFACE</span></tt></dt>
<dd><p class="first">The network interface to which the backend VIP will bind in the event that this node becomes leader. If not provided, and if not specified in <tt class="docutils literal"><span class="pre">chef-backend.rb</span></tt>, this command will prompt to choose from a list of interfaces that are currently available on the node.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This option should only be used the first time a node joins the backend HA cluster.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">-p</span> <span class="pre">IP_ADDRESS</span></tt>, <tt class="docutils literal"><span class="pre">--publish-address</span> <span class="pre">IP_ADDRESS</span></tt></dt>
<dd><p class="first">The IP address that is published within the backend HA cluster. This IP address must be accessible to all nodes in the backend HA cluster. If not provided, and if not specified in <tt class="docutils literal"><span class="pre">chef-backend.rb</span></tt>, this command will prompt to choose from a list of IP addresses that are currently bound on the node.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This option should only be used the first time a node joins the backend HA cluster.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--recovery</span></tt></dt>
<dd><p class="first">Force this node to rejoin the backend HA cluster if it has been removed via the <tt class="docutils literal"><span class="pre">chef-backend-ctl</span> <span class="pre">remove-node</span></tt> or <tt class="docutils literal"><span class="pre">chef-backend-ctl</span> <span class="pre">bootstrap</span> <span class="pre">--with-quorum-recovery</span></tt> commands.</p>
<blockquote class="last">
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This option will run against the existing <tt class="docutils literal"><span class="pre">chef-backend.rb</span></tt> file, which means the <tt class="docutils literal"><span class="pre">--vip-interface</span></tt> and <tt class="docutils literal"><span class="pre">--publish-address</span></tt> options should not be specified. (They are already defined in the <tt class="docutils literal"><span class="pre">chef-backend.rb</span></tt> file.)</p>
</div>
</div></blockquote>
</dd>
<dt><tt class="docutils literal"><span class="pre">-s</span> <span class="pre">PATH</span></tt>, <tt class="docutils literal"><span class="pre">--secrets-file-path</span> <span class="pre">PATH</span></tt></dt>
<dd>The path to the location of the <tt class="docutils literal"><span class="pre">secrets.json</span></tt> file on the bootstrapping node. Default value: <tt class="docutils literal"><span class="pre">/etc/chef-backend/secrets.json</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-y</span></tt>, <tt class="docutils literal"><span class="pre">--yes</span></tt></dt>
<dd>Do not prompt for confirmation.</dd>
</dl>
</div>
<div class="section" id="id19">
<h4>Examples<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h4>
<p>None.</p>
</div>
</div>
<div class="section" id="promote">
<h3>promote<a class="headerlink" href="#promote" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">promote</span></tt> subcommand to promote the named node to be leader of the backend HA cluster. This command will:</p>
<ul class="simple">
<li>Complete with an exit code of <tt class="docutils literal"><span class="pre">0</span></tt> when the leader of the backend HA cluster is replaced as leader by the named node.</li>
<li>Return an error message and a non-zero exit code if the named node is already leader because failover has been disabled (for either the cluster or the node) or if the new leader could not be promoted within the allowed time.</li>
</ul>
<div class="section" id="id20">
<h4>Syntax<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h4>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl promote NODE
</pre></div>
</div>
</div>
<div class="section" id="id21">
<h4>Examples<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h4>
<p>None.</p>
</div>
</div>
<div class="section" id="reconfigure">
<h3>reconfigure<a class="headerlink" href="#reconfigure" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">reconfigure</span></tt> subcommand to reconfigure a machine in the Chef server backend HA cluster. This subcommand will also restart any services for which the <tt class="docutils literal"><span class="pre">service_name['enabled']</span></tt> setting is set to <tt class="docutils literal"><span class="pre">true</span></tt>.</p>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl reconfigure
</pre></div>
</div>
</div>
<div class="section" id="remove-node">
<h3>remove-node<a class="headerlink" href="#remove-node" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">remove-node</span></tt> subcommand to remove the named node from the backend HA cluster by removing the node&#8217;s status from etcd and deleting it from the etcd cluster. This command is useful when a node is going to be replaced or if the <tt class="docutils literal"><span class="pre">join-cluster</span></tt> command was unsuccessful.</p>
<p>This command may not be run from the node that is to be removed; the node itself must be shut down physically or have all services stopped (via the the <tt class="docutils literal"><span class="pre">chef-backend-ctl</span> <span class="pre">stop</span></tt> command). If the node is still running or otherwise available to the backend HA cluster, this command will return an error message and a non-zero exist code.</p>
<div class="section" id="id22">
<h4>Syntax<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h4>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl remove-node NODE_NAME
</pre></div>
</div>
</div>
<div class="section" id="id23">
<h4>Options<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h4>
<p>This subcommand has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">-y</span></tt>, <tt class="docutils literal"><span class="pre">--yes</span></tt></dt>
<dd>Do not prompt for confirmation.</dd>
</dl>
</div>
<div class="section" id="id24">
<h4>Examples<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h4>
<p>None.</p>
</div>
</div>
<div class="section" id="restore">
<h3>restore<a class="headerlink" href="#restore" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">restore</span></tt> subcommand to restore a backup created by the <tt class="docutils literal"><span class="pre">chef-backend-ctl</span> <span class="pre">backup</span></tt> subcommand. This command should be executed on the leader node in the backend HA cluster. This command will delete all existing data and replace it with the data in the backup archive.</p>
<div class="section" id="id25">
<h4>Syntax<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h4>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl restore PATH <span class="o">(</span>options<span class="o">)</span>
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">PATH</span></tt> is the path to a tar.gz file that was created by the <tt class="docutils literal"><span class="pre">chef-backend-ctl</span> <span class="pre">backup</span></tt> subcommand.</p>
</div>
<div class="section" id="id26">
<h4>Options<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h4>
<p>This subcommand has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">-d</span> <span class="pre">DIRECTORY</span></tt>, <tt class="docutils literal"><span class="pre">--staging-dir</span> <span class="pre">DIRECTORY</span></tt></dt>
<dd>The path to an empty directory to be used during the restore operation. This directory must have enough available space to expand all data in the backup archive.</dd>
<dt><tt class="docutils literal"><span class="pre">-y</span></tt>, <tt class="docutils literal"><span class="pre">--yes</span></tt></dt>
<dd>Do not prompt for confirmation.</dd>
</dl>
</div>
<div class="section" id="id27">
<h4>Examples<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h4>
<p><strong>Restore data to the backend leader</strong></p>
<p>From the leader node, run the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl restore /var/opt/chef-backup/backup_file.tgz
</pre></div>
</div>
</div>
</div>
<div class="section" id="set-cluster-failover">
<h3>set-cluster-failover<a class="headerlink" href="#set-cluster-failover" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">set-cluster-failover</span></tt> subcommand to enable or disable failover across the backend HA cluster.</p>
<div class="section" id="id28">
<h4>Syntax<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h4>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl set-cluster-failover STATE
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">STATE</span></tt> may be one of <tt class="docutils literal"><span class="pre">on</span></tt>, <tt class="docutils literal"><span class="pre">off</span></tt>, <tt class="docutils literal"><span class="pre">true</span></tt>, <tt class="docutils literal"><span class="pre">false</span></tt>, <tt class="docutils literal"><span class="pre">enabled</span></tt>, or <tt class="docutils literal"><span class="pre">disabled</span></tt>.</p>
</div>
</div>
<div class="section" id="set-node-failover">
<h3>set-node-failover<a class="headerlink" href="#set-node-failover" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">set-node-failover</span></tt> subcommand to enable or disable failover for a node in the backend HA cluster.</p>
<div class="section" id="id29">
<h4>Syntax<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h4>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl set-node-failover STATE
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">STATE</span></tt> may be one of <tt class="docutils literal"><span class="pre">on</span></tt>, <tt class="docutils literal"><span class="pre">off</span></tt>, <tt class="docutils literal"><span class="pre">true</span></tt>, <tt class="docutils literal"><span class="pre">false</span></tt>, <tt class="docutils literal"><span class="pre">enabled</span></tt>, or <tt class="docutils literal"><span class="pre">disabled</span></tt>.</p>
</div>
</div>
<div class="section" id="show-config">
<h3>show-config<a class="headerlink" href="#show-config" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">show-config</span></tt> subcommand is used to view the configuration that will be generated by the <tt class="docutils literal"><span class="pre">reconfigure</span></tt> subcommand. This command is most useful in the early stages of a deployment to ensure that everything is built properly prior to installation.</p>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl show-config
</pre></div>
</div>
</div>
<div class="section" id="status">
<h3>status<a class="headerlink" href="#status" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">status</span></tt> subcommand to show the status of all services available to a node in the backend HA cluster. This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl status
</pre></div>
</div>
<p>and will return the status for all services. Status can be returned for individual services by specifying the name of the service as part of the command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl status SERVICE_NAME
</pre></div>
</div>
<p>For example, full output:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl status
</pre></div>
</div>
<p>is similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>Service        Local Status        Time in State  Distributed Node Status
elasticsearch  running <span class="o">(</span>pid 6661<span class="o">)</span>  1d 5h 59m 41s  state: green<span class="p">;</span> nodes online: 3/3
etcd           running <span class="o">(</span>pid 6742<span class="o">)</span>  1d 5h 59m 39s  health: green<span class="p">;</span> healthy nodes: 3/3
leaderl        running <span class="o">(</span>pid 6788<span class="o">)</span>  1d 5h 59m 35s  leader: 1<span class="p">;</span> waiting: 0<span class="p">;</span> follower: 2<span class="p">;</span> total: 3
postgresql     running <span class="o">(</span>pid 6640<span class="o">)</span>  1d 5h 59m 43s  leader: 1<span class="p">;</span> offline: 0<span class="p">;</span> syncing: 0<span class="p">;</span> synced: 2
</pre></div>
</div>
<p>which shows status for a healthy backend HA cluster. The first three columns&#8211;<tt class="docutils literal"><span class="pre">Service</span></tt>, <tt class="docutils literal"><span class="pre">Local</span> <span class="pre">Status</span></tt>, and <tt class="docutils literal"><span class="pre">Time</span> <span class="pre">in</span> <span class="pre">State</span></tt> summarize the local state. The <tt class="docutils literal"><span class="pre">Distributed</span> <span class="pre">Node</span> <span class="pre">Status</span></tt> columm shows:</p>
<ul class="simple">
<li>A three node cluster</li>
<li>All nodes healthy and online</li>
<li>A leader selected with two followers (for both leader/follower status for the <tt class="docutils literal"><span class="pre">leaderl</span></tt> service and a leader/synced state for the <tt class="docutils literal"><span class="pre">postgresql</span></tt> service)</li>
</ul>
<p>Simple output:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl status --simple
</pre></div>
</div>
<p>is similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>run: elasticsearch: <span class="o">(</span>pid 6661<span class="o">)</span> 106983s<span class="p">;</span> run: log: <span class="o">(</span>pid 6667<span class="o">)</span> 106983s
run: etcd: <span class="o">(</span>pid 6742<span class="o">)</span> 106981s<span class="p">;</span> run: log: <span class="o">(</span>pid 6630<span class="o">)</span> 106984s
run: leaderl: <span class="o">(</span>pid 6788<span class="o">)</span> 106976s<span class="p">;</span> run: log: <span class="o">(</span>pid 6739<span class="o">)</span> 106982s
run: postgresql: <span class="o">(</span>pid 6640<span class="o">)</span> 106984s<span class="p">;</span> run: log: <span class="o">(</span>pid 6653<span class="o">)</span> 106983s
</pre></div>
</div>
<p>which shows the state of the services, process identifiers, and uptime (in seconds). Simple output is useful if one (or more) nodes in the backend HA cluster are down or in a degraded state.</p>
</div>
<div class="section" id="uninstall">
<h3>uninstall<a class="headerlink" href="#uninstall" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">uninstall</span></tt> subcommand is used to remove the Chef server application from a machine in the backend HA cluster, but without removing any of the data. This subcommand will shut down all services (including the <tt class="docutils literal"><span class="pre">runit</span></tt> process supervisor).</p>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl uninstall
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To revert the <tt class="docutils literal"><span class="pre">uninstall</span></tt> subcommand, run the <tt class="docutils literal"><span class="pre">reconfigure</span></tt> subcommand (because the <tt class="docutils literal"><span class="pre">start</span></tt> subcommand is disabled by the <tt class="docutils literal"><span class="pre">uninstall</span></tt> command).</p>
</div>
</div>
<div class="section" id="service-subcommands">
<h3>Service Subcommands<a class="headerlink" href="#service-subcommands" title="Permalink to this headline">¶</a></h3>
<p>This command has a built in process supervisor that ensures all of the required services are in the appropriate state at any given time. The supervisor starts two processes per service and provides the following subcommands for managing services: <tt class="docutils literal"><span class="pre">hup</span></tt>, <tt class="docutils literal"><span class="pre">int</span></tt>, <tt class="docutils literal"><span class="pre">kill</span></tt>, <tt class="docutils literal"><span class="pre">once</span></tt>, <tt class="docutils literal"><span class="pre">restart</span></tt>, <tt class="docutils literal"><span class="pre">service-list</span></tt>, <tt class="docutils literal"><span class="pre">start</span></tt>, <tt class="docutils literal"><span class="pre">status</span></tt>, <tt class="docutils literal"><span class="pre">stop</span></tt>, <tt class="docutils literal"><span class="pre">tail</span></tt>, and <tt class="docutils literal"><span class="pre">term</span></tt>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The following commands are disabled when an external PostgreSQL database is configured for the Chef server: <tt class="docutils literal"><span class="pre">hup</span></tt>, <tt class="docutils literal"><span class="pre">int</span></tt>, <tt class="docutils literal"><span class="pre">kill</span></tt>, <tt class="docutils literal"><span class="pre">once</span></tt>, <tt class="docutils literal"><span class="pre">restart</span></tt>, <tt class="docutils literal"><span class="pre">service-list</span></tt>, <tt class="docutils literal"><span class="pre">start</span></tt>, <tt class="docutils literal"><span class="pre">stop</span></tt>, <tt class="docutils literal"><span class="pre">tail</span></tt>, and <tt class="docutils literal"><span class="pre">term</span></tt>.</p>
</div>
<div class="section" id="hup">
<h4>hup<a class="headerlink" href="#hup" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">hup</span></tt> subcommand to send a <tt class="docutils literal"><span class="pre">SIGHUP</span></tt> to all services on a machine in the Chef server backend HA cluster. This command can also be run for an individual service by specifying the name of the service in the command.</p>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl hup SERVICE_NAME
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">SERVICE_NAME</span></tt> represents the name of any service that is listed after running the <tt class="docutils literal"><span class="pre">service-list</span></tt> subcommand.</p>
</div>
<div class="section" id="int">
<h4>int<a class="headerlink" href="#int" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">int</span></tt> subcommand to send a <tt class="docutils literal"><span class="pre">SIGINT</span></tt> to all services on a machine in the Chef server backend HA cluster. This command can also be run for an individual service by specifying the name of the service in the command.</p>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl int SERVICE_NAME
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">SERVICE_NAME</span></tt> represents the name of any service that is listed after running the <tt class="docutils literal"><span class="pre">service-list</span></tt> subcommand.</p>
</div>
<div class="section" id="kill">
<h4>kill<a class="headerlink" href="#kill" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">kill</span></tt> subcommand to send a <tt class="docutils literal"><span class="pre">SIGKILL</span></tt> to all services on a machine in the Chef server backend HA cluster. This command can also be run for an individual service by specifying the name of the service in the command.</p>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl <span class="nb">kill</span> SERVICE_NAME
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">SERVICE_NAME</span></tt> represents the name of any service that is listed after running the <tt class="docutils literal"><span class="pre">service-list</span></tt> subcommand.</p>
</div>
<div class="section" id="once">
<h4>once<a class="headerlink" href="#once" title="Permalink to this headline">¶</a></h4>
<p>The supervisor for a machine in the Chef server backend HA cluster is configured to restart any service that fails, unless that service has been asked to change its state. The <tt class="docutils literal"><span class="pre">once</span></tt> subcommand is used to tell the supervisor to not attempt to restart any service that fails.</p>
<p>This command is useful when troubleshooting configuration errors that prevent a service from starting. Run the <tt class="docutils literal"><span class="pre">once</span></tt> subcommand followed by the <tt class="docutils literal"><span class="pre">status</span></tt> subcommand to look for services in a down state and/or to identify which services are in trouble. This command can also be run for an individual service by specifying the name of the service in the command.</p>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl once SERVICE_NAME
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">SERVICE_NAME</span></tt> represents the name of any service that is listed after running the <tt class="docutils literal"><span class="pre">service-list</span></tt> subcommand.</p>
</div>
<div class="section" id="restart">
<h4>restart<a class="headerlink" href="#restart" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">restart</span></tt> subcommand to restart all services enabled on a machine in the Chef server backend HA cluster, or to restart an individual service by specifying the name of that service in the command.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">When running the Chef server in a high availability configuration, restarting all services may trigger failover.</p>
</div>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl restart SERVICE_NAME
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">SERVICE_NAME</span></tt> represents the name of any service that is listed after running the <tt class="docutils literal"><span class="pre">service-list</span></tt> subcommand. When a service is successfully restarted the output should be similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ ok: run: service_name: <span class="o">(</span>pid 12345<span class="o">)</span> 1s
</pre></div>
</div>
</div>
<div class="section" id="service-list">
<h4>service-list<a class="headerlink" href="#service-list" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">service-list</span></tt> subcommand to display a list of all available services on a machine in the Chef server backend HA cluster. A service that is enabled is labeled with an asterisk (*).</p>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl service-list
</pre></div>
</div>
</div>
<div class="section" id="start">
<h4>start<a class="headerlink" href="#start" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">start</span></tt> subcommand to start all services that are enabled on a machine in the Chef server backend HA cluster. This command can also be run for an individual service by specifying the name of the service in the command.</p>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl start SERVICE_NAME
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">SERVICE_NAME</span></tt> represents the name of any service that is listed after running the <tt class="docutils literal"><span class="pre">service-list</span></tt> subcommand. When a service is successfully started the output should be similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ ok: run: service_name: <span class="o">(</span>pid 12345<span class="o">)</span> 1s
</pre></div>
</div>
<p>The supervisor for a machine in the Chef server backend HA cluster is configured to wait seven seconds for a service to respond to a command from the supervisor. If you see output that references a timeout, it means that a signal has been sent to the process, but that the process has yet to actually comply. In general, processes that have timed out are not a big concern, unless they are failing to respond to the signals at all. If a process is not responding, use a command like the <tt class="docutils literal"><span class="pre">kill</span></tt> subcommand to stop the process, investigate the cause (if required), and then use the <tt class="docutils literal"><span class="pre">start</span></tt> subcommand to re-enable it.</p>
</div>
<div class="section" id="stop">
<h4>stop<a class="headerlink" href="#stop" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">stop</span></tt> subcommand to stop all services enabled on the Chef server backend HA cluster. This command can also be run for an individual service by specifying the name of the service in the command.</p>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl stop SERVICE_NAME
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">SERVICE_NAME</span></tt> represents the name of any service that is listed after running the <tt class="docutils literal"><span class="pre">service-list</span></tt> subcommand. When a service is successfully stopped the output should be similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ ok: diwb: service_name: 0s, normally up
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl stop
</pre></div>
</div>
<p>will return something similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>ok: down: etcd: 393s, normally up
ok: down: postgresql: 388s, normally up
</pre></div>
</div>
</div>
<div class="section" id="tail">
<h4>tail<a class="headerlink" href="#tail" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">tail</span></tt> subcommand to follow all of the logs for all services on a machine in the Chef server backend HA cluster. This command can also be run for an individual service by specifying the name of the service in the command.</p>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl tail SERVICE_NAME
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">SERVICE_NAME</span></tt> represents the name of any service that is listed after running the <tt class="docutils literal"><span class="pre">service-list</span></tt> subcommand.</p>
</div>
<div class="section" id="term">
<h4>term<a class="headerlink" href="#term" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">term</span></tt> subcommand to send a <tt class="docutils literal"><span class="pre">SIGTERM</span></tt> to all services on a machine in the Chef server backend HA cluster. This command can also be run for an individual service by specifying the name of the service in the command.</p>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-backend-ctl term SERVICE_NAME
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">SERVICE_NAME</span></tt> represents the name of any service that is listed after running the <tt class="docutils literal"><span class="pre">service-list</span></tt> subcommand.</p>
</div>
</div>
</div>
</div>


          </div>


          <div class="footer" role="contentinfo">
                &copy; Copyright: This work is licensed under a Creative Commons Attribution 3.0 Unported License.
              This page is about: current version of Chef.
            <a href="/feedback.html">Provide feedback on Chef documentation</a>.
            </div>

<!-- Start of Async Google Analytics Code -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-6369228-7', 'auto', {'legacyCookieDomain': '.chef.io', 'allowLinker': true});
  ga('send', 'pageview');

  var trackOutboundLink = function(url) {
    if (ga.q) {
     document.location = url;
    } else {
      ga('send', 'event', 'outbound', 'click', url, {'hitCallback':
        function () {
          document.location = url;
        }
      });
    }
  };
</script>
<!-- End of Async Google Analytics Code -->

<!-- Start of Marketo Analytics Code -->
<script type="text/javascript">
(function() {
  var didInit = false;
  function initMunchkin() {
    if(didInit === false) {
      didInit = true;
      Munchkin.init('255-VFB-268');
    }
  }
  var s = document.createElement('script');
  s.type = 'text/javascript';
  s.async = true;
  s.src = document.location.protocol + '//munchkin.marketo.net/munchkin.js';
  s.onreadystatechange = function() {
    if (this.readyState == 'complete' || this.readyState == 'loaded') {
      initMunchkin();
    }
  };
  s.onload = initMunchkin;
  document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>
<!-- End of Marketo Analytics Code -->

<!-- Start of DemandBase Analytics Code -->
<script type="text/javascript">
	(function(d,b,a,s,e){ var t = b.createElement(a),
		fs = b.getElementsByTagName(a)[0]; t.async=1; t.id=e;
		t.src=('https:'==document.location.protocol ? 'https://' : 'http://') + s;
		fs.parentNode.insertBefore(t, fs); })
	(window,document,'script','scripts.demandbase.com/zH7sZrWR.min.js','demandbase_js_lib');
</script>
<!-- End of DemandBase Analytics Code -->

<!-- Start of Segment Analytics Code -->
<script type="text/javascript">
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="4.0.0";
  analytics.load("RtyoRfLf1ZETiJcIfkKND3Wq1K1LhYHx");
  analytics.page();
  }}();
</script>
<!-- End of Segment Analytics Code -->


        </div>
      </div>

      <div class="clearer"></div>
    </div>

  </div>
  </body>
</html>