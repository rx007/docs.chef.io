<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    
    <title>About Ohai &mdash; Chef Docs</title>
    <link rel="stylesheet" href="_static/chefv2.css" type="text/css" />
<link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
    URL_ROOT:    './',
    VERSION:     '',
    COLLAPSE_INDEX: false,
    FILE_SUFFIX: '.html',
    HAS_SOURCE:  true
  };
</script>
<script type="text/javascript" src="_static/jquery.js"></script>
<script type="text/javascript" src="_static/underscore.js"></script>
<script type="text/javascript" src="_static/doctools.js"></script>
<script type="text/javascript" src="_static/script.js"></script>

    <link rel="top" title="Chef Docs" href="index.html" />
    <link rel="next" title="Ohai Custom Plugins" href="ohai_custom.html" />
    <link rel="prev" title="About Nodes" href="nodes.html" /> 
  </head>
  <body role="document">
    <div class="body-wrap">

  <nav class="nav-main" role="navigation" data-topbar>
    <div class="nav-inner">
      <div class="left">
        <h1>
          <a href="https://learn.chef.io">
            <span>Learn Chef</span>
          </a>
        </h1>
      </div>

      <i id="nav-icon" class="fa fa-bars"></i>
      <a href="https://www.chef.io/">
        <img id="logo" src="_static/chef_logo_v2.svg" onerror="_static/chef_logo_v2.png"/>
      </a>

      <ul class="nav-links links-main">
        <li class="nav-link">
          <a href="https://learn.chef.io/tutorials">Tutorials</a>
        </li>
        <li class="nav-link">
          <a href="https://learn.chef.io/skills/">Skills Library</a>
        </li>
        <li class="nav-link is-active">
          <a href="https://docs.chef.io/">Docs</a>
        </li>
        <li class="nav-link">
          <a href="https://www.chef.io/training/">Training</a>
        </li>
      </ul>
    </div>
  </nav>





    <div class="document chef-docs">
    <nav class="nav-docs">
  <ul class="nav-docs-items" id="nav-docs-list">
    <li class="main-item dark-item docs-search">
      <form action="/search.html" method="get">
        <input type="text" placeholder="Search" id="docs-search" name="q">
        <input type="submit" class="submit-button" value="">
        <i class="fa fa-search icon-search"></i>
      </form>
   

    </li>
    
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Overview"> <!-- else item does not have custom image and should use FontAwesome icon -->

        <i class="fa fa-home icon-left"></i> Overview <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items"> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/platform_overview.html" title="Platform Overview">
            Platform Overview
          </a>
        </li>

         <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Community">
            Community
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/community.html" title="About the Community">
                About the Community
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/community_contributions.html" title="Contributing">
                Contributing
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/community_guidelines.html" title="Guidelines">
                Guidelines
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/style_guide.html" title="Docs Style Guide">
                Docs Style Guide
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Packages &amp; Platforms">
            Packages &amp; Platforms
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/packages.html" title="Packages">
                Packages
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/platforms.html" title="Platforms">
                Platforms
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_omnitruck.html" title="Omnitruck API">
                Omnitruck API
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_license.html" title="Licensing">
                Licensing
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Chef"> <!-- else item does not have custom image and should use FontAwesome icon -->

        <i class="fa fa-tasks icon-left"></i> Chef <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items">

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Getting Started">
            Getting Started
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_overview.html" title="Chef Overview">
                Chef Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/quick_start.html" title="Quick Start">
                Quick Start
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_system_requirements.html" title="System Requirements">
                System Requirements
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Release Notes">
                Release Notes
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/release_notes.html" title="Chef Client">
                    Chef Client
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/release_notes_chefdk.html" title="Chef Development Kit">
                    Chef Development Kit
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/release_notes_server.html" title="Chef Server">
                    Chef Server
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/release_notes_push_jobs.html" title="Chef Push Jobs">
                    Chef Push Jobs
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/release_notes_ohai.html" title="Ohai">
                    Ohai
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_deprecations_client.html" title="Deprecations">
                Deprecations
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Tutorials">
            Tutorials
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/learn-the-basics/" title="Learn the Basics">
                Learn the Basics
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/manage-a-node/" title="Manage a Node">
                Manage a Node
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/local-development/" title="Get started with Test Kitchen">
                Get started with Test Kitchen
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/manage-a-web-app/" title="Develop a web app cookbook">
                Develop a web app cookbook
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/inspec/" title="Verify with InSpec">
                Verify with InSpec
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/chefspec/" title="Unit test with ChefSpec">
                Unit test with ChefSpec
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/verify-style/" title="Verify code style">
                Verify code style
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/refactor-web-app-cookbook/" title="Refactor the web app cookbook">
                Refactor the web app cookbook
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Concepts">
            Concepts
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/workstation.html" title="Workstation">
                Workstation
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_repo.html" title="chef-repo">
                chef-repo
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/nodes.html" title="Nodes">
                Nodes
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_client.html" title="chef-client">
                chef-client
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_components.html" title="Server">
                Server
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_search.html" title="Search">
                Search
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/cookbooks.html" title="Cookbooks">
                Cookbooks
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/handlers.html" title="Handlers">
                Handlers
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/manage.html" title="Management Console">
                Management Console
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Policy">
                Policy
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/policy.html" title="About Policy">
                    About Policy
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/data_bags.html" title="Data Bags">
                    Data Bags
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/environments.html" title="Environments">
                    Environments
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/roles.html" title="Roles">
                    Roles
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/push_jobs.html" title="Push Jobs">
                Push Jobs
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/run_lists.html" title="Run-lists">
                Run-lists
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Security">
                Security
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/auth.html#authentication" title="Authentication">
                    Authentication
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/auth.html#authorization" title="Authorization">
                    Authorization
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/chef_private_keys.html" title="Private Keys">
                    Private Keys
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef_client.html#run-in-fips-mode" title="FIPS-mode">
                    FIPS-mode
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Supermarket">
                Supermarket
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/supermarket.html#public-supermarket" title="Public Supermarket">
                    Public Supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/supermarket.html#private-supermarket" title="Private Supermarket">
                    Private Supermarket
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/windows.html" title="Microsoft Windows">
                Microsoft Windows
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Appendix">
                Appendix
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/environment_variables.html" title="Env Variables">
                    Env Variables
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/errors.html" title="Troubleshooting">
                    Troubleshooting
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/glossary.html" title="Glossary">
                    Glossary
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Setup">
            Setup
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/proxies.html" title="Proxies">
                Proxies
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_dk.html" title="Workstation">
                Workstation
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Nodes">
                Nodes
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/install_bootstrap.html" title="Install via Bootstrap">
                    Install via Bootstrap
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_omnibus.html" title="Install via URL">
                    Install via URL
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_windows.html" title="Install on Windows">
                    Install on Windows
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/junos.html" title="Install on Junos OS">
                    Install on Junos OS
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef_client.html" title="chef-client (executable)">
                    chef-client (executable)
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_client.html" title="client.rb">
                    client.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/upgrade_client.html" title="Upgrades">
                    Upgrades
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/chef_client_security.html" title="Security">
                    Security
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Server">
                Server
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="https://manage.chef.io/signup" title="Hosted Chef Server">
                    Hosted Chef Server
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_server.html#standalone" title="Install Standalone">
                    Install Standalone
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_server_ha.html" title="Install High Availability">
                    Install High Availability
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/aws_marketplace.html" title="AWS Marketplace">
                    AWS Marketplace
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/azure_portal.html" title="Microsoft Azure">
                    Microsoft Azure
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/openstack.html" title="Openstack">
                    Openstack
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Supermarket">
                Supermarket
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="https://supermarket.chef.io" title="Public Supermarket">
                    Public Supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_supermarket.html" title="Install Private Supermarket">
                    Install Private Supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_supermarket.html#customize-supermarket" title="Customize Supermarket">
                    Customize Supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_supermarket.html#run-supermarket-in-kitchen" title="Run in Test Kitchen">
                    Run in Test Kitchen
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_server.html#install" title="Management Console">
                Management Console
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_push_jobs.html" title="Push Jobs">
                Push Jobs
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Integrations">
                Integrations
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/integrate_compliance_chef_server.html" title="w/Chef Compliance">
                    w/Chef Compliance
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/uninstall.html" title="Uninstall">
                Uninstall
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Cookbook Reference">
            Cookbook Reference
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/cookbooks.html" title="About Cookbooks">
                About Cookbooks
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/attributes.html" title="Attributes">
                Attributes
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/definitions.html" title="Definitions">
                Definitions
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/files.html" title="Files">
                Files
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/libraries.html" title="Libraries">
                Libraries
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Recipes">
                Recipes
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/recipes.html" title="About Recipes">
                    About Recipes
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/debug.html" title="Debug Recipes, Client Runs">
                    Debug Recipes, Client Runs
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Recipe DSL">
                Recipe DSL
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#attribute" title="attribute?">
                    attribute?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#control" title="control">
                    control
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#control-group" title="control_group">
                    control_group
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#cookbook-name" title="cookbook_name">
                    cookbook_name
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#data-bag" title="data_bag">
                    data_bag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#data-bag-item" title="data_bag_item">
                    data_bag_item
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#platform" title="platform?">
                    platform?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#platform-family" title="platform_family?">
                    platform_family?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#reboot-pending" title="reboot_pending?">
                    reboot_pending?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#recipe-name" title="recipe_name">
                    recipe_name
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-data-exists" title="registry_data_exists?">
                    registry_data_exists?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-get-subkeys" title="registry_get_subkeys">
                    registry_get_subkeys
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-get-values" title="registry_get_values">
                    registry_get_values
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-has-subkeys" title="registry_has_subkeys?">
                    registry_has_subkeys?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-key-exists" title="registry_key_exists?">
                    registry_key_exists?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-value-exists" title="registry_value_exists?">
                    registry_value_exists?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#resources" title="resources">
                    resources
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#search" title="search">
                    search
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#shell-out" title="shell_out">
                    shell_out
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#shell-out-bang" title="shell_out!">
                    shell_out!
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#shell-out-with-systems-locale" title="shell_out_with_systems_locale">
                    shell_out_with_systems_locale
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#tag-tagged-untag" title="tag">
                    tag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#tag-tagged-untag" title="tagged?">
                    tagged?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#tag-tagged-untag" title="untag">
                    untag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#value-for-platform" title="value_for_platform">
                    value_for_platform
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#value-for-platform-family" title="value_for_platform_family">
                    value_for_platform_family
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#helpers" title="Windows Platform Helpers">
                    Windows Platform Helpers
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Resources">
                Resources
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/resource.html" title="About Resources">
                    About Resources
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_common.html" title="Common Functionality">
                    Common Functionality
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/custom_resources.html" title="Custom Resources">
                    Custom Resources
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resources.html" title="All Resources (Single Page)">
                    All Resources (Single Page)
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_apt_package.html" title="apt_package">
                    apt_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_apt_repository.html" title="apt_repository">
                    apt_repository
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_apt_update.html" title="apt_update">
                    apt_update
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_bash.html" title="bash">
                    bash
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_batch.html" title="batch">
                    batch
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_bff_package.html" title="bff_package">
                    bff_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_breakpoint.html" title="breakpoint">
                    breakpoint
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_cab_package.html" title="cab_package">
                    cab_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_gem.html" title="chef_gem">
                    chef_gem
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_acl.html" title="chef_acl">
                    chef_acl
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_client.html" title="chef_client">
                    chef_client
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_container.html" title="chef_container">
                    chef_container
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_data_bag_item.html" title="chef_data_bag_item">
                    chef_data_bag_item
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_data_bag.html" title="chef_data_bag">
                    chef_data_bag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_environment.html" title="chef_environment">
                    chef_environment
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_group.html" title="chef_group">
                    chef_group
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_handler.html" title="chef_handler">
                    chef_handler
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_mirror.html" title="chef_mirror">
                    chef_mirror
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_node.html" title="chef_node">
                    chef_node
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_organization.html" title="chef_organization">
                    chef_organization
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_role.html" title="chef_role">
                    chef_role
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_user.html" title="chef_user">
                    chef_user
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chocolatey_package.html" title="chocolatey_package">
                    chocolatey_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_cookbook_file.html" title="cookbook_file">
                    cookbook_file
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_cron.html" title="cron">
                    cron
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_csh.html" title="csh">
                    csh
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_deploy.html" title="deploy">
                    deploy
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_directory.html" title="directory">
                    directory
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_dpkg_package.html" title="dpkg_package">
                    dpkg_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_dsc_resource.html" title="dsc_resource">
                    dsc_resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_dsc_script.html" title="dsc_script">
                    dsc_script
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_easy_install_package.html" title="easy_install_package">
                    easy_install_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_env.html" title="env">
                    env
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_erlang_call.html" title="erl_call">
                    erl_call
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_execute.html" title="execute">
                    execute
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_file.html" title="file">
                    file
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_freebsd_package.html" title="freebsd_package">
                    freebsd_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_gem_package.html" title="gem_package">
                    gem_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_git.html" title="git">
                    git
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_group.html" title="group">
                    group
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_homebrew_package.html" title="homebrew_package">
                    homebrew_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_http_request.html" title="http_request">
                    http_request
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ifconfig.html" title="ifconfig">
                    ifconfig
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ips_package.html" title="ips_package">
                    ips_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ksh.html" title="ksh">
                    ksh
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_launchd.html" title="launchd">
                    launchd
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_link.html" title="link">
                    link
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_log.html" title="log">
                    log
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_macports_package.html" title="macports_package">
                    macports_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_mdadm.html" title="mdadm">
                    mdadm
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_mount.html" title="mount">
                    mount
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_msu_package.html" title="msu_package">
                    msu_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ohai.html" title="ohai">
                    ohai
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_openbsd_package.html" title="openbsd_package">
                    openbsd_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_osx_profile.html" title="osx_profile">
                    osx_profile
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_package.html" title="package">
                    package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_pacman_package.html" title="pacman_package">
                    pacman_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_paludis_package.html" title="paludis_package">
                    paludis_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_perl.html" title="perl">
                    perl
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_portage_package.html" title="portage_package">
                    portage_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_powershell_script.html" title="powershell_script">
                    powershell_script
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_private_key.html" title="private_key">
                    private_key
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_public_key.html" title="public_key">
                    public_key
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_python.html" title="python">
                    python
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_reboot.html" title="reboot">
                    reboot
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_registry_key.html" title="registry_key">
                    registry_key
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_remote_directory.html" title="remote_directory">
                    remote_directory
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_remote_file.html" title="remote_file">
                    remote_file
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_route.html" title="route">
                    route
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_rpm_package.html" title="rpm_package">
                    rpm_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ruby.html" title="ruby">
                    ruby
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ruby_block.html" title="ruby_block">
                    ruby_block
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_script.html" title="script">
                    script
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_service.html" title="service">
                    service
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_smartos_package.html" title="smartos_package">
                    smartos_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_solaris_package.html" title="solaris_package">
                    solaris_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_subversion.html" title="subversion">
                    subversion
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_systemd_unit.html" title="systemd_unit">
                    systemd_unit
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_template.html" title="template">
                    template
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_user.html" title="user">
                    user
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_windows_package.html" title="windows_package">
                    windows_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_windows_service.html" title="windows_service">
                    windows_service
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_yum.html" title="yum_package">
                    yum_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_yum_repository.html" title="yum_repository">
                    yum_repository
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_examples.html" title="Examples (by Resource)">
                    Examples (by Resource)
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/templates.html" title="Templates">
                Templates
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/cookbook_repo.html" title="Cookbook Repo">
                Cookbook Repo
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_metadata.html" title="metadata.rb">
                metadata.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/cookbook_versions.html" title="Cookbook Versions">
                Cookbook Versions
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ruby.html" title="Ruby">
                Ruby
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Chef DK">
            Chef DK
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/about_chefdk.html" title="About the ChefDK">
                About the ChefDK
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/berkshelf.html" title="Berkshelf">
                Berkshelf
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_apply.html" title="chef-apply (executable)">
                chef-apply (executable)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_shell.html" title="chef-shell (executable)">
                chef-shell (executable)
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="chef (executable)">
                chef (executable)
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-env" title="chef env">
                    chef env
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-exec" title="chef exec">
                    chef exec
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-gem" title="chef gem">
                    chef gem
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-app" title="chef generate app">
                    chef generate app
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-attribute" title="chef generate attribute">
                    chef generate attribute
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-cookbook" title="chef generate cookbook">
                    chef generate cookbook
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-file" title="chef generate file">
                    chef generate file
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-lwrp" title="chef generate lwrp">
                    chef generate lwrp
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-recipe" title="chef generate recipe">
                    chef generate recipe
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-repo" title="chef generate repo">
                    chef generate repo
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-template" title="chef generate template">
                    chef generate template
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-provision" title="chef provision">
                    chef provision
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-shell-init" title="chef shell-init">
                    chef shell-init
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-verify" title="chef verify">
                    chef verify
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Chef Solo">
                Chef Solo
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/chef_solo.html" title="About Chef Solo">
                    About Chef Solo
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef_solo.html" title="chef-solo (executable)">
                    chef-solo (executable)
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_solo.html" title="solo.rb">
                    solo.rb
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_shell.html" title="chef-shell (executable)">
                chef-shell (executable)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_client.html#run-in-local-mode" title="chef-zero (local mode)">
                chef-zero (local mode)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_vault.html" title="chef-vault">
                chef-vault
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chefspec.html" title="ChefSpec">
                ChefSpec
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Configuration">
                Configuration
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/config_rb.html" title="config.rb">
                    config.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_client.html#d-directories" title="Multiple Config Files">
                    Multiple Config Files
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/cookstyle.html" title="cookstyle">
                cookstyle
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_delivery.html" title="Delivery CLI">
                Delivery CLI
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/foodcritic.html" title="Foodcritic">
                Foodcritic
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Test Kitchen">
                Test Kitchen
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/kitchen.html" title="About Test Kitchen">
                    About Test Kitchen
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_kitchen.html" title="kitchen (executable)">
                    kitchen (executable)
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_yml_kitchen.html" title=".kitchen.yml">
                    .kitchen.yml
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_kitchen_vagrant.html" title="kitchen-vagrant">
                    kitchen-vagrant
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Knife">
                Knife
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/knife.html" title="About Knife">
                    About Knife
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_common_options.html" title="Common Options">
                    Common Options
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_using.html" title="Using Knife">
                    Using Knife
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_knife.html" title="knife.rb">
                    knife.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_bootstrap.html" title="knife bootstrap">
                    knife bootstrap
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_client.html" title="knife client">
                    knife client
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_configure.html" title="knife configure">
                    knife configure
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_cookbook.html" title="knife cookbook">
                    knife cookbook
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_cookbook_site.html" title="knife cookbook site">
                    knife cookbook site
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_data_bag.html" title="knife data bag">
                    knife data bag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_delete.html" title="knife delete">
                    knife delete
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_deps.html" title="knife deps">
                    knife deps
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_diff.html" title="knife diff">
                    knife diff
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_download.html" title="knife download">
                    knife download
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_edit.html" title="knife edit">
                    knife edit
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_environment.html" title="knife environment">
                    knife environment
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_exec.html" title="knife exec">
                    knife exec
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_list.html" title="knife list">
                    knife list
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_node.html" title="knife node">
                    knife node
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_raw.html" title="knife raw">
                    knife raw
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_recipe_list.html" title="knife recipe list">
                    knife recipe list
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_role.html" title="knife role">
                    knife role
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_search.html" title="knife search">
                    knife search
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_serve.html" title="knife serve">
                    knife serve
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_show.html" title="knife show">
                    knife show
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_ssh.html" title="knife ssh">
                    knife ssh
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_ssl_check.html" title="knife ssl_check">
                    knife ssl_check
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_ssl_fetch.html" title="knife ssl_fetch">
                    knife ssl_fetch
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_status.html" title="knife status">
                    knife status
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_tag.html" title="knife tag">
                    knife tag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_upload.html" title="knife upload">
                    knife upload
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_user.html" title="knife user">
                    knife user
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_xargs.html" title="knife xargs">
                    knife xargs
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="knife opc">
                knife opc
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html" title="About knife opc">
                    About knife opc
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#knife-rb-configuration" title="knife.rb Configuration">
                    knife.rb Configuration
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-list" title="opc user list">
                    opc user list
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-show" title="opc user show">
                    opc user show
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-create" title="opc user create">
                    opc user create
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-delete" title="opc user delete">
                    opc user delete
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-edit" title="opc user edit">
                    opc user edit
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-password" title="opc user password">
                    opc user password
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-list" title="opc org list">
                    opc org list
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-show" title="opc org show">
                    opc org show
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-create" title="opc org create">
                    opc org create
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-delete" title="opc org delete">
                    opc org delete
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-user-add" title="opc org user add">
                    opc org user add
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-user-remove" title="opc org user remove">
                    opc org user remove
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_knife_spork.html" title="knife spork">
                knife spork
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="knife supermarket">
                knife supermarket
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html" title="About knife supermarket">
                    About knife supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#download" title="supermarket download">
                    supermarket download
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#install" title="supermarket install">
                    supermarket install
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#list" title="supermarket list">
                    supermarket list
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#search" title="supermarket search">
                    supermarket search
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#share" title="supermarket share">
                    supermarket share
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#show" title="supermarket show">
                    supermarket show
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#unshare" title="supermarket unshare">
                    supermarket unshare
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Ohai">
                Ohai
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/ohai.html" title="About Ohai">
                    About Ohai
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_ohai.html" title="ohai (executable)">
                    ohai (executable)
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Policyfile">
                Policyfile
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/policyfile.html" title="About Policyfile">
                    About Policyfile
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_policyfile.html" title="Policyfile.rb">
                    Policyfile.rb
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Provisioning">
                Provisioning
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/provisioning.html" title="About Provisioning">
                    About Provisioning
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_load_balancer.html" title="load_balancer resource">
                    load_balancer resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_machine.html" title="machine resource">
                    machine resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_machine_batch.html" title="machine_batch resource">
                    machine_batch resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_machine_execute.html" title="machine_execute resource">
                    machine_execute resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_machine_file.html" title="machine_file resource">
                    machine_file resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_machine_image.html" title="machine_image resource">
                    machine_image resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/provisioning_aws.html" title="AWS Driver Resources">
                    AWS Driver Resources
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/provisioning_fog.html" title="Fog Driver Resources">
                    Fog Driver Resources
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/provisioning_vagrant.html" title="Vagrant Driver Resources">
                    Vagrant Driver Resources
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_push_jobs_client.html" title="push-jobs-client (executable)">
                push-jobs-client (executable)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/rubocop.html" title="Rubocop">
                Rubocop
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Managing the Server">
            Managing the Server
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/runbook.html" title="Runbook (Single Page)">
                Runbook (Single Page)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_backup_restore.html" title="Backup &amp; Restore">
                Backup &amp; Restore
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_data.html" title="Data Storage">
                Data Storage
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_firewalls_and_ports.html" title="Firewalls &amp; Ports">
                Firewalls &amp; Ports
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_ldap.html" title="Active Directory &amp; LDAP">
                Active Directory &amp; LDAP
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_logs.html" title="Log Files">
                Log Files
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_monitor.html" title="Monitor">
                Monitor
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_orgs.html" title="Organizations &amp; Groups">
                Organizations &amp; Groups
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/secrets.html" title="Secrets">
                Secrets
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_security.html" title="Security">
                Security
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_services.html" title="Services">
                Services
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_tuning.html" title="Tuning">
                Tuning
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/upgrade_server.html" title="Upgrades">
                Upgrades
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/upgrade_server_ha_v2.html" title="Upgrade HA Cluster">
                Upgrade HA Cluster
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_users.html" title="Users">
                Users
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_server.html" title="chef-server-ctl">
                chef-server-ctl
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_backend.html" title="chef-backend-ctl">
                chef-backend-ctl
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_server.html" title="chef-server.rb">
                chef-server.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_opscode_expander.html" title="opscode-expander-ctl">
                opscode-expander-ctl
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_chef_server.html" title="Chef Server API">
                Chef Server API
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Push Jobs">
                Push Jobs
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_push_jobs.html" title="knife push jobs">
                    knife push jobs
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_push_jobs_client.html" title="push-jobs-client">
                    push-jobs-client
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_push_jobs_client.html" title="push-jobs-client.rb">
                    push-jobs-client.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_push_jobs_server.html" title="push-jobs-server.rb">
                    push-jobs-server.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/api_push_jobs.html" title="Push Jobs API">
                    Push Jobs API
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_sent_events.html" title="Server Sent Events">
                    Server Sent Events
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Supermarket">
                Supermarket
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/supermarket_logs.html" title="Log Files">
                    Log Files
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/supermarket_monitor.html" title="Monitoring">
                    Monitoring
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_supermarket.html" title="supermarket.rb">
                    supermarket.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html" title="knife supermarket">
                    knife supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_supermarket.html" title="supermarket-ctl">
                    supermarket-ctl
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/supermarket_api.html" title="Supermarket API">
                    Supermarket API
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Management Console">
                Management Console
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/server_configure_saml.html" title="Configure SAML">
                    Configure SAML
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_clients.html" title="Clients">
                    Clients
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_cookbooks.html" title="Cookbooks">
                    Cookbooks
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_data_bags.html" title="Data Bags">
                    Data Bags
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_environments.html" title="Environments">
                    Environments
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_nodes.html" title="Nodes">
                    Nodes
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_roles.html" title="Roles">
                    Roles
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_users.html#chef-manage" title="Users">
                    Users
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_manage.html" title="manage.rb">
                    manage.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_manage.html" title="chef-manage-ctl">
                    chef-manage-ctl
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Habitat"> <!-- if item has custom image -->

        <img class="icon-left" src="./_static/habitat-mark.png"></img> Habitat <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items"> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/habitat.html" title="Habitat Overview">
            Habitat Overview
          </a>
        </li>

         <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Tutorials">
            Tutorials
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://www.habitat.sh/tutorials/getting-started-overview" title="Getting started">
                Getting started
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="InSpec"> <!-- if item has custom image -->

        <img class="icon-left" src="./_static/inspec_logo.png"></img> InSpec <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items"> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/inspec.html" title="InSpec Overview">
            InSpec Overview
          </a>
        </li>

         <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Chef Automate"> <!-- else item does not have custom image and should use FontAwesome icon -->

        <i class="fa fa-cogs icon-left"></i> Chef Automate <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items">

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Getting Started">
            Getting Started
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_automate.html" title="Chef Automate Overview">
                Chef Automate Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_chef_automate.html" title="Installation Guide">
                Installation Guide
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Tutorials">
            Tutorials
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/automate/install" title="Get Started">
                Get Started
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/automate/visibility" title="Visibility into Infrastructure">
                Visibility into Infrastructure
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/automate/deploy-cookbook/" title="Deploy with Chef Automate">
                Deploy with Chef Automate
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/compliance-assess" title="Assess for Compliance">
                Assess for Compliance
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/compliance-remediate" title="Remediate Compliance Failures">
                Remediate Compliance Failures
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Setup">
            Setup
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_pipeline.html" title="Configure a Pipeline">
                Configure a Pipeline
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_json_delivery.html" title="Configure a Project">
                Configure a Project
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/setup_visibility_chef_automate.html" title="Configure Data Collection">
                Configure Data Collection
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Concepts">
            Concepts
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2">

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Workflow">
                Workflow
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/workflow.html" title="Workflow Overview">
                    Workflow Overview
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/delivery_manage_dependencies.html" title="Manage Dependencies">
                    Manage Dependencies
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/visibility.html" title="Visibility Overview">
                Visibility Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/compliance.html" title="Compliance Overview">
                Compliance Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/ctl_delivery.html" title="Delivery CLI">
            Delivery CLI
          </a>
        </li>

         <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Integrations">
            Integrations
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_delivery_bitbucket.html" title="w/Bitbucket">
                w/Bitbucket
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_delivery_smtp.html" title="w/Email (SMTP)">
                w/Email (SMTP)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_delivery_github.html" title="w/GitHub">
                w/GitHub
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_delivery_ldap.html" title="w/LDAP">
                w/LDAP
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_chef_automate_saml.html" title="w/SAML">
                w/SAML
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_delivery_slack.html" title="w/Slack">
                w/Slack
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Cookbooks">
            Cookbooks
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_build_cookbook.html" title="build-cookbook (cookbook)">
                build-cookbook (cookbook)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_truck.html" title="delivery-truck (cookbook)">
                delivery-truck (cookbook)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/publish_cookbooks_multiple_servers.html" title="Publish to Multiple Chef Servers">
                Publish to Multiple Chef Servers
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/dsl_delivery.html" title="Workflow DSL">
            Workflow DSL
          </a>
        </li>

         <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/job_dispatch.html" title="Job Dispatch">
            Job Dispatch
          </a>
        </li>

         <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Managing the Server">
            Managing the Server
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2">

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Backups">
                Backups
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/delivery_server_backup.html#configuration" title="Configuration">
                    Configuration
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/delivery_server_backup.html#create-backups" title="Create Backups">
                    Create Backups
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/delivery_server_backup.html#list-backups" title="List Backups">
                    List Backups
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/delivery_server_backup.html#delete-backups" title="Delete Backups">
                    Delete Backups
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/delivery_server_backup.html#restore-backups" title="Restore Backups">
                    Restore Backups
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/scaling_capacity_planning_chef_automate.html" title="Capacity Planning">
                Capacity Planning
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_delivery.html" title="Chef Automate API">
                Chef Automate API
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="automate-ctl">
                automate-ctl
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#cleanse" title="cleanse">
                    cleanse
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#create-enterprise" title="create-enterprise">
                    create-enterprise
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#create-user" title="create-user">
                    create-user
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-application" title="delete-application">
                    delete-application
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-enterprise" title="delete-enterprise">
                    delete-enterprise
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-project" title="delete-project">
                    delete-project
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-user" title="delete-user">
                    delete-user
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-visibility-node" title="delete-visibility-node">
                    delete-visibility-node
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-visibility-node-by-id" title="delete-visibility-node-by-id">
                    delete-visibility-node-by-id
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#gather-logs" title="gather-logs">
                    gather-logs
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#help" title="help">
                    help
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#install-runner" title="install-runner">
                    install-runner
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#list-applications" title="list-applications">
                    list-applications
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#list-enterprises" title="list-enterprises">
                    list-enterprises
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#list-users" title="list-users">
                    list-users
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#migrate-change-description" title="migrate-change-description">
                    migrate-change-description
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#migrate-patchset-diffs" title="migrate-patchset-diffs">
                    migrate-patchset-diffs
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#preflight-check" title="preflight-check">
                    preflight-check
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#reconfigure" title="reconfigure">
                    reconfigure
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#rename-enterprise" title="rename-enterprise">
                    rename-enterprise
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#reset-password" title="reset-password">
                    reset-password
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#restore-backup" title="restore-backup">
                    restore-backup
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#revoke-token" title="revoke-token">
                    revoke-token
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#show-config" title="show-config">
                    show-config
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#uninstall" title="uninstall">
                    uninstall
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#update-project-hooks" title="update-project-hooks">
                    update-project-hooks
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_delivery.html" title="delivery.rb">
                delivery.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_server_disaster_recovery.html" title="Disaster Recovery">
                Disaster Recovery
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/elasticsearch_and_kibana_auth.html" title="Elasticsearch &amp; Kibana Auth">
                Elasticsearch &amp; Kibana Auth
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/manage_indices_chef_automate.html" title="Manage Elasticsearch Indices">
                Manage Elasticsearch Indices
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/search_query_chef_automate.html" title="Node Search Reference">
                Node Search Reference
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_manage_secrets.html" title="Secrets">
                Secrets
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/stream_data_chef_automate.html" title="Stream Data">
                Stream Data
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_server_tuning.html" title="Tuning">
                Tuning
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/upgrade_chef_automate.html" title="Upgrades">
                Upgrades
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_users_and_roles.html" title="Users &amp; Roles">
                Users &amp; Roles
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Compliance scanner">
            Compliance scanner
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/compliance.html" title="Overview">
                Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/release_notes_compliance.html" title="Release Notes">
                Release Notes
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_compliance.html" title="Installation Guide">
                Installation Guide
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_compliance_chef_server.html" title="Integrate w/Chef Server">
                Integrate w/Chef Server
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_compliance_chef_automate.html" title="Integrate w/Chef Automate">
                Integrate w/Chef Automate
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/upgrade_compliance.html" title="Upgrade Compliance">
                Upgrade Compliance
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_compliance.html" title="chef-compliance.rb">
                chef-compliance.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_compliance.html" title="Chef Compliance API">
                Chef Compliance API
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/aws_opsworks_chef_automate.html" title="AWS OpsWorks for Chef Automate">
            AWS OpsWorks for Chef Automate
          </a>
        </li>

         <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/troubleshooting_chef_automate.html" title="Troubleshooting">
            Troubleshooting
          </a>
        </li>

         <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Legacy"> <!-- else item does not have custom image and should use FontAwesome icon -->

        <i class="fa fa-hdd-o icon-left"></i> Legacy <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items">

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Analytics">
            Analytics
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics.html" title="Overview">
                Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/release_notes_analytics.html" title="Release Notes">
                Release Notes
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_analytics.html" title="Install Standalone">
                Install Standalone
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/actions.html" title="Web UI">
                Web UI
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics_webui_tasks.html" title="Management Console">
                Management Console
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics_nodes_view.html" title="Nodes View">
                Nodes View
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics.html#integrations" title="Integrations">
                Integrations
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics_splunk.html" title="Splunk">
                Splunk
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics_rules.html" title="Rules">
                Rules
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics_monitor.html" title="Monitor">
                Monitor
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/upgrade_analytics.html" title="Upgrades">
                Upgrades
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_client_analytics.html" title="Chef Client for Analytics">
                Chef Client for Analytics
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_analytics.html" title="opscode-analytics-ctl">
                opscode-analytics-ctl
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_analytics.html" title="opscode-analytics.rb">
                opscode-analytics.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_knife_analytics.html" title="knife-analytics">
                knife-analytics
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_analytics.html" title="Analytics API">
                Analytics API
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/dsl_recipe_analytics.html" title="Recipe DSL for Analytics">
                Recipe DSL for Analytics
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Reporting">
            Reporting
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/reporting.html" title="Overview">
                Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_reporting.html" title="Install Reporting">
                Install Reporting
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_manage_reports.html" title="View Reports">
                View Reports
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_knife_reporting.html" title="knife reporting">
                knife reporting
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_reporting.html" title="opscode-reporting-ctl">
                opscode-reporting-ctl
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_reporting.html" title="opscode-reporting.rb">
                opscode-reporting.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_reporting.html" title="Reporting API">
                Reporting API
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Extension APIs"> <!-- else item does not have custom image and should use FontAwesome icon -->

        <i class="fa fa-clone icon-left"></i> Extension APIs <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items"> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/dsl_compliance.html" title="Compliance DSL">
            Compliance DSL
          </a>
        </li>

         <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Handlers">
            Handlers
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/handlers.html#custom-handlers" title="Custom Handlers">
                Custom Handlers
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/dsl_handler.html" title="Handler DSL">
                Handler DSL
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_community.html#handlers" title="Community Handlers">
                Community Handlers
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Knife Plugins">
            Knife Plugins
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_knife.html" title="About Cloud Plugins">
                About Cloud Plugins
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_knife_custom.html" title="Custom Plugins">
                Custom Plugins
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_community.html#knife" title="Community Plugins">
                Community Plugins
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Ohai Plugins">
            Ohai Plugins
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ohai_custom.html" title="Custom Plugins">
                Custom Plugins
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_community.html#ohai" title="Community Plugins">
                Community Plugins
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/plugin_community.html#chef-client" title="Chef Client Plugins">
            Chef Client Plugins
          </a>
        </li>

         <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li> <!-- /for item in navItems -->
    
    <li class="main-item dark-item">
      <a href="https://github.com/chef/chef-web-docs" title="Available on GitHub">
        <i class="fa fa-github icon-left"></i>
        Available on GitHub
      </a>
    </li>
    <li class="main-item dark-item">
      <a href="https://www.chef.io/chef/get-chef">
        <i class="fa fa-download icon-left"></i>
        Get Chef
      </a>
    </li>
    <li class="main-item dark-item">
      <a href="https://docs.chef.io/feedback.html">
        <i class="fa fa-commenting icon-left"></i>
        Send Feedback
      </a>
    </li>
    <li class="main-item dark-item">
      <a href="https://www.chef.io/support/">
        <i class="fa fa-support icon-left"></i>
        Support
      </a>
    </li>
    <li class="main-item dark-item">
      <a href="https://docs.chef.io/index.html">
        <i class="fa fa-map-o icon-left"></i>
        Site Map
      </a>
    </li>
    <li class="main-item dark-item">
      <a href="https://docs-archive.chef.io/">
        <i class="fa fa-archive icon-left"></i>
        Archive
      </a>
    </li>
  </ul>
</nav>
      <div class="documentwrapper"><div class="sphinxsidebar" role="navigation" aria-label="main navigation">
  <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">About Ohai</a><ul>
<li><a class="reference internal" href="#automatic-attributes">Automatic Attributes</a><ul>
<li><a class="reference internal" href="#attribute-persistence">Attribute Persistence</a></li>
<li><a class="reference internal" href="#attribute-precedence">Attribute Precedence</a><ul>
<li><a class="reference internal" href="#whitelist-attributes">Whitelist Attributes</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#default-plugins">Default Plugins</a></li>
<li><a class="reference internal" href="#custom-plugins">Custom Plugins</a><ul>
<li><a class="reference internal" href="#syntax">Syntax</a></li>
<li><a class="reference internal" href="#ohai-dsl-methods">Ohai DSL Methods</a><ul>
<li><a class="reference internal" href="#collect-data">collect_data</a><ul>
<li><a class="reference internal" href="#use-a-mash">Use a Mash</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#require">require</a><ul>
<li><a class="reference internal" href="#common-directory">/common Directory</a></li>
</ul>
</li>
<li><a class="reference internal" href="#shared-methods">Shared Methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#hints">Hints</a></li>
<li><a class="reference internal" href="#log-entries">Log Entries</a><ul>
<li><a class="reference internal" href="#rescue">rescue</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id1">Examples</a><ul>
<li><a class="reference internal" href="#collect-data-blocks">collect_data Blocks</a></li>
<li><a class="reference internal" href="#use-a-mixin-library">Use a mixin Library</a></li>
<li><a class="reference internal" href="#get-kernel-values">Get Kernel Values</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ohai-6-vs-newer-plugins">Ohai 6 vs. Newer Plugins</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ohai-resource">ohai Resource</a><ul>
<li><a class="reference internal" href="#id2">Syntax</a></li>
<li><a class="reference internal" href="#actions">Actions</a></li>
<li><a class="reference internal" href="#attributes">Attributes</a></li>
<li><a class="reference internal" href="#providers">Providers</a></li>
<li><a class="reference internal" href="#id3">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ohai-cookbook">ohai Cookbook</a><ul>
<li><a class="reference internal" href="#default-location">Default Location</a></li>
<li><a class="reference internal" href="#upload-custom-plugins">Upload Custom Plugins</a></li>
<li><a class="reference internal" href="#add-ohai-to-a-run-list">Add Ohai to a Run-list</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ohai-command-line-tool">ohai Command Line Tool</a><ul>
<li><a class="reference internal" href="#options">Options</a></li>
<li><a class="reference internal" href="#id4">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ohai-settings-in-client-rb">Ohai Settings in client.rb</a></li>
</ul>
</li>
</ul>

  </div>
</div>
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="about-ohai">
<h1>About Ohai<a class="headerlink" href="#about-ohai" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://github.com/chef/chef-web-docs/blob/master/chef_master/source/ohai.rst">[edit on GitHub]</a></p>
<p>Ohai is a tool that is used to detect attributes on a node, and then provide these attributes to the chef-client at the start of every chef-client run. Ohai is required by the chef-client and must be present on a node. (Ohai is installed on a node as part of the chef-client install process.)</p>
<p>The types of attributes Ohai collects include (but are not limited to):</p>
<ul class="simple">
<li>Platform details</li>
<li>Network usage</li>
<li>Memory usage</li>
<li>CPU data</li>
<li>Kernel data</li>
<li>Host names</li>
<li>Fully qualified domain names</li>
<li>Virtualization data</li>
<li>Cloud provider metadata</li>
<li>Other configuration details</li>
</ul>
<p>Attributes that are collected by Ohai are automatic level attributes, in that these attributes are used by the chef-client to ensure that these attributes remain unchanged after the chef-client is done configuring the node.</p>
<p>Ohai collects data for many platforms, including AIX, Darwin, Linux, FreeBSD, OpenBSD, NetBSD, Solaris, and any Microsoft Windows operating system based off the <tt class="docutils literal"><span class="pre">Windows_NT</span></tt> kernel and has access to <tt class="docutils literal"><span class="pre">win32</span></tt> or <tt class="docutils literal"><span class="pre">win64</span></tt> sub-systems.</p>
<p>View the <a class="reference internal" href="release_notes_ohai.html"><em>release notes</em></a> for the latest information on Ohai.</p>
<div class="section" id="automatic-attributes">
<h2>Automatic Attributes<a class="headerlink" href="#automatic-attributes" title="Permalink to this headline">¶</a></h2>
<p>An automatic attribute is a specific detail about a node, such as an IP address, a host name, a list of loaded kernel modules, and so on. Automatic attributes are detected by Ohai and are then used by the chef-client to ensure that they are handled properly during every chef-client run. The most commonly accessed automatic attributes are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">node['platform']</span></tt></td>
<td>The platform on which a node is running. This attribute helps determine which providers will be used.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">node['platform_version']</span></tt></td>
<td>The version of the platform. This attribute helps determine which providers will be used.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">node['ipaddress']</span></tt></td>
<td>The IP address for a node. If the node has a default route, this is the IPV4 address for the interface. If the node does not have a default route, the value for this attribute should be <tt class="docutils literal"><span class="pre">nil</span></tt>. The IP address for default route is the recommended default value.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">node['macaddress']</span></tt></td>
<td>The MAC address for a node, determined by the same interface that detects the <tt class="docutils literal"><span class="pre">node['ipaddress']</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">node['fqdn']</span></tt></td>
<td>The fully qualified domain name for a node. This is used as the name of a node unless otherwise set.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">node['hostname']</span></tt></td>
<td>The host name for the node.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">node['domain']</span></tt></td>
<td>The domain for the node.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">node['recipes']</span></tt></td>
<td>A list of recipes associated with a node (and part of that node&#8217;s run-list).</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">node['roles']</span></tt></td>
<td>A list of roles associated with a node (and part of that node&#8217;s run-list).</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">node['ohai_time']</span></tt></td>
<td>The time at which Ohai was last run. This attribute is not commonly used in recipes, but it is saved to the Chef server and can be accessed using the <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">status</span></tt> subcommand.</td>
</tr>
</tbody>
</table>
<p><strong>Get a list of automatic attributes for a node</strong></p>
<p>The list of automatic attributes that are collected by Ohai at the start of each chef-client run vary from organization to organization, and will often vary between the various server types being configured and the platforms on which those servers are run. All attributes collected by Ohai are unmodifiable by the chef-client. To see which automatic attributes are collected by Ohai for a particular node, run the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>ohai$ grep -R <span class="s2">&quot;provides&quot;</span> -h lib/ohai/plugins<span class="p">|</span>sed <span class="s1">&#39;s/^\s*//g&#39;</span><span class="p">|</span>sed <span class="s2">&quot;s/\\\&quot;/\&#39;/g&quot;</span><span class="p">|</span>sort<span class="p">|</span>uniq<span class="p">|</span>grep ^provides
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Attributes can be configured in cookbooks (attribute files and recipes), roles, and environments. In addition, Ohai collects attribute data about each node at the start of the chef-client run. See <a class="reference external" href="https://docs.chef.io/attributes.html">https://docs.chef.io/attributes.html</a> for more information about how all of these attributes fit together.</p>
</div>
<div class="section" id="attribute-persistence">
<h3>Attribute Persistence<a class="headerlink" href="#attribute-persistence" title="Permalink to this headline">¶</a></h3>
<p>At the beginning of a chef-client run, all attributes are reset. The chef-client rebuilds them using automatic attributes collected by Ohai at the beginning of the chef-client run and then using default and override attributes that are specified in cookbooks or by roles and environments. Normal attributes are never reset. All attributes are then merged and applied to the node according to attribute precedence. At the conclusion of the chef-client run, the attributes that were applied to the node are saved to the Chef server as part of the node object.</p>
</div>
<div class="section" id="attribute-precedence">
<h3>Attribute Precedence<a class="headerlink" href="#attribute-precedence" title="Permalink to this headline">¶</a></h3>
<p>Attributes are always applied by the chef-client in the following order:</p>
<ol class="arabic simple">
<li>A <tt class="docutils literal"><span class="pre">default</span></tt> attribute located in a cookbook attribute file</li>
<li>A <tt class="docutils literal"><span class="pre">default</span></tt> attribute located in a recipe</li>
<li>A <tt class="docutils literal"><span class="pre">default</span></tt> attribute located in an environment</li>
<li>A <tt class="docutils literal"><span class="pre">default</span></tt> attribute located in a role</li>
<li>A <tt class="docutils literal"><span class="pre">force_default</span></tt> attribute located in a cookbook attribute file</li>
<li>A <tt class="docutils literal"><span class="pre">force_default</span></tt> attribute located in a recipe</li>
<li>A <tt class="docutils literal"><span class="pre">normal</span></tt> attribute located in a cookbook attribute file</li>
<li>A <tt class="docutils literal"><span class="pre">normal</span></tt> attribute located in a recipe</li>
<li>An <tt class="docutils literal"><span class="pre">override</span></tt> attribute located in a cookbook attribute file</li>
<li>An <tt class="docutils literal"><span class="pre">override</span></tt> attribute located in a recipe</li>
<li>An <tt class="docutils literal"><span class="pre">override</span></tt> attribute located in a role</li>
<li>An <tt class="docutils literal"><span class="pre">override</span></tt> attribute located in an environment</li>
<li>A <tt class="docutils literal"><span class="pre">force_override</span></tt> attribute located in a cookbook attribute file</li>
<li>A <tt class="docutils literal"><span class="pre">force_override</span></tt> attribute located in a recipe</li>
<li>An <tt class="docutils literal"><span class="pre">automatic</span></tt> attribute identified by Ohai at the start of the chef-client run</li>
</ol>
<p>where the last attribute in the list is the one that is applied to the node.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The attribute precedence order for roles and environments is reversed for <tt class="docutils literal"><span class="pre">default</span></tt> and <tt class="docutils literal"><span class="pre">override</span></tt> attributes. The precedence order for <tt class="docutils literal"><span class="pre">default</span></tt> attributes is environment, then role. The precedence order for <tt class="docutils literal"><span class="pre">override</span></tt> attributes is role, then environment. Applying environment <tt class="docutils literal"><span class="pre">override</span></tt> attributes after role <tt class="docutils literal"><span class="pre">override</span></tt> attributes allows the same role to be used across multiple environments, yet ensuring that values can be set that are specific to each environment (when required). For example, the role for an application server may exist in all environments, yet one environment may use a database server that is different from other environments.</p>
</div>
<p>Attribute precedence, viewed from the same perspective as the overview diagram, where the numbers in the diagram match the order of attribute precedence:</p>
<img alt="_images/overview_chef_attributes_precedence.png" src="_images/overview_chef_attributes_precedence.png" />
<p>Attribute precedence, when viewed as a table:</p>
<img alt="_images/overview_chef_attributes_table.png" src="_images/overview_chef_attributes_table.png" />
<div class="section" id="whitelist-attributes">
<h4>Whitelist Attributes<a class="headerlink" href="#whitelist-attributes" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">When these settings are used, any attribute not defined in a whitelist will not be saved. Each attribute type is whitelisted independently of the other attribute types. For example, if <tt class="docutils literal"><span class="pre">automatic_attribute_whitelist</span></tt> defines attributes to be saved, but <tt class="docutils literal"><span class="pre">normal_attribute_whitelist</span></tt>, <tt class="docutils literal"><span class="pre">default_attribute_whitelist</span></tt>, and <tt class="docutils literal"><span class="pre">override_attribute_whitelist</span></tt> are not defined, then all normal, default and override attributes are saved, along with only the specified automatic attributes.</p>
</div>
<p>Attributes that should be saved by a node may be whitelisted in the client.rb file. The whitelist is a Hash of keys that specify each attribute to be saved.</p>
<p>Attributes are whitelisted by attribute type, with each attribute type being whitelisted independently. Each attribute type&#8212;<tt class="docutils literal"><span class="pre">automatic</span></tt>, <tt class="docutils literal"><span class="pre">default</span></tt>, <tt class="docutils literal"><span class="pre">normal</span></tt>, and <tt class="docutils literal"><span class="pre">override</span></tt>&#8212;may define whitelists by using the following settings in the client.rb file:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Setting</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">automatic_attribute_whitelist</span></tt></td>
<td>A Hash that whitelists <tt class="docutils literal"><span class="pre">automatic</span></tt> attributes, preventing non-whitelisted attributes from being saved. For example: <tt class="docutils literal"><span class="pre">['network/interfaces/eth0']</span></tt>. Default value: all attributes are saved. If the Hash is empty, no attributes are saved.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">default_attribute_whitelist</span></tt></td>
<td>A Hash that whitelists <tt class="docutils literal"><span class="pre">default</span></tt> attributes, preventing non-whitelisted attributes from being saved. For example: <tt class="docutils literal"><span class="pre">['filesystem/dev/disk0s2/size']</span></tt>. Default value: all attributes are saved. If the Hash is empty, no attributes are saved.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">normal_attribute_whitelist</span></tt></td>
<td>A Hash that whitelists <tt class="docutils literal"><span class="pre">normal</span></tt> attributes, preventing non-whitelisted attributes from being saved. For example: <tt class="docutils literal"><span class="pre">['filesystem/dev/disk0s2/size']</span></tt>. Default value: all attributes are saved. If the Hash is empty, no attributes are saved.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">override_attribute_whitelist</span></tt></td>
<td>A Hash that whitelists <tt class="docutils literal"><span class="pre">override</span></tt> attributes, preventing non-whitelisted attributes from being saved. For example: <tt class="docutils literal"><span class="pre">['map</span> <span class="pre">-</span> <span class="pre">autohome/size']</span></tt>. Default value: all attributes are saved. If the Hash is empty, no attributes are saved.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">It is recommended that only <tt class="docutils literal"><span class="pre">automatic_attribute_whitelist</span></tt> be used to whitelist attributes. This is primarily because automatic attributes generate the most data, but also that normal, default, and override attributes are typically much more important attributes and are more likely to cause issues if they are whitelisted incorrectly.</p>
</div>
<p>For example, normal attribute data similar to:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;filesystem&quot;</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="s2">&quot;/dev/disk0s2&quot;</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="s2">&quot;size&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;10mb&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;map - autohome&quot;</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="s2">&quot;size&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;10mb&quot;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;network&quot;</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="s2">&quot;interfaces&quot;</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="s2">&quot;eth0&quot;</span> <span class="o">=&gt;</span> <span class="p">{...},</span>
      <span class="s2">&quot;eth1&quot;</span> <span class="o">=&gt;</span> <span class="p">{...},</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>To whitelist the <tt class="docutils literal"><span class="pre">network</span></tt> attributes and prevent the other attributes from being saved, update the client.rb file:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">normal_attribute_whitelist</span> <span class="o">[</span><span class="s1">&#39;network/interfaces/&#39;</span><span class="o">]</span>
</pre></div>
</div>
<p>When a whitelist is defined, any attribute of that type that is not specified in that attribute whitelist <strong>will not</strong> be saved. So based on the previous whitelist for normal attributes, the <tt class="docutils literal"><span class="pre">filesystem</span></tt> and <tt class="docutils literal"><span class="pre">map</span> <span class="pre">-</span> <span class="pre">autohome</span></tt> attributes will not be saved, but the <tt class="docutils literal"><span class="pre">network</span></tt> attributes will.</p>
<p>Leave the value empty to prevent all attributes of that attribute type from being saved:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">normal_attribute_whitelist</span> <span class="o">[]</span>
</pre></div>
</div>
<p>For attributes that contain slashes (<tt class="docutils literal"><span class="pre">/</span></tt>) within the attribute value, such as the <tt class="docutils literal"><span class="pre">filesystem</span></tt> attribute <tt class="docutils literal"><span class="pre">'/dev/diskos2'</span></tt>, use an array. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">automatic_attribute_whitelist</span> <span class="o">[[</span><span class="s1">&#39;filesystem&#39;</span><span class="p">,</span><span class="s1">&#39;/dev/diskos2&#39;</span><span class="o">]]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="default-plugins">
<h2>Default Plugins<a class="headerlink" href="#default-plugins" title="Permalink to this headline">¶</a></h2>
<p>The following list shows the type of plugins that are included with Ohai. See the <tt class="docutils literal"><span class="pre">ohai/lib/ohai/plugins</span></tt> directory in the version of Ohai installed on your system for the full list:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">aix</span>
  <span class="n">cpu</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">filesystem</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">kernel</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">memory</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">network</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">platform</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">uptime</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">virtualization</span><span class="o">.</span><span class="n">rb</span>
<span class="n">azure</span><span class="o">.</span><span class="n">rb</span>
<span class="n">bsd</span>
 <span class="n">filesystem</span><span class="o">.</span><span class="n">rb</span>
 <span class="n">virtualization</span><span class="o">.</span><span class="n">rb</span>
<span class="n">c</span><span class="o">.</span><span class="n">rb</span>
<span class="n">chef</span><span class="o">.</span><span class="n">rb</span>
<span class="n">cloud</span><span class="o">.</span><span class="n">rb</span>
<span class="n">cloud_v2</span><span class="o">.</span><span class="n">rb</span>
<span class="n">command</span><span class="o">.</span><span class="n">rb</span>
<span class="n">darwin</span>
  <span class="n">cpu</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">filesystem</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">memory</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">network</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">platform</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">system_profiler</span><span class="o">.</span><span class="n">rb</span>
<span class="n">digital_ocean</span><span class="o">.</span><span class="n">rb</span>
<span class="n">dmi</span><span class="o">.</span><span class="n">rb</span>
<span class="n">dragonflybsd</span>
 <span class="n">cpu</span><span class="o">.</span><span class="n">rb</span>
 <span class="n">memory</span><span class="o">.</span><span class="n">rb</span>
 <span class="n">network</span><span class="o">.</span><span class="n">rb</span>
 <span class="n">os</span><span class="o">.</span><span class="n">rb</span>
 <span class="n">platform</span><span class="o">.</span><span class="n">rb</span>
<span class="n">ec2</span><span class="o">.</span><span class="n">rb</span>
<span class="n">elixir</span><span class="o">.</span><span class="n">rb</span>
<span class="n">erlang</span><span class="o">.</span><span class="n">rb</span>
<span class="n">eucalyptus</span><span class="o">.</span><span class="n">rb</span>
<span class="n">freebsd</span>
  <span class="n">cpu</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">memory</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">network</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">os</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">platform</span><span class="o">.</span><span class="n">rb</span>
<span class="n">gce</span><span class="o">.</span><span class="n">rb</span>
<span class="n">go</span><span class="o">.</span><span class="n">rb</span>
<span class="n">groovy</span><span class="o">.</span><span class="n">rb</span>
<span class="n">hostname</span><span class="o">.</span><span class="n">rb</span>
<span class="n">init_package</span><span class="o">.</span><span class="n">rb</span>
<span class="n">ip_scopes</span><span class="o">.</span><span class="n">rb</span>
<span class="n">java</span><span class="o">.</span><span class="n">rb</span>
<span class="n">joyent</span><span class="o">.</span><span class="n">rb</span>
<span class="n">kernel</span><span class="o">.</span><span class="n">rb</span>
<span class="n">keys</span><span class="o">.</span><span class="n">rb</span>
<span class="n">languages</span><span class="o">.</span><span class="n">rb</span>
<span class="n">linode</span><span class="o">.</span><span class="n">rb</span>
<span class="n">linux</span>
  <span class="n">block_device</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">cpu</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">filesystem</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">filesystem2</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">fips</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">hostnamectl</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">lsb</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">machineid</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">mdadm</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">memory</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">network</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">platform</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">sessons</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">virtualization</span><span class="o">.</span><span class="n">rb</span>
<span class="n">lua</span><span class="o">.</span><span class="n">rb</span>
<span class="n">mono</span><span class="o">.</span><span class="n">rb</span>
<span class="n">netbsd</span>
  <span class="n">cpu</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">memory</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">network</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">platform</span><span class="o">.</span><span class="n">rb</span>
<span class="n">network</span><span class="o">.</span><span class="n">rb</span>
<span class="n">network_listeners</span><span class="o">.</span><span class="n">rb</span>
<span class="n">nodejs</span><span class="o">.</span><span class="n">rb</span>
<span class="n">ohai</span><span class="o">.</span><span class="n">rb</span>
<span class="n">ohai_time</span><span class="o">.</span><span class="n">rb</span>
<span class="n">openbsd</span>
  <span class="n">cpu</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">memory</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">network</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">platform</span><span class="o">.</span><span class="n">rb</span>
<span class="n">openstack</span><span class="o">.</span><span class="n">rb</span>
<span class="n">os</span><span class="o">.</span><span class="n">rb</span>
<span class="n">packages</span><span class="o">.</span><span class="n">rb</span>
<span class="n">passwd</span><span class="o">.</span><span class="n">rb</span>
<span class="n">perl</span><span class="o">.</span><span class="n">rb</span>
<span class="n">php</span><span class="o">.</span><span class="n">rb</span>
<span class="n">platform</span><span class="o">.</span><span class="n">rb</span>
<span class="n">powershell</span><span class="o">.</span><span class="n">rb</span>
<span class="n">ps</span><span class="o">.</span><span class="n">rb</span>
<span class="n">python</span><span class="o">.</span><span class="n">rb</span>
<span class="n">rackspace</span><span class="o">.</span><span class="n">rb</span>
<span class="n">root_group</span><span class="o">.</span><span class="n">rb</span>
<span class="n">ruby</span><span class="o">.</span><span class="n">rb</span>
<span class="n">rust</span><span class="o">.</span><span class="n">rb</span>
<span class="n">scala</span><span class="o">.</span><span class="n">rb</span>
<span class="n">shard</span><span class="o">.</span><span class="n">rb</span>
<span class="n">shells</span><span class="o">.</span><span class="n">rb</span>
<span class="n">sigar</span>
  <span class="n">cpu</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">filesystem</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">memory</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">network_route</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">network</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">platform</span><span class="o">.</span><span class="n">rb</span>
<span class="n">softlayer</span><span class="o">.</span><span class="n">rb</span>
<span class="n">solaris2</span>
  <span class="n">cpu</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">dmi</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">filesystem</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">memory</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">network</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">platform</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">virtualization</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">zpools</span><span class="o">.</span><span class="n">rb</span>
<span class="n">ssh_host_key</span><span class="o">.</span><span class="n">rb</span>
<span class="n">sysconf</span><span class="o">.</span><span class="n">rb</span>
<span class="n">timezone</span><span class="o">.</span><span class="n">rb</span>
<span class="n">uptime</span><span class="o">.</span><span class="n">rb</span>
<span class="n">virtualbox</span><span class="o">.</span><span class="n">rb</span>
<span class="n">virtualization</span><span class="o">.</span><span class="n">rb</span>
<span class="n">windows</span>
  <span class="n">cpu</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">drivers</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">filesystem</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">fips</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">memory</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">network</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">platform</span><span class="o">.</span><span class="n">rb</span>
  <span class="n">virtualization</span><span class="o">.</span><span class="n">rb</span>
</pre></div>
</div>
</div>
<div class="section" id="custom-plugins">
<h2>Custom Plugins<a class="headerlink" href="#custom-plugins" title="Permalink to this headline">¶</a></h2>
<p>A custom Ohai plugin describes a set of attributes to be collected by Ohai, and then provided to the chef-client at the start of the chef-client run.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">See <a class="reference external" href="https://github.com/rackerlabs/ohai-plugins/tree/master/plugins">https://github.com/rackerlabs/ohai-plugins/tree/master/plugins</a> for some great examples of custom Ohai plugins.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The syntax for custom plugins changed significantly between Ohai 6 and later versions. This page is about plugins after Ohai 6. While Chef has worked to ensure backwards compatibility for all Ohai 6 plugins, a plan should be put in place to update the syntax for all Ohai 6 plugins so they are usable with the new pattern. Once updated, please test and verify those plugins before running them in a production environment.</p>
</div>
<div class="section" id="syntax">
<h3>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline">¶</a></h3>
<p>The syntax for an Ohai plugin is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="no">Ohai</span><span class="o">.</span><span class="n">plugin</span><span class="p">(</span><span class="ss">:Name</span><span class="p">)</span> <span class="k">do</span>
  <span class="kp">include</span> <span class="no">Ohai</span><span class="o">::</span><span class="no">Name</span>
  <span class="n">provides</span> <span class="s1">&#39;attribute&#39;</span><span class="p">,</span> <span class="s1">&#39;attribute/subattribute&#39;</span>
  <span class="n">depends</span> <span class="s1">&#39;attribute&#39;</span><span class="p">,</span> <span class="s1">&#39;attribute&#39;</span>

  <span class="k">def</span> <span class="nf">shared_method</span>
    <span class="c1"># some Ruby code that defines the shared method</span>
    <span class="n">attribute</span> <span class="n">my_data</span>
  <span class="k">end</span>

  <span class="n">collect_data</span><span class="p">(</span><span class="ss">:default</span><span class="p">)</span> <span class="k">do</span>
    <span class="c1"># some Ruby code</span>
    <span class="n">attribute</span> <span class="n">my_data</span>
  <span class="k">end</span>

  <span class="n">collect_data</span><span class="p">(</span><span class="ss">:platform</span><span class="o">...</span><span class="p">)</span> <span class="k">do</span>
    <span class="c1"># some Ruby code that defines platform-specific requirements</span>
    <span class="n">attribute</span> <span class="n">my_data</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li>Required. <tt class="docutils literal"><span class="pre">(:Name)</span></tt> is used to identify the plugin; when two plugins have the same <tt class="docutils literal"><span class="pre">(:Name)</span></tt>, those plugins are joined together and run as if they were a single plugin. This value must be a valid Ruby class name, starting with a capital letter and containing only alphanumeric characters</li>
<li><tt class="docutils literal"><span class="pre">include</span></tt> is a standard Ruby method that allows an Ohai plugin to include a class, such as <tt class="docutils literal"><span class="pre">Ohai::Mixin::ModuleName</span></tt></li>
<li>Required. <tt class="docutils literal"><span class="pre">provides</span></tt> is a comma-separated list of one (or more) attributes that are defined by this plugin. This attribute will become an automatic attribute (i.e. <tt class="docutils literal"><span class="pre">node[:attribute]</span></tt>) after it is collected by Ohai at the start of the chef-client run. An attribute can also be defined using an <tt class="docutils literal"><span class="pre">attribute/subattribute</span></tt> pattern</li>
<li><tt class="docutils literal"><span class="pre">depends</span></tt> is a comma-separated list of one (or more) attributes that are collected by another plugin; as long as the value is collected by another Ohai plugin, it can be used by any plugin</li>
<li><tt class="docutils literal"><span class="pre">shared_method</span></tt> defines code that can be shared among one (or more) <tt class="docutils literal"><span class="pre">collect_data</span></tt> blocks; for example, instead of defining a mash for each <tt class="docutils literal"><span class="pre">collect_data</span></tt> block, the code can be defined as a shared method, and then called from any <tt class="docutils literal"><span class="pre">collect_data</span></tt> block</li>
<li><tt class="docutils literal"><span class="pre">collect_data</span></tt> is a block of Ruby code that is called by Ohai when it runs; one (or more) <tt class="docutils literal"><span class="pre">collect_data</span></tt> blocks can be defined in a plugin, but only a single <tt class="docutils literal"><span class="pre">collect_data</span></tt> block is ever run.</li>
<li><tt class="docutils literal"><span class="pre">collect_data(:default)</span></tt> is the code block that runs when a node&#8217;s platform is not defined by a platform-specific <tt class="docutils literal"><span class="pre">collect_data</span></tt> block</li>
<li><tt class="docutils literal"><span class="pre">collect_data(:platform)</span></tt> is a platform-specific code block that is run when a match exists between the node&#8217;s platform and this <tt class="docutils literal"><span class="pre">collect_data</span></tt> block; only one <tt class="docutils literal"><span class="pre">collect_data</span></tt> block may exist for each platform; possible values: <tt class="docutils literal"><span class="pre">:aix</span></tt>, <tt class="docutils literal"><span class="pre">:darwin</span></tt>, <tt class="docutils literal"><span class="pre">:freebsd</span></tt>, <tt class="docutils literal"><span class="pre">:hpux</span></tt>, <tt class="docutils literal"><span class="pre">:linux</span></tt>, <tt class="docutils literal"><span class="pre">:openbsd</span></tt>, <tt class="docutils literal"><span class="pre">:netbsd</span></tt>, <tt class="docutils literal"><span class="pre">:solaris2</span></tt>, <tt class="docutils literal"><span class="pre">:windows</span></tt>, or any other value from <tt class="docutils literal"><span class="pre">RbConfig::CONFIG['host_os']</span></tt></li>
<li><tt class="docutils literal"><span class="pre">my_data</span></tt> is  string (<tt class="docutils literal"><span class="pre">a</span> <span class="pre">string</span> <span class="pre">value</span></tt>) or an empty mash (<tt class="docutils literal"><span class="pre">{</span> <span class="pre">:setting_a</span> <span class="pre">=&gt;</span> <span class="pre">'value_a',</span> <span class="pre">:setting_b</span> <span class="pre">=&gt;</span> <span class="pre">'value_b'</span> <span class="pre">}</span></tt>). This is used to define the data that should be collected by the plugin</li>
</ul>
<p>For example, the following plugin looks up data on virtual machines hosted in Amazon EC2, Google Compute Engine, Rackspace, Eucalyptus, Linode, OpenStack, and Microsoft Azure:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="no">Ohai</span><span class="o">.</span><span class="n">plugin</span><span class="p">(</span><span class="ss">:Cloud</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">provides</span> <span class="s1">&#39;cloud&#39;</span>

  <span class="n">depends</span> <span class="s1">&#39;ec2&#39;</span>
  <span class="n">depends</span> <span class="s1">&#39;gce&#39;</span>
  <span class="n">depends</span> <span class="s1">&#39;rackspace&#39;</span>
  <span class="n">depends</span> <span class="s1">&#39;eucalyptus&#39;</span>
  <span class="n">depends</span> <span class="s1">&#39;linode&#39;</span>
  <span class="n">depends</span> <span class="s1">&#39;openstack&#39;</span>
  <span class="n">depends</span> <span class="s1">&#39;azure&#39;</span>

  <span class="k">def</span> <span class="nf">create_objects</span>
    <span class="n">cloud</span> <span class="no">Mash</span><span class="o">.</span><span class="n">new</span>
    <span class="n">cloud</span><span class="o">[</span><span class="ss">:public_ips</span><span class="o">]</span> <span class="o">=</span> <span class="nb">Array</span><span class="o">.</span><span class="n">new</span>
    <span class="n">cloud</span><span class="o">[</span><span class="ss">:private_ips</span><span class="o">]</span> <span class="o">=</span> <span class="nb">Array</span><span class="o">.</span><span class="n">new</span>
  <span class="k">end</span>

  <span class="o">...</span>

  <span class="k">def</span> <span class="nf">on_gce?</span>
    <span class="n">gce</span> <span class="o">!=</span> <span class="kp">nil</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">get_gce_values</span>
    <span class="n">cloud</span><span class="o">[</span><span class="ss">:public_ipv4</span><span class="o">]</span> <span class="o">=</span> <span class="o">[]</span>
    <span class="n">cloud</span><span class="o">[</span><span class="ss">:local_ipv4</span><span class="o">]</span> <span class="o">=</span> <span class="o">[]</span>

    <span class="n">public_ips</span> <span class="o">=</span> <span class="n">gce</span><span class="o">[</span><span class="s1">&#39;instance&#39;</span><span class="o">][</span><span class="s1">&#39;networkInterfaces&#39;</span><span class="o">].</span><span class="n">collect</span> <span class="k">do</span> <span class="o">|</span><span class="n">interface</span><span class="o">|</span>
      <span class="k">if</span> <span class="n">interface</span><span class="o">.</span><span class="n">has_key?</span><span class="p">(</span><span class="s1">&#39;accessConfigs&#39;</span><span class="p">)</span>
        <span class="n">interface</span><span class="o">[</span><span class="s1">&#39;accessConfigs&#39;</span><span class="o">].</span><span class="n">collect</span><span class="p">{</span><span class="o">|</span><span class="n">ac</span><span class="o">|</span> <span class="n">ac</span><span class="o">[</span><span class="s1">&#39;externalIp&#39;</span><span class="o">]</span><span class="p">}</span>
      <span class="k">end</span>
    <span class="k">end</span><span class="o">.</span><span class="n">flatten</span><span class="o">.</span><span class="n">compact</span>

    <span class="n">private_ips</span> <span class="o">=</span> <span class="n">gce</span><span class="o">[</span><span class="s1">&#39;instance&#39;</span><span class="o">][</span><span class="s1">&#39;networkInterfaces&#39;</span><span class="o">].</span><span class="n">collect</span> <span class="k">do</span> <span class="o">|</span><span class="n">interface</span><span class="o">|</span>
      <span class="n">interface</span><span class="o">[</span><span class="s1">&#39;ip&#39;</span><span class="o">]</span>
    <span class="k">end</span><span class="o">.</span><span class="n">compact</span>

    <span class="n">cloud</span><span class="o">[</span><span class="ss">:public_ips</span><span class="o">]</span> <span class="o">+=</span> <span class="n">public_ips</span>
    <span class="n">cloud</span><span class="o">[</span><span class="ss">:private_ips</span><span class="o">]</span> <span class="o">+=</span> <span class="n">private_ips</span>
    <span class="n">cloud</span><span class="o">[</span><span class="ss">:public_ipv4</span><span class="o">]</span> <span class="o">+=</span>  <span class="n">public_ips</span>
    <span class="n">cloud</span><span class="o">[</span><span class="ss">:public_hostname</span><span class="o">]</span> <span class="o">=</span> <span class="kp">nil</span>
    <span class="n">cloud</span><span class="o">[</span><span class="ss">:local_ipv4</span><span class="o">]</span> <span class="o">+=</span> <span class="n">private_ips</span>
    <span class="n">cloud</span><span class="o">[</span><span class="ss">:local_hostname</span><span class="o">]</span> <span class="o">=</span> <span class="n">gce</span><span class="o">[</span><span class="s1">&#39;instance&#39;</span><span class="o">][</span><span class="s1">&#39;hostname&#39;</span><span class="o">]</span>
    <span class="n">cloud</span><span class="o">[</span><span class="ss">:provider</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;gce&#39;</span>
  <span class="k">end</span>

  <span class="o">...</span>

  <span class="c1"># with following similar code blocks for each cloud provider</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">provides</span></tt> defines the <tt class="docutils literal"><span class="pre">cloud</span></tt> attribute, which is then turned into an object using the <tt class="docutils literal"><span class="pre">create_objects</span></tt> shared method, which then generates a hash based on public or private IP addresses</li>
<li>if the cloud provider is Google Compute Engine, then based on the IP address for the node, the <tt class="docutils literal"><span class="pre">cloud</span></tt> attribute data is populated into a hash</li>
</ul>
<p>To see the rest of the code in this plugin, go to: <a class="reference external" href="https://github.com/chef/ohai/blob/master/lib/ohai/plugins/cloud.rb">https://github.com/chef/ohai/blob/master/lib/ohai/plugins/cloud.rb</a>.</p>
</div>
<div class="section" id="ohai-dsl-methods">
<h3>Ohai DSL Methods<a class="headerlink" href="#ohai-dsl-methods" title="Permalink to this headline">¶</a></h3>
<p>The Ohai DSL is a Ruby DSL that is used to define an Ohai plugin and to ensure that Ohai collects the right data at the start of every chef-client run. The Ohai DSL is a small DSL with a single method that is specific to Ohai plugins. Because the Ohai DSL is a Ruby DSL, anything that can be done using Ruby can also be done when defining an Ohai plugin.</p>
<div class="section" id="collect-data">
<h4>collect_data<a class="headerlink" href="#collect-data" title="Permalink to this headline">¶</a></h4>
<p>The <tt class="docutils literal"><span class="pre">collect_data</span></tt> method is a block of Ruby code that is called by Ohai when it runs. One (or more) <tt class="docutils literal"><span class="pre">collect_data</span></tt> blocks can be defined in a plugin, but only a single <tt class="docutils literal"><span class="pre">collect_data</span></tt> block is ever run. The <tt class="docutils literal"><span class="pre">collect_data</span></tt> block that is run is determined by the platform on which the node is running, which is then matched up against the available <tt class="docutils literal"><span class="pre">collect_data</span></tt> blocks in the plugin.</p>
<ul class="simple">
<li>A <tt class="docutils literal"><span class="pre">collect_data(:default)</span></tt> block is used when Ohai is not able to match the platform of the node with a <tt class="docutils literal"><span class="pre">collect_data(:platform)</span></tt> block in the plugin</li>
<li>A <tt class="docutils literal"><span class="pre">collect_data(:platform)</span></tt> block is required for each platform that requires non-default behavior</li>
</ul>
<p>When Ohai runs, if there isn&#8217;t a matching <tt class="docutils literal"><span class="pre">collect_data</span></tt> block for a platform, the <tt class="docutils literal"><span class="pre">collect_data(:default)</span></tt> block is used. The syntax for the <tt class="docutils literal"><span class="pre">collect_data</span></tt> method is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">collect_data</span><span class="p">(</span><span class="ss">:default</span><span class="p">)</span> <span class="k">do</span>
  <span class="c1"># some Ruby code</span>
<span class="k">end</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">collect_data</span><span class="p">(</span><span class="ss">:platform</span><span class="p">)</span> <span class="k">do</span>
  <span class="c1"># some Ruby code</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">:default</span></tt> is the name of the default <tt class="docutils literal"><span class="pre">collect_data</span></tt> block</li>
<li><tt class="docutils literal"><span class="pre">:platform</span></tt> is the name of a platform, such as <tt class="docutils literal"><span class="pre">:aix</span></tt> for AIX or <tt class="docutils literal"><span class="pre">:windows</span></tt> for Microsoft Windows</li>
</ul>
<div class="section" id="use-a-mash">
<h5>Use a Mash<a class="headerlink" href="#use-a-mash" title="Permalink to this headline">¶</a></h5>
<p>Use a mash to store data. This is done by creating a new mash, and then setting an attribute to it. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">provides</span> <span class="s1">&#39;name_of_mash&#39;</span>
<span class="n">name_of_mash</span> <span class="no">Mash</span><span class="o">.</span><span class="n">new</span>
<span class="n">name_of_mash</span><span class="o">[</span><span class="ss">:attribute</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;value&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="examples">
<h5>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h5>
<p>The following examples show how to use the <tt class="docutils literal"><span class="pre">collect_data</span></tt> block:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="no">Ohai</span><span class="o">.</span><span class="n">plugin</span><span class="p">(</span><span class="ss">:Azure</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">provides</span> <span class="s1">&#39;azure&#39;</span>

  <span class="n">collect_data</span> <span class="k">do</span>
    <span class="n">azure_metadata_from_hints</span> <span class="o">=</span> <span class="n">hint?</span><span class="p">(</span><span class="s1">&#39;azure&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">azure_metadata_from_hints</span>
      <span class="no">Ohai</span><span class="o">::</span><span class="no">Log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;azure_metadata_from_hints is present.&#39;</span><span class="p">)</span>
      <span class="n">azure</span> <span class="no">Mash</span><span class="o">.</span><span class="n">new</span>
      <span class="n">azure_metadata_from_hints</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="o">|</span> <span class="n">azure</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">=</span> <span class="n">v</span> <span class="p">}</span>
    <span class="k">else</span>
      <span class="no">Ohai</span><span class="o">::</span><span class="no">Log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;No hints present for azure.&#39;</span><span class="p">)</span>
      <span class="kp">false</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="nb">require</span> <span class="s1">&#39;ohai/mixin/ec2_metadata&#39;</span>
<span class="kp">extend</span> <span class="no">Ohai</span><span class="o">::</span><span class="no">Mixin</span><span class="o">::</span><span class="no">Ec2Metadata</span>

<span class="no">Ohai</span><span class="o">.</span><span class="n">plugin</span> <span class="k">do</span>
  <span class="n">provides</span> <span class="s1">&#39;openstack&#39;</span>

  <span class="n">collect_data</span> <span class="k">do</span>
    <span class="k">if</span> <span class="n">hint?</span><span class="p">(</span><span class="s1">&#39;openstack&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="n">hint?</span><span class="p">(</span><span class="s1">&#39;hp&#39;</span><span class="p">)</span>
      <span class="no">Ohai</span><span class="o">::</span><span class="no">Log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;ohai openstack&#39;</span><span class="p">)</span>
      <span class="n">openstack</span> <span class="no">Mash</span><span class="o">.</span><span class="n">new</span>
      <span class="k">if</span> <span class="n">can_metadata_connect?</span><span class="p">(</span><span class="no">EC2_METADATA_ADDR</span><span class="p">,</span><span class="mi">80</span><span class="p">)</span>
        <span class="no">Ohai</span><span class="o">::</span><span class="no">Log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;connecting to the OpenStack metadata service&#39;</span><span class="p">)</span>
        <span class="nb">self</span><span class="o">.</span><span class="n">fetch_metadata</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="o">|</span> <span class="n">openstack</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">=</span> <span class="n">v</span> <span class="p">}</span>
        <span class="k">case</span>
        <span class="k">when</span> <span class="n">hint?</span><span class="p">(</span><span class="s1">&#39;hp&#39;</span><span class="p">)</span>
          <span class="n">openstack</span><span class="o">[</span><span class="s1">&#39;provider&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;hp&#39;</span>
        <span class="k">else</span>
          <span class="n">openstack</span><span class="o">[</span><span class="s1">&#39;provider&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;openstack&#39;</span>
        <span class="k">end</span>
      <span class="k">else</span>
        <span class="no">Ohai</span><span class="o">::</span><span class="no">Log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;unable to connect to the OpenStack metadata service&#39;</span><span class="p">)</span>
      <span class="k">end</span>
    <span class="k">else</span>
      <span class="no">Ohai</span><span class="o">::</span><span class="no">Log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;NOT ohai openstack&#39;</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="require">
<h4>require<a class="headerlink" href="#require" title="Permalink to this headline">¶</a></h4>
<p>The <tt class="docutils literal"><span class="pre">require</span></tt> method is a standard Ruby method that can be used to list files that may be required by a platform, such as an external class library. As a best practice, even though the <tt class="docutils literal"><span class="pre">require</span></tt> method is often used at the top of a Ruby file, it is recommended that the use of the <tt class="docutils literal"><span class="pre">require</span></tt> method be used as part of the platform-specific <tt class="docutils literal"><span class="pre">collect_data</span></tt> block. For example, the Ruby WMI is required with Microsoft Windows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">collect_data</span><span class="p">(</span><span class="ss">:windows</span><span class="p">)</span> <span class="k">do</span>
  <span class="nb">require</span> <span class="s1">&#39;ruby-wmi&#39;</span>
  <span class="no">WIN32OLE</span><span class="o">.</span><span class="n">codepage</span> <span class="o">=</span> <span class="no">WIN32OLE</span><span class="o">::</span><span class="no">CP_UTF8</span>

  <span class="n">kernel</span> <span class="no">Mash</span><span class="o">.</span><span class="n">new</span>

  <span class="n">host</span> <span class="o">=</span> <span class="no">WMI</span><span class="o">::</span><span class="no">Win32_OperatingSystem</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="ss">:first</span><span class="p">)</span>
  <span class="n">kernel</span><span class="o">[</span><span class="ss">:os_info</span><span class="o">]</span> <span class="o">=</span> <span class="no">Mash</span><span class="o">.</span><span class="n">new</span>
  <span class="n">host</span><span class="o">.</span><span class="n">properties_</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="nb">p</span><span class="o">|</span>
    <span class="n">kernel</span><span class="o">[</span><span class="ss">:os_info</span><span class="o">][</span><span class="nb">p</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">wmi_underscore</span><span class="o">.</span><span class="n">to_sym</span><span class="o">]</span> <span class="o">=</span> <span class="n">host</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="nb">p</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="o">...</span>

<span class="k">end</span>
</pre></div>
</div>
<p>Ohai will attempt to fully qualify the name of any class by prepending <tt class="docutils literal"><span class="pre">Ohai::</span></tt> to the loaded class. For example both:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="nb">require</span> <span class="no">Ohai</span><span class="o">::</span><span class="no">Mixin</span><span class="o">::</span><span class="no">ShellOut</span>
</pre></div>
</div>
<p>and:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="nb">require</span> <span class="no">Mixin</span><span class="o">::</span><span class="no">ShellOut</span>
</pre></div>
</div>
<p>are both understood by the Ohai in the same way: <tt class="docutils literal"><span class="pre">Ohai::Mixin::ShellOut</span></tt>.</p>
<p>When a class is an external class (and therefore should not have <tt class="docutils literal"><span class="pre">Ohai::</span></tt> prepended), use <tt class="docutils literal"><span class="pre">::</span></tt> to let the Ohai know. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="o">::</span><span class="no">External</span><span class="o">::</span><span class="no">Class</span><span class="o">::</span><span class="no">Library</span>
</pre></div>
</div>
<div class="section" id="common-directory">
<h5>/common Directory<a class="headerlink" href="#common-directory" title="Permalink to this headline">¶</a></h5>
<p>The <tt class="docutils literal"><span class="pre">/common</span></tt> directory stores code that is used across all Ohai plugins. For example, a file in the <tt class="docutils literal"><span class="pre">/common</span></tt> directory named <tt class="docutils literal"><span class="pre">virtualization.rb</span></tt> that includes code like the following:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="k">module</span> <span class="nn">Ohai</span>
  <span class="k">module</span> <span class="nn">Common</span>
    <span class="k">module</span> <span class="nn">Virtualization</span>

      <span class="k">def</span> <span class="nf">host?</span><span class="p">(</span><span class="n">virtualization</span><span class="p">)</span>
        <span class="o">!</span><span class="n">virtualization</span><span class="o">.</span><span class="n">nil?</span> <span class="o">&amp;&amp;</span> <span class="n">virtualization</span><span class="o">[</span><span class="ss">:role</span><span class="o">].</span><span class="n">eql?</span><span class="p">(</span><span class="s1">&#39;host&#39;</span><span class="p">)</span>
      <span class="k">end</span>

      <span class="k">def</span> <span class="nf">open_virtconn</span><span class="p">(</span><span class="nb">system</span><span class="p">)</span>
        <span class="k">begin</span>
          <span class="nb">require</span> <span class="s1">&#39;libvirt&#39;</span>
          <span class="nb">require</span> <span class="s1">&#39;hpricot&#39;</span>
        <span class="k">rescue</span> <span class="no">LoadError</span> <span class="o">=&gt;</span> <span class="n">e</span>
          <span class="no">Ohai</span><span class="o">::</span><span class="no">Log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Cannot load gem: #{e}.&#39;</span><span class="p">)</span>
        <span class="k">end</span>

        <span class="n">emu</span> <span class="o">=</span> <span class="p">(</span><span class="nb">system</span><span class="o">.</span><span class="n">eql?</span><span class="p">(</span><span class="s1">&#39;kvm&#39;</span><span class="p">)</span> <span class="p">?</span> <span class="s1">&#39;qemu&#39;</span> <span class="p">:</span> <span class="nb">system</span><span class="p">)</span>
        <span class="n">virtconn</span> <span class="o">=</span> <span class="no">Libvirt</span><span class="o">::</span><span class="n">open_read_only</span><span class="p">(</span><span class="s1">&#39;#{emu}:///system&#39;</span><span class="p">)</span>
      <span class="k">end</span>

      <span class="o">...</span>

      <span class="k">def</span> <span class="nf">networks</span><span class="p">(</span><span class="n">virtconn</span><span class="p">)</span>
        <span class="n">networks</span> <span class="o">=</span> <span class="no">Mash</span><span class="o">.</span><span class="n">new</span>
        <span class="n">virtconn</span><span class="o">.</span><span class="n">list_networks</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">n</span><span class="o">|</span>
          <span class="n">nv</span> <span class="o">=</span> <span class="n">virtconn</span><span class="o">.</span><span class="n">lookup_network_by_name</span> <span class="n">n</span>
          <span class="n">networks</span><span class="o">[</span><span class="n">n</span><span class="o">]</span> <span class="o">=</span> <span class="no">Mash</span><span class="o">.</span><span class="n">new</span>
          <span class="n">networks</span><span class="o">[</span><span class="n">n</span><span class="o">][</span><span class="ss">:xml_desc</span><span class="o">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">nv</span><span class="o">.</span><span class="n">xml_desc</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;\n&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span> <span class="p">{</span><span class="o">|</span><span class="n">line</span><span class="o">|</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">})</span><span class="o">.</span><span class="n">join</span>
          <span class="o">[</span><span class="s1">&#39;bridge_name&#39;</span><span class="p">,</span><span class="s1">&#39;uuid&#39;</span><span class="o">].</span><span class="n">each</span> <span class="p">{</span><span class="o">|</span><span class="n">a</span><span class="o">|</span> <span class="n">networks</span><span class="o">[</span><span class="n">n</span><span class="o">][</span><span class="n">a</span><span class="o">]</span> <span class="o">=</span> <span class="n">nv</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">a</span><span class="p">)}</span>
          <span class="c1">#xdoc = Hpricot networks[n][:xml_desc]</span>
        <span class="k">end</span>
        <span class="n">networks</span>
      <span class="k">end</span>

      <span class="o">...</span>

    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>can then be leveraged in a plugin by using the <tt class="docutils literal"><span class="pre">require</span></tt> method to require the <tt class="docutils literal"><span class="pre">virtualization.rb</span></tt> file and then later calling each of the methods in the required module:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="nb">require</span> <span class="s1">&#39;ohai/common/virtualization&#39;</span>

<span class="no">Ohai</span><span class="o">.</span><span class="n">plugin</span><span class="p">(</span><span class="ss">:Virtualization</span><span class="p">)</span> <span class="k">do</span>
  <span class="kp">include</span> <span class="no">Ohai</span><span class="o">::</span><span class="no">Common</span><span class="o">::</span><span class="no">Virtualization</span>

  <span class="n">provides</span> <span class="s1">&#39;virtualization&#39;</span>
  <span class="sx">%w{ capabilities domains networks storage }</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">subattr</span><span class="o">|</span>
    <span class="n">provides</span> <span class="s1">&#39;virtualization/#{subattr}&#39;</span>
  <span class="k">end</span>

  <span class="n">collect_data</span><span class="p">(</span><span class="ss">:linux</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">virtualization</span> <span class="no">Mash</span><span class="o">.</span><span class="n">new</span>

    <span class="o">...</span>

    <span class="k">if</span> <span class="n">host?</span><span class="p">(</span><span class="n">virtualization</span><span class="p">)</span>
      <span class="n">v</span> <span class="o">=</span> <span class="n">open_virtconn</span><span class="p">(</span><span class="n">virtualization</span><span class="o">[</span><span class="ss">:system</span><span class="o">]</span><span class="p">)</span>

      <span class="n">virtualization</span><span class="o">[</span><span class="ss">:libvirt_version</span><span class="o">]</span> <span class="o">=</span> <span class="n">libvirt_version</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
      <span class="n">virtualization</span><span class="o">[</span><span class="ss">:nodeinfo</span><span class="o">]</span> <span class="o">=</span> <span class="n">nodeinfo</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
      <span class="n">virtualization</span><span class="o">[</span><span class="ss">:uri</span><span class="o">]</span> <span class="o">=</span> <span class="n">uri</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
      <span class="n">virtualization</span><span class="o">[</span><span class="ss">:capabilities</span><span class="o">]</span> <span class="o">=</span> <span class="n">capabilities</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
      <span class="n">virtualization</span><span class="o">[</span><span class="ss">:domains</span><span class="o">]</span> <span class="o">=</span> <span class="n">domains</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
      <span class="n">virtualization</span><span class="o">[</span><span class="ss">:networks</span><span class="o">]</span> <span class="o">=</span> <span class="n">networks</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
      <span class="n">virtualization</span><span class="o">[</span><span class="ss">:storage</span><span class="o">]</span> <span class="o">=</span> <span class="n">storage</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>

      <span class="n">close_virtconn</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="shared-methods">
<h4>Shared Methods<a class="headerlink" href="#shared-methods" title="Permalink to this headline">¶</a></h4>
<p>A shared method defines behavior that may be used by more than one <tt class="docutils literal"><span class="pre">collect_data</span></tt> block, such as a data structure, a hash, or a mash. The syntax for a shared method is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">a_shared_method</span>
  <span class="c1"># some Ruby code that defines the shared method</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For example, the following shared method is used to collect data about various cloud providers, depending on the cloud provider and the type of IP address:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">create_objects</span>
  <span class="n">cloud</span> <span class="no">Mash</span><span class="o">.</span><span class="n">new</span>
  <span class="n">cloud</span><span class="o">[</span><span class="ss">:public_ips</span><span class="o">]</span> <span class="o">=</span> <span class="nb">Array</span><span class="o">.</span><span class="n">new</span>
  <span class="n">cloud</span><span class="o">[</span><span class="ss">:private_ips</span><span class="o">]</span> <span class="o">=</span> <span class="nb">Array</span><span class="o">.</span><span class="n">new</span>
<span class="k">end</span>
</pre></div>
</div>
<p>and then later on in the same plugin, the <tt class="docutils literal"><span class="pre">cloud</span></tt> object can be reused:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_linode_values</span>
  <span class="n">cloud</span><span class="o">[</span><span class="ss">:public_ips</span><span class="o">]</span> <span class="o">&lt;&lt;</span> <span class="n">linode</span><span class="o">[</span><span class="s1">&#39;public_ip&#39;</span><span class="o">]</span>
  <span class="n">cloud</span><span class="o">[</span><span class="ss">:private_ips</span><span class="o">]</span> <span class="o">&lt;&lt;</span> <span class="n">linode</span><span class="o">[</span><span class="s1">&#39;private_ip&#39;</span><span class="o">]</span>
  <span class="n">cloud</span><span class="o">[</span><span class="ss">:public_ipv4</span><span class="o">]</span> <span class="o">=</span> <span class="n">linode</span><span class="o">[</span><span class="s1">&#39;public_ipv4&#39;</span><span class="o">]</span>
  <span class="n">cloud</span><span class="o">[</span><span class="ss">:public_hostname</span><span class="o">]</span> <span class="o">=</span> <span class="n">linode</span><span class="o">[</span><span class="s1">&#39;public_hostname&#39;</span><span class="o">]</span>
  <span class="n">cloud</span><span class="o">[</span><span class="ss">:local_ipv4</span><span class="o">]</span> <span class="o">=</span> <span class="n">linode</span><span class="o">[</span><span class="s1">&#39;local_ipv4&#39;</span><span class="o">]</span>
  <span class="n">cloud</span><span class="o">[</span><span class="ss">:local_hostname</span><span class="o">]</span> <span class="o">=</span> <span class="n">linode</span><span class="o">[</span><span class="s1">&#39;local_hostname&#39;</span><span class="o">]</span>
  <span class="n">cloud</span><span class="o">[</span><span class="ss">:provider</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;linode&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
<p>and</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_azure_values</span>
  <span class="n">cloud</span><span class="o">[</span><span class="ss">:vm_name</span><span class="o">]</span> <span class="o">=</span> <span class="n">azure</span><span class="o">[</span><span class="s1">&#39;vm_name&#39;</span><span class="o">]</span>
  <span class="n">cloud</span><span class="o">[</span><span class="ss">:public_ips</span><span class="o">]</span> <span class="o">&lt;&lt;</span> <span class="n">azure</span><span class="o">[</span><span class="s1">&#39;public_ip&#39;</span><span class="o">]</span>
  <span class="n">cloud</span><span class="o">[</span><span class="ss">:public_fqdn</span><span class="o">]</span> <span class="o">=</span> <span class="n">azure</span><span class="o">[</span><span class="s1">&#39;public_fqdn&#39;</span><span class="o">]</span>
  <span class="n">cloud</span><span class="o">[</span><span class="ss">:public_ssh_port</span><span class="o">]</span> <span class="o">=</span> <span class="n">azure</span><span class="o">[</span><span class="s1">&#39;public_ssh_port&#39;</span><span class="o">]</span> <span class="k">if</span> <span class="n">azure</span><span class="o">[</span><span class="s1">&#39;public_ssh_port&#39;</span><span class="o">]</span>
  <span class="n">cloud</span><span class="o">[</span><span class="ss">:public_winrm_port</span><span class="o">]</span> <span class="o">=</span> <span class="n">azure</span><span class="o">[</span><span class="s1">&#39;public_winrm_port&#39;</span><span class="o">]</span> <span class="k">if</span> <span class="n">azure</span><span class="o">[</span><span class="s1">&#39;public_winrm_port&#39;</span><span class="o">]</span>
  <span class="n">cloud</span><span class="o">[</span><span class="ss">:provider</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;azure&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
<p>and so on, for each of the various cloud providers.</p>
</div>
</div>
<div class="section" id="hints">
<h3>Hints<a class="headerlink" href="#hints" title="Permalink to this headline">¶</a></h3>
<p>Ohai hints are used to tell Ohai something about the system that it is running on that it would not be able to discover itself. An Ohai hint exists if a JSON file exists in the hint directory with the same name as the hint. For example, calling <tt class="docutils literal"><span class="pre">hint?('antarctica')</span></tt> in an Ohai plugin would return an empty hash if the file <tt class="docutils literal"><span class="pre">antarctica.json</span></tt> existed in the hints directory, and return nil if the file does not exist.</p>
<p>If the hint file contains JSON content, it will be returned as a hash from the call to <tt class="docutils literal"><span class="pre">hint?</span></tt>.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;snow&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">&quot;penguins&quot;</span><span class="o">:</span> <span class="s2">&quot;many&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">antarctica_hint</span> <span class="o">=</span> <span class="n">hint?</span><span class="p">(</span><span class="s1">&#39;antarctica&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">antarctica_hint</span><span class="o">[</span><span class="s1">&#39;snow&#39;</span><span class="o">]</span>
  <span class="s2">&quot;There are </span><span class="si">#{</span><span class="n">antarctica_hint</span><span class="o">[</span><span class="s1">&#39;penguins&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2"> penguins here.&quot;</span>
<span class="k">else</span>
  <span class="s1">&#39;There is no snow here, and penguins like snow.&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
<p>The default directory in which hint files are located is <tt class="docutils literal"><span class="pre">/etc/chef/ohai/hints/</span></tt>. Use the <tt class="docutils literal"><span class="pre">Ohai::Config[:hints_path]</span></tt> setting in the client.rb file to customize this location.</p>
</div>
<div class="section" id="log-entries">
<h3>Log Entries<a class="headerlink" href="#log-entries" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">Ohai::Log</span></tt> class in an Ohai plugin to define log entries that are created by Ohai. The syntax for a log message is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="no">Ohai</span><span class="o">::</span><span class="no">Log</span><span class="o">.</span><span class="n">log_type</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">log_type</span></tt> can be <tt class="docutils literal"><span class="pre">.debug</span></tt>, <tt class="docutils literal"><span class="pre">.info</span></tt>, <tt class="docutils literal"><span class="pre">.warn</span></tt>, <tt class="docutils literal"><span class="pre">.error</span></tt>, or <tt class="docutils literal"><span class="pre">.fatal</span></tt></li>
<li><tt class="docutils literal"><span class="pre">'message'</span></tt> is the message that is logged.</li>
</ul>
<p>For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="no">Ohai</span><span class="o">.</span><span class="n">plugin</span> <span class="k">do</span>
  <span class="n">provides</span> <span class="s1">&#39;openstack&#39;</span>

  <span class="n">collect_data</span> <span class="k">do</span>
    <span class="k">if</span> <span class="n">hint?</span><span class="p">(</span><span class="s1">&#39;openstack&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="n">hint?</span><span class="p">(</span><span class="s1">&#39;hp&#39;</span><span class="p">)</span>
      <span class="no">Ohai</span><span class="o">::</span><span class="no">Log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;ohai openstack&#39;</span><span class="p">)</span>
      <span class="n">openstack</span> <span class="no">Mash</span><span class="o">.</span><span class="n">new</span>
      <span class="k">if</span> <span class="n">can_metadata_connect?</span><span class="p">(</span><span class="no">EC2_METADATA_ADDR</span><span class="p">,</span><span class="mi">80</span><span class="p">)</span>
        <span class="no">Ohai</span><span class="o">::</span><span class="no">Log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;connecting to the OpenStack metadata service&#39;</span><span class="p">)</span>
        <span class="nb">self</span><span class="o">.</span><span class="n">fetch_metadata</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="o">|</span> <span class="n">openstack</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">=</span> <span class="n">v</span> <span class="p">}</span>
        <span class="k">case</span>
        <span class="k">when</span> <span class="n">hint?</span><span class="p">(</span><span class="s1">&#39;hp&#39;</span><span class="p">)</span>
          <span class="n">openstack</span><span class="o">[</span><span class="s1">&#39;provider&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;hp&#39;</span>
        <span class="k">else</span>
          <span class="n">openstack</span><span class="o">[</span><span class="s1">&#39;provider&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;openstack&#39;</span>
        <span class="k">end</span>
      <span class="k">else</span>
        <span class="no">Ohai</span><span class="o">::</span><span class="no">Log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;unable to connect to the OpenStack metadata service&#39;</span><span class="p">)</span>
      <span class="k">end</span>
    <span class="k">else</span>
      <span class="no">Ohai</span><span class="o">::</span><span class="no">Log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;NOT ohai openstack&#39;</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="section" id="rescue">
<h4>rescue<a class="headerlink" href="#rescue" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">rescue</span></tt> clause to make sure that a log message is always provided. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="k">rescue</span> <span class="no">LoadError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="no">Ohai</span><span class="o">::</span><span class="no">Log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;ip_scopes: cannot load gem, plugin disabled: #{e}&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id1">
<h3>Examples<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>The following examples show different ways of building Ohai plugins.</p>
<div class="section" id="collect-data-blocks">
<h4>collect_data Blocks<a class="headerlink" href="#collect-data-blocks" title="Permalink to this headline">¶</a></h4>
<p>The following Ohai plugin uses multiple <tt class="docutils literal"><span class="pre">collect_data</span></tt> blocks and shared methods to define platforms:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="no">Ohai</span><span class="o">.</span><span class="n">plugin</span><span class="p">(</span><span class="ss">:Hostname</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">provides</span> <span class="s1">&#39;domain&#39;</span><span class="p">,</span> <span class="s1">&#39;fqdn&#39;</span><span class="p">,</span> <span class="s1">&#39;hostname&#39;</span>

  <span class="k">def</span> <span class="nf">from_cmd</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
    <span class="n">so</span> <span class="o">=</span> <span class="n">shell_out</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
    <span class="n">so</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="vg">$/</span><span class="p">)</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">collect_domain</span>
    <span class="k">if</span> <span class="n">fqdn</span>
      <span class="n">fqdn</span> <span class="o">=~</span> <span class="sr">/.+?\.(.*)/</span>
      <span class="n">domain</span> <span class="vg">$1</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="n">collect_data</span><span class="p">(</span><span class="ss">:aix</span><span class="p">,</span> <span class="ss">:hpux</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">hostname</span> <span class="n">from_cmd</span><span class="p">(</span><span class="s1">&#39;hostname -s&#39;</span><span class="p">)</span>
    <span class="n">fqdn</span> <span class="n">from_cmd</span><span class="p">(</span><span class="s1">&#39;hostname&#39;</span><span class="p">)</span>
    <span class="n">domain</span> <span class="n">collect_domain</span>
  <span class="k">end</span>

  <span class="n">collect_data</span><span class="p">(</span><span class="ss">:darwin</span><span class="p">,</span> <span class="ss">:netbsd</span><span class="p">,</span> <span class="ss">:openbsd</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">hostname</span> <span class="n">from_cmd</span><span class="p">(</span><span class="s1">&#39;hostname -s&#39;</span><span class="p">)</span>
    <span class="n">fqdn</span> <span class="n">from_cmd</span><span class="p">(</span><span class="s1">&#39;hostname&#39;</span><span class="p">)</span>
    <span class="n">domain</span> <span class="n">collect_domain</span>
  <span class="k">end</span>

  <span class="n">collect_data</span><span class="p">(</span><span class="ss">:freebsd</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">hostname</span> <span class="n">from_cmd</span><span class="p">(</span><span class="s1">&#39;hostname -s&#39;</span><span class="p">)</span>
    <span class="n">fqdn</span> <span class="n">from_cmd</span><span class="p">(</span><span class="s1">&#39;hostname -f&#39;</span><span class="p">)</span>
    <span class="n">domain</span> <span class="n">collect_domain</span>
  <span class="k">end</span>

  <span class="n">collect_data</span><span class="p">(</span><span class="ss">:linux</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">hostname</span> <span class="n">from_cmd</span><span class="p">(</span><span class="s1">&#39;hostname -s&#39;</span><span class="p">)</span>
    <span class="k">begin</span>
      <span class="n">fqdn</span> <span class="n">from_cmd</span><span class="p">(</span><span class="s1">&#39;hostname --fqdn&#39;</span><span class="p">)</span>
    <span class="k">rescue</span>
      <span class="no">Ohai</span><span class="o">::</span><span class="no">Log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;hostname -f returned an error, probably no domain is set&#39;</span><span class="p">)</span>
    <span class="k">end</span>
    <span class="n">domain</span> <span class="n">collect_domain</span>
  <span class="k">end</span>

  <span class="n">collect_data</span><span class="p">(</span><span class="ss">:solaris2</span><span class="p">)</span> <span class="k">do</span>
    <span class="nb">require</span> <span class="s1">&#39;socket&#39;</span>

    <span class="n">hostname</span> <span class="n">from_cmd</span><span class="p">(</span><span class="s1">&#39;hostname&#39;</span><span class="p">)</span>

    <span class="n">fqdn_lookup</span> <span class="o">=</span> <span class="no">Socket</span><span class="o">.</span><span class="n">getaddrinfo</span><span class="p">(</span><span class="n">hostname</span><span class="p">,</span> <span class="kp">nil</span><span class="p">,</span> <span class="kp">nil</span><span class="p">,</span> <span class="kp">nil</span><span class="p">,</span> <span class="kp">nil</span><span class="p">,</span> <span class="no">Socket</span><span class="o">::</span><span class="no">AI_CANONNAME</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span>
    <span class="k">if</span> <span class="n">fqdn_lookup</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">length</span> <span class="o">&gt;</span> <span class="mi">1</span>
      <span class="c1"># we received an fqdn</span>
      <span class="n">fqdn</span> <span class="n">fqdn_lookup</span>
    <span class="k">else</span>
      <span class="c1"># default to assembling one</span>
      <span class="n">h</span> <span class="o">=</span> <span class="n">from_cmd</span><span class="p">(</span><span class="s1">&#39;hostname&#39;</span><span class="p">)</span>
      <span class="n">d</span> <span class="o">=</span> <span class="n">from_cmd</span><span class="p">(</span><span class="s1">&#39;domainname&#39;</span><span class="p">)</span>
      <span class="n">fqdn</span> <span class="s1">&#39;#{h}.#{d}&#39;</span>
    <span class="k">end</span>

    <span class="n">domain</span> <span class="n">collect_domain</span>
  <span class="k">end</span>

  <span class="n">collect_data</span><span class="p">(</span><span class="ss">:windows</span><span class="p">)</span> <span class="k">do</span>
    <span class="nb">require</span> <span class="s1">&#39;ruby-wmi&#39;</span>
    <span class="nb">require</span> <span class="s1">&#39;socket&#39;</span>

    <span class="n">host</span> <span class="o">=</span> <span class="no">WMI</span><span class="o">::</span><span class="no">Win32_ComputerSystem</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="ss">:first</span><span class="p">)</span>
    <span class="n">hostname</span> <span class="s1">&#39;#{host.Name}&#39;</span>

    <span class="n">info</span> <span class="o">=</span> <span class="no">Socket</span><span class="o">.</span><span class="n">gethostbyname</span><span class="p">(</span><span class="no">Socket</span><span class="o">.</span><span class="n">gethostname</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">first</span> <span class="o">=~</span> <span class="sr">/.+?\.(.*)/</span>
      <span class="n">fqdn</span> <span class="n">info</span><span class="o">.</span><span class="n">first</span>
    <span class="k">else</span>
      <span class="c1"># host is not in dns. optionally use:</span>
      <span class="c1"># C:\WINDOWS\system32\drivers\etc\hosts</span>
      <span class="n">fqdn</span> <span class="no">Socket</span><span class="o">.</span><span class="n">gethostbyaddr</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">last</span><span class="p">)</span><span class="o">.</span><span class="n">first</span>
    <span class="k">end</span>

   <span class="n">domain</span> <span class="n">collect_domain</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="section" id="use-a-mixin-library">
<h4>Use a mixin Library<a class="headerlink" href="#use-a-mixin-library" title="Permalink to this headline">¶</a></h4>
<p>The following Ohai example shows a plugin can use a <tt class="docutils literal"><span class="pre">mixin</span></tt> library and also depend on another plugin:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="nb">require</span> <span class="s1">&#39;ohai/mixin/os&#39;</span>

<span class="no">Ohai</span><span class="o">.</span><span class="n">plugin</span><span class="p">(</span><span class="ss">:Os</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">provides</span> <span class="s1">&#39;os&#39;</span><span class="p">,</span> <span class="s1">&#39;os_version&#39;</span>
  <span class="n">depends</span> <span class="s1">&#39;kernel&#39;</span>

  <span class="n">collect_data</span> <span class="k">do</span>
    <span class="n">os</span> <span class="n">collect_os</span>
    <span class="n">os_version</span> <span class="n">kernel</span><span class="o">[</span><span class="ss">:release</span><span class="o">]</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="section" id="get-kernel-values">
<h4>Get Kernel Values<a class="headerlink" href="#get-kernel-values" title="Permalink to this headline">¶</a></h4>
<p>The following Ohai example shows part of a file that gets initial kernel attribute values:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="no">Ohai</span><span class="o">.</span><span class="n">plugin</span><span class="p">(</span><span class="ss">:Kernel</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">provides</span> <span class="s1">&#39;kernel&#39;</span><span class="p">,</span> <span class="s1">&#39;kernel/modules&#39;</span>

  <span class="k">def</span> <span class="nf">init_kernel</span>
    <span class="n">kernel</span> <span class="no">Mash</span><span class="o">.</span><span class="n">new</span>
    <span class="o">[[</span><span class="s1">&#39;uname -s&#39;</span><span class="p">,</span> <span class="ss">:name</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="s1">&#39;uname -r&#39;</span><span class="p">,</span> <span class="ss">:release</span><span class="o">]</span><span class="p">,</span>
    <span class="o">[</span><span class="s1">&#39;uname -v&#39;</span><span class="p">,</span> <span class="ss">:version</span><span class="o">]</span><span class="p">,</span> <span class="o">[</span><span class="s1">&#39;uname -m&#39;</span><span class="p">,</span> <span class="ss">:machine</span><span class="o">]].</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">cmd</span><span class="p">,</span> <span class="n">property</span><span class="o">|</span>
      <span class="n">so</span> <span class="o">=</span> <span class="n">shell_out</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
      <span class="n">kernel</span><span class="o">[</span><span class="n">property</span><span class="o">]</span> <span class="o">=</span> <span class="n">so</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="vg">$/</span><span class="p">)</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span>
    <span class="k">end</span>
    <span class="n">kernel</span>
  <span class="k">end</span>

  <span class="o">...</span>

  <span class="n">collect_data</span><span class="p">(</span><span class="ss">:darwin</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">kernel</span> <span class="n">init_kernel</span>
    <span class="n">kernel</span><span class="o">[</span><span class="ss">:os</span><span class="o">]</span> <span class="o">=</span> <span class="n">kernel</span><span class="o">[</span><span class="ss">:name</span><span class="o">]</span>

    <span class="n">so</span> <span class="o">=</span> <span class="n">shell_out</span><span class="p">(</span><span class="s1">&#39;sysctl -n hw.optional.x86_64&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">so</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="vg">$/</span><span class="p">)</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="n">to_i</span> <span class="o">==</span> <span class="mi">1</span>
      <span class="n">kernel</span><span class="o">[</span><span class="ss">:machine</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;x86_64&#39;</span>
    <span class="k">end</span>

    <span class="n">modules</span> <span class="o">=</span> <span class="no">Mash</span><span class="o">.</span><span class="n">new</span>
    <span class="n">so</span> <span class="o">=</span> <span class="n">shell_out</span><span class="p">(</span><span class="s1">&#39;kextstat -k -l&#39;</span><span class="p">)</span>
    <span class="n">so</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">lines</span> <span class="k">do</span> <span class="o">|</span><span class="n">line</span><span class="o">|</span>
      <span class="k">if</span> <span class="n">line</span> <span class="o">=~</span> <span class="sr">/(\d+)\s+(\d+)\s+0x[0-9a-f]+\s+0x([0-9a-f]+)\s+0x[0-9a-f]+\s+([a-zA-Z0-9\.]+) \(([0-9\.]+)\)/</span>
        <span class="n">kext</span><span class="o">[</span><span class="vg">$4</span><span class="o">]</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">:version</span> <span class="o">=&gt;</span> <span class="vg">$5</span><span class="p">,</span> <span class="ss">:size</span> <span class="o">=&gt;</span> <span class="vg">$3</span><span class="o">.</span><span class="n">hex</span><span class="p">,</span> <span class="ss">:index</span> <span class="o">=&gt;</span> <span class="vg">$1</span><span class="p">,</span> <span class="ss">:refcount</span> <span class="o">=&gt;</span> <span class="vg">$2</span> <span class="p">}</span>
      <span class="k">end</span>
    <span class="k">end</span>

    <span class="n">kernel</span><span class="o">[</span><span class="ss">:modules</span><span class="o">]</span> <span class="o">=</span> <span class="n">modules</span>
  <span class="k">end</span>

  <span class="o">...</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="ohai-6-vs-newer-plugins">
<h3>Ohai 6 vs. Newer Plugins<a class="headerlink" href="#ohai-6-vs-newer-plugins" title="Permalink to this headline">¶</a></h3>
<p>Ohai 7 is backwards compatible with existing Ohai 6 plugins; however, none of the new (or future) functionality will be made available to Ohai 6 plugins. It is recommended that all Ohai 6 plugins be updated for new DSL behavior in Ohai 7 as soon as possible. When migrating Ohai 6 plugins to Ohai 7, consider the following:</p>
<ul class="simple">
<li>Pick a name for the existing plugin, and then define it as an Ohai 7 plugin</li>
<li>Convert the <tt class="docutils literal"><span class="pre">required_plugin()</span></tt> calls to <tt class="docutils literal"><span class="pre">depends</span></tt> statements</li>
<li>Move the Ohai 6 plugin logic into a <tt class="docutils literal"><span class="pre">collect_data()</span></tt> block</li>
</ul>
<p>For example, Ohai 6:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">provides</span> <span class="s1">&#39;my_app&#39;</span>

<span class="n">require_plugin</span><span class="p">(</span><span class="s1">&#39;kernel&#39;</span><span class="p">)</span>

<span class="n">my_app</span> <span class="no">Mash</span><span class="o">.</span><span class="n">new</span>
<span class="n">my_app</span><span class="o">[</span><span class="ss">:version</span><span class="o">]</span> <span class="o">=</span> <span class="n">shell_out</span><span class="p">(</span><span class="s1">&#39;my_app -v&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">stdout</span>
<span class="n">my_app</span><span class="o">[</span><span class="ss">:message</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;Using #{kernel[:version]}&#39;</span>
</pre></div>
</div>
<p>and then Ohai 7:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="no">Ohai</span><span class="o">.</span><span class="n">plugin</span><span class="p">(</span><span class="ss">:MyAPP</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">provides</span> <span class="s1">&#39;my_app&#39;</span>
  <span class="n">depends</span> <span class="s1">&#39;kernel&#39;</span>

  <span class="n">collect_data</span> <span class="k">do</span>
    <span class="n">my_app</span> <span class="no">Mash</span><span class="o">.</span><span class="n">new</span>
    <span class="n">my_app</span><span class="o">[</span><span class="ss">:version</span><span class="o">]</span> <span class="o">=</span> <span class="n">shell_out</span><span class="p">(</span><span class="s1">&#39;my_app -v&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">stdout</span>
    <span class="n">my_app</span><span class="o">[</span><span class="ss">:message</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;Using #{kernel[:version]}&#39;</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>Another example, for Ohai 6:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">provide</span> <span class="s1">&#39;ipaddress&#39;</span>
<span class="n">require_plugin</span> <span class="s1">&#39;#{os}::network&#39;</span>
<span class="n">require_plugin</span> <span class="s1">&#39;#{os}::virtualization&#39;</span>
<span class="n">require_plugin</span> <span class="s1">&#39;passwd&#39;</span>

<span class="k">if</span> <span class="n">virtualization</span><span class="o">[</span><span class="s1">&#39;system&#39;</span><span class="o">]</span> <span class="o">==</span> <span class="s1">&#39;vbox&#39;</span>
  <span class="k">if</span> <span class="n">etc</span><span class="o">[</span><span class="s1">&#39;passwd&#39;</span><span class="o">].</span><span class="n">any?</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="n">k</span> <span class="o">==</span> <span class="s1">&#39;vagrant&#39;</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">network</span><span class="o">[</span><span class="s1">&#39;interfaces&#39;</span><span class="o">][</span><span class="s1">&#39;eth1&#39;</span><span class="o">]</span>
      <span class="n">network</span><span class="o">[</span><span class="s1">&#39;interfaces&#39;</span><span class="o">][</span><span class="s1">&#39;eth1&#39;</span><span class="o">][</span><span class="s1">&#39;addresses&#39;</span><span class="o">].</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">ip</span><span class="p">,</span> <span class="n">params</span><span class="o">|</span>
        <span class="k">if</span> <span class="n">params</span><span class="o">[</span><span class="s1">&#39;family&#39;</span><span class="o">]</span> <span class="o">==</span> <span class="p">(</span><span class="s1">&#39;inet&#39;</span><span class="p">)</span>
          <span class="n">ipaddress</span> <span class="n">ip</span>
        <span class="k">end</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>and then Ohai 7:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="no">Ohai</span><span class="o">.</span><span class="n">plugin</span><span class="p">(</span><span class="ss">:Vboxipaddress</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">provides</span> <span class="s1">&#39;ipaddress&#39;</span>
  <span class="n">depends</span> <span class="s1">&#39;ipaddress&#39;</span><span class="p">,</span> <span class="s1">&#39;network/interfaces&#39;</span><span class="p">,</span> <span class="s1">&#39;virtualization/system&#39;</span><span class="p">,</span> <span class="s1">&#39;etc/passwd&#39;</span>
  <span class="n">collect_data</span><span class="p">(</span><span class="ss">:default</span><span class="p">)</span> <span class="k">do</span>
    <span class="k">if</span> <span class="n">virtualization</span><span class="o">[</span><span class="s1">&#39;system&#39;</span><span class="o">]</span> <span class="o">==</span> <span class="s1">&#39;vbox&#39;</span>
      <span class="k">if</span> <span class="n">etc</span><span class="o">[</span><span class="s1">&#39;passwd&#39;</span><span class="o">].</span><span class="n">any?</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="n">k</span> <span class="o">==</span> <span class="s1">&#39;vagrant&#39;</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">network</span><span class="o">[</span><span class="s1">&#39;interfaces&#39;</span><span class="o">][</span><span class="s1">&#39;eth1&#39;</span><span class="o">]</span>
          <span class="n">network</span><span class="o">[</span><span class="s1">&#39;interfaces&#39;</span><span class="o">][</span><span class="s1">&#39;eth1&#39;</span><span class="o">][</span><span class="s1">&#39;addresses&#39;</span><span class="o">].</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">ip</span><span class="p">,</span> <span class="n">params</span><span class="o">|</span>
            <span class="k">if</span> <span class="n">params</span><span class="o">[</span><span class="s1">&#39;family&#39;</span><span class="o">]</span> <span class="o">==</span> <span class="p">(</span><span class="s1">&#39;inet&#39;</span><span class="p">)</span>
              <span class="n">ipaddress</span> <span class="n">ip</span>
            <span class="k">end</span>
          <span class="k">end</span>
        <span class="k">end</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="ohai-resource">
<h2>ohai Resource<a class="headerlink" href="#ohai-resource" title="Permalink to this headline">¶</a></h2>
<p>A <a class="reference external" href="https://docs.chef.io/resource.html">resource</a> defines the desired state for a single configuration item present on a node that is under management by Chef. A resource collection&#8212;one (or more) individual resources&#8212;defines the desired state for the entire node. During a <a class="reference external" href="https://docs.chef.io/chef_client.html#the-chef-client-run">chef-client run</a>, the current state of each resource is tested, after which the chef-client will take any steps that are necessary to repair the node and bring it back into the desired state.</p>
<p>Use the <strong>ohai</strong> resource to reload the Ohai configuration on a node. This allows recipes that change system attributes (like a recipe that adds a user) to refer to those attributes later on during the chef-client run.</p>
<div class="section" id="id2">
<h3>Syntax<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>A <strong>ohai</strong> resource block reloads the Ohai configuration on a node:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">ohai</span> <span class="s1">&#39;reload&#39;</span> <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:reload</span>
<span class="k">end</span>
</pre></div>
</div>
<p>The full syntax for all of the properties that are available to the <strong>ohai</strong> resource is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">ohai</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
  <span class="nb">name</span>                       <span class="nb">String</span>
  <span class="n">notifies</span>                   <span class="c1"># see description</span>
  <span class="n">plugin</span>                     <span class="nb">String</span>
  <span class="n">provider</span>                   <span class="no">Chef</span><span class="o">::</span><span class="no">Provider</span><span class="o">::</span><span class="no">Ohai</span>
  <span class="n">subscribes</span>                 <span class="c1"># see description</span>
  <span class="n">action</span>                     <span class="no">Symbol</span> <span class="c1"># defaults to :reload if not specified</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">ohai</span></tt> is the resource</li>
<li><tt class="docutils literal"><span class="pre">name</span></tt> is the name of the resource block</li>
<li><tt class="docutils literal"><span class="pre">action</span></tt> identifies the steps the chef-client will take to bring the node into the desired state</li>
<li><tt class="docutils literal"><span class="pre">name</span></tt>, <tt class="docutils literal"><span class="pre">plugin</span></tt>,  and <tt class="docutils literal"><span class="pre">provider</span></tt> are properties of this resource, with the Ruby type shown. See &#8220;Properties&#8221; section below for more information about all of the properties that may be used with this resource.</li>
</ul>
</div>
<div class="section" id="actions">
<h3>Actions<a class="headerlink" href="#actions" title="Permalink to this headline">¶</a></h3>
<p>This resource has the following actions:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:nothing</span></tt></dt>
<dd>Define this resource block to do nothing until notified by another resource to take action. When this resource is notified, this resource block is either run immediately or it is queued up to be run at the end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:reload</span></tt></dt>
<dd>Default. Reload the Ohai configuration on a node.</dd>
</dl>
</div>
<div class="section" id="attributes">
<h3>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline">¶</a></h3>
<p>This resource has the following properties:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">ignore_failure</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Continue running a recipe if a resource fails for any reason. Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">name</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">Always the same value as the <tt class="docutils literal"><span class="pre">name</span></tt> of the resource block. See &#8220;Syntax&#8221; section above for more information.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">notifies</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may notify another resource to take action when its state changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> that resource should take, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action. A resource may notifiy more than one resource; use a <tt class="docutils literal"><span class="pre">notifies</span></tt> statement for each resource to be notified.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">notifies</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">notifies</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">plugin</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">Optional. The name of an Ohai plugin to be reloaded. If this property is not specified, the chef-client will reload all plugins.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">provider</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Chef Class</p>
<p class="last">Optional. Explicitly specifies a provider.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retries</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The number of times to catch exceptions and retry the resource. Default value: <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retry_delay</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The retry delay (in seconds). Default value: <tt class="docutils literal"><span class="pre">2</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">subscribes</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> to be taken, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">subscribes</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">subscribes</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="providers">
<h3>Providers<a class="headerlink" href="#providers" title="Permalink to this headline">¶</a></h3>
<p>This resource has the following providers:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">Chef::Provider::Ohai</span></tt>, <tt class="docutils literal"><span class="pre">ohai</span></tt></dt>
<dd>The default provider for all platforms.</dd>
</dl>
</div>
<div class="section" id="id3">
<h3>Examples<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>The following examples demonstrate various approaches for using resources in recipes. If you want to see examples of how Chef uses resources in recipes, take a closer look at the cookbooks that Chef authors and maintains: <a class="reference external" href="https://github.com/chef-cookbooks">https://github.com/chef-cookbooks</a>.</p>
<p><strong>Reload Ohai</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">ohai</span> <span class="s1">&#39;reload&#39;</span> <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:reload</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Reload Ohai after a new user is created</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">ohai</span> <span class="s1">&#39;reload_passwd&#39;</span> <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:nothing</span>
  <span class="n">plugin</span> <span class="s1">&#39;etc&#39;</span>
<span class="k">end</span>

<span class="n">user</span> <span class="s1">&#39;daemonuser&#39;</span> <span class="k">do</span>
  <span class="n">home</span> <span class="s1">&#39;/dev/null&#39;</span>
  <span class="n">shell</span> <span class="s1">&#39;/sbin/nologin&#39;</span>
  <span class="nb">system</span> <span class="kp">true</span>
  <span class="n">notifies</span> <span class="ss">:reload</span><span class="p">,</span> <span class="s1">&#39;ohai[reload_passwd]&#39;</span><span class="p">,</span> <span class="ss">:immediately</span>
<span class="k">end</span>

<span class="n">ruby_block</span> <span class="s1">&#39;just an example&#39;</span> <span class="k">do</span>
  <span class="n">block</span> <span class="k">do</span>
    <span class="c1"># These variables will now have the new values</span>
    <span class="nb">puts</span> <span class="n">node</span><span class="o">[</span><span class="s1">&#39;etc&#39;</span><span class="o">][</span><span class="s1">&#39;passwd&#39;</span><span class="o">][</span><span class="s1">&#39;daemonuser&#39;</span><span class="o">][</span><span class="s1">&#39;uid&#39;</span><span class="o">]</span>
    <span class="nb">puts</span> <span class="n">node</span><span class="o">[</span><span class="s1">&#39;etc&#39;</span><span class="o">][</span><span class="s1">&#39;passwd&#39;</span><span class="o">][</span><span class="s1">&#39;daemonuser&#39;</span><span class="o">][</span><span class="s1">&#39;gid&#39;</span><span class="o">]</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="ohai-cookbook">
<h2>ohai Cookbook<a class="headerlink" href="#ohai-cookbook" title="Permalink to this headline">¶</a></h2>
<p>To download the <tt class="docutils literal"><span class="pre">ohai</span></tt> cookbook to the chef-repo run the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife cookbook site install ohai
</pre></div>
</div>
<p>knife will return something similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>INFO: Downloading ohai from the cookbooks site at version 0.9.0
INFO: Cookbook saved: /Users/jtimberman/chef-repo/cookbooks/ohai.tar.gz
INFO: Checking out the master branch.
INFO: Checking the status of the vendor branch.
INFO: Creating vendor branch.
INFO: Removing pre-existing version.
INFO: Uncompressing ohai version 0.9.0.
INFO: Adding changes.
INFO: Committing changes.
INFO: Creating tag chef-vendor-ohai-0.9.0.
INFO: Checking out the master branch.
INFO: Merging changes from ohai version 0.9.0.
<span class="o">[</span> ... SNIP ... <span class="o">]</span>
INFO: Cookbook ohai version 0.9.0 successfully vendored!
</pre></div>
</div>
<div class="section" id="default-location">
<h3>Default Location<a class="headerlink" href="#default-location" title="Permalink to this headline">¶</a></h3>
<p>To change the directory in which plugins are located edit the attributes file in the <tt class="docutils literal"><span class="pre">ohai</span></tt> cookbook for the <tt class="docutils literal"><span class="pre">node[:ohai][:plugin_path]</span></tt> attribute. Change the value to the desired directory path. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">default</span><span class="o">[</span><span class="ss">:ohai</span><span class="o">][</span><span class="ss">:plugin_path</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&quot;/etc/chef/ohai_plugins&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="upload-custom-plugins">
<h3>Upload Custom Plugins<a class="headerlink" href="#upload-custom-plugins" title="Permalink to this headline">¶</a></h3>
<p>To upload the <tt class="docutils literal"><span class="pre">ohai</span></tt> cookbook to the Chef server, use knife and run the following:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>knife cookbook upload ohai
</pre></div>
</div>
<p>to return something similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>INFO: Saving ohai
INFO: Validating ruby files
INFO: Validating templates
INFO: Syntax OK
INFO: Generating Metadata
INFO: Uploading files
<span class="o">[</span> ... SNIP ... <span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="add-ohai-to-a-run-list">
<h3>Add Ohai to a Run-list<a class="headerlink" href="#add-ohai-to-a-run-list" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">ohai</span></tt> recipe can be added to a run-list. First, ensure that any custom Ohai plugins are loaded and available to recipes. When the chef-client runs, the plugins will be copied into place and then loaded and merged with the node. This does cause Ohai to be run twice, which can increase the total run time for the chef-client.</p>
</div>
</div>
<div class="section" id="ohai-command-line-tool">
<h2>ohai Command Line Tool<a class="headerlink" href="#ohai-command-line-tool" title="Permalink to this headline">¶</a></h2>
<p>ohai is the command-line interface for Ohai, a tool that is used to detect attributes on a node, and then provide these attributes to the chef-client at the start of every chef-client run.</p>
<div class="section" id="options">
<h3>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h3>
<p>This command has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ ohai OPTION
</pre></div>
</div>
<p>This tool has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">ATTRIBUTE_NAME</span> <span class="pre">ATTRIBUTE</span> <span class="pre">NAME</span> <span class="pre">...</span></tt></dt>
<dd>Use to have Ohai show only output for named attributes.</dd>
<dt><tt class="docutils literal"><span class="pre">-d</span> <span class="pre">PATH</span></tt>, <tt class="docutils literal"><span class="pre">--directory</span> <span class="pre">PATH</span></tt></dt>
<dd>The directory in which Ohai plugins are located. For example: <tt class="docutils literal"><span class="pre">/etc/ohai/plugins</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-h</span></tt>, <tt class="docutils literal"><span class="pre">--help</span></tt></dt>
<dd>Show help for the command.</dd>
<dt><tt class="docutils literal"><span class="pre">-l</span> <span class="pre">LEVEL</span></tt>, <tt class="docutils literal"><span class="pre">--log_level</span> <span class="pre">LEVEL</span></tt></dt>
<dd>The level of logging to be stored in a log file.</dd>
<dt><tt class="docutils literal"><span class="pre">-L</span> <span class="pre">LOGLOCATION</span></tt>, <tt class="docutils literal"><span class="pre">--logfile</span> <span class="pre">c</span></tt></dt>
<dd>The location of the log file.</dd>
<dt><tt class="docutils literal"><span class="pre">-v</span></tt>, <tt class="docutils literal"><span class="pre">--version</span></tt></dt>
<dd>The version of Ohai.</dd>
</dl>
</div>
<div class="section" id="id4">
<h3>Examples<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>None.</p>
</div>
</div>
<div class="section" id="ohai-settings-in-client-rb">
<h2>Ohai Settings in client.rb<a class="headerlink" href="#ohai-settings-in-client-rb" title="Permalink to this headline">¶</a></h2>
<p>Ohai configuration settings can be added to the client.rb file.</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">ohai.directory</span></tt></dt>
<dd>The directory in which Ohai plugins are located.</dd>
<dt><tt class="docutils literal"><span class="pre">ohai.disabled_plugins</span></tt></dt>
<dd><p class="first">An array of Ohai plugins to be disabled on a node. The list of plugins included in Ohai can be found in the <tt class="docutils literal"><span class="pre">ohai/lib/ohai/plugins</span></tt> directory. For example, disabling a single plugin:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span>  <span class="n">ohai</span><span class="o">.</span><span class="n">disabled_plugins</span> <span class="o">=</span> <span class="o">[</span>
    <span class="ss">:MyPlugin</span>
  <span class="o">]</span>

<span class="ow">or</span> <span class="n">disabling</span> <span class="n">multiple</span> <span class="ss">plugins</span><span class="p">:</span>
</pre></div>
</div>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">ohai</span><span class="o">.</span><span class="n">disabled_plugins</span> <span class="o">=</span> <span class="o">[</span>
  <span class="ss">:MyPlugin</span><span class="p">,</span>
  <span class="ss">:MyPlugin</span><span class="p">,</span>
  <span class="ss">:MyPlugin</span>
<span class="o">]</span>
</pre></div>
</div>
<p>and to disable multiple plugins, including Ohai 6 plugins:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">ohai</span><span class="o">.</span><span class="n">disabled_plugins</span> <span class="o">=</span> <span class="o">[</span>
          <span class="ss">:MyPlugin</span><span class="p">,</span>
  <span class="ss">:MyPlugin</span><span class="p">,</span>
  <span class="s1">&#39;my_ohai_6_plugin&#39;</span>
<span class="o">]</span>
</pre></div>
</div>
<p>When a plugin is disabled, the chef-client log file will contain entries similar to:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="o">[</span><span class="mi">2014</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mi">13</span><span class="ss">T23</span><span class="p">:</span><span class="mi">49</span><span class="p">:</span><span class="mi">12</span><span class="o">+</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="o">]</span> <span class="ss">DEBUG</span><span class="p">:</span> <span class="no">Skipping</span> <span class="n">disabled</span> <span class="n">plugin</span> <span class="no">MyPlugin</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">ohai.hints_path</span></tt></dt>
<dd>The path to the file that contains hints for Ohai.</dd>
<dt><tt class="docutils literal"><span class="pre">ohai.log_level</span></tt></dt>
<dd>The level of logging to be stored in a log file.</dd>
<dt><tt class="docutils literal"><span class="pre">ohai.log_location</span></tt></dt>
<dd>The location of the log file.</dd>
<dt><tt class="docutils literal"><span class="pre">ohai.plugin_path</span></tt></dt>
<dd><p class="first">An array of paths at which Ohai plugins are located. Default value: <tt class="docutils literal"><span class="pre">[&lt;CHEF_GEM_PATH&gt;/ohai-9.9.9/lib/ohai/plugins]</span></tt>. When custom Ohai plugins are added, the paths must be added to the array. For example, a single plugin:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">ohai</span><span class="o">.</span><span class="n">plugin_path</span> <span class="o">&lt;&lt;</span> <span class="s1">&#39;/etc/chef/ohai_plugins&#39;</span>
</pre></div>
</div>
<p>and for multiple plugins:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">ohai</span><span class="o">.</span><span class="n">plugin_path</span> <span class="o">+=</span> <span class="o">[</span>
  <span class="s1">&#39;/etc/chef/ohai_plugins&#39;</span><span class="p">,</span>
  <span class="s1">&#39;/path/to/other/plugins&#39;</span>
  <span class="o">]</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">ohai.version</span></tt></dt>
<dd>The version of Ohai.</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The Ohai executable ignores settings in the client.rb file when Ohai is run independently of the chef-client.</p>
</div>
</div>
</div>


          </div>


          <div class="footer" role="contentinfo">
                &copy; Copyright: This work is licensed under a Creative Commons Attribution 3.0 Unported License.
              This page is about: current version of Chef.
            <a href="/feedback.html">Provide feedback on Chef documentation</a>.
            </div>

<!-- Start of Async Google Analytics Code -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-6369228-7', 'auto', {'legacyCookieDomain': '.chef.io', 'allowLinker': true});
  ga('send', 'pageview');

  var trackOutboundLink = function(url) {
    if (ga.q) {
     document.location = url;
    } else {
      ga('send', 'event', 'outbound', 'click', url, {'hitCallback':
        function () {
          document.location = url;
        }
      });
    }
  };
</script>
<!-- End of Async Google Analytics Code -->

<!-- Start of Marketo Analytics Code -->
<script type="text/javascript">
(function() {
  var didInit = false;
  function initMunchkin() {
    if(didInit === false) {
      didInit = true;
      Munchkin.init('255-VFB-268');
    }
  }
  var s = document.createElement('script');
  s.type = 'text/javascript';
  s.async = true;
  s.src = document.location.protocol + '//munchkin.marketo.net/munchkin.js';
  s.onreadystatechange = function() {
    if (this.readyState == 'complete' || this.readyState == 'loaded') {
      initMunchkin();
    }
  };
  s.onload = initMunchkin;
  document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>
<!-- End of Marketo Analytics Code -->

<!-- Start of DemandBase Analytics Code -->
<script type="text/javascript">
	(function(d,b,a,s,e){ var t = b.createElement(a),
		fs = b.getElementsByTagName(a)[0]; t.async=1; t.id=e;
		t.src=('https:'==document.location.protocol ? 'https://' : 'http://') + s;
		fs.parentNode.insertBefore(t, fs); })
	(window,document,'script','scripts.demandbase.com/zH7sZrWR.min.js','demandbase_js_lib');
</script>
<!-- End of DemandBase Analytics Code -->

<!-- Start of Segment Analytics Code -->
<script type="text/javascript">
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="4.0.0";
  analytics.load("RtyoRfLf1ZETiJcIfkKND3Wq1K1LhYHx");
  analytics.page();
  }}();
</script>
<!-- End of Segment Analytics Code -->


        </div>
      </div>

      <div class="clearer"></div>
    </div>

  </div>
  </body>
</html>