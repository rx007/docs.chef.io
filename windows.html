<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    
    <title>Chef for Microsoft Windows &mdash; Chef Docs</title>
    <link rel="stylesheet" href="_static/chefv2.css" type="text/css" />
<link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
    URL_ROOT:    './',
    VERSION:     '',
    COLLAPSE_INDEX: false,
    FILE_SUFFIX: '.html',
    HAS_SOURCE:  true
  };
</script>
<script type="text/javascript" src="_static/jquery.js"></script>
<script type="text/javascript" src="_static/underscore.js"></script>
<script type="text/javascript" src="_static/doctools.js"></script>
<script type="text/javascript" src="_static/script.js"></script>

    <link rel="top" title="Chef Docs" href="index.html" />
    <link rel="next" title="An Overview of Workflow in Chef Automate" href="workflow.html" />
    <link rel="prev" title="An Overview of Visibility in Chef Automate" href="visibility.html" /> 
  </head>
  <body role="document">
    <div class="body-wrap">

  <nav class="nav-main" role="navigation" data-topbar>
    <div class="nav-inner">
      <div class="left">
        <h1>
          <a href="https://learn.chef.io">
            <span>Learn Chef</span>
          </a>
        </h1>
      </div>

      <i id="nav-icon" class="fa fa-bars"></i>
      <a href="https://www.chef.io/">
        <img id="logo" src="_static/chef_logo_v2.svg" onerror="_static/chef_logo_v2.png"/>
      </a>

      <ul class="nav-links links-main">
        <li class="nav-link">
          <a href="https://learn.chef.io/tutorials">Tutorials</a>
        </li>
        <li class="nav-link">
          <a href="https://learn.chef.io/skills/">Skills Library</a>
        </li>
        <li class="nav-link is-active">
          <a href="https://docs.chef.io/">Docs</a>
        </li>
        <li class="nav-link">
          <a href="https://www.chef.io/training/">Training</a>
        </li>
      </ul>
    </div>
  </nav>





    <div class="document chef-docs">
    <nav class="nav-docs">
  <ul class="nav-docs-items" id="nav-docs-list">
    <li class="main-item dark-item docs-search">
      <form action="/search.html" method="get">
        <input type="text" placeholder="Search" id="docs-search" name="q">
        <input type="submit" class="submit-button" value="">
        <i class="fa fa-search icon-search"></i>
      </form>
   

    </li>
    
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Overview"> <!-- else item does not have custom image and should use FontAwesome icon -->

        <i class="fa fa-home icon-left"></i> Overview <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items"> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/platform_overview.html" title="Platform Overview">
            Platform Overview
          </a>
        </li>

         <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Community">
            Community
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/community.html" title="About the Community">
                About the Community
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/community_contributions.html" title="Contributing">
                Contributing
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/community_guidelines.html" title="Guidelines">
                Guidelines
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/style_guide.html" title="Docs Style Guide">
                Docs Style Guide
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Packages &amp; Platforms">
            Packages &amp; Platforms
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/packages.html" title="Packages">
                Packages
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/platforms.html" title="Platforms">
                Platforms
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_omnitruck.html" title="Omnitruck API">
                Omnitruck API
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_license.html" title="Licensing">
                Licensing
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Chef"> <!-- else item does not have custom image and should use FontAwesome icon -->

        <i class="fa fa-tasks icon-left"></i> Chef <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items">

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Getting Started">
            Getting Started
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_overview.html" title="Chef Overview">
                Chef Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/quick_start.html" title="Quick Start">
                Quick Start
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_system_requirements.html" title="System Requirements">
                System Requirements
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Release Notes">
                Release Notes
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/release_notes.html" title="Chef Client">
                    Chef Client
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/release_notes_chefdk.html" title="Chef Development Kit">
                    Chef Development Kit
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/release_notes_server.html" title="Chef Server">
                    Chef Server
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/release_notes_push_jobs.html" title="Chef Push Jobs">
                    Chef Push Jobs
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/release_notes_ohai.html" title="Ohai">
                    Ohai
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_deprecations_client.html" title="Deprecations">
                Deprecations
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Tutorials">
            Tutorials
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/learn-the-basics/" title="Learn the Basics">
                Learn the Basics
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/manage-a-node/" title="Manage a Node">
                Manage a Node
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/local-development/" title="Get started with Test Kitchen">
                Get started with Test Kitchen
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/manage-a-web-app/" title="Develop a web app cookbook">
                Develop a web app cookbook
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/inspec/" title="Verify with InSpec">
                Verify with InSpec
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/chefspec/" title="Unit test with ChefSpec">
                Unit test with ChefSpec
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/verify-style/" title="Verify code style">
                Verify code style
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/refactor-web-app-cookbook/" title="Refactor the web app cookbook">
                Refactor the web app cookbook
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Concepts">
            Concepts
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/workstation.html" title="Workstation">
                Workstation
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_repo.html" title="chef-repo">
                chef-repo
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/nodes.html" title="Nodes">
                Nodes
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_client.html" title="chef-client">
                chef-client
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_components.html" title="Server">
                Server
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_search.html" title="Search">
                Search
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/cookbooks.html" title="Cookbooks">
                Cookbooks
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/handlers.html" title="Handlers">
                Handlers
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/manage.html" title="Management Console">
                Management Console
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Policy">
                Policy
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/policy.html" title="About Policy">
                    About Policy
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/data_bags.html" title="Data Bags">
                    Data Bags
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/environments.html" title="Environments">
                    Environments
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/roles.html" title="Roles">
                    Roles
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/push_jobs.html" title="Push Jobs">
                Push Jobs
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/run_lists.html" title="Run-lists">
                Run-lists
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Security">
                Security
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/auth.html#authentication" title="Authentication">
                    Authentication
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/auth.html#authorization" title="Authorization">
                    Authorization
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/chef_private_keys.html" title="Private Keys">
                    Private Keys
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef_client.html#run-in-fips-mode" title="FIPS-mode">
                    FIPS-mode
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Supermarket">
                Supermarket
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/supermarket.html#public-supermarket" title="Public Supermarket">
                    Public Supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/supermarket.html#private-supermarket" title="Private Supermarket">
                    Private Supermarket
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/windows.html" title="Microsoft Windows">
                Microsoft Windows
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Appendix">
                Appendix
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/environment_variables.html" title="Env Variables">
                    Env Variables
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/errors.html" title="Troubleshooting">
                    Troubleshooting
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/glossary.html" title="Glossary">
                    Glossary
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Setup">
            Setup
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/proxies.html" title="Proxies">
                Proxies
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_dk.html" title="Workstation">
                Workstation
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Nodes">
                Nodes
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/install_bootstrap.html" title="Install via Bootstrap">
                    Install via Bootstrap
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_omnibus.html" title="Install via URL">
                    Install via URL
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_windows.html" title="Install on Windows">
                    Install on Windows
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/junos.html" title="Install on Junos OS">
                    Install on Junos OS
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef_client.html" title="chef-client (executable)">
                    chef-client (executable)
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_client.html" title="client.rb">
                    client.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/upgrade_client.html" title="Upgrades">
                    Upgrades
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/chef_client_security.html" title="Security">
                    Security
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Server">
                Server
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="https://manage.chef.io/signup" title="Hosted Chef Server">
                    Hosted Chef Server
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_server.html#standalone" title="Install Standalone">
                    Install Standalone
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_server_ha.html" title="Install High Availability">
                    Install High Availability
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/aws_marketplace.html" title="AWS Marketplace">
                    AWS Marketplace
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/azure_portal.html" title="Microsoft Azure">
                    Microsoft Azure
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/openstack.html" title="Openstack">
                    Openstack
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Supermarket">
                Supermarket
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="https://supermarket.chef.io" title="Public Supermarket">
                    Public Supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_supermarket.html" title="Install Private Supermarket">
                    Install Private Supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_supermarket.html#customize-supermarket" title="Customize Supermarket">
                    Customize Supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_supermarket.html#run-supermarket-in-kitchen" title="Run in Test Kitchen">
                    Run in Test Kitchen
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_server.html#install" title="Management Console">
                Management Console
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_push_jobs.html" title="Push Jobs">
                Push Jobs
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Integrations">
                Integrations
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/integrate_compliance_chef_server.html" title="w/Chef Compliance">
                    w/Chef Compliance
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/uninstall.html" title="Uninstall">
                Uninstall
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Cookbook Reference">
            Cookbook Reference
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/cookbooks.html" title="About Cookbooks">
                About Cookbooks
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/attributes.html" title="Attributes">
                Attributes
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/definitions.html" title="Definitions">
                Definitions
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/files.html" title="Files">
                Files
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/libraries.html" title="Libraries">
                Libraries
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Recipes">
                Recipes
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/recipes.html" title="About Recipes">
                    About Recipes
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/debug.html" title="Debug Recipes, Client Runs">
                    Debug Recipes, Client Runs
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Recipe DSL">
                Recipe DSL
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#attribute" title="attribute?">
                    attribute?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#control" title="control">
                    control
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#control-group" title="control_group">
                    control_group
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#cookbook-name" title="cookbook_name">
                    cookbook_name
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#data-bag" title="data_bag">
                    data_bag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#data-bag-item" title="data_bag_item">
                    data_bag_item
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#platform" title="platform?">
                    platform?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#platform-family" title="platform_family?">
                    platform_family?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#reboot-pending" title="reboot_pending?">
                    reboot_pending?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#recipe-name" title="recipe_name">
                    recipe_name
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-data-exists" title="registry_data_exists?">
                    registry_data_exists?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-get-subkeys" title="registry_get_subkeys">
                    registry_get_subkeys
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-get-values" title="registry_get_values">
                    registry_get_values
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-has-subkeys" title="registry_has_subkeys?">
                    registry_has_subkeys?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-key-exists" title="registry_key_exists?">
                    registry_key_exists?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-value-exists" title="registry_value_exists?">
                    registry_value_exists?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#resources" title="resources">
                    resources
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#search" title="search">
                    search
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#shell-out" title="shell_out">
                    shell_out
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#shell-out-bang" title="shell_out!">
                    shell_out!
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#shell-out-with-systems-locale" title="shell_out_with_systems_locale">
                    shell_out_with_systems_locale
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#tag-tagged-untag" title="tag">
                    tag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#tag-tagged-untag" title="tagged?">
                    tagged?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#tag-tagged-untag" title="untag">
                    untag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#value-for-platform" title="value_for_platform">
                    value_for_platform
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#value-for-platform-family" title="value_for_platform_family">
                    value_for_platform_family
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#helpers" title="Windows Platform Helpers">
                    Windows Platform Helpers
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Resources">
                Resources
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/resource.html" title="About Resources">
                    About Resources
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_common.html" title="Common Functionality">
                    Common Functionality
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/custom_resources.html" title="Custom Resources">
                    Custom Resources
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resources.html" title="All Resources (Single Page)">
                    All Resources (Single Page)
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_apt_package.html" title="apt_package">
                    apt_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_apt_repository.html" title="apt_repository">
                    apt_repository
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_apt_update.html" title="apt_update">
                    apt_update
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_bash.html" title="bash">
                    bash
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_batch.html" title="batch">
                    batch
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_bff_package.html" title="bff_package">
                    bff_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_breakpoint.html" title="breakpoint">
                    breakpoint
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_cab_package.html" title="cab_package">
                    cab_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_gem.html" title="chef_gem">
                    chef_gem
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_acl.html" title="chef_acl">
                    chef_acl
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_client.html" title="chef_client">
                    chef_client
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_container.html" title="chef_container">
                    chef_container
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_data_bag_item.html" title="chef_data_bag_item">
                    chef_data_bag_item
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_data_bag.html" title="chef_data_bag">
                    chef_data_bag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_environment.html" title="chef_environment">
                    chef_environment
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_group.html" title="chef_group">
                    chef_group
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_handler.html" title="chef_handler">
                    chef_handler
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_mirror.html" title="chef_mirror">
                    chef_mirror
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_node.html" title="chef_node">
                    chef_node
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_organization.html" title="chef_organization">
                    chef_organization
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_role.html" title="chef_role">
                    chef_role
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_user.html" title="chef_user">
                    chef_user
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chocolatey_package.html" title="chocolatey_package">
                    chocolatey_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_cookbook_file.html" title="cookbook_file">
                    cookbook_file
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_cron.html" title="cron">
                    cron
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_csh.html" title="csh">
                    csh
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_deploy.html" title="deploy">
                    deploy
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_directory.html" title="directory">
                    directory
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_dpkg_package.html" title="dpkg_package">
                    dpkg_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_dsc_resource.html" title="dsc_resource">
                    dsc_resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_dsc_script.html" title="dsc_script">
                    dsc_script
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_easy_install_package.html" title="easy_install_package">
                    easy_install_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_env.html" title="env">
                    env
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_erlang_call.html" title="erl_call">
                    erl_call
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_execute.html" title="execute">
                    execute
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_file.html" title="file">
                    file
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_freebsd_package.html" title="freebsd_package">
                    freebsd_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_gem_package.html" title="gem_package">
                    gem_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_git.html" title="git">
                    git
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_group.html" title="group">
                    group
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_homebrew_package.html" title="homebrew_package">
                    homebrew_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_http_request.html" title="http_request">
                    http_request
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ifconfig.html" title="ifconfig">
                    ifconfig
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ips_package.html" title="ips_package">
                    ips_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ksh.html" title="ksh">
                    ksh
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_launchd.html" title="launchd">
                    launchd
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_link.html" title="link">
                    link
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_log.html" title="log">
                    log
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_macports_package.html" title="macports_package">
                    macports_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_mdadm.html" title="mdadm">
                    mdadm
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_mount.html" title="mount">
                    mount
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_msu_package.html" title="msu_package">
                    msu_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ohai.html" title="ohai">
                    ohai
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_openbsd_package.html" title="openbsd_package">
                    openbsd_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_osx_profile.html" title="osx_profile">
                    osx_profile
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_package.html" title="package">
                    package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_pacman_package.html" title="pacman_package">
                    pacman_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_paludis_package.html" title="paludis_package">
                    paludis_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_perl.html" title="perl">
                    perl
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_portage_package.html" title="portage_package">
                    portage_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_powershell_script.html" title="powershell_script">
                    powershell_script
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_private_key.html" title="private_key">
                    private_key
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_public_key.html" title="public_key">
                    public_key
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_python.html" title="python">
                    python
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_reboot.html" title="reboot">
                    reboot
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_registry_key.html" title="registry_key">
                    registry_key
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_remote_directory.html" title="remote_directory">
                    remote_directory
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_remote_file.html" title="remote_file">
                    remote_file
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_route.html" title="route">
                    route
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_rpm_package.html" title="rpm_package">
                    rpm_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ruby.html" title="ruby">
                    ruby
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ruby_block.html" title="ruby_block">
                    ruby_block
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_script.html" title="script">
                    script
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_service.html" title="service">
                    service
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_smartos_package.html" title="smartos_package">
                    smartos_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_solaris_package.html" title="solaris_package">
                    solaris_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_subversion.html" title="subversion">
                    subversion
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_systemd_unit.html" title="systemd_unit">
                    systemd_unit
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_template.html" title="template">
                    template
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_user.html" title="user">
                    user
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_windows_package.html" title="windows_package">
                    windows_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_windows_service.html" title="windows_service">
                    windows_service
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_yum.html" title="yum_package">
                    yum_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_yum_repository.html" title="yum_repository">
                    yum_repository
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_examples.html" title="Examples (by Resource)">
                    Examples (by Resource)
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/templates.html" title="Templates">
                Templates
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/cookbook_repo.html" title="Cookbook Repo">
                Cookbook Repo
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_metadata.html" title="metadata.rb">
                metadata.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/cookbook_versions.html" title="Cookbook Versions">
                Cookbook Versions
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ruby.html" title="Ruby">
                Ruby
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Chef DK">
            Chef DK
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/about_chefdk.html" title="About the ChefDK">
                About the ChefDK
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/berkshelf.html" title="Berkshelf">
                Berkshelf
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_apply.html" title="chef-apply (executable)">
                chef-apply (executable)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_shell.html" title="chef-shell (executable)">
                chef-shell (executable)
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="chef (executable)">
                chef (executable)
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-env" title="chef env">
                    chef env
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-exec" title="chef exec">
                    chef exec
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-gem" title="chef gem">
                    chef gem
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-app" title="chef generate app">
                    chef generate app
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-attribute" title="chef generate attribute">
                    chef generate attribute
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-cookbook" title="chef generate cookbook">
                    chef generate cookbook
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-file" title="chef generate file">
                    chef generate file
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-lwrp" title="chef generate lwrp">
                    chef generate lwrp
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-recipe" title="chef generate recipe">
                    chef generate recipe
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-repo" title="chef generate repo">
                    chef generate repo
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-template" title="chef generate template">
                    chef generate template
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-provision" title="chef provision">
                    chef provision
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-shell-init" title="chef shell-init">
                    chef shell-init
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-verify" title="chef verify">
                    chef verify
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Chef Solo">
                Chef Solo
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/chef_solo.html" title="About Chef Solo">
                    About Chef Solo
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef_solo.html" title="chef-solo (executable)">
                    chef-solo (executable)
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_solo.html" title="solo.rb">
                    solo.rb
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_shell.html" title="chef-shell (executable)">
                chef-shell (executable)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_client.html#run-in-local-mode" title="chef-zero (local mode)">
                chef-zero (local mode)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_vault.html" title="chef-vault">
                chef-vault
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chefspec.html" title="ChefSpec">
                ChefSpec
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Configuration">
                Configuration
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/config_rb.html" title="config.rb">
                    config.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_client.html#d-directories" title="Multiple Config Files">
                    Multiple Config Files
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/cookstyle.html" title="cookstyle">
                cookstyle
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_delivery.html" title="Delivery CLI">
                Delivery CLI
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/foodcritic.html" title="Foodcritic">
                Foodcritic
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Test Kitchen">
                Test Kitchen
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/kitchen.html" title="About Test Kitchen">
                    About Test Kitchen
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_kitchen.html" title="kitchen (executable)">
                    kitchen (executable)
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_yml_kitchen.html" title=".kitchen.yml">
                    .kitchen.yml
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_kitchen_vagrant.html" title="kitchen-vagrant">
                    kitchen-vagrant
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Knife">
                Knife
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/knife.html" title="About Knife">
                    About Knife
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_common_options.html" title="Common Options">
                    Common Options
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_using.html" title="Using Knife">
                    Using Knife
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_knife.html" title="knife.rb">
                    knife.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_bootstrap.html" title="knife bootstrap">
                    knife bootstrap
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_client.html" title="knife client">
                    knife client
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_configure.html" title="knife configure">
                    knife configure
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_cookbook.html" title="knife cookbook">
                    knife cookbook
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_cookbook_site.html" title="knife cookbook site">
                    knife cookbook site
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_data_bag.html" title="knife data bag">
                    knife data bag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_delete.html" title="knife delete">
                    knife delete
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_deps.html" title="knife deps">
                    knife deps
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_diff.html" title="knife diff">
                    knife diff
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_download.html" title="knife download">
                    knife download
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_edit.html" title="knife edit">
                    knife edit
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_environment.html" title="knife environment">
                    knife environment
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_exec.html" title="knife exec">
                    knife exec
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_list.html" title="knife list">
                    knife list
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_node.html" title="knife node">
                    knife node
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_raw.html" title="knife raw">
                    knife raw
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_recipe_list.html" title="knife recipe list">
                    knife recipe list
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_role.html" title="knife role">
                    knife role
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_search.html" title="knife search">
                    knife search
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_serve.html" title="knife serve">
                    knife serve
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_show.html" title="knife show">
                    knife show
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_ssh.html" title="knife ssh">
                    knife ssh
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_ssl_check.html" title="knife ssl_check">
                    knife ssl_check
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_ssl_fetch.html" title="knife ssl_fetch">
                    knife ssl_fetch
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_status.html" title="knife status">
                    knife status
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_tag.html" title="knife tag">
                    knife tag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_upload.html" title="knife upload">
                    knife upload
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_user.html" title="knife user">
                    knife user
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_xargs.html" title="knife xargs">
                    knife xargs
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="knife opc">
                knife opc
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html" title="About knife opc">
                    About knife opc
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#knife-rb-configuration" title="knife.rb Configuration">
                    knife.rb Configuration
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-list" title="opc user list">
                    opc user list
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-show" title="opc user show">
                    opc user show
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-create" title="opc user create">
                    opc user create
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-delete" title="opc user delete">
                    opc user delete
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-edit" title="opc user edit">
                    opc user edit
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-password" title="opc user password">
                    opc user password
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-list" title="opc org list">
                    opc org list
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-show" title="opc org show">
                    opc org show
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-create" title="opc org create">
                    opc org create
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-delete" title="opc org delete">
                    opc org delete
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-user-add" title="opc org user add">
                    opc org user add
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-user-remove" title="opc org user remove">
                    opc org user remove
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_knife_spork.html" title="knife spork">
                knife spork
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="knife supermarket">
                knife supermarket
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html" title="About knife supermarket">
                    About knife supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#download" title="supermarket download">
                    supermarket download
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#install" title="supermarket install">
                    supermarket install
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#list" title="supermarket list">
                    supermarket list
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#search" title="supermarket search">
                    supermarket search
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#share" title="supermarket share">
                    supermarket share
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#show" title="supermarket show">
                    supermarket show
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#unshare" title="supermarket unshare">
                    supermarket unshare
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Ohai">
                Ohai
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/ohai.html" title="About Ohai">
                    About Ohai
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_ohai.html" title="ohai (executable)">
                    ohai (executable)
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Policyfile">
                Policyfile
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/policyfile.html" title="About Policyfile">
                    About Policyfile
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_policyfile.html" title="Policyfile.rb">
                    Policyfile.rb
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Provisioning">
                Provisioning
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/provisioning.html" title="About Provisioning">
                    About Provisioning
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_load_balancer.html" title="load_balancer resource">
                    load_balancer resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_machine.html" title="machine resource">
                    machine resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_machine_batch.html" title="machine_batch resource">
                    machine_batch resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_machine_execute.html" title="machine_execute resource">
                    machine_execute resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_machine_file.html" title="machine_file resource">
                    machine_file resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_machine_image.html" title="machine_image resource">
                    machine_image resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/provisioning_aws.html" title="AWS Driver Resources">
                    AWS Driver Resources
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/provisioning_fog.html" title="Fog Driver Resources">
                    Fog Driver Resources
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/provisioning_vagrant.html" title="Vagrant Driver Resources">
                    Vagrant Driver Resources
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_push_jobs_client.html" title="push-jobs-client (executable)">
                push-jobs-client (executable)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/rubocop.html" title="Rubocop">
                Rubocop
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Managing the Server">
            Managing the Server
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/runbook.html" title="Runbook (Single Page)">
                Runbook (Single Page)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_backup_restore.html" title="Backup &amp; Restore">
                Backup &amp; Restore
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_data.html" title="Data Storage">
                Data Storage
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_firewalls_and_ports.html" title="Firewalls &amp; Ports">
                Firewalls &amp; Ports
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_ldap.html" title="Active Directory &amp; LDAP">
                Active Directory &amp; LDAP
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_logs.html" title="Log Files">
                Log Files
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_monitor.html" title="Monitor">
                Monitor
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_orgs.html" title="Organizations &amp; Groups">
                Organizations &amp; Groups
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/secrets.html" title="Secrets">
                Secrets
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_security.html" title="Security">
                Security
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_services.html" title="Services">
                Services
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_tuning.html" title="Tuning">
                Tuning
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/upgrade_server.html" title="Upgrades">
                Upgrades
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/upgrade_server_ha_v2.html" title="Upgrade HA Cluster">
                Upgrade HA Cluster
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_users.html" title="Users">
                Users
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_server.html" title="chef-server-ctl">
                chef-server-ctl
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_backend.html" title="chef-backend-ctl">
                chef-backend-ctl
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_server.html" title="chef-server.rb">
                chef-server.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_opscode_expander.html" title="opscode-expander-ctl">
                opscode-expander-ctl
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_chef_server.html" title="Chef Server API">
                Chef Server API
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Push Jobs">
                Push Jobs
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_push_jobs.html" title="knife push jobs">
                    knife push jobs
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_push_jobs_client.html" title="push-jobs-client">
                    push-jobs-client
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_push_jobs_client.html" title="push-jobs-client.rb">
                    push-jobs-client.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_push_jobs_server.html" title="push-jobs-server.rb">
                    push-jobs-server.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/api_push_jobs.html" title="Push Jobs API">
                    Push Jobs API
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_sent_events.html" title="Server Sent Events">
                    Server Sent Events
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Supermarket">
                Supermarket
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/supermarket_logs.html" title="Log Files">
                    Log Files
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/supermarket_monitor.html" title="Monitoring">
                    Monitoring
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_supermarket.html" title="supermarket.rb">
                    supermarket.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html" title="knife supermarket">
                    knife supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_supermarket.html" title="supermarket-ctl">
                    supermarket-ctl
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/supermarket_api.html" title="Supermarket API">
                    Supermarket API
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Management Console">
                Management Console
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/server_configure_saml.html" title="Configure SAML">
                    Configure SAML
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_clients.html" title="Clients">
                    Clients
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_cookbooks.html" title="Cookbooks">
                    Cookbooks
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_data_bags.html" title="Data Bags">
                    Data Bags
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_environments.html" title="Environments">
                    Environments
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_nodes.html" title="Nodes">
                    Nodes
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_roles.html" title="Roles">
                    Roles
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_users.html#chef-manage" title="Users">
                    Users
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_manage.html" title="manage.rb">
                    manage.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_manage.html" title="chef-manage-ctl">
                    chef-manage-ctl
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Habitat"> <!-- if item has custom image -->

        <img class="icon-left" src="./_static/habitat-mark.png"></img> Habitat <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items"> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/habitat.html" title="Habitat Overview">
            Habitat Overview
          </a>
        </li>

         <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Tutorials">
            Tutorials
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://www.habitat.sh/tutorials/getting-started-overview" title="Getting started">
                Getting started
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="InSpec"> <!-- if item has custom image -->

        <img class="icon-left" src="./_static/inspec_logo.png"></img> InSpec <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items"> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/inspec.html" title="InSpec Overview">
            InSpec Overview
          </a>
        </li>

         <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Chef Automate"> <!-- else item does not have custom image and should use FontAwesome icon -->

        <i class="fa fa-cogs icon-left"></i> Chef Automate <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items">

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Getting Started">
            Getting Started
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_automate.html" title="Chef Automate Overview">
                Chef Automate Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_chef_automate.html" title="Installation Guide">
                Installation Guide
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Tutorials">
            Tutorials
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/automate/install" title="Get Started">
                Get Started
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/automate/visibility" title="Visibility into Infrastructure">
                Visibility into Infrastructure
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/automate/deploy-cookbook/" title="Deploy with Chef Automate">
                Deploy with Chef Automate
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/compliance-assess" title="Assess for Compliance">
                Assess for Compliance
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/compliance-remediate" title="Remediate Compliance Failures">
                Remediate Compliance Failures
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Setup">
            Setup
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_pipeline.html" title="Configure a Pipeline">
                Configure a Pipeline
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_json_delivery.html" title="Configure a Project">
                Configure a Project
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/setup_visibility_chef_automate.html" title="Configure Data Collection">
                Configure Data Collection
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Concepts">
            Concepts
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2">

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Workflow">
                Workflow
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/workflow.html" title="Workflow Overview">
                    Workflow Overview
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/delivery_manage_dependencies.html" title="Manage Dependencies">
                    Manage Dependencies
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/visibility.html" title="Visibility Overview">
                Visibility Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/compliance.html" title="Compliance Overview">
                Compliance Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/ctl_delivery.html" title="Delivery CLI">
            Delivery CLI
          </a>
        </li>

         <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Integrations">
            Integrations
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_delivery_bitbucket.html" title="w/Bitbucket">
                w/Bitbucket
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_delivery_smtp.html" title="w/Email (SMTP)">
                w/Email (SMTP)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_delivery_github.html" title="w/GitHub">
                w/GitHub
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_delivery_ldap.html" title="w/LDAP">
                w/LDAP
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_chef_automate_saml.html" title="w/SAML">
                w/SAML
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_delivery_slack.html" title="w/Slack">
                w/Slack
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Cookbooks">
            Cookbooks
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_build_cookbook.html" title="build-cookbook (cookbook)">
                build-cookbook (cookbook)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_truck.html" title="delivery-truck (cookbook)">
                delivery-truck (cookbook)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/publish_cookbooks_multiple_servers.html" title="Publish to Multiple Chef Servers">
                Publish to Multiple Chef Servers
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/dsl_delivery.html" title="Workflow DSL">
            Workflow DSL
          </a>
        </li>

         <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/job_dispatch.html" title="Job Dispatch">
            Job Dispatch
          </a>
        </li>

         <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Managing the Server">
            Managing the Server
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2">

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Backups">
                Backups
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/delivery_server_backup.html#configuration" title="Configuration">
                    Configuration
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/delivery_server_backup.html#create-backups" title="Create Backups">
                    Create Backups
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/delivery_server_backup.html#list-backups" title="List Backups">
                    List Backups
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/delivery_server_backup.html#delete-backups" title="Delete Backups">
                    Delete Backups
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/delivery_server_backup.html#restore-backups" title="Restore Backups">
                    Restore Backups
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/scaling_capacity_planning_chef_automate.html" title="Capacity Planning">
                Capacity Planning
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_delivery.html" title="Chef Automate API">
                Chef Automate API
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="automate-ctl">
                automate-ctl
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#cleanse" title="cleanse">
                    cleanse
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#create-enterprise" title="create-enterprise">
                    create-enterprise
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#create-user" title="create-user">
                    create-user
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-application" title="delete-application">
                    delete-application
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-enterprise" title="delete-enterprise">
                    delete-enterprise
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-project" title="delete-project">
                    delete-project
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-user" title="delete-user">
                    delete-user
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-visibility-node" title="delete-visibility-node">
                    delete-visibility-node
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-visibility-node-by-id" title="delete-visibility-node-by-id">
                    delete-visibility-node-by-id
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#gather-logs" title="gather-logs">
                    gather-logs
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#help" title="help">
                    help
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#install-runner" title="install-runner">
                    install-runner
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#list-applications" title="list-applications">
                    list-applications
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#list-enterprises" title="list-enterprises">
                    list-enterprises
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#list-users" title="list-users">
                    list-users
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#migrate-change-description" title="migrate-change-description">
                    migrate-change-description
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#migrate-patchset-diffs" title="migrate-patchset-diffs">
                    migrate-patchset-diffs
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#preflight-check" title="preflight-check">
                    preflight-check
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#reconfigure" title="reconfigure">
                    reconfigure
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#rename-enterprise" title="rename-enterprise">
                    rename-enterprise
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#reset-password" title="reset-password">
                    reset-password
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#restore-backup" title="restore-backup">
                    restore-backup
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#revoke-token" title="revoke-token">
                    revoke-token
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#show-config" title="show-config">
                    show-config
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#uninstall" title="uninstall">
                    uninstall
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#update-project-hooks" title="update-project-hooks">
                    update-project-hooks
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_delivery.html" title="delivery.rb">
                delivery.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_server_disaster_recovery.html" title="Disaster Recovery">
                Disaster Recovery
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/elasticsearch_and_kibana_auth.html" title="Elasticsearch &amp; Kibana Auth">
                Elasticsearch &amp; Kibana Auth
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/manage_indices_chef_automate.html" title="Manage Elasticsearch Indices">
                Manage Elasticsearch Indices
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/search_query_chef_automate.html" title="Node Search Reference">
                Node Search Reference
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_manage_secrets.html" title="Secrets">
                Secrets
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/stream_data_chef_automate.html" title="Stream Data">
                Stream Data
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_server_tuning.html" title="Tuning">
                Tuning
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/upgrade_chef_automate.html" title="Upgrades">
                Upgrades
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_users_and_roles.html" title="Users &amp; Roles">
                Users &amp; Roles
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Compliance scanner">
            Compliance scanner
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/compliance.html" title="Overview">
                Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/release_notes_compliance.html" title="Release Notes">
                Release Notes
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_compliance.html" title="Installation Guide">
                Installation Guide
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_compliance_chef_server.html" title="Integrate w/Chef Server">
                Integrate w/Chef Server
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_compliance_chef_automate.html" title="Integrate w/Chef Automate">
                Integrate w/Chef Automate
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/upgrade_compliance.html" title="Upgrade Compliance">
                Upgrade Compliance
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_compliance.html" title="chef-compliance.rb">
                chef-compliance.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_compliance.html" title="Chef Compliance API">
                Chef Compliance API
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/aws_opsworks_chef_automate.html" title="AWS OpsWorks for Chef Automate">
            AWS OpsWorks for Chef Automate
          </a>
        </li>

         <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/troubleshooting_chef_automate.html" title="Troubleshooting">
            Troubleshooting
          </a>
        </li>

         <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Legacy"> <!-- else item does not have custom image and should use FontAwesome icon -->

        <i class="fa fa-hdd-o icon-left"></i> Legacy <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items">

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Analytics">
            Analytics
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics.html" title="Overview">
                Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/release_notes_analytics.html" title="Release Notes">
                Release Notes
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_analytics.html" title="Install Standalone">
                Install Standalone
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/actions.html" title="Web UI">
                Web UI
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics_webui_tasks.html" title="Management Console">
                Management Console
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics_nodes_view.html" title="Nodes View">
                Nodes View
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics.html#integrations" title="Integrations">
                Integrations
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics_splunk.html" title="Splunk">
                Splunk
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics_rules.html" title="Rules">
                Rules
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics_monitor.html" title="Monitor">
                Monitor
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/upgrade_analytics.html" title="Upgrades">
                Upgrades
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_client_analytics.html" title="Chef Client for Analytics">
                Chef Client for Analytics
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_analytics.html" title="opscode-analytics-ctl">
                opscode-analytics-ctl
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_analytics.html" title="opscode-analytics.rb">
                opscode-analytics.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_knife_analytics.html" title="knife-analytics">
                knife-analytics
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_analytics.html" title="Analytics API">
                Analytics API
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/dsl_recipe_analytics.html" title="Recipe DSL for Analytics">
                Recipe DSL for Analytics
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Reporting">
            Reporting
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/reporting.html" title="Overview">
                Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_reporting.html" title="Install Reporting">
                Install Reporting
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_manage_reports.html" title="View Reports">
                View Reports
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_knife_reporting.html" title="knife reporting">
                knife reporting
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_reporting.html" title="opscode-reporting-ctl">
                opscode-reporting-ctl
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_reporting.html" title="opscode-reporting.rb">
                opscode-reporting.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_reporting.html" title="Reporting API">
                Reporting API
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Extension APIs"> <!-- else item does not have custom image and should use FontAwesome icon -->

        <i class="fa fa-clone icon-left"></i> Extension APIs <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items"> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/dsl_compliance.html" title="Compliance DSL">
            Compliance DSL
          </a>
        </li>

         <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Handlers">
            Handlers
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/handlers.html#custom-handlers" title="Custom Handlers">
                Custom Handlers
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/dsl_handler.html" title="Handler DSL">
                Handler DSL
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_community.html#handlers" title="Community Handlers">
                Community Handlers
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Knife Plugins">
            Knife Plugins
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_knife.html" title="About Cloud Plugins">
                About Cloud Plugins
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_knife_custom.html" title="Custom Plugins">
                Custom Plugins
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_community.html#knife" title="Community Plugins">
                Community Plugins
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Ohai Plugins">
            Ohai Plugins
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ohai_custom.html" title="Custom Plugins">
                Custom Plugins
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_community.html#ohai" title="Community Plugins">
                Community Plugins
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/plugin_community.html#chef-client" title="Chef Client Plugins">
            Chef Client Plugins
          </a>
        </li>

         <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li> <!-- /for item in navItems -->
    
    <li class="main-item dark-item">
      <a href="https://github.com/chef/chef-web-docs" title="Available on GitHub">
        <i class="fa fa-github icon-left"></i>
        Available on GitHub
      </a>
    </li>
    <li class="main-item dark-item">
      <a href="https://www.chef.io/chef/get-chef">
        <i class="fa fa-download icon-left"></i>
        Get Chef
      </a>
    </li>
    <li class="main-item dark-item">
      <a href="https://docs.chef.io/feedback.html">
        <i class="fa fa-commenting icon-left"></i>
        Send Feedback
      </a>
    </li>
    <li class="main-item dark-item">
      <a href="https://www.chef.io/support/">
        <i class="fa fa-support icon-left"></i>
        Support
      </a>
    </li>
    <li class="main-item dark-item">
      <a href="https://docs.chef.io/index.html">
        <i class="fa fa-map-o icon-left"></i>
        Site Map
      </a>
    </li>
    <li class="main-item dark-item">
      <a href="https://docs-archive.chef.io/">
        <i class="fa fa-archive icon-left"></i>
        Archive
      </a>
    </li>
  </ul>
</nav>
      <div class="documentwrapper"><div class="sphinxsidebar" role="navigation" aria-label="main navigation">
  <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Chef for Microsoft Windows</a><ul>
<li><a class="reference internal" href="#install-the-chef-client-on-windows">Install the chef-client on Windows</a><ul>
<li><a class="reference internal" href="#set-the-system-ruby">Set the System Ruby</a></li>
<li><a class="reference internal" href="#spaces-and-directories">Spaces and Directories</a></li>
<li><a class="reference internal" href="#top-level-directory-names">Top-level Directory Names</a></li>
<li><a class="reference internal" href="#use-knife-windows">Use knife-windows</a><ul>
<li><a class="reference internal" href="#ports">Ports</a></li>
<li><a class="reference internal" href="#msiexec-exe">Msiexec.exe</a></li>
<li><a class="reference internal" href="#addlocal-options">ADDLOCAL Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#use-msi-installer">Use MSI Installer</a><ul>
<li><a class="reference internal" href="#enable-as-a-service">Enable as a Service</a></li>
</ul>
</li>
<li><a class="reference internal" href="#use-an-existing-process">Use an Existing Process</a></li>
<li><a class="reference internal" href="#path-system-variable">PATH System Variable</a></li>
</ul>
</li>
<li><a class="reference internal" href="#proxy-settings">Proxy Settings</a></li>
<li><a class="reference internal" href="#microsoft-azure-portal">Microsoft Azure portal</a><ul>
<li><a class="reference internal" href="#azure-marketplace">Azure Marketplace</a></li>
<li><a class="reference internal" href="#chef-client-settings">chef-client Settings</a></li>
<li><a class="reference internal" href="#set-up-virtual-machines">Set up Virtual Machines</a></li>
<li><a class="reference internal" href="#log-files">Log Files</a><ul>
<li><a class="reference internal" href="#from-the-azure-portal">From the Azure portal</a></li>
<li><a class="reference internal" href="#from-the-chef-client">From the chef-client</a></li>
<li><a class="reference internal" href="#troubleshoot-log-files">Troubleshoot Log Files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#for-more-information">For more information ...</a></li>
</ul>
</li>
<li><a class="reference internal" href="#knife">Knife</a><ul>
<li><a class="reference internal" href="#set-the-text-editor">Set the Text Editor</a></li>
<li><a class="reference internal" href="#quotes-windows">Quotes, Windows</a><ul>
<li><a class="reference internal" href="#import-module-chef">Import-Module chef</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ampersands-windows">Ampersands, Windows</a></li>
<li><a class="reference internal" href="#knife-bootstrap">knife bootstrap</a><ul>
<li><a class="reference internal" href="#syntax">Syntax</a></li>
<li><a class="reference internal" href="#options">Options</a></li>
<li><a class="reference internal" href="#custom-templates">Custom Templates</a><ul>
<li><a class="reference internal" href="#microsoft-windows">Microsoft Windows</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#knife-azure">knife azure</a><ul>
<li><a class="reference internal" href="#install-this-plugin">Install this plugin</a></li>
<li><a class="reference internal" href="#generate-certificates">Generate Certificates</a></li>
<li><a class="reference internal" href="#ag-create">ag create</a><ul>
<li><a class="reference internal" href="#id2">Syntax</a></li>
<li><a class="reference internal" href="#id3">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ag-list">ag list</a><ul>
<li><a class="reference internal" href="#id4">Syntax</a></li>
<li><a class="reference internal" href="#id5">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#image-list">image list</a><ul>
<li><a class="reference internal" href="#id6">Syntax</a></li>
<li><a class="reference internal" href="#id7">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#server-create">server create</a><ul>
<li><a class="reference internal" href="#id8">Syntax</a></li>
<li><a class="reference internal" href="#id9">Options</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#server-delete">server delete</a><ul>
<li><a class="reference internal" href="#id10">Syntax</a></li>
<li><a class="reference internal" href="#id11">Options</a></li>
<li><a class="reference internal" href="#id12">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#server-describe">server describe</a><ul>
<li><a class="reference internal" href="#id13">Syntax</a></li>
<li><a class="reference internal" href="#id14">Options</a></li>
<li><a class="reference internal" href="#id15">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#server-list">server list</a><ul>
<li><a class="reference internal" href="#id16">Syntax</a></li>
<li><a class="reference internal" href="#id17">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#server-show">server show</a><ul>
<li><a class="reference internal" href="#id18">Syntax</a></li>
<li><a class="reference internal" href="#id19">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vnet-create">vnet create</a><ul>
<li><a class="reference internal" href="#id20">Syntax</a></li>
<li><a class="reference internal" href="#id21">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vnet-list">vnet list</a><ul>
<li><a class="reference internal" href="#id22">Syntax</a></li>
<li><a class="reference internal" href="#id23">Options</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id24">knife windows</a><ul>
<li><a class="reference internal" href="#id25">Install this plugin</a></li>
<li><a class="reference internal" href="#requirements">Requirements</a><ul>
<li><a class="reference internal" href="#negotiate-ntlm">Negotiate, NTLM</a></li>
</ul>
</li>
<li><a class="reference internal" href="#domain-authentication">Domain Authentication</a></li>
<li><a class="reference internal" href="#bootstrap-windows-ssh">bootstrap windows ssh</a><ul>
<li><a class="reference internal" href="#id26">Syntax</a></li>
<li><a class="reference internal" href="#id27">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#winrm">winrm</a><ul>
<li><a class="reference internal" href="#id28">Syntax</a></li>
<li><a class="reference internal" href="#id29">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id30">Examples</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#resources">Resources</a><ul>
<li><a class="reference internal" href="#common-functionality">Common Functionality</a><ul>
<li><a class="reference internal" href="#relative-paths">Relative Paths</a><ul>
<li><a class="reference internal" href="#id31">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#windows-file-security">Windows File Security</a><ul>
<li><a class="reference internal" href="#acls">ACLs</a></li>
<li><a class="reference internal" href="#inheritance">Inheritance</a></li>
</ul>
</li>
<li><a class="reference internal" href="#attributes-for-file-based-resources">Attributes for File-based Resources</a></li>
<li><a class="reference internal" href="#atomic-file-updates">Atomic File Updates</a></li>
</ul>
</li>
<li><a class="reference internal" href="#batch">batch</a><ul>
<li><a class="reference internal" href="#id32">Syntax</a></li>
<li><a class="reference internal" href="#actions">Actions</a></li>
<li><a class="reference internal" href="#attributes">Attributes</a></li>
<li><a class="reference internal" href="#id33">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dsc-resource">dsc_resource</a><ul>
<li><a class="reference internal" href="#id34">Syntax</a></li>
<li><a class="reference internal" href="#id35">Attributes</a></li>
<li><a class="reference internal" href="#id36">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dsc-script">dsc_script</a><ul>
<li><a class="reference internal" href="#id41">Syntax</a></li>
<li><a class="reference internal" href="#id42">Actions</a></li>
<li><a class="reference internal" href="#id43">Attributes</a></li>
<li><a class="reference internal" href="#id44">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#env">env</a><ul>
<li><a class="reference internal" href="#id45">Syntax</a></li>
<li><a class="reference internal" href="#id46">Actions</a></li>
<li><a class="reference internal" href="#id47">Attributes</a></li>
<li><a class="reference internal" href="#id48">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#powershell-script">powershell_script</a><ul>
<li><a class="reference internal" href="#id49">Syntax</a></li>
<li><a class="reference internal" href="#id50">Actions</a></li>
<li><a class="reference internal" href="#id51">Attributes</a></li>
<li><a class="reference internal" href="#id52">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#registry-key">registry_key</a><ul>
<li><a class="reference internal" href="#id53">Syntax</a><ul>
<li><a class="reference internal" href="#path-separators">Path Separators</a></li>
</ul>
</li>
<li><a class="reference internal" href="#recipe-dsl-methods">Recipe DSL Methods</a><ul>
<li><a class="reference internal" href="#registry-data-exists">registry_data_exists?</a></li>
<li><a class="reference internal" href="#registry-get-subkeys">registry_get_subkeys</a></li>
<li><a class="reference internal" href="#registry-get-values">registry_get_values</a></li>
<li><a class="reference internal" href="#registry-has-subkeys">registry_has_subkeys?</a></li>
<li><a class="reference internal" href="#registry-key-exists">registry_key_exists?</a></li>
<li><a class="reference internal" href="#registry-value-exists">registry_value_exists?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id54">Actions</a></li>
<li><a class="reference internal" href="#id55">Attributes</a></li>
<li><a class="reference internal" href="#id56">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#remote-file">remote_file</a></li>
<li><a class="reference internal" href="#windows-package">windows_package</a><ul>
<li><a class="reference internal" href="#id57">Syntax</a></li>
<li><a class="reference internal" href="#id58">Actions</a></li>
<li><a class="reference internal" href="#id59">Attributes</a></li>
<li><a class="reference internal" href="#providers">Providers</a></li>
<li><a class="reference internal" href="#id60">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#windows-service">windows_service</a><ul>
<li><a class="reference internal" href="#id61">Syntax</a></li>
<li><a class="reference internal" href="#id62">Actions</a></li>
<li><a class="reference internal" href="#id63">Attributes</a></li>
<li><a class="reference internal" href="#id64">Examples</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#cookbook-resources">Cookbook Resources</a></li>
<li><a class="reference internal" href="#id67">Recipe DSL Methods</a><ul>
<li><a class="reference internal" href="#id68">registry_data_exists?</a></li>
<li><a class="reference internal" href="#id69">registry_get_subkeys</a></li>
<li><a class="reference internal" href="#id70">registry_get_values</a></li>
<li><a class="reference internal" href="#id71">registry_has_subkeys?</a></li>
<li><a class="reference internal" href="#id72">registry_key_exists?</a></li>
<li><a class="reference internal" href="#id73">registry_value_exists?</a></li>
<li><a class="reference internal" href="#helpers">Helpers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#chef-client">chef-client</a><ul>
<li><a class="reference internal" href="#run-w-elevated-privileges">Run w/Elevated Privileges</a></li>
</ul>
</li>
<li><a class="reference internal" href="#knife-rb">knife.rb</a></li>
</ul>
</li>
</ul>

  </div>
</div>
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="chef-for-microsoft-windows">
<h1>Chef for Microsoft Windows<a class="headerlink" href="#chef-for-microsoft-windows" title="Permalink to this headline"></a></h1>
<p><a class="reference external" href="https://github.com/chef/chef-web-docs/blob/master/chef_master/source/windows.rst">[edit on GitHub]</a></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This page collects information about Chef that is specific to using Chef with Microsoft Windows.</p>
</div>
<p>The chef-client has specific components that are designed to support unique aspects of the Microsoft Windows platform, including Windows PowerShell, Internet Information Services (IIS), and SQL Server.</p>
<ul>
<li><p class="first">The chef-client is <a class="reference external" href="https://downloads.chef.io/chef-client/windows/">installed on a machine</a> running Microsoft Windows by using a Microsoft Installer Package (MSI)</p>
</li>
<li><p class="first">Six resources dedicated to the Microsoft Windows platform are built into the chef-client: <strong>batch</strong>, <strong>dsc_script</strong>, <strong>env</strong>, <strong>powershell_script</strong>, <strong>registry_key</strong>, and <strong>windows_package</strong></p>
</li>
<li><p class="first">Use the <strong>dsc_resource</strong> to use Powershell DSC resources in Chef!</p>
</li>
<li><p class="first">Two knife plugins dedicated to the Microsoft Windows platform are available: <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">azure</span></tt> is used to manage virtual instances in Microsoft Azure; <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">windows</span></tt> is used to interact with and manage physical nodes that are running Microsoft Windows, such as desktops and servers</p>
</li>
<li><p class="first">Many community cookbooks on Supermarket provide Windows specific support. Chef maintains cookbooks for <a class="reference external" href="https://github.com/chef-cookbooks/powershell">PowerShell</a>, <a class="reference external" href="https://github.com/chef-cookbooks/iis">IIS</a>, <a class="reference external" href="https://github.com/chef-cookbooks/database">SQL Server</a>, and <a class="reference external" href="https://github.com/chef-cookbooks/windows">Windows</a>.</p>
</li>
<li><p class="first">The following Microsoft Windows platform-specific helpers can be used in recipes:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Helper</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">cluster?</span></tt></td>
<td>Use to test for a Cluster SKU (Windows Server 2003 and later).</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">core?</span></tt></td>
<td>Use to test for a Core SKU (Windows Server 2003 and later).</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">datacenter?</span></tt></td>
<td>Use to test for a Datacenter SKU.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">marketing_name</span></tt></td>
<td>Use to display the marketing name for a Microsoft Windows platform.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">windows_7?</span></tt></td>
<td>Use to test for Windows 7.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">windows_8?</span></tt></td>
<td>Use to test for Windows 8.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">windows_8_1?</span></tt></td>
<td>Use to test for Windows 8.1.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">windows_2000?</span></tt></td>
<td>Use to test for Windows 2000.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">windows_home_server?</span></tt></td>
<td>Use to test for Windows Home Server.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">windows_server_2003?</span></tt></td>
<td>Use to test for Windows Server 2003.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">windows_server_2003_r2?</span></tt></td>
<td>Use to test for Windows Server 2003 R2.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">windows_server_2008?</span></tt></td>
<td>Use to test for Windows Server 2008.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">windows_server_2008_r2?</span></tt></td>
<td>Use to test for Windows Server 2008 R2.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">windows_server_2012?</span></tt></td>
<td>Use to test for Windows Server 2012.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">windows_server_2012_r2?</span></tt></td>
<td>Use to test for Windows Server 2012 R2.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">windows_vista?</span></tt></td>
<td>Use to test for Windows Vista.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">windows_xp?</span></tt></td>
<td>Use to test for Windows XP.</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">Two community provisioners for Kitchen: <a class="reference external" href="https://github.com/test-kitchen/kitchen-dsc">kitchen-dsc</a> and <a class="reference external" href="https://github.com/test-kitchen/kitchen-pester">kitchen-pester</a></p>
</li>
</ul>
<p>The most popular core resources in the chef-client&#8212;<a class="reference internal" href="resource_cookbook_file.html"><em>cookbook_file</em></a>, <a class="reference internal" href="resource_directory.html"><em>directory</em></a>, <a class="reference internal" href="resource_env.html"><em>env</em></a>, <a class="reference internal" href="resource_execute.html"><em>execute</em></a>, <a class="reference internal" href="resource_file.html"><em>file</em></a>, <a class="reference internal" href="resource_group.html"><em>group</em></a>, <a class="reference internal" href="resource_http_request.html"><em>http_request</em></a>, <a class="reference internal" href="resource_link.html"><em>link</em></a>, <a class="reference internal" href="resource_mount.html"><em>mount</em></a>, <a class="reference internal" href="resource_package.html"><em>package</em></a>, <a class="reference internal" href="resource_remote_directory.html"><em>remote_directory</em></a>, <a class="reference internal" href="resource_remote_file.html"><em>remote_file</em></a>, <a class="reference internal" href="resource_ruby_block.html"><em>ruby_block</em></a>, <a class="reference internal" href="resource_service.html"><em>service</em></a>, <a class="reference internal" href="resource_template.html"><em>template</em></a>, and <a class="reference internal" href="resource_user.html"><em>user</em></a>&#8212;work the same way in Microsoft Windows as they do on any UNIX- or Linux-based platform.</p>
<p>The file-based resources&#8212;<strong>cookbook_file</strong>, <strong>file</strong>, <strong>remote_file</strong>, and <strong>template</strong>&#8212;have attributes that support unique requirements within the Microsoft Windows platform, including <tt class="docutils literal"><span class="pre">inherits</span></tt> (for file inheritence), <tt class="docutils literal"><span class="pre">mode</span></tt> (for octal modes), and <tt class="docutils literal"><span class="pre">rights</span></tt> (for access control lists, or ACLs).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The Microsoft Windows platform does not support running as an alternate user unless full credentials (a username and password or equivalent) are specified.</p>
</div>
<p>The following sections are pulled in from the larger <a class="reference external" href="https://docs.chef.io/">https://docs.chef.io/</a> site and represents the documentation that is specific to the Microsoft Windows platform, compiled here into a single-page reference.</p>
<div class="section" id="install-the-chef-client-on-windows">
<h2>Install the chef-client on Windows<a class="headerlink" href="#install-the-chef-client-on-windows" title="Permalink to this headline"></a></h2>
<p>The chef-client can be installed on machines running Microsoft Windows in the following ways:</p>
<ul class="simple">
<li>By using the <a class="reference external" href="https://docs.chef.io/plugin_knife_windows.html">knife windows</a> plugin to bootstrap the chef-client; this process requires the target node be available via SSH (port 22) or by using the HTTP or HTTPS ports that are required by WinRM</li>
<li>By downloading the chef-client to the target node, and then running the Microsoft Installer Package (MSI) locally</li>
<li>By using an existing process already in place for managing Microsoft Windows machines, such as System Center</li>
</ul>
<p>To run the chef-client at periodic intervals (so that it can check in with the Chef server automatically), configure the chef-client to run as a service or as a scheduled task. (The chef-client can be configured to run as a service during the setup process.)</p>
<p>The chef-client can be used to manage machines that run on the following versions of Microsoft Windows:</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Operating System</th>
<th class="head">Version</th>
<th class="head">Architecture</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Windows</td>
<td>2008 R2, 2012, 2012 R2</td>
<td>x86_64</td>
</tr>
</tbody>
</table>
<p>(The recommended amount of RAM available to the chef-client during a chef-client run is 512MB. Each node and workstation must have access to the Chef server via HTTPS. Ruby version 1.9.1 or Ruby version 1.9.2 with SSL bindings is required.)</p>
<p>The Microsoft Installer Package (MSI) for Microsoft Windows is available at <a class="reference external" href="http://www.chef.io/chef/install/">http://www.chef.io/chef/install/</a>. From the drop-downs, select the operating system (<tt class="docutils literal"><span class="pre">Windows</span></tt>), then the version, and then the architecture.</p>
<p>After the chef-client is installed, it is located at <tt class="docutils literal"><span class="pre">C:\chef</span></tt>. The main configuration file for the chef-client is located at <tt class="docutils literal"><span class="pre">C:\chef\client.rb</span></tt>.</p>
<div class="section" id="set-the-system-ruby">
<h3>Set the System Ruby<a class="headerlink" href="#set-the-system-ruby" title="Permalink to this headline"></a></h3>
<p>To set the system Ruby for the Microsoft Windows platform <a class="reference external" href="https://docs.chef.io/install_dk.html#set-system-ruby">the steps described for all platforms are true</a>, but then require the following manual edits to the <tt class="docutils literal"><span class="pre">chef</span> <span class="pre">shell-init</span> <span class="pre">bash</span></tt> output for the Microsoft Windows platform:</p>
<ol class="arabic simple">
<li>Add quotes around the variable assignment strings.</li>
<li>Convert <tt class="docutils literal"><span class="pre">C:/</span></tt> to <tt class="docutils literal"><span class="pre">/c/</span></tt>.</li>
<li>Save those changes.</li>
</ol>
</div>
<div class="section" id="spaces-and-directories">
<h3>Spaces and Directories<a class="headerlink" href="#spaces-and-directories" title="Permalink to this headline"></a></h3>
<p>Directories that are used by Chef on the Microsoft Windows platform cannot have spaces. For example, <tt class="docutils literal"><span class="pre">/c/Users/Steven</span> <span class="pre">Danno</span></tt> will not work, but <tt class="docutils literal"><span class="pre">/c/Users/StevenDanno</span></tt> will.</p>
<p>A different issue exists with the knife command line tool that is also related to spaces and directories. The <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">cookbook</span> <span class="pre">site</span> <span class="pre">install</span></tt> subcommand will fail when the Microsoft Windows directory contains a space.</p>
</div>
<div class="section" id="top-level-directory-names">
<h3>Top-level Directory Names<a class="headerlink" href="#top-level-directory-names" title="Permalink to this headline"></a></h3>
<p>Paths can be longer in UNIX and Linux environments than they can be in Microsoft Windows. Microsoft Windows will throw errors when path name lengths are too long. For this reason, it&#8217;s often helpful to use a very short top-level directory in Microsoft Windows, much like what is done in UNIX and Linux. For example, Chef uses <tt class="docutils literal"><span class="pre">/opt/</span></tt> to install the Chef development kit on Mac OS X. A similar approach can be done on Microsoft Windows, by creating a top-level directory with a short name. For example: <tt class="docutils literal"><span class="pre">c:\chef</span></tt>.</p>
</div>
<div class="section" id="use-knife-windows">
<h3>Use knife-windows<a class="headerlink" href="#use-knife-windows" title="Permalink to this headline"></a></h3>
<p>The <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">windows</span></tt> subcommand is used to configure and interact with nodes that exist on server and/or desktop machines that are running Microsoft Windows. Nodes are configured using WinRM, which allows native objects&#8212;batch scripts, Windows PowerShell scripts, or scripting library variables&#8212;to be called by external applications. The <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">windows</span></tt> subcommand supports NTLM and Kerberos methods of authentication.</p>
<p>For more information about the <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">windows</span></tt> plugin, see <a class="reference internal" href="plugin_knife_windows.html"><em>windows</em></a>.</p>
<div class="section" id="ports">
<h4>Ports<a class="headerlink" href="#ports" title="Permalink to this headline"></a></h4>
<p>WinRM requires that a target node be accessible via the ports configured to support access via HTTP or HTTPS.</p>
</div>
<div class="section" id="msiexec-exe">
<h4>Msiexec.exe<a class="headerlink" href="#msiexec-exe" title="Permalink to this headline"></a></h4>
<p>Msiexec.exe is used to install the chef-client on a node as part of a bootstrap operation. The actual command that is run by the default bootstrap script is:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ msiexec /qn /i <span class="s2">&quot;%LOCAL_DESTINATION_MSI_PATH%&quot;</span>
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">/qn</span></tt> is used to set the user interface level to &#8220;No UI&#8221;, <tt class="docutils literal"><span class="pre">/i</span></tt> is used to define the location in which the chef-client is installed, and <tt class="docutils literal"><span class="pre">&quot;%LOCAL_DESTINATION_MSI_PATH%&quot;</span></tt> is a variable defined in the default <a class="reference external" href="https://github.com/chef/knife-windows/blob/master/lib/chef/knife/bootstrap/windows-chef-client-msi.erb">windows-chef-client-msi.erb</a> bootstrap template. See <a class="reference external" href="http://msdn.microsoft.com/en-us/library/aa367988%28v=vs.85%29.aspx">http://msdn.microsoft.com/en-us/library/aa367988%28v=vs.85%29.aspx</a> for more information about the options available to Msiexec.exe.</p>
</div>
<div class="section" id="addlocal-options">
<h4>ADDLOCAL Options<a class="headerlink" href="#addlocal-options" title="Permalink to this headline"></a></h4>
<p>The <tt class="docutils literal"><span class="pre">ADDLOCAL</span></tt> parameter adds two setup options that are specific to the chef-client. These options can be passed along with an Msiexec.exe command:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ChefClientFeature</span></tt></td>
<td>Use to install the chef-client.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">ChefServiceFeature</span></tt></td>
<td>Use to configure the chef-client as a service in Microsoft Windows.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ChefPSModuleFeature</span></tt></td>
<td>Used to install the chef PowerShell module. This will enable chef command line utilities within PowerShell.</td>
</tr>
</tbody>
</table>
<p>First install the chef-client, and then enable it to run as a service. For example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ msiexec /qn /i C:<span class="se">\i</span>nst<span class="se">\c</span>hef-client-12.4.3-1.windows.msi <span class="nv">ADDLOCAL</span><span class="o">=</span><span class="s2">&quot;ChefClientFeature,ChefServiceFeature,ChefPSModuleFeature&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="use-msi-installer">
<h3>Use MSI Installer<a class="headerlink" href="#use-msi-installer" title="Permalink to this headline"></a></h3>
<p>A Microsoft Installer Package (MSI) is available for installing the chef-client on a Microsoft Windows machine.</p>
<p>To install the chef-client on Microsoft Windows, do the following:</p>
<ol class="arabic">
<li><p class="first">Go to <a class="reference external" href="https://downloads.chef.io/chef">https://downloads.chef.io/chef</a>.</p>
</li>
<li><p class="first">Click the <strong>Chef Client</strong> tab.</p>
</li>
<li><p class="first">Select <strong>Windows</strong>, a version, and an architecture.</p>
</li>
<li><p class="first">Under <strong>Downloads</strong>, select the version of the chef-client to download, and then click the link that appears below to download the package.</p>
</li>
<li><p class="first">Ensure that the MSI is on the target node.</p>
</li>
<li><p class="first">Run the MSI package and use all the default options:</p>
<img alt="_images/step_install_windows_01.png" src="_images/step_install_windows_01.png" />
</li>
</ol>
<p>then:</p>
<blockquote>
<div><img alt="_images/step_install_windows_02.png" src="_images/step_install_windows_02.png" />
</div></blockquote>
<p>then:</p>
<blockquote>
<div><img alt="_images/step_install_windows_03.png" src="_images/step_install_windows_03.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The chef-client must be run as a service for it to be able to regularly check in with the Chef server. Select the <strong>Chef Client Service</strong> option to have the MSI configure the chef-client as a service.</p>
</div>
</div></blockquote>
<p>then:</p>
<blockquote>
<div><img alt="_images/step_install_windows_04.png" src="_images/step_install_windows_04.png" />
</div></blockquote>
<p>then:</p>
<blockquote>
<div><img alt="_images/step_install_windows_05.png" src="_images/step_install_windows_05.png" />
</div></blockquote>
<p>then:</p>
<blockquote>
<div><img alt="_images/step_install_windows_06.png" src="_images/step_install_windows_06.png" />
</div></blockquote>
<div class="section" id="enable-as-a-service">
<h4>Enable as a Service<a class="headerlink" href="#enable-as-a-service" title="Permalink to this headline"></a></h4>
<p>To run the chef-client at periodic intervals (so that it can check in with the Chef server automatically), configure the chef-client to run as a service or as a scheduled task. This can be done via the MSI, by selecting the <strong>Chef Client Service</strong> option on the <strong>Custom Setup</strong> page or by running the following command after the chef-client is installed:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-service-manager -a install
</pre></div>
</div>
<p>and then start the chef-client as a service:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-service-manager -a start
</pre></div>
</div>
<p>After the chef-client is configured to run as a service, the default file path is: <tt class="docutils literal"><span class="pre">c:\chef\chef-client.log</span></tt>.</p>
</div>
</div>
<div class="section" id="use-an-existing-process">
<h3>Use an Existing Process<a class="headerlink" href="#use-an-existing-process" title="Permalink to this headline"></a></h3>
<p>Many organizations already have processes in place for managing the applications and settings on various Microsoft Windows machines. For example, System Center. The chef-client can be installed using this method.</p>
</div>
<div class="section" id="path-system-variable">
<h3>PATH System Variable<a class="headerlink" href="#path-system-variable" title="Permalink to this headline"></a></h3>
<p>On Microsoft Windows, the chef-client must have two entries added to the <tt class="docutils literal"><span class="pre">PATH</span></tt> environment variable:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">C:\opscode\chef\bin</span></tt></li>
<li><tt class="docutils literal"><span class="pre">C:\opscode\chef\embedded\bin</span></tt></li>
</ul>
<p>This is typically done during the installation of the chef-client automatically. If these values (for any reason) are not in the <tt class="docutils literal"><span class="pre">PATH</span></tt> environment variable, the chef-client will not run properly.</p>
<img alt="_images/includes_windows_environment_variable_path.png" src="_images/includes_windows_environment_variable_path.png" />
<p>This value can be set from a recipe. For example, from the <tt class="docutils literal"><span class="pre">php</span></tt> cookbook:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="c1">#  the following code sample comes from the ``package`` recipe in the ``php`` cookbook: https://github.com/chef-cookbooks/php</span>

<span class="k">if</span> <span class="n">platform?</span><span class="p">(</span><span class="s1">&#39;windows&#39;</span><span class="p">)</span>

  <span class="n">include_recipe</span> <span class="s1">&#39;iis::mod_cgi&#39;</span>

  <span class="n">install_dir</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">expand_path</span><span class="p">(</span><span class="n">node</span><span class="o">[</span><span class="s1">&#39;php&#39;</span><span class="o">][</span><span class="s1">&#39;conf_dir&#39;</span><span class="o">]</span><span class="p">)</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="s1">&#39;\\&#39;</span><span class="p">)</span>
  <span class="n">windows_package</span> <span class="n">node</span><span class="o">[</span><span class="s1">&#39;php&#39;</span><span class="o">][</span><span class="s1">&#39;windows&#39;</span><span class="o">][</span><span class="s1">&#39;msi_name&#39;</span><span class="o">]</span> <span class="k">do</span>
    <span class="n">source</span> <span class="n">node</span><span class="o">[</span><span class="s1">&#39;php&#39;</span><span class="o">][</span><span class="s1">&#39;windows&#39;</span><span class="o">][</span><span class="s1">&#39;msi_source&#39;</span><span class="o">]</span>
    <span class="n">installer_type</span> <span class="ss">:msi</span>

    <span class="n">options</span> <span class="sx">%W[</span>
<span class="sx">      /quiet</span>
<span class="sx">      INSTALLDIR=&quot;</span><span class="si">#{</span><span class="n">install_dir</span><span class="si">}</span><span class="sx">&quot;</span>
<span class="sx">      ADDLOCAL=</span><span class="si">#{</span><span class="n">node</span><span class="o">[</span><span class="s1">&#39;php&#39;</span><span class="o">][</span><span class="s1">&#39;packages&#39;</span><span class="o">].</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span><span class="si">}</span><span class="sx"></span>
<span class="sx">    ]</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<span class="k">end</span>

<span class="o">...</span>

<span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;PATH&#39;</span><span class="o">]</span> <span class="o">+=</span> <span class="s2">&quot;;</span><span class="si">#{</span><span class="n">install_dir</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="n">windows_path</span> <span class="n">install_dir</span>

<span class="o">...</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="proxy-settings">
<h2>Proxy Settings<a class="headerlink" href="#proxy-settings" title="Permalink to this headline"></a></h2>
<p>To determine the current proxy server on the Microsoft Windows platform:</p>
<ol class="arabic simple">
<li>Open <strong>Internet Properties</strong>.</li>
<li>Open <strong>Connections</strong>.</li>
<li>Open <strong>LAN settings</strong>.</li>
<li>View the <strong>Proxy server</strong> setting. If this setting is blank, then a proxy server may not be available.</li>
</ol>
<p>To configure proxy settings in Microsoft Windows:</p>
<ol class="arabic simple">
<li>Open <strong>System Properties</strong>.</li>
<li>Open <strong>Environment Variables</strong>.</li>
<li>Open <strong>System variables</strong>.</li>
<li>Set <tt class="docutils literal"><span class="pre">http_proxy</span></tt> and <tt class="docutils literal"><span class="pre">https_proxy</span></tt> to the location of your proxy server. This value <strong>MUST</strong> be lowercase.</li>
</ol>
</div>
<div class="section" id="microsoft-azure-portal">
<h2>Microsoft Azure portal<a class="headerlink" href="#microsoft-azure-portal" title="Permalink to this headline"></a></h2>
<p>Microsoft Azure is a cloud hosting platform from Microsoft that provides virtual machines. The Azure production portal (<a class="reference external" href="https://portal.azure.com/">https://portal.azure.com/</a>) can boostrap Microsoft Windows-based virtual machines that are already provisioned with the chef-client running as a background service. Once provisioned, these virtual machines are ready to be managed by Chef.</p>
<p>To use the Chef integration with the Azure portal, all you need is a Chef server and the Azure portal. <a class="reference external" href="https://www.chef.io/chef/get-chef/">Choose a Chef version</a> or deploy a Chef server via the Azure Marketplace (<a class="reference external" href="https://azure.microsoft.com/en-us/marketplace/partners/chef-software/chef-server/">https://azure.microsoft.com/en-us/marketplace/partners/chef-software/chef-server/</a>).</p>
<p>The Chef extension on the Azure portal may be used on the following platforms:</p>
<ul class="simple">
<li>Windows Server 2012, 2012r2</li>
<li>Ubuntu 12.04 LTS, 14.04 LTS</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Virtual machines running on Microsoft Azure can also be provisioned from the command-line using the <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">azure</span></tt> plugin for knife. This approach is ideal for cases that require automation or for users who are more suited to command-line interfaces.</p>
</div>
<div class="section" id="azure-marketplace">
<h3>Azure Marketplace<a class="headerlink" href="#azure-marketplace" title="Permalink to this headline"></a></h3>
<p>Chef provides a fully functional Chef server that can be launched from the Azure Marketplace. This server is preconfigured with Chef server, the Chef management console, Reporting, and Chef Analytics. This configuration is free to use for deployments under 25 nodes, and can be licensed for deployments beyond 25 nodes. (See <a class="reference external" href="https://www.chef.io/pricing/">https://www.chef.io/pricing/</a> for more information about licensing more than 25 nodes.)</p>
<p>Before getting started, you will need a functioning workstation. Install the <a class="reference external" href="https://docs.chef.io/install_dk.html">Chef development kit</a> on that workstation.</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The following steps assume that Chef is installed on the workstation and that the <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">ssl</span> <span class="pre">fetch</span></tt> subcommand is available. The <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">ssl</span> <span class="pre">fetch</span></tt> subcommand was added to Chef in the 11.16 release of the chef-client, and then packaged as part of the Chef development kit starting with the 0.3 release.)</p>
</div>
</div></blockquote>
<ol class="arabic">
<li><p class="first">Sign in to the Azure portal (<a class="reference external" href="https://portal.azure.com">https://portal.azure.com</a>). (The Azure Marketplace offering is only available via the preview portal.) Authenticate using your Microsoft Azure account credentials.</p>
</li>
<li><p class="first">Click the <strong>New</strong> icon in the lower left corner of the portal.</p>
</li>
<li><p class="first">Click <strong>Compute</strong>, then click <strong>Azure Marketplace</strong>.</p>
</li>
<li><p class="first">In the search box enter <strong>Chef Server</strong>.</p>
</li>
<li><p class="first">Select the <strong>Chef Server 12</strong> offering that is appropriate for your size.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The Chef server is available on the Azure Marketplace in 25, 50, 100, 150, 200, and 250 licensed images, as well as a &#8220;Bring Your Own License&#8221; image.</p>
</div>
</li>
<li><p class="first">Click <strong>Create</strong> and follow the steps to launch the Chef server, providing a host name, user name, password or SSH key, and any additional information required. You will also select your deployment model here.</p>
</li>
<li><p class="first">Create a <strong>DNS Name</strong> label for the instance. &lt;<a class="reference external" href="https://azure.microsoft.com/en-us/documentation/articles/virtual-machines-create-fqdn-on-portal/">https://azure.microsoft.com/en-us/documentation/articles/virtual-machines-create-fqdn-on-portal/</a>&gt;</p>
</li>
<li><p class="first">Once the instance is launched you will need to create an account to use with the Chef management console. To do this, open an SSH connection to the host using the user name and password (or SSH key) provided when you launched the instance.</p>
</li>
<li><p class="first">Wait for the Chef server to complete initial configuration.  You&#8217;ll want to tail the <tt class="docutils literal"><span class="pre">cloud-init</span></tt> logfile until it has finished. For example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ tailf /var/log/cloud-init-output.log
</pre></div>
</div>
<p>will return something similar to:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>cloud-init v. 0.7.5 finished at Thu, 05 May 2016 21:41:21 +0000. Datasource DataSourceAzureNet [seed=/dev/sr0].  Up 740.33 seconds
</pre></div>
</div>
</li>
<li><p class="first">After <tt class="docutils literal"><span class="pre">cloud-init</span></tt> has completed, configure the Chef server with the DNS Name.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In the following steps substitute <tt class="docutils literal"><span class="pre">&lt;fqdn&gt;</span></tt> for the fully qualified domain <strong>DNS NAME</strong> that you created.</p>
</div>
</li>
<li><p class="first">Remove the Nginx configuration for the existing Chef Analytics configuration:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo rm /var/opt/opscode/nginx/etc/nginx.d/analytics.conf
</pre></div>
</div>
</li>
<li><p class="first">Update the <tt class="docutils literal"><span class="pre">/etc/chef-marketplace/marketplace.rb</span></tt> file to include the <tt class="docutils literal"><span class="pre">api_fqdn</span></tt> of the machine:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>$ echo &#39;api_fqdn &quot;&lt;fqdn&gt;&quot;&#39; | sudo tee -a /etc/chef-marketplace/marketplace.rb
</pre></div>
</div>
</li>
<li><p class="first">Update the <tt class="docutils literal"><span class="pre">/etc/opscode-analytics/opscode-analytics.rb</span></tt> file to include the <tt class="docutils literal"><span class="pre">analytics_fqdn</span></tt> of the machine:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>$ echo &#39;analytics_fqdn &quot;&lt;fqdn&gt;&quot;&#39; | sudo tee -a /etc/opscode-analytics/opscode-analytics.rb
</pre></div>
</div>
</li>
<li><p class="first">Run the following command to update the hostname and reconfigure the software:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo chef-marketplace-ctl hostname &lt;fqdn&gt;
</pre></div>
</div>
</li>
<li><p class="first">Run the following command to update reconfigure Chef Analytics:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo opscode-analytics-ctl reconfigure
</pre></div>
</div>
</li>
<li><p class="first">Now proceed to the web based setup wizard <tt class="docutils literal"><span class="pre">https://&lt;fqdn&gt;/signup</span></tt>.</p>
</li>
<li><p class="first">Before you can run through the wizard you must provide the VM Name or DNS Label of the instance in order to ensure that only you are configuring the Chef server.</p>
</li>
<li><p class="first">Follow the links to sign up for a new account and download the starter kit.</p>
</li>
<li><p class="first">Extract the starter kit zip file downloaded. Open a command prompt and change into the <tt class="docutils literal"><span class="pre">chef-repo</span></tt> directory extracted from the starter kit.</p>
</li>
<li><p class="first">Run <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">ssl</span> <span class="pre">fetch</span></tt> to retrieve the SSL keys for the Chef server.</p>
</li>
<li><p class="first">Run <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">client</span> <span class="pre">list</span></tt> to test the connection to the Chef server. The command should return <tt class="docutils literal"><span class="pre">&lt;orgname&gt;-validator</span></tt>, where <tt class="docutils literal"><span class="pre">&lt;orgname&gt;</span></tt> is the name of the organization you previously created. You are now ready to add virtual machines to your Chef server.</p>
</li>
</ol>
</div>
<div class="section" id="chef-client-settings">
<h3>chef-client Settings<a class="headerlink" href="#chef-client-settings" title="Permalink to this headline"></a></h3>
<p>Before virtual machines are created using the Azure portal, some chef-client-specific settings will need to be identified so they may be provided to the Azure portal during the virtual machine creation workflow. These settings are available from the chef-client configuration settings:</p>
<ol class="arabic simple">
<li>The <tt class="docutils literal"><span class="pre">chef_server_url</span></tt> and <tt class="docutils literal"><span class="pre">validaton_client_name</span></tt>. These are settings in the <a class="reference external" href="https://docs.chef.io/config_rb_client.html">client.rb file</a>.</li>
<li>The file for the <a class="reference external" href="https://docs.chef.io/chef_private_keys.html">validator key</a>.</li>
</ol>
</div>
<div class="section" id="set-up-virtual-machines">
<h3>Set up Virtual Machines<a class="headerlink" href="#set-up-virtual-machines" title="Permalink to this headline"></a></h3>
<p>Once this information has been identified, launch the Azure portal, start the virtual machine creation workflow, and then bootstrap virtual machines with Chef:</p>
<ol class="arabic">
<li><p class="first">Sign in to the Azure production portal (<a class="reference external" href="https://portal.azure.com/">https://portal.azure.com/</a>). Authenticate using your Microsoft Azure account credentials.</p>
</li>
<li><p class="first">Choose <strong>Virtual Machines</strong> in the left pane of the portal.</p>
</li>
<li><p class="first">Click the <strong>New</strong> option at the bottom of the portal.</p>
</li>
<li><p class="first">Choose <strong>Virtual Machine</strong>, and then <strong>From Gallery</strong>.</p>
</li>
<li><p class="first">Choose one of the following <strong>Featured Images</strong> (currently only Microsoft Windows images are supported): <tt class="docutils literal"><span class="pre">Windows</span> <span class="pre">Server</span> <span class="pre">2012</span> <span class="pre">R2</span> <span class="pre">Datacenter</span></tt> or <tt class="docutils literal"><span class="pre">Windows</span> <span class="pre">Server</span> <span class="pre">2012</span> <span class="pre">Datacenter</span></tt>.</p>
</li>
<li><p class="first">Fill in the virtual machine configuration information, such as machine name, user name, and so on. When finished, click to the next page.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It&#8217;s best to use a new computer name each time through this workflow. This will help to avoid conflicts with virtual machine names that may have been previously registered on the Chef server.</p>
</div>
</li>
<li><p class="first">Make the desired changes, if any, to the cloud service name, storage account, endpoints, etc., and then click to the next page.</p>
</li>
<li><p class="first">Install Chef. Click the checkbox next to <strong>Chef</strong> to configure virtual machines using with Chef:</p>
<img alt="_images/azure_portal.png" src="_images/azure_portal.png" />
</li>
<li><p class="first">Click the <strong>From Local</strong> button next to the client.rb text box, and then browse to upload the client.rb file.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The client.rb must be correctly configured to communicate to the Chef server. Specifically, it must have valid values for the following two settings: <tt class="docutils literal"><span class="pre">chef_server_url</span></tt> and <tt class="docutils literal"><span class="pre">validaton_client_name</span></tt>.</p>
</div>
</li>
<li><p class="first">Use the <strong>From Local</strong> button next to the validation key text box to locate a local copy of the validation key.</p>
</li>
<li><p class="first">Optional. <a class="reference external" href="https://docs.chef.io/run_lists.html">Use a run-list</a> to specify what should be run when the virtual machine is provisioned, such as using the run-list to provision a virtual machine with Internet Information Services (IIS). Use the <tt class="docutils literal"><span class="pre">iis</span></tt> cookbook and the default recipe to build a run-list. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">iis</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">iis</span><span class="o">::</span><span class="n">default</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">recipe</span><span class="o">[</span><span class="s1">&#39;iis&#39;</span><span class="o">]</span>
</pre></div>
</div>
<p>A run-list can also be built using a role. For example, if a role named <tt class="docutils literal"><span class="pre">backend_server</span></tt> is defined on the Chef server, the run-list would look like:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">role</span><span class="o">[</span><span class="s1">&#39;backend_server&#39;</span><span class="o">]</span>
</pre></div>
</div>
<p>Even without a run-list, the virtual machine will periodically check with the Chef server to see if the configuration requirements change. This means that the run-list can be updated later, by editing the run-list to add the desired run-list items by using the Chef server web user interface or by using the knife command line tool.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A run-list may only refer to roles and/or recipes that have already been uploaded to the Chef server.</p>
</div>
</li>
<li><p class="first">Click the checkmark button to complete the page. Provisioning will begin and the application will return to the <strong>Virtual Machines</strong> page showing the list of available virtual machines.</p>
<p>When the virtual machine has reached the status <strong>starting</strong>, click the virtual machine name to go to a page that contains more detail. Click <strong>dashboard</strong> to see more detailed status, and scroll down to the area that says <strong>extensions</strong>.</p>
<p>Once the virtual machine has gone far enough in the <tt class="docutils literal"><span class="pre">running(provisioning)</span></tt> state, some entries should appear under status, like this:</p>
<img alt="_images/azure_portal_1.png" src="_images/azure_portal_1.png" />
</li>
<li><p class="first">Once finished, something like the following will be shown:</p>
<img alt="_images/azure_portal_2.png" src="_images/azure_portal_2.png" />
</li>
</ol>
<p>After the process is complete, the virtual machine will be registered with the Chef server and it will have been provisioned with the configuration (applications, services, etc.) from the specified run-list. The Chef server can now be used to perform all ongoing management of the virtual machine node.</p>
</div>
<div class="section" id="log-files">
<h3>Log Files<a class="headerlink" href="#log-files" title="Permalink to this headline"></a></h3>
<p>If the Azure portal displays an error in dashboard, check the log files. The log files are created by the chef-client. The log files can be accessed from within the Azure portal or by running the chef-client on the node itself and then reproducing the issue interactively.</p>
<div class="section" id="from-the-azure-portal">
<h4>From the Azure portal<a class="headerlink" href="#from-the-azure-portal" title="Permalink to this headline"></a></h4>
<p>Log files are available from within the Azure portal:</p>
<ol class="arabic">
<li><p class="first">Select <strong>Virtual Machines</strong> in the left pane of the Azure portal.</p>
</li>
<li><p class="first">Select the virtual machine that has the error status.</p>
</li>
<li><p class="first">Click the <strong>Connect</strong> button at the bottom of the portal to launch a Windows Remote Desktop session, and then log in to the virtual machine.</p>
</li>
<li><p class="first">Start up a Windows PowerShell command shell.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> c:<span class="se">\w</span>indowsazure<span class="se">\l</span>ogs
  ls r chef*.log
</pre></div>
</div>
</li>
<li><p class="first">This should display the log files, including the chef-client log file.</p>
</li>
</ol>
</div>
<div class="section" id="from-the-chef-client">
<h4>From the chef-client<a class="headerlink" href="#from-the-chef-client" title="Permalink to this headline"></a></h4>
<p>The chef-client can be run interactively by using Windows Remote Desktop to connect to the virtual machine, and then running the chef-client:</p>
<ol class="arabic">
<li><p class="first">Log into the virtual machine.</p>
</li>
<li><p class="first">Start up a Windows PowerShell command shell.</p>
</li>
<li><p class="first">Run the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-client -l debug
</pre></div>
</div>
</li>
<li><p class="first">View the logs. On a linux system, the Chef client logs are saved to <tt class="docutils literal"><span class="pre">/var/log/azure/Chef.Bootstrap.WindowsAzure.LinuxChefClient/&lt;extension-version-number&gt;/chef-client.log</span></tt> and can be viewed using the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ tail -f /var/log/azure/Chef.Bootstrap.WindowsAzure.LinuxChefClient/1210.12.102.1000/chef-client.log
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="troubleshoot-log-files">
<h4>Troubleshoot Log Files<a class="headerlink" href="#troubleshoot-log-files" title="Permalink to this headline"></a></h4>
<p>After the log files have been located, open them using a text editor to view the log file. The most common problem are below:</p>
<ul class="simple">
<li>Connectivity errors with the Chef server caused by incorrect settings in the client.rb file. Ensure that the <tt class="docutils literal"><span class="pre">chef_server_url</span></tt> value in the client.rb file is the correct value and that it can be resolved.</li>
<li>An invalid validator key has been specified. This will prevent the chef-client from authenticating to the Chef server. Ensure that the <tt class="docutils literal"><span class="pre">validaton_client_name</span></tt> value in the client.rb file is the correct value</li>
<li>The name of the node is the same as an existing node. Node names must be unique. Ensure that the name of the virtual machine in Microsoft Azure has a unique name.</li>
<li>An error in one the run-list. The log file will specify the details about errors related to the run-list.</li>
</ul>
</div>
</div>
<div class="section" id="for-more-information">
<h3>For more information ...<a class="headerlink" href="#for-more-information" title="Permalink to this headline"></a></h3>
<p>For more information about Microsoft Azure and how to use it with Chef:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.windowsazure.com/en-us/documentation/services/virtual-machines/">Microsoft Azure Documentation</a></li>
<li><a class="reference external" href="https://github.com/chef-partners/azure-cookbook">azure-cookbook</a></li>
</ul>
</div>
</div>
<div class="section" id="knife">
<h2>Knife<a class="headerlink" href="#knife" title="Permalink to this headline"></a></h2>
<p>knife is a command-line tool that provides an interface between a local chef-repo and the Chef server. knife helps users to manage:</p>
<ul class="simple">
<li>Nodes</li>
<li>Cookbooks and recipes</li>
<li>Roles</li>
<li>Stores of JSON data (data bags), including encrypted data</li>
<li>Environments</li>
<li>Cloud resources, including provisioning</li>
<li>The installation of the chef-client on management workstations</li>
<li>Searching of indexed data on the Chef server</li>
</ul>
<div class="section" id="set-the-text-editor">
<h3>Set the Text Editor<a class="headerlink" href="#set-the-text-editor" title="Permalink to this headline"></a></h3>
<p>Some knife commands, such as <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">data</span> <span class="pre">bag</span> <span class="pre">edit</span></tt>, require that information be edited as JSON data using a text editor. For example, the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife data bag edit admins admin_name
</pre></div>
</div>
<p>will open up the text editor with data similar to:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;admin_name&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Changes to that file can then be made:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;Justin C.&quot;</span>
  <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;I am passing the time by letting time pass over me ...&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The type of text editor that is used by knife can be configured by adding an entry to the knife.rb file or by setting an <tt class="docutils literal"><span class="pre">EDITOR</span></tt> environment variable. For example, to configure the text editor to always open with vim, add the following to the knife.rb file:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">knife</span><span class="o">[</span><span class="ss">:editor</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&quot;/usr/bin/vim&quot;</span>
</pre></div>
</div>
<p>When a Microsoft Windows file path is enclosed in a double-quoted string (&#8221; &#8221;), the same backslash character (<tt class="docutils literal"><span class="pre">\</span></tt>) that is used to define the file path separator is also used in Ruby to define an escape character. The knife.rb file is a Ruby file; therefore, file path separators must be escaped. In addition, spaces in the file path must be replaced with <tt class="docutils literal"><span class="pre">~1</span></tt> so that the length of each section within the file path is not more than 8 characters. For example, if EditPad Pro is the text editor of choice and is located at the following path:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>C:\\Program Files (x86)\EditPad Pro\EditPad.exe
</pre></div>
</div>
<p>the setting in the knife.rb file would be similar to:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">knife</span><span class="o">[</span><span class="ss">:editor</span><span class="o">]</span> <span class="o">=</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">Progra~1</span><span class="se">\\</span><span class="s2">EditPa~1</span><span class="se">\\</span><span class="s2">EditPad.exe&quot;</span>
</pre></div>
</div>
<p>One approach to working around the double- vs. single-quote issue is to put the single-quotes outside of the double-quotes. For example, for Notepad++:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">knife</span><span class="o">[</span><span class="ss">:editor</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;&quot;C:\Program Files (x86)\Notepad++\notepad++.exe&quot; -nosession -multiInst&#39;</span>
</pre></div>
</div>
<p>for Sublime Text:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">knife</span><span class="o">[</span><span class="ss">:editor</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;&quot;C:\Program Files\Sublime Text 2\sublime_text.exe&quot; --wait&#39;</span>
</pre></div>
</div>
<p>for TextPad:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">knife</span><span class="o">[</span><span class="ss">:editor</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;&quot;C:\Program Files (x86)\TextPad 7\TextPad.exe&quot;&#39;</span>
</pre></div>
</div>
<p>and for vim:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">knife</span><span class="o">[</span><span class="ss">:editor</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;&quot;C:\Program Files (x86)\vim\vim74\gvim.exe&quot;&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="quotes-windows">
<h3>Quotes, Windows<a class="headerlink" href="#quotes-windows" title="Permalink to this headline"></a></h3>
<p>When running knife in Microsoft Windows, a string may be interpreted as a wildcard pattern when quotes are not present in the command. The number of quotes to use depends on the shell from which the command is being run.</p>
<p>When running knife from the command prompt, a string should be surrounded by single quotes (<tt class="docutils literal"><span class="pre">'</span> <span class="pre">'</span></tt>). For example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife node run_list <span class="nb">set</span> test-node <span class="s1">&#39;recipe[iptables]&#39;</span>
</pre></div>
</div>
<p>When running knife from Windows PowerShell, a string should be surrounded by triple single quotes (<tt class="docutils literal"><span class="pre">'''</span> <span class="pre">'''</span></tt>). For example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife node run_list <span class="nb">set</span> test-node <span class="s1">&#39;&#39;&#39;recipe[iptables]&#39;&#39;&#39;</span>
</pre></div>
</div>
<div class="section" id="import-module-chef">
<h4>Import-Module chef<a class="headerlink" href="#import-module-chef" title="Permalink to this headline"></a></h4>
<p>The chef-client version 12.4 release adds an optional feature to the Microsoft Installer Package (MSI) for Chef. This feature enables the ability to pass quoted strings from the Windows PowerShell command line without the need for triple single quotes (<tt class="docutils literal"><span class="pre">'''</span> <span class="pre">'''</span></tt>). This feature installs a Windows PowerShell module (typically in <tt class="docutils literal"><span class="pre">C:\opscode\chef\modules</span></tt>) that is also appended to the <tt class="docutils literal"><span class="pre">PSModulePath</span></tt> environment variable. This feature is not enabled by default. To activate this feature, run the following command from within Windows PowerShell:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ Import-Module chef
</pre></div>
</div>
<p>or add <tt class="docutils literal"><span class="pre">Import-Module</span> <span class="pre">chef</span></tt> to the profile for Windows PowerShell located at:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>~<span class="se">\D</span>ocuments<span class="se">\W</span>indowsPowerShell<span class="se">\M</span>icrosoft.PowerShell_profile.ps1
</pre></div>
</div>
<p>This module exports cmdlets that have the same name as the command-line tools&#8212;chef-client, knife, chef-apply&#8212;that are built into Chef.</p>
<p>For example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife <span class="nb">exec</span> -E <span class="s1">&#39;puts ARGV&#39;</span> <span class="s2">&quot;&quot;&quot;&amp;s0meth1ng&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>is now:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife <span class="nb">exec</span> -E <span class="s1">&#39;puts ARGV&#39;</span> <span class="s1">&#39;&amp;s0meth1ng&#39;</span>
</pre></div>
</div>
<p>and:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife node run_list <span class="nb">set</span> test-node <span class="s1">&#39;&#39;&#39;role[ssssssomething]&#39;&#39;&#39;</span>
</pre></div>
</div>
<p>is now:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife node run_list <span class="nb">set</span> test-node <span class="s1">&#39;role[ssssssomething]&#39;</span>
</pre></div>
</div>
<p>To remove this feature, run the following command from within Windows PowerShell:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ Remove-Module chef
</pre></div>
</div>
</div>
</div>
<div class="section" id="ampersands-windows">
<h3>Ampersands, Windows<a class="headerlink" href="#ampersands-windows" title="Permalink to this headline"></a></h3>
<p>When running knife in Microsoft Windows, an ampersand (<tt class="docutils literal"><span class="pre">&amp;</span></tt>) is a special character and must be protected by quotes when it appears in a command. The number of quotes to use depends on the shell from which the command is being run.</p>
<p>When running knife from the command prompt, an ampersand should be surrounded by quotes (<tt class="docutils literal"><span class="pre">&quot;&amp;&quot;</span></tt>). For example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife bootstrap windows winrm -P <span class="s2">&quot;&amp;s0meth1ng&quot;</span>
</pre></div>
</div>
<p>When running knife from Windows PowerShell, an ampersand should be surrounded by triple quotes (<tt class="docutils literal"><span class="pre">&quot;&quot;&quot;&amp;&quot;&quot;&quot;</span></tt>). For example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife bootstrap windows winrm -P <span class="s2">&quot;&quot;&quot;&amp;s0meth1ng&quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="knife-bootstrap">
<h3>knife bootstrap<a class="headerlink" href="#knife-bootstrap" title="Permalink to this headline"></a></h3>
<p>A node is any physical, virtual, or cloud machine that is configured to be maintained by a chef-client. A bootstrap is a process that installs the chef-client on a target system so that it can run as a chef-client and communicate with a Chef server. There are two ways to do this:</p>
<ul class="simple">
<li>Use the <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">bootstrap</span></tt> subcommand to <a class="reference internal" href="install_bootstrap.html"><em>bootstrap a node using the omnibus installer</em></a></li>
<li>Use an unattended install to bootstrap a node from itself, without using SSH or WinRM</li>
</ul>
<p>Use the <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">bootstrap</span></tt> subcommand to run a bootstrap operation that installs the chef-client on the target system. The bootstrap operation must specify the IP address or FQDN of the target system.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To bootstrap the chef-client on Microsoft Windows machines, the <a class="reference external" href="https://docs.chef.io/plugin_knife_windows.html">knife-windows</a> plugins is required, which includes the necessary bootstrap scripts that are used to do the actual installation.</p>
</div>
<div class="section" id="syntax">
<h4>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline"></a></h4>
<p>This subcommand has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife bootstrap FQDN_or_IP_ADDRESS <span class="o">(</span>options<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="options">
<h4>Options<a class="headerlink" href="#options" title="Permalink to this headline"></a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Review the list of <a class="reference external" href="https://docs.chef.io/knife_common_options.html">common options</a> available to this (and all) knife subcommands and plugins.</p>
</div>
<p>This subcommand has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">-A</span></tt>, <tt class="docutils literal"><span class="pre">--forward-agent</span></tt></dt>
<dd>Enable SSH agent forwarding.</dd>
<dt><tt class="docutils literal"><span class="pre">--bootstrap-curl-options</span> <span class="pre">OPTIONS</span></tt></dt>
<dd>Arbitrary options to be added to the bootstrap command when using cURL. This option may not be used in the same command with <tt class="docutils literal"><span class="pre">--bootstrap-install-command</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--bootstrap-install-command</span> <span class="pre">COMMAND</span></tt></dt>
<dd>Execute a custom installation command sequence for the chef-client. This option may not be used in the same command with <tt class="docutils literal"><span class="pre">--bootstrap-curl-options</span></tt>, <tt class="docutils literal"><span class="pre">--bootstrap-install-sh</span></tt>, or <tt class="docutils literal"><span class="pre">--bootstrap-wget-options</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--bootstrap-install-sh</span> <span class="pre">URL</span></tt></dt>
<dd>Fetch and execute an installation script at the specified URL. This option may not be used in the same command with <tt class="docutils literal"><span class="pre">--bootstrap-install-command</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--bootstrap-no-proxy</span> <span class="pre">NO_PROXY_URL_or_IP</span></tt></dt>
<dd><p class="first">A URL or IP address that specifies a location that should not be proxied.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This option is used internally by Chef to help verify bootstrap operations during testing and should never be used during an actual bootstrap operation.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--bootstrap-proxy</span> <span class="pre">PROXY_URL</span></tt></dt>
<dd>The proxy server for the node that is the target of a bootstrap operation.</dd>
<dt><tt class="docutils literal"><span class="pre">--bootstrap-vault-file</span> <span class="pre">VAULT_FILE</span></tt></dt>
<dd>The path to a JSON file that contains a list of vaults and items to be updated.</dd>
<dt><tt class="docutils literal"><span class="pre">--bootstrap-vault-item</span> <span class="pre">VAULT_ITEM</span></tt></dt>
<dd>A single vault and item to update as <tt class="docutils literal"><span class="pre">vault:item</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--bootstrap-vault-json</span> <span class="pre">VAULT_JSON</span></tt></dt>
<dd><p class="first">A JSON string that contains a list of vaults and items to be updated.</p>
<p>For example:</p>
<div class="last highlight-none"><div class="highlight"><pre><span></span>--bootstrap-vault-json &#39;{ &quot;vault1&quot;: [&quot;item1&quot;, &quot;item2&quot;], &quot;vault2&quot;: &quot;item2&quot; }&#39;
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--bootstrap-version</span> <span class="pre">VERSION</span></tt></dt>
<dd>The version of the chef-client to install.</dd>
<dt><tt class="docutils literal"><span class="pre">--bootstrap-wget-options</span> <span class="pre">OPTIONS</span></tt></dt>
<dd>Arbitrary options to be added to the bootstrap command when using GNU Wget. This option may not be used in the same command with <tt class="docutils literal"><span class="pre">--bootstrap-install-command</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-E</span> <span class="pre">ENVIRONMENT</span></tt>, <tt class="docutils literal"><span class="pre">--environment</span> <span class="pre">ENVIRONMENT</span></tt></dt>
<dd>The name of the environment. When this option is added to a command, the command will run only against the named environment.</dd>
<dt><tt class="docutils literal"><span class="pre">-G</span> <span class="pre">GATEWAY</span></tt>, <tt class="docutils literal"><span class="pre">--ssh-gateway</span> <span class="pre">GATEWAY</span></tt></dt>
<dd>The SSH tunnel or gateway that is used to run a bootstrap action on a machine that is not accessible from the workstation.</dd>
<dt><tt class="docutils literal"><span class="pre">--hint</span> <span class="pre">HINT_NAME[=HINT_FILE]</span></tt></dt>
<dd><p class="first">An Ohai hint to be set on the target node.</p>
<p>Ohai hints are used to tell Ohai something about the system that it is running on that it would not be able to discover itself. An Ohai hint exists if a JSON file exists in the hint directory with the same name as the hint. For example, calling <tt class="docutils literal"><span class="pre">hint?('antarctica')</span></tt> in an Ohai plugin would return an empty hash if the file <tt class="docutils literal"><span class="pre">antarctica.json</span></tt> existed in the hints directory, and return nil if the file does not exist.</p>
<p>If the hint file contains JSON content, it will be returned as a hash from the call to <tt class="docutils literal"><span class="pre">hint?</span></tt>.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;snow&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">&quot;penguins&quot;</span><span class="o">:</span> <span class="s2">&quot;many&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">antarctica_hint</span> <span class="o">=</span> <span class="n">hint?</span><span class="p">(</span><span class="s1">&#39;antarctica&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">antarctica_hint</span><span class="o">[</span><span class="s1">&#39;snow&#39;</span><span class="o">]</span>
  <span class="s2">&quot;There are </span><span class="si">#{</span><span class="n">antarctica_hint</span><span class="o">[</span><span class="s1">&#39;penguins&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2"> penguins here.&quot;</span>
<span class="k">else</span>
  <span class="s1">&#39;There is no snow here, and penguins like snow.&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
<p>The default directory in which hint files are located is <tt class="docutils literal"><span class="pre">/etc/chef/ohai/hints/</span></tt>. Use the <tt class="docutils literal"><span class="pre">Ohai::Config[:hints_path]</span></tt> setting in the client.rb file to customize this location.</p>
<p class="last"><tt class="docutils literal"><span class="pre">HINT_FILE</span></tt> is the name of the JSON file. <tt class="docutils literal"><span class="pre">HINT_NAME</span></tt> is the name of a hint in a JSON file. Use multiple <tt class="docutils literal"><span class="pre">--hint</span></tt> options to specify multiple hints.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">-i</span> <span class="pre">IDENTITY_FILE</span></tt>, <tt class="docutils literal"><span class="pre">--ssh-identity-file</span> <span class="pre">IDENTITY_FILE</span></tt></dt>
<dd>The SSH identity file used for authentication. Key-based authentication is recommended.</dd>
<dt><tt class="docutils literal"><span class="pre">-j</span> <span class="pre">JSON_ATTRIBS</span></tt>, <tt class="docutils literal"><span class="pre">--json-attributes</span> <span class="pre">JSON_ATTRIBS</span></tt></dt>
<dd>A JSON string that is added to the first run of a chef-client.</dd>
<dt><tt class="docutils literal"><span class="pre">--json-attribute-file</span> <span class="pre">FILE</span></tt></dt>
<dd><p class="first">A JSON file to be added to the first run of chef-client.</p>
<p class="last">New in Chef client 12.6.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">-N</span> <span class="pre">NAME</span></tt>, <tt class="docutils literal"><span class="pre">--node-name</span> <span class="pre">NAME</span></tt></dt>
<dd><p class="first">The name of the node.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This option is required for a validatorless bootstrap (as of Chef client 12.4).</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--[no-]fips</span></tt></dt>
<dd>Allows OpenSSL to enforce FIPS-validated security during the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">--[no-]host-key-verify</span></tt></dt>
<dd>Use <tt class="docutils literal"><span class="pre">--no-host-key-verify</span></tt> to disable host key verification. Default setting: <tt class="docutils literal"><span class="pre">--host-key-verify</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--[no-]node-verify-api-cert</span></tt></dt>
<dd>Verify the SSL certificate on the Chef server. When <tt class="docutils literal"><span class="pre">true</span></tt>, the chef-client always verifies the SSL certificate. When <tt class="docutils literal"><span class="pre">false</span></tt>, the chef-client uses the value of <tt class="docutils literal"><span class="pre">ssl_verify_mode</span></tt> to determine if the SSL certificate requires verification. If this option is not specified, the setting for <tt class="docutils literal"><span class="pre">verify_api_cert</span></tt> in the configuration file is applied.</dd>
<dt><tt class="docutils literal"><span class="pre">--node-ssl-verify-mode</span> <span class="pre">PEER_OR_NONE</span></tt></dt>
<dd><p class="first">Set the verify mode for HTTPS requests.</p>
<p>Use <tt class="docutils literal"><span class="pre">none</span></tt> to do no validation of SSL certificates.</p>
<p class="last">Use <tt class="docutils literal"><span class="pre">peer</span></tt> to do validation of all SSL certificates, including the Chef server connections, S3 connections, and any HTTPS <strong>remote_file</strong> resource URLs used in the chef-client run. This is the recommended setting.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">-p</span> <span class="pre">PORT</span></tt>, <tt class="docutils literal"><span class="pre">--ssh-port</span> <span class="pre">PORT</span></tt></dt>
<dd>The SSH port.</dd>
<dt><tt class="docutils literal"><span class="pre">-P</span> <span class="pre">PASSWORD</span></tt>, <tt class="docutils literal"><span class="pre">--ssh-password</span> <span class="pre">PASSWORD</span></tt></dt>
<dd>The SSH password. This can be used to pass the password directly on the command line. If this option is not specified (and a password is required) knife prompts for the password.</dd>
<dt><tt class="docutils literal"><span class="pre">--prerelease</span></tt></dt>
<dd>Install pre-release gems.</dd>
<dt><tt class="docutils literal"><span class="pre">-r</span> <span class="pre">RUN_LIST</span></tt>, <tt class="docutils literal"><span class="pre">--run-list</span> <span class="pre">RUN_LIST</span></tt></dt>
<dd>A comma-separated list of roles and/or recipes to be applied.</dd>
<dt><tt class="docutils literal"><span class="pre">--secret</span> <span class="pre">SECRET</span></tt></dt>
<dd>The encryption key that is used for values contained within a data bag item.</dd>
<dt><tt class="docutils literal"><span class="pre">--secret-file</span> <span class="pre">FILE</span></tt></dt>
<dd>The path to the file that contains the encryption key.</dd>
<dt><tt class="docutils literal"><span class="pre">--sudo</span></tt></dt>
<dd>Execute a bootstrap operation with sudo.</dd>
<dt><tt class="docutils literal"><span class="pre">--sudo-preserve-home</span></tt></dt>
<dd>Use to preserve the non-root user&#8217;s <tt class="docutils literal"><span class="pre">HOME</span></tt> environment.</dd>
<dt><tt class="docutils literal"><span class="pre">-t</span> <span class="pre">TEMPLATE</span></tt>, <tt class="docutils literal"><span class="pre">--bootstrap-template</span> <span class="pre">TEMPLATE</span></tt></dt>
<dd>The bootstrap template to use. This may be the name of a bootstrap template&#8212;<tt class="docutils literal"><span class="pre">chef-full</span></tt>, for example&#8212;or it may be the full path to an Embedded Ruby (ERB) template that defines a custom bootstrap. Default value: <tt class="docutils literal"><span class="pre">chef-full</span></tt>, which installs the chef-client using the omnibus installer on all supported platforms.</dd>
<dt><tt class="docutils literal"><span class="pre">--use-sudo-password</span></tt></dt>
<dd>Perform a bootstrap operation with sudo; specify the password with the <tt class="docutils literal"><span class="pre">-P</span></tt> (or <tt class="docutils literal"><span class="pre">--ssh-password</span></tt>) option.</dd>
<dt><tt class="docutils literal"><span class="pre">-V</span> <span class="pre">-V</span></tt></dt>
<dd>Run the initial chef-client run at the <tt class="docutils literal"><span class="pre">debug</span></tt> log-level (e.g. <tt class="docutils literal"><span class="pre">chef-client</span> <span class="pre">-l</span> <span class="pre">debug</span></tt>).</dd>
<dt><tt class="docutils literal"><span class="pre">-x</span> <span class="pre">USERNAME</span></tt>, <tt class="docutils literal"><span class="pre">--ssh-user</span> <span class="pre">USERNAME</span></tt></dt>
<dd>The SSH user name.</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">See <a class="reference internal" href="config_rb_knife_optional_settings.html"><em>knife.rb</em></a> for more information about how to add certain knife options as settings in the knife.rb file.</p>
</div>
</div>
<div class="section" id="custom-templates">
<h4>Custom Templates<a class="headerlink" href="#custom-templates" title="Permalink to this headline"></a></h4>
<p>The <tt class="docutils literal"><span class="pre">chef-full</span></tt> distribution uses the omnibus installer. For most bootstrap operations, regardless of the platform on which the target node is running, using the <tt class="docutils literal"><span class="pre">chef-full</span></tt> distribution is the best approach for installing the chef-client on a target node. In some situations, using another supported distribution is necessary. And in some situations, a custom template may be required.</p>
<p>For example, the default bootstrap operation relies on an Internet connection to get the distribution to the target node. If a target node cannot access the Internet, then a custom template can be used to define a specific location for the distribution so that the target node may access it during the bootstrap operation.</p>
<p>For example, a bootstrap template file named &#8220;sea_power&#8221;:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife bootstrap 123.456.7.8 -x username -P password --sudo --bootstrap-template <span class="s2">&quot;sea_power&quot;</span>
</pre></div>
</div>
<p>The following examples show how a bootstrap template file can be customized for various platforms.</p>
<div class="section" id="microsoft-windows">
<h5>Microsoft Windows<a class="headerlink" href="#microsoft-windows" title="Permalink to this headline"></a></h5>
<p>The following example shows how to modify the default script for Microsoft Windows and Windows PowerShell:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>@setlocal

&lt;%<span class="o">=</span> <span class="s2">&quot;SETX HTTP_PROXY \&quot;#{knife_config[:bootstrap_proxy]}\&quot;&quot;</span> <span class="k">if</span> knife_config<span class="o">[</span>:bootstrap_proxy<span class="o">]</span> %&gt;
@mkdir &lt;%<span class="o">=</span> bootstrap_directory %&gt;

&gt; &lt;%<span class="o">=</span> bootstrap_directory %&gt;<span class="se">\w</span>get.ps1 <span class="o">(</span>
 &lt;%<span class="o">=</span> win_wget_ps %&gt;
<span class="o">)</span>

:install
@rem Install Chef using chef-client MSI installer

&lt;% <span class="nv">url</span><span class="o">=</span><span class="s2">&quot;http://reposerver.example.com/chef-client-12.0.2.windows.msi&quot;</span> -%&gt;
@set <span class="s2">&quot;REMOTE_SOURCE_MSI_URL=&lt;%= url %&gt;&quot;</span>
@set <span class="s2">&quot;LOCAL_DESTINATION_MSI_PATH=&lt;%= local_download_path %&gt;&quot;</span>

@powershell -ExecutionPolicy Unrestricted -NoProfile -NonInteractive <span class="s2">&quot;&amp; &#39;&lt;%= bootstrap_directory %&gt;\wget.ps1&#39; &#39;%REMOTE_SOURCE_MSI_URL%&#39; &#39;%LOCAL_DESTINATION_MSI_PATH%&#39;&quot;</span>

@REM Replace install_chef from knife-windows Gem with one that has extra flags to turn on Chef service feature -- only available in Chef &gt;<span class="o">=</span> 12.0.x
@REM &lt;%<span class="o">=</span> install_chef %&gt;
@echo Installing Chef Client 12.0.2 with msiexec
@msiexec /q /i <span class="s2">&quot;%LOCAL_DESTINATION_MSI_PATH%&quot;</span> <span class="nv">ADDLOCAL</span><span class="o">=</span><span class="s2">&quot;ChefClientFeature,ChefServiceFeature&quot;</span>
@endlocal

@echo Writing validation key...

&gt; &lt;%<span class="o">=</span> bootstrap_directory %&gt;<span class="se">\v</span>alidation.pem <span class="o">(</span>
 &lt;%<span class="o">=</span> validation_key %&gt;
<span class="o">)</span>

@echo Validation key written.

&lt;% <span class="k">if</span> @config<span class="o">[</span>:encrypted_data_bag_secret<span class="o">]</span> -%&gt;
&gt; &lt;%<span class="o">=</span> bootstrap_directory %&gt;<span class="se">\e</span>ncrypted_data_bag_secret <span class="o">(</span>
 &lt;%<span class="o">=</span> encrypted_data_bag_secret %&gt;
<span class="o">)</span>
&lt;% end -%&gt;

&gt; &lt;%<span class="o">=</span> bootstrap_directory %&gt;<span class="se">\c</span>lient.rb <span class="o">(</span>
 &lt;%<span class="o">=</span> config_content %&gt;
<span class="o">)</span>

&gt; &lt;%<span class="o">=</span> bootstrap_directory %&gt;<span class="se">\f</span>irst-boot.json <span class="o">(</span>
 &lt;%<span class="o">=</span> run_list %&gt;
<span class="o">)</span>

&lt;%<span class="o">=</span> start_chef %&gt;
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="knife-azure">
<h3>knife azure<a class="headerlink" href="#knife-azure" title="Permalink to this headline"></a></h3>
<p>Microsoft Azure is a cloud hosting platform from Microsoft that provides virtual machines for Linux and Windows Server, cloud and database services, and more. The <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">azure</span></tt> subcommand is used to manage API-driven cloud servers that are hosted by Microsoft Azure.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Review the list of <a class="reference external" href="https://docs.chef.io/knife_common_options.html">common options</a> available to this (and all) knife subcommands and plugins.</p>
</div>
<div class="section" id="install-this-plugin">
<h4>Install this plugin<a class="headerlink" href="#install-this-plugin" title="Permalink to this headline"></a></h4>
<p>To install the <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">azure</span></tt> plugin using RubyGems, run the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ /opt/chef/embedded/bin/gem install knife-azure
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">/opt/chef/embedded/bin/</span></tt> is the path to the location where the chef-client expects knife plugins to be located. If the chef-client was installed using RubyGems, omit the path in the previous example.</p>
</div>
<div class="section" id="generate-certificates">
<h4>Generate Certificates<a class="headerlink" href="#generate-certificates" title="Permalink to this headline"></a></h4>
<p>The <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">azure</span></tt> subcommand must use a management certificate for secure communication with Microsoft Azure. The management certificate is required for secure communication with the Microsoft Azure platform via the REST APIs. To generate the management certificate (.pem file):</p>
<ol class="arabic">
<li><p class="first">Download the settings file: <a class="reference external" href="http://go.microsoft.com/fwlink/?LinkId=254432">http://go.microsoft.com/fwlink/?LinkId=254432</a>.</p>
</li>
<li><p class="first">Extract the data from the <tt class="docutils literal"><span class="pre">ManagementCertificate</span></tt> field into a separate file named <tt class="docutils literal"><span class="pre">cert.pfx</span></tt>.</p>
</li>
<li><p class="first">Decode the certificate file with the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ base64 -d cert.pfx &gt; cert_decoded.pfx
</pre></div>
</div>
</li>
<li><p class="first">Convert the decoded PFX file to a PEM file with the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ openssl pkcs12 -in cert_decoded.pfx -out managementCertificate.pem -nodes
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is possible to generate certificates, and then upload them. See the following link for more information: www.windowsazure.com/en-us/manage/linux/common-tasks/manage-certificates/.</p>
</div>
</div>
<div class="section" id="ag-create">
<h4>ag create<a class="headerlink" href="#ag-create" title="Permalink to this headline"></a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">ag</span> <span class="pre">create</span></tt> argument to create an affinity group.</p>
<div class="section" id="id2">
<h5>Syntax<a class="headerlink" href="#id2" title="Permalink to this headline"></a></h5>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife azure ag create <span class="o">(</span>options<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h5>Options<a class="headerlink" href="#id3" title="Permalink to this headline"></a></h5>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">-a</span></tt>, <tt class="docutils literal"><span class="pre">--azure-affinity-group</span> <span class="pre">GROUP</span></tt></dt>
<dd>The affinity group to which the virtual machine belongs. Required when not using a service location. Required when not using <tt class="docutils literal"><span class="pre">--azure-service-location</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--azure-ag-desc</span> <span class="pre">DESCRIPTION</span></tt></dt>
<dd>The description of the Microsoft Azure affinity group.</dd>
<dt><tt class="docutils literal"><span class="pre">--azure-publish-settings-file</span> <span class="pre">FILE_NAME</span></tt></dt>
<dd>The name of the Azure Publish Settings file, including the path. For example: <tt class="docutils literal"><span class="pre">&quot;/path/to/your.publishsettings&quot;</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-H</span> <span class="pre">HOST_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--azure_host_name</span> <span class="pre">HOST_NAME</span></tt></dt>
<dd>The host name for the Microsoft Azure environment.</dd>
<dt><tt class="docutils literal"><span class="pre">-m</span> <span class="pre">LOCATION</span></tt>, <tt class="docutils literal"><span class="pre">--azure-service-location</span> <span class="pre">LOCATION</span></tt></dt>
<dd>The geographic location for a virtual machine and its services. Required when not using <tt class="docutils literal"><span class="pre">--azure-affinity-group</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-p</span> <span class="pre">FILE_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--azure-mgmt-cert</span> <span class="pre">FILE_NAME</span></tt></dt>
<dd>The name of the file that contains the SSH public key that is used when authenticating to Microsoft Azure.</dd>
<dt><tt class="docutils literal"><span class="pre">-S</span> <span class="pre">ID</span></tt>, <tt class="docutils literal"><span class="pre">--azure-subscription-id</span> <span class="pre">ID</span></tt></dt>
<dd>The subscription identifier for the Microsoft Azure portal.</dd>
<dt><tt class="docutils literal"><span class="pre">--verify-ssl-cert</span></tt></dt>
<dd>The SSL certificate used to verify communication over HTTPS.</dd>
</dl>
</div>
</div>
<div class="section" id="ag-list">
<h4>ag list<a class="headerlink" href="#ag-list" title="Permalink to this headline"></a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">ag</span> <span class="pre">list</span></tt> argument to get a list of affinity groups.</p>
<div class="section" id="id4">
<h5>Syntax<a class="headerlink" href="#id4" title="Permalink to this headline"></a></h5>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife azure ag list <span class="o">(</span>options<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id5">
<h5>Options<a class="headerlink" href="#id5" title="Permalink to this headline"></a></h5>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--azure-publish-settings-file</span> <span class="pre">FILE_NAME</span></tt></dt>
<dd>The name of the Azure Publish Settings file, including the path. For example: <tt class="docutils literal"><span class="pre">&quot;/path/to/your.publishsettings&quot;</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-H</span> <span class="pre">HOST_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--azure_host_name</span> <span class="pre">HOST_NAME</span></tt></dt>
<dd>The host name for the Microsoft Azure environment.</dd>
<dt><tt class="docutils literal"><span class="pre">-p</span> <span class="pre">FILE_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--azure-mgmt-cert</span> <span class="pre">FILE_NAME</span></tt></dt>
<dd>The name of the file that contains the SSH public key that is used when authenticating to Microsoft Azure.</dd>
<dt><tt class="docutils literal"><span class="pre">-S</span> <span class="pre">ID</span></tt>, <tt class="docutils literal"><span class="pre">--azure-subscription-id</span> <span class="pre">ID</span></tt></dt>
<dd>The subscription identifier for the Microsoft Azure portal.</dd>
<dt><tt class="docutils literal"><span class="pre">--verify-ssl-cert</span></tt></dt>
<dd>The SSL certificate used to verify communication over HTTPS.</dd>
</dl>
</div>
</div>
<div class="section" id="image-list">
<h4>image list<a class="headerlink" href="#image-list" title="Permalink to this headline"></a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">image</span> <span class="pre">list</span></tt> argument to get a list of images that exist in a Microsoft Azure environment. Any image in this list may be used for provisioning.</p>
<div class="section" id="id6">
<h5>Syntax<a class="headerlink" href="#id6" title="Permalink to this headline"></a></h5>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife azure image list <span class="o">(</span>options<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id7">
<h5>Options<a class="headerlink" href="#id7" title="Permalink to this headline"></a></h5>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--azure-publish-settings-file</span> <span class="pre">FILE_NAME</span></tt></dt>
<dd>The name of the Azure Publish Settings file, including the path. For example: <tt class="docutils literal"><span class="pre">&quot;/path/to/your.publishsettings&quot;</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--full</span></tt></dt>
<dd>Show all fields for all images.</dd>
<dt><tt class="docutils literal"><span class="pre">-H</span> <span class="pre">HOST_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--azure_host_name</span> <span class="pre">HOST_NAME</span></tt></dt>
<dd>The host name for the Microsoft Azure environment.</dd>
<dt><tt class="docutils literal"><span class="pre">-p</span> <span class="pre">FILE_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--azure-mgmt-cert</span> <span class="pre">FILE_NAME</span></tt></dt>
<dd>The name of the file that contains the SSH public key that is used when authenticating to Microsoft Azure.</dd>
<dt><tt class="docutils literal"><span class="pre">-S</span> <span class="pre">ID</span></tt>, <tt class="docutils literal"><span class="pre">--azure-subscription-id</span> <span class="pre">ID</span></tt></dt>
<dd>The subscription identifier for the Microsoft Azure portal.</dd>
<dt><tt class="docutils literal"><span class="pre">--verify-ssl-cert</span></tt></dt>
<dd>The SSL certificate used to verify communication over HTTPS.</dd>
</dl>
</div>
</div>
<div class="section" id="server-create">
<h4>server create<a class="headerlink" href="#server-create" title="Permalink to this headline"></a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">server</span> <span class="pre">create</span></tt> argument to create a new Microsoft Azure cloud instance. This will provision a new image in Microsoft Azure, perform a bootstrap (using the SSH protocol), and then install the chef-client on the target system so that it can be used to configure the node and to communicate with a Chef server.</p>
<div class="section" id="id8">
<h5>Syntax<a class="headerlink" href="#id8" title="Permalink to this headline"></a></h5>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife azure server create <span class="o">(</span>options<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id9">
<h5>Options<a class="headerlink" href="#id9" title="Permalink to this headline"></a></h5>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">-a</span></tt>, <tt class="docutils literal"><span class="pre">--azure-affinity-group</span> <span class="pre">GROUP</span></tt></dt>
<dd>The affinity group to which the virtual machine belongs. Required when not using a service location. Required when not using <tt class="docutils literal"><span class="pre">--azure-service-location</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--auto-update-client</span></tt></dt>
<dd>Enable automatic updates for the chef-client in Microsoft Azure. This option may only be used when <tt class="docutils literal"><span class="pre">--bootstrap-protocol</span></tt> is set to <tt class="docutils literal"><span class="pre">cloud-api</span></tt>. Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--azure-availability-set</span> <span class="pre">NAME</span></tt></dt>
<dd>The name of the availability set for the virtual machine.</dd>
<dt><tt class="docutils literal"><span class="pre">--azure-dns-name</span> <span class="pre">DNS_NAME</span></tt></dt>
<dd>Required. The name of the DNS prefix that is used to access the cloud service. This name must be unique within Microsoft Azure. Use with <tt class="docutils literal"><span class="pre">--azure-connect-to-existing-dns</span></tt> to use an existing DNS prefix.</dd>
<dt><tt class="docutils literal"><span class="pre">--azure-network-name</span> <span class="pre">NETWORK_NAME</span></tt></dt>
<dd>The network for the virtual machine.</dd>
<dt><tt class="docutils literal"><span class="pre">--azure-publish-settings-file</span> <span class="pre">FILE_NAME</span></tt></dt>
<dd>The name of the Azure Publish Settings file, including the path. For example: <tt class="docutils literal"><span class="pre">&quot;/path/to/your.publishsettings&quot;</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--azure-storage-account</span> <span class="pre">STORAGE_ACCOUNT_NAME</span></tt></dt>
<dd>The name of the storage account used with the hosted service. A storage account name may be between 3 and 24 characters (lower-case letters and numbers only) and must be unique within Microsoft Azure.</dd>
<dt><tt class="docutils literal"><span class="pre">--azure-subnet-name</span> <span class="pre">SUBNET_NAME</span></tt></dt>
<dd>The subnet for the virtual machine.</dd>
<dt><tt class="docutils literal"><span class="pre">--azure-vm-name</span> <span class="pre">NAME</span></tt></dt>
<dd>The name of the virtual machine. Must be unique within Microsoft Azure. Required for advanced server creation options.</dd>
<dt><tt class="docutils literal"><span class="pre">--azure-vm-ready-timeout</span> <span class="pre">TIMEOUT</span></tt></dt>
<dd>A number (in minutes) to wait for a virtual machine to reach the <tt class="docutils literal"><span class="pre">provisioning</span></tt> state. Default value: <tt class="docutils literal"><span class="pre">10</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--azure-vm-startup-timeout</span> <span class="pre">TIMEOUT</span></tt></dt>
<dd>A number (in minutes) to wait for a virtual machine to transition from the <tt class="docutils literal"><span class="pre">provisioning</span></tt> state to the <tt class="docutils literal"><span class="pre">ready</span></tt> state. Default value: <tt class="docutils literal"><span class="pre">15</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--bootstrap-protocol</span> <span class="pre">PROTOCOL</span></tt></dt>
<dd><p class="first">The protocol used to bootstrap on a machine that is running Windows Server: <tt class="docutils literal"><span class="pre">cloud-api</span></tt>, <tt class="docutils literal"><span class="pre">ssh</span></tt>, or <tt class="docutils literal"><span class="pre">winrm</span></tt>. Default value: <tt class="docutils literal"><span class="pre">winrm</span></tt>.</p>
<p>Use the <tt class="docutils literal"><span class="pre">cloud-api</span></tt> option to bootstrap a machine in Microsoft Azure. The bootstrap operation will enable the guest agent to install, configure, and run the chef-client on a node, after which the chef-client is configured to run as a daemon/service. (This is a similar process to using the Azure portal.)</p>
<p>Microsoft Azure maintains images of the chef-client on the guest, so connectivity between the guest and the workstation from which the bootstrap operation was initiated is not required, after a <tt class="docutils literal"><span class="pre">cloud-api</span></tt> bootstrap is started.</p>
<p class="last">During the <tt class="docutils literal"><span class="pre">cloud-api</span></tt> bootstrap operation, knife does not print the output of the chef-client run like it does when the <tt class="docutils literal"><span class="pre">winrm</span></tt> and <tt class="docutils literal"><span class="pre">ssh</span></tt> options are used. knife reports only on the status of the bootstrap process: <tt class="docutils literal"><span class="pre">provisioning</span></tt>, <tt class="docutils literal"><span class="pre">installing</span></tt>, <tt class="docutils literal"><span class="pre">ready</span></tt>, and so on, along with reporting errors.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--bootstrap-version</span> <span class="pre">VERSION</span></tt></dt>
<dd>The version of the chef-client to install.</dd>
<dt><tt class="docutils literal"><span class="pre">-c</span></tt>, <tt class="docutils literal"><span class="pre">--azure-connect-to-existing-dns</span></tt></dt>
<dd>Add a new virtual machine to the existing deployment and/or service. Use with <tt class="docutils literal"><span class="pre">--azure-dns-name</span></tt> to ensure the correct DNS is used.</dd>
<dt><tt class="docutils literal"><span class="pre">--cert-passphrase</span> <span class="pre">PASSWORD</span></tt></dt>
<dd>The password for the SSL certificate.</dd>
<dt><tt class="docutils literal"><span class="pre">--cert-path</span> <span class="pre">PATH</span></tt></dt>
<dd>The path to the location of the SSL certificate.</dd>
<dt><tt class="docutils literal"><span class="pre">-d</span> <span class="pre">DISTRO</span></tt>, <tt class="docutils literal"><span class="pre">--distro</span> <span class="pre">DISTRO</span></tt></dt>
<dd><p class="first">The template file to be used during a bootstrap operation. The following distributions are supported:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">chef-full</span></tt> (the default bootstrap)</li>
<li><tt class="docutils literal"><span class="pre">centos5-gems</span></tt></li>
<li><tt class="docutils literal"><span class="pre">fedora13-gems</span></tt></li>
<li><tt class="docutils literal"><span class="pre">ubuntu10.04-gems</span></tt></li>
<li><tt class="docutils literal"><span class="pre">ubuntu10.04-apt</span></tt></li>
<li><tt class="docutils literal"><span class="pre">ubuntu12.04-gems</span></tt></li>
<li>The name of a custom bootstrap template file.</li>
</ul>
<p>When this option is used, knife searches for the template file in the following order:</p>
<ol class="arabic simple">
<li>The <tt class="docutils literal"><span class="pre">bootstrap/</span></tt> folder in the current working directory</li>
<li>The <tt class="docutils literal"><span class="pre">bootstrap/</span></tt> folder in the chef-repo</li>
<li>The <tt class="docutils literal"><span class="pre">bootstrap/</span></tt> folder in the <tt class="docutils literal"><span class="pre">~/.chef/</span></tt> directory</li>
<li>A default bootstrap file.</li>
</ol>
<p class="last">Do not use the <tt class="docutils literal"><span class="pre">--template-file</span></tt> option when <tt class="docutils literal"><span class="pre">--distro</span></tt> is specified.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">-H</span> <span class="pre">HOST_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--azure_host_name</span> <span class="pre">HOST_NAME</span></tt></dt>
<dd>The host name for the virtual machine.</dd>
<dt><tt class="docutils literal"><span class="pre">--hint</span> <span class="pre">HINT_NAME[=HINT_FILE]</span></tt></dt>
<dd><p class="first">An Ohai hint to be set on the target node.</p>
<p>Ohai hints are used to tell Ohai something about the system that it is running on that it would not be able to discover itself. An Ohai hint exists if a JSON file exists in the hint directory with the same name as the hint. For example, calling <tt class="docutils literal"><span class="pre">hint?('antarctica')</span></tt> in an Ohai plugin would return an empty hash if the file <tt class="docutils literal"><span class="pre">antarctica.json</span></tt> existed in the hints directory, and return nil if the file does not exist.</p>
<p>If the hint file contains JSON content, it will be returned as a hash from the call to <tt class="docutils literal"><span class="pre">hint?</span></tt>.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;snow&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">&quot;penguins&quot;</span><span class="o">:</span> <span class="s2">&quot;many&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">antarctica_hint</span> <span class="o">=</span> <span class="n">hint?</span><span class="p">(</span><span class="s1">&#39;antarctica&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">antarctica_hint</span><span class="o">[</span><span class="s1">&#39;snow&#39;</span><span class="o">]</span>
  <span class="s2">&quot;There are </span><span class="si">#{</span><span class="n">antarctica_hint</span><span class="o">[</span><span class="s1">&#39;penguins&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2"> penguins here.&quot;</span>
<span class="k">else</span>
  <span class="s1">&#39;There is no snow here, and penguins like snow.&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
<p>The default directory in which hint files are located is <tt class="docutils literal"><span class="pre">/etc/chef/ohai/hints/</span></tt>. Use the <tt class="docutils literal"><span class="pre">Ohai::Config[:hints_path]</span></tt> setting in the client.rb file to customize this location.</p>
<p class="last"><tt class="docutils literal"><span class="pre">HINT_FILE</span></tt> is the name of the JSON file. <tt class="docutils literal"><span class="pre">HINT_NAME</span></tt> is the name of a hint in a JSON file. Use multiple <tt class="docutils literal"><span class="pre">--hint</span></tt> options to specify multiple hints.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--host-name</span> <span class="pre">HOST_NAME</span></tt></dt>
<dd>The host name for the Microsoft Azure environment.</dd>
<dt><tt class="docutils literal"><span class="pre">-I</span> <span class="pre">IMAGE</span></tt>, <tt class="docutils literal"><span class="pre">--azure-source-image</span> <span class="pre">IMAGE</span></tt></dt>
<dd>The name of the disk image to be used to create the virtual machine.</dd>
<dt><tt class="docutils literal"><span class="pre">--identity-file</span> <span class="pre">IDENTITY_FILE</span></tt></dt>
<dd>The SSH identity file used for authentication. Key-based authentication is recommended.</dd>
<dt><tt class="docutils literal"><span class="pre">--identity-file_passphrase</span> <span class="pre">PASSWORD</span></tt></dt>
<dd>The passphrase for the SSH key. Use only with <tt class="docutils literal"><span class="pre">--identity-file</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-j</span> <span class="pre">JSON_ATTRIBS</span></tt>, <tt class="docutils literal"><span class="pre">--json-attributes</span> <span class="pre">JSON_ATTRIBS</span></tt></dt>
<dd>A JSON string that is added to the first run of a chef-client.</dd>
<dt><tt class="docutils literal"><span class="pre">-m</span> <span class="pre">LOCATION</span></tt>, <tt class="docutils literal"><span class="pre">--azure-service-location</span> <span class="pre">LOCATION</span></tt></dt>
<dd>The geographic location for a virtual machine and its services. Required when not using <tt class="docutils literal"><span class="pre">--azure-affinity-group</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-N</span> <span class="pre">NAME</span></tt>, <tt class="docutils literal"><span class="pre">--node-name</span> <span class="pre">NAME</span></tt></dt>
<dd>The name of the node. Node names, when used with Microsoft Azure, must be 91 characters or shorter.</dd>
<dt><tt class="docutils literal"><span class="pre">--[no-]host-key-verify</span></tt></dt>
<dd>Use <tt class="docutils literal"><span class="pre">--no-host-key-verify</span></tt> to disable host key verification. Default setting: <tt class="docutils literal"><span class="pre">--host-key-verify</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-o</span> <span class="pre">DISK_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--azure-os-disk-name</span> <span class="pre">DISK_NAME</span></tt></dt>
<dd>The operating system type of the Microsoft Azure OS image: <tt class="docutils literal"><span class="pre">Linux</span></tt> or <tt class="docutils literal"><span class="pre">Windows</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-p</span> <span class="pre">FILE_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--azure-mgmt-cert</span> <span class="pre">FILE_NAME</span></tt></dt>
<dd>The name of the file that contains the SSH public key that is used when authenticating to Microsoft Azure.</dd>
<dt><tt class="docutils literal"><span class="pre">-P</span> <span class="pre">PASSWORD</span></tt>, <tt class="docutils literal"><span class="pre">--ssh-password</span> <span class="pre">PASSWORD</span></tt></dt>
<dd>The SSH password. This can be used to pass the password directly on the command line. If this option is not specified (and a password is required) knife prompts for the password.</dd>
<dt><tt class="docutils literal"><span class="pre">--prerelease</span></tt></dt>
<dd>Install pre-release gems.</dd>
<dt><tt class="docutils literal"><span class="pre">-r</span> <span class="pre">RUN_LIST</span></tt>, <tt class="docutils literal"><span class="pre">--run-list</span> <span class="pre">RUN_LIST</span></tt></dt>
<dd>A comma-separated list of roles and/or recipes to be applied.</dd>
<dt><tt class="docutils literal"><span class="pre">-R</span> <span class="pre">ROLE_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--role-name</span> <span class="pre">ROLE_NAME</span></tt></dt>
<dd>The name of the virtual machine.</dd>
<dt><tt class="docutils literal"><span class="pre">--ssh-port</span> <span class="pre">PORT</span></tt></dt>
<dd>The SSH port. Default value: <tt class="docutils literal"><span class="pre">22</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-t</span> <span class="pre">PORT_LIST</span></tt>, <tt class="docutils literal"><span class="pre">--tcp-endpoints</span> <span class="pre">PORT_LIST</span></tt></dt>
<dd>A comma-separated list of local and public TCP ports that are to be opened. For example: <tt class="docutils literal"><span class="pre">80:80,433:5000</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--template-file</span> <span class="pre">TEMPLATE</span></tt></dt>
<dd>The path to a template file to be used during a bootstrap operation.</dd>
<dt><tt class="docutils literal"><span class="pre">--thumbprint</span> <span class="pre">THUMBPRINT</span></tt></dt>
<dd>The thumbprint of the SSL certificate.</dd>
<dt><tt class="docutils literal"><span class="pre">-u</span> <span class="pre">PORT_LIST</span></tt>, <tt class="docutils literal"><span class="pre">---udp-endpoints</span> <span class="pre">PORT_LIST</span></tt></dt>
<dd>A comma-separated list of local and public UDP ports that are to be opened. For example: <tt class="docutils literal"><span class="pre">80:80,433:5000</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--verify-ssl-cert</span></tt></dt>
<dd>The SSL certificate used to verify communication over HTTPS.</dd>
<dt><tt class="docutils literal"><span class="pre">--windows-auth-timeout</span> <span class="pre">MINUTES</span></tt></dt>
<dd>The amount of time (in minutes) to wait for authentication to succeed. Default value: <tt class="docutils literal"><span class="pre">25</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-x</span> <span class="pre">USER_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--ssh-user</span> <span class="pre">USER_NAME</span></tt></dt>
<dd>The SSH user name.</dd>
<dt><tt class="docutils literal"><span class="pre">-z</span> <span class="pre">SIZE</span></tt>, <tt class="docutils literal"><span class="pre">--azure-vm-size</span> <span class="pre">SIZE</span></tt></dt>
<dd>The size of the virtual machine: <tt class="docutils literal"><span class="pre">ExtraSmall</span></tt>, <tt class="docutils literal"><span class="pre">Small</span></tt>, <tt class="docutils literal"><span class="pre">Medium</span></tt>, <tt class="docutils literal"><span class="pre">Large</span></tt>, or <tt class="docutils literal"><span class="pre">ExtraLarge</span></tt>. Default value: <tt class="docutils literal"><span class="pre">Small</span></tt>.</dd>
</dl>
</div>
<div class="section" id="examples">
<h5>Examples<a class="headerlink" href="#examples" title="Permalink to this headline"></a></h5>
<p><strong>Provision an instance using new hosted service and storage accounts</strong></p>
<p>To provision a medium-sized CentOS machine configured as a web server in the <tt class="docutils literal"><span class="pre">West</span> <span class="pre">US</span></tt> data center, while reusing existing hosted service and storage accounts, enter something like:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife azure server create -r <span class="s2">&quot;role[webserver]&quot;</span> --service-location <span class="s2">&quot;West US&quot;</span>
  --hosted-service-name webservers --storage-account webservers-storage --ssh-user foo
  --ssh--password password --role-name web-apache-0001 --host-name web-apache
  --tcp-endpoints 80:80,8080:8080 --source-image name_of_source_image --role-size Medium
</pre></div>
</div>
<p><strong>Provision an instance using new hosted service and storage accounts</strong></p>
<p>To provision a medium-sized CentOS machine configured as a web server in the <tt class="docutils literal"><span class="pre">West</span> <span class="pre">US</span></tt> data center, while also creating new hosted service and storage accounts, enter something like:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife azure server create -r <span class="s2">&quot;role[webserver]&quot;</span> --service-location <span class="s2">&quot;West US&quot;</span> --ssh-user foo
  --ssh--password password --role-name web-apache-0001 --host-name web-apache
  --tcp-endpoints 80:80,8080:8080 --source-image name_of_source_image --role-size Medium
</pre></div>
</div>
</div>
</div>
<div class="section" id="server-delete">
<h4>server delete<a class="headerlink" href="#server-delete" title="Permalink to this headline"></a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">server</span> <span class="pre">delete</span></tt> argument to delete one or more instances that are running in the Microsoft Azure cloud. To find a specific cloud instance, use <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">azure</span> <span class="pre">server</span> <span class="pre">list</span></tt>. Use the <tt class="docutils literal"><span class="pre">--purge</span></tt> option to delete all associated node and client objects from the Chef server or use the <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">node</span> <span class="pre">delete</span></tt> and <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">client</span> <span class="pre">delete</span></tt> subcommands to delete specific node and client objects.</p>
<div class="section" id="id10">
<h5>Syntax<a class="headerlink" href="#id10" title="Permalink to this headline"></a></h5>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife azure server delete <span class="o">[</span>SERVER...<span class="o">]</span> <span class="o">(</span>options<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id11">
<h5>Options<a class="headerlink" href="#id11" title="Permalink to this headline"></a></h5>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--azure-dns-name</span> <span class="pre">NAME</span></tt></dt>
<dd>The name of the DNS server (also known as the Hosted Service Name).</dd>
<dt><tt class="docutils literal"><span class="pre">--azure-publish-settings-file</span> <span class="pre">FILE_NAME</span></tt></dt>
<dd>The name of the Azure Publish Settings file, including the path. For example: <tt class="docutils literal"><span class="pre">&quot;/path/to/your.publishsettings&quot;</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--delete-azure-storage-account</span></tt></dt>
<dd>Delete any corresponding storage account. When this option is <tt class="docutils literal"><span class="pre">true</span></tt>, any storage account not used by any virtual machine is deleted.</dd>
<dt><tt class="docutils literal"><span class="pre">-H</span> <span class="pre">HOST_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--azure_host_name</span> <span class="pre">HOST_NAME</span></tt></dt>
<dd>The host name for the Microsoft Azure environment.</dd>
<dt><tt class="docutils literal"><span class="pre">-N</span> <span class="pre">NODE_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--node-name</span> <span class="pre">NODE_NAME</span></tt></dt>
<dd>The name of the node to be deleted, if different from the server name. This must be used with the <tt class="docutils literal"><span class="pre">-p</span></tt> (purge) option.</dd>
<dt><tt class="docutils literal"><span class="pre">-p</span> <span class="pre">FILE_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--azure-mgmt-cert</span> <span class="pre">FILE_NAME</span></tt></dt>
<dd>The name of the file that contains the SSH public key that is used when authenticating to Microsoft Azure.</dd>
<dt><tt class="docutils literal"><span class="pre">-P</span></tt>, <tt class="docutils literal"><span class="pre">--purge</span></tt></dt>
<dd>Destroy all corresponding nodes and clients on the Chef server, in addition to the Microsoft Azure node itself. This action (by itself) assumes that the node and client have the same name as the server; if they do not have the same names, then the <tt class="docutils literal"><span class="pre">--node-name</span></tt> option must be used to specify the name of the node.</dd>
<dt><tt class="docutils literal"><span class="pre">--preserve-azure-dns-name</span></tt></dt>
<dd>Preserve the DNS entries for the corresponding cloud services. If this option is <tt class="docutils literal"><span class="pre">false</span></tt>, any service not used by any virtual machine is deleted.</dd>
<dt><tt class="docutils literal"><span class="pre">--preserve-azure-os-disk</span></tt></dt>
<dd>Preserve the corresponding operating system disk.</dd>
<dt><tt class="docutils literal"><span class="pre">--preserve-azure-vhd</span></tt></dt>
<dd>Preserve the underlying virtual hard disk (VHD).</dd>
<dt><tt class="docutils literal"><span class="pre">-S</span> <span class="pre">ID</span></tt>, <tt class="docutils literal"><span class="pre">--azure-subscription-id</span> <span class="pre">ID</span></tt></dt>
<dd>The subscription identifier for the Microsoft Azure portal.</dd>
<dt><tt class="docutils literal"><span class="pre">--verify-ssl-cert</span></tt></dt>
<dd>The SSL certificate used to verify communication over HTTPS.</dd>
<dt><tt class="docutils literal"><span class="pre">--wait</span></tt></dt>
<dd>Pause the console until the server has finished processing the request.</dd>
</dl>
</div>
<div class="section" id="id12">
<h5>Examples<a class="headerlink" href="#id12" title="Permalink to this headline"></a></h5>
<p><strong>Delete an instance</strong></p>
<p>To delete an instance named <tt class="docutils literal"><span class="pre">devops12</span></tt>, enter:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife azure server delete devops12
</pre></div>
</div>
</div>
</div>
<div class="section" id="server-describe">
<h4>server describe<a class="headerlink" href="#server-describe" title="Permalink to this headline"></a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">server</span> <span class="pre">describe</span></tt> argument to view a detailed description of one (or more) roles that exist in a Microsoft Azure cloud instance. For each specified role name, information such as status, size, hosted service name, deployment name, ports (open, local, public) and IP are displayed.</p>
<div class="section" id="id13">
<h5>Syntax<a class="headerlink" href="#id13" title="Permalink to this headline"></a></h5>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife azure server describe <span class="o">[</span>ROLE_NAME...<span class="o">]</span> <span class="o">(</span>options<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id14">
<h5>Options<a class="headerlink" href="#id14" title="Permalink to this headline"></a></h5>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--azure-publish-settings-file</span> <span class="pre">FILE_NAME</span></tt></dt>
<dd>The name of the Azure Publish Settings file, including the path. For example: <tt class="docutils literal"><span class="pre">&quot;/path/to/your.publishsettings&quot;</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-H</span> <span class="pre">HOST_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--azure_host_name</span> <span class="pre">HOST_NAME</span></tt></dt>
<dd>The host name for the Microsoft Azure environment.</dd>
<dt><tt class="docutils literal"><span class="pre">-p</span> <span class="pre">FILE_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--azure-mgmt-cert</span> <span class="pre">FILE_NAME</span></tt></dt>
<dd>The name of the file that contains the SSH public key that is used when authenticating to Microsoft Azure.</dd>
<dt><tt class="docutils literal"><span class="pre">-S</span> <span class="pre">ID</span></tt>, <tt class="docutils literal"><span class="pre">--azure-subscription-id</span> <span class="pre">ID</span></tt></dt>
<dd>The subscription identifier for the Microsoft Azure portal.</dd>
<dt><tt class="docutils literal"><span class="pre">--verify-ssl-cert</span></tt></dt>
<dd>The SSL certificate used to verify communication over HTTPS.</dd>
</dl>
</div>
<div class="section" id="id15">
<h5>Examples<a class="headerlink" href="#id15" title="Permalink to this headline"></a></h5>
<p><strong>View role details</strong></p>
<p>To view the details for a role named <tt class="docutils literal"><span class="pre">admin</span></tt>, enter:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife azure server describe admin
</pre></div>
</div>
</div>
</div>
<div class="section" id="server-list">
<h4>server list<a class="headerlink" href="#server-list" title="Permalink to this headline"></a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">server</span> <span class="pre">list</span></tt> argument to find instances that are associated with a Microsoft Azure account. The results may show instances that are not currently managed by the Chef server.</p>
<div class="section" id="id16">
<h5>Syntax<a class="headerlink" href="#id16" title="Permalink to this headline"></a></h5>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife azure server list <span class="o">(</span>options<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id17">
<h5>Options<a class="headerlink" href="#id17" title="Permalink to this headline"></a></h5>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--azure-publish-settings-file</span> <span class="pre">FILE_NAME</span></tt></dt>
<dd>The name of the Azure Publish Settings file, including the path. For example: <tt class="docutils literal"><span class="pre">&quot;/path/to/your.publishsettings&quot;</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-H</span> <span class="pre">HOST_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--azure_host_name</span> <span class="pre">HOST_NAME</span></tt></dt>
<dd>The host name for the Microsoft Azure environment.</dd>
<dt><tt class="docutils literal"><span class="pre">-p</span> <span class="pre">FILE_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--azure-mgmt-cert</span> <span class="pre">FILE_NAME</span></tt></dt>
<dd>The name of the file that contains the SSH public key that is used when authenticating to Microsoft Azure.</dd>
<dt><tt class="docutils literal"><span class="pre">-S</span> <span class="pre">ID</span></tt>, <tt class="docutils literal"><span class="pre">--azure-subscription-id</span> <span class="pre">ID</span></tt></dt>
<dd>The subscription identifier for the Microsoft Azure portal.</dd>
<dt><tt class="docutils literal"><span class="pre">--verify-ssl-cert</span></tt></dt>
<dd>The SSL certificate used to verify communication over HTTPS.</dd>
</dl>
</div>
</div>
<div class="section" id="server-show">
<h4>server show<a class="headerlink" href="#server-show" title="Permalink to this headline"></a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">server</span> <span class="pre">show</span></tt> argument to show the details for the named server (or servers).</p>
<div class="section" id="id18">
<h5>Syntax<a class="headerlink" href="#id18" title="Permalink to this headline"></a></h5>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife azure server show SERVER <span class="o">[</span>SERVER...<span class="o">]</span> <span class="o">(</span>options<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id19">
<h5>Options<a class="headerlink" href="#id19" title="Permalink to this headline"></a></h5>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--azure-publish-settings-file</span> <span class="pre">FILE_NAME</span></tt></dt>
<dd>The name of the Azure Publish Settings file, including the path. For example: <tt class="docutils literal"><span class="pre">&quot;/path/to/your.publishsettings&quot;</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-H</span> <span class="pre">HOST_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--azure_host_name</span> <span class="pre">HOST_NAME</span></tt></dt>
<dd>The host name for the Microsoft Azure environment.</dd>
<dt><tt class="docutils literal"><span class="pre">-p</span> <span class="pre">FILE_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--azure-mgmt-cert</span> <span class="pre">FILE_NAME</span></tt></dt>
<dd>The name of the file that contains the SSH public key that is used when authenticating to Microsoft Azure.</dd>
<dt><tt class="docutils literal"><span class="pre">-S</span> <span class="pre">ID</span></tt>, <tt class="docutils literal"><span class="pre">--azure-subscription-id</span> <span class="pre">ID</span></tt></dt>
<dd>The subscription identifier for the Microsoft Azure portal.</dd>
<dt><tt class="docutils literal"><span class="pre">--verify-ssl-cert</span></tt></dt>
<dd>The SSL certificate used to verify communication over HTTPS.</dd>
</dl>
</div>
</div>
<div class="section" id="vnet-create">
<h4>vnet create<a class="headerlink" href="#vnet-create" title="Permalink to this headline"></a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">vnet</span> <span class="pre">create</span></tt> argument to create a virtual network.</p>
<div class="section" id="id20">
<h5>Syntax<a class="headerlink" href="#id20" title="Permalink to this headline"></a></h5>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife azure vnet create <span class="o">(</span>options<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id21">
<h5>Options<a class="headerlink" href="#id21" title="Permalink to this headline"></a></h5>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">-a</span></tt>, <tt class="docutils literal"><span class="pre">--azure-affinity-group</span> <span class="pre">GROUP</span></tt></dt>
<dd>The affinity group to which the virtual machine belongs. Required when not using a service location.</dd>
<dt><tt class="docutils literal"><span class="pre">--azure-address-space</span> <span class="pre">CIDR</span></tt></dt>
<dd>The address space of the virtual network. Use with classless inter-domain routing (CIDR) notation.</dd>
<dt><tt class="docutils literal"><span class="pre">--azure-publish-settings-file</span> <span class="pre">FILE_NAME</span></tt></dt>
<dd>The name of the Azure Publish Settings file, including the path. For example: <tt class="docutils literal"><span class="pre">&quot;/path/to/your.publishsettings&quot;</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--azure-subnet-name</span> <span class="pre">CIDR</span></tt></dt>
<dd>The subnet for the virtual machine. Use with classless inter-domain routing (CIDR) notation.</dd>
<dt><tt class="docutils literal"><span class="pre">-H</span> <span class="pre">HOST_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--azure_host_name</span> <span class="pre">HOST_NAME</span></tt></dt>
<dd>The host name for the Microsoft Azure environment.</dd>
<dt><tt class="docutils literal"><span class="pre">-n</span></tt>, <tt class="docutils literal"><span class="pre">--azure-network-name</span> <span class="pre">NETWORK_NAME</span></tt></dt>
<dd>The network for the virtual machine.</dd>
<dt><tt class="docutils literal"><span class="pre">-p</span> <span class="pre">FILE_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--azure-mgmt-cert</span> <span class="pre">FILE_NAME</span></tt></dt>
<dd>The name of the file that contains the SSH public key that is used when authenticating to Microsoft Azure.</dd>
<dt><tt class="docutils literal"><span class="pre">-S</span> <span class="pre">ID</span></tt>, <tt class="docutils literal"><span class="pre">--azure-subscription-id</span> <span class="pre">ID</span></tt></dt>
<dd>The subscription identifier for the Microsoft Azure portal.</dd>
<dt><tt class="docutils literal"><span class="pre">--verify-ssl-cert</span></tt></dt>
<dd>The SSL certificate used to verify communication over HTTPS.</dd>
</dl>
</div>
</div>
<div class="section" id="vnet-list">
<h4>vnet list<a class="headerlink" href="#vnet-list" title="Permalink to this headline"></a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">vnet</span> <span class="pre">list</span></tt> argument to get a list of virtual networks.</p>
<div class="section" id="id22">
<h5>Syntax<a class="headerlink" href="#id22" title="Permalink to this headline"></a></h5>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife azure vnet list <span class="o">(</span>options<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id23">
<h5>Options<a class="headerlink" href="#id23" title="Permalink to this headline"></a></h5>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--azure-publish-settings-file</span> <span class="pre">FILE_NAME</span></tt></dt>
<dd>The name of the Azure Publish Settings file, including the path. For example: <tt class="docutils literal"><span class="pre">&quot;/path/to/your.publishsettings&quot;</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-H</span> <span class="pre">HOST_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--azure_host_name</span> <span class="pre">HOST_NAME</span></tt></dt>
<dd>The host name for the Microsoft Azure environment.</dd>
<dt><tt class="docutils literal"><span class="pre">-p</span> <span class="pre">FILE_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--azure-mgmt-cert</span> <span class="pre">FILE_NAME</span></tt></dt>
<dd>The name of the file that contains the SSH public key that is used when authenticating to Microsoft Azure.</dd>
<dt><tt class="docutils literal"><span class="pre">-S</span> <span class="pre">ID</span></tt>, <tt class="docutils literal"><span class="pre">--azure-subscription-id</span> <span class="pre">ID</span></tt></dt>
<dd>The subscription identifier for the Microsoft Azure portal.</dd>
<dt><tt class="docutils literal"><span class="pre">--verify-ssl-cert</span></tt></dt>
<dd>The SSL certificate used to verify communication over HTTPS.</dd>
</dl>
</div>
</div>
</div>
<div class="section" id="id24">
<h3>knife windows<a class="headerlink" href="#id24" title="Permalink to this headline"></a></h3>
<p>The <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">windows</span></tt> subcommand is used to configure and interact with nodes that exist on server and/or desktop machines that are running Microsoft Windows. Nodes are configured using WinRM, which allows native objects&#8212;batch scripts, Windows PowerShell scripts, or scripting library variables&#8212;to be called by external applications. The <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">windows</span></tt> subcommand supports NTLM and Kerberos methods of authentication.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Review the list of <a class="reference external" href="https://docs.chef.io/knife_common_options.html">common options</a> available to this (and all) knife subcommands and plugins.</p>
</div>
<div class="section" id="id25">
<h4>Install this plugin<a class="headerlink" href="#id25" title="Permalink to this headline"></a></h4>
<p>To install the <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">windows</span></tt> plugin using RubyGems, run the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ /opt/chef/embedded/bin/gem install knife-windows
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">/opt/chef/embedded/bin/</span></tt> is the path to the location where the chef-client expects knife plugins to be located. If the chef-client was installed using RubyGems, omit the path in the previous example.</p>
</div>
<div class="section" id="requirements">
<h4>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline"></a></h4>
<p>This subcommand requires WinRM to be installed, and then configured correctly, including ensuring the correct ports are open. For more information, see: <a class="reference external" href="http://msdn.microsoft.com/en-us/library/aa384372(v=vs.85).aspx">http://msdn.microsoft.com/en-us/library/aa384372(v=vs.85).aspx</a> and/or <a class="reference external" href="http://support.microsoft.com/kb/968930">http://support.microsoft.com/kb/968930</a>. Use the quick configuration option in WinRM to allow outside connections and the entire network path from knife (and the workstation):</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ winrm quickconfig -q
</pre></div>
</div>
<p>The following WinRM configuration settings should be updated:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Setting</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">MaxMemoryPerShellMB</span></tt></td>
<td>The chef-client and Ohai typically require more memory than the default setting allows. Increase this value to <tt class="docutils literal"><span class="pre">300MB</span></tt>. Only required on Windows Server 2008 R2 Standard and older. The default in Windows Server 2012 was increased to <tt class="docutils literal"><span class="pre">1024MB</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">MaxTimeoutms</span></tt></td>
<td>A bootstrap command can take longer than allowed by the default setting. Increase this value to <tt class="docutils literal"><span class="pre">1800000</span></tt> (30 minutes).</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">AllowUnencrypted</span></tt></td>
<td>Set this value to <tt class="docutils literal"><span class="pre">true</span></tt> for development and testing purposes.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">Basic</span></tt></td>
<td>Set this value to <tt class="docutils literal"><span class="pre">true</span></tt> for development and testing purposes. The <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">windows</span></tt> subcommand supports Kerberos and Basic authentication schemes.</td>
</tr>
</tbody>
</table>
<p>To update these settings, run the following commands:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ winrm <span class="nb">set</span> winrm/config/winrs <span class="s1">&#39;@{MaxMemoryPerShellMB=&quot;300&quot;}&#39;</span>
</pre></div>
</div>
<p>and:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ winrm <span class="nb">set</span> winrm/config <span class="s1">&#39;@{MaxTimeoutms=&quot;1800000&quot;}&#39;</span>
</pre></div>
</div>
<p>and:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ winrm <span class="nb">set</span> winrm/config/service <span class="s1">&#39;@{AllowUnencrypted=&quot;true&quot;}&#39;</span>
</pre></div>
</div>
<p>and then:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ winrm <span class="nb">set</span> winrm/config/service/auth <span class="s1">&#39;@{Basic=&quot;true&quot;}&#39;</span>
</pre></div>
</div>
<p>Ensure that the Windows Firewall is configured to allow WinRM connections between the workstation and the Chef server. For example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ netsh advfirewall firewall <span class="nb">set</span> rule <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;Windows Remote Management (HTTP-In)&quot;</span> <span class="nv">profile</span><span class="o">=</span>public <span class="nv">protocol</span><span class="o">=</span>tcp <span class="nv">localport</span><span class="o">=</span><span class="m">5985</span> <span class="nv">remoteip</span><span class="o">=</span>localsubnet new <span class="nv">remoteip</span><span class="o">=</span>any
</pre></div>
</div>
<div class="section" id="negotiate-ntlm">
<h5>Negotiate, NTLM<a class="headerlink" href="#negotiate-ntlm" title="Permalink to this headline"></a></h5>
<p>When knife is executed from a Microsoft Windows system, it is no longer necessary to make additional configuration of the WinRM listener on the target node to enable successful authentication from the workstation. It is sufficient to have a WinRM listener on the remote node configured to use the default configuration for <tt class="docutils literal"><span class="pre">winrm</span> <span class="pre">quickconfig</span></tt>. This is because <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">windows</span></tt> supports the Microsoft Windows negotiate protocol, including NTLM authentication, which matches the authentication requirements for the default configuration of the WinRM listener.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To use Negotiate or NTLM to authenticate as the user specified by the <tt class="docutils literal"><span class="pre">--winrm-user</span></tt> option, include the user&#8217;s Microsoft Windows domain, using the format <tt class="docutils literal"><span class="pre">domain\user</span></tt>, where the backslash (<tt class="docutils literal"><span class="pre">\</span></tt>) separates the domain from the user.</p>
</div>
<p>For example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife bootstrap windows winrm web1.cloudapp.net -r <span class="s1">&#39;server::web&#39;</span> -x <span class="s1">&#39;proddomain\webuser&#39;</span> -P <span class="s1">&#39;password&#39;</span>
</pre></div>
</div>
<p>and:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife bootstrap windows winrm db1.cloudapp.net -r <span class="s1">&#39;server::db&#39;</span> -x <span class="s1">&#39;.\localadmin&#39;</span> -P <span class="s1">&#39;password&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="domain-authentication">
<h4>Domain Authentication<a class="headerlink" href="#domain-authentication" title="Permalink to this headline"></a></h4>
<p>The <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">windows</span></tt> plugin supports Microsoft Windows domain authentication. This requires:</p>
<ul class="simple">
<li>An SSL certificate on the target node</li>
<li>The certificate details can be viewed and its <a class="reference external" href="http://msdn.microsoft.com/en-us/library/ms788967.aspx">thumbprint hex values copied</a></li>
</ul>
<p>To create the listener over HTTPS, run the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ winrm create winrm/config/Listener?Address<span class="o">=</span>IP:&lt;ip_address&gt;+Transport<span class="o">=</span>HTTPS @<span class="o">{</span><span class="nv">Hostname</span><span class="o">=</span><span class="s2">&quot;&lt;fqdn&gt;&quot;</span><span class="p">;</span><span class="nv">CertificateThumbprint</span><span class="o">=</span><span class="s2">&quot;&lt;hexidecimal_thumbprint_value&gt;&quot;</span><span class="o">}</span>
</pre></div>
</div>
<p>where the <tt class="docutils literal"><span class="pre">CertificateThumbprint</span></tt> is the thumbprint hex value copied from the certificate details. (The hex value may require that spaces be removed before passing them to the node using the <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">windows</span></tt> plugin.) WinRM 2.0 uses port <tt class="docutils literal"><span class="pre">5985</span></tt> for HTTP and port <tt class="docutils literal"><span class="pre">5986</span></tt> for HTTPS traffic, by default.</p>
<p>To bootstrap the target node using the <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">bootstrap</span></tt> subcommand, first use the <tt class="docutils literal"><span class="pre">winrm</span></tt> argument in the <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">windows</span></tt> plugin to verify communication with the node:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife winrm <span class="s1">&#39;node1.domain.com&#39;</span> <span class="s1">&#39;dir&#39;</span> -m -x domain<span class="se">\\</span>administrator -P <span class="s1">&#39;super_secret_password&#39;</span> p 5986
</pre></div>
</div>
<p>and then run a command similar to the following:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife bootstrap windows winrm <span class="s1">&#39;node1.domain.com&#39;</span> -r <span class="s1">&#39;role[webserver]&#39;</span> -x domain<span class="se">\\</span>administrator -P <span class="s1">&#39;password&#39;</span> -p 5986
</pre></div>
</div>
</div>
<div class="section" id="bootstrap-windows-ssh">
<h4>bootstrap windows ssh<a class="headerlink" href="#bootstrap-windows-ssh" title="Permalink to this headline"></a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">bootstrap</span> <span class="pre">windows</span> <span class="pre">ssh</span></tt> argument to bootstrap chef-client installations in a Microsoft Windows environment, using a command shell that is native to Microsoft Windows.</p>
<div class="section" id="id26">
<h5>Syntax<a class="headerlink" href="#id26" title="Permalink to this headline"></a></h5>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife bootstrap windows ssh <span class="o">(</span>options<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id27">
<h5>Options<a class="headerlink" href="#id27" title="Permalink to this headline"></a></h5>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--auth-timeout</span> <span class="pre">MINUTES</span></tt>,</dt>
<dd>The amount of time (in minutes) to wait for authentication to succeed. Default: <tt class="docutils literal"><span class="pre">2</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--bootstrap-no-proxy</span> <span class="pre">NO_PROXY_URL_or_IP</span></tt></dt>
<dd>A URL or IP address that specifies a location that should not be proxied.</dd>
<dt><tt class="docutils literal"><span class="pre">--bootstrap-proxy</span> <span class="pre">PROXY_URL</span></tt></dt>
<dd>The proxy server for the node that is the target of a bootstrap operation.</dd>
<dt><tt class="docutils literal"><span class="pre">--bootstrap-version</span> <span class="pre">VERSION</span></tt></dt>
<dd>The version of the chef-client to install.</dd>
<dt><tt class="docutils literal"><span class="pre">-d</span> <span class="pre">DISTRO</span></tt>, <tt class="docutils literal"><span class="pre">--distro</span> <span class="pre">DISTRO</span></tt></dt>
<dd><p class="first">The template file to be used during a bootstrap operation. The following distributions are supported:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">chef-full</span></tt> (the default bootstrap)</li>
<li><tt class="docutils literal"><span class="pre">centos5-gems</span></tt></li>
<li><tt class="docutils literal"><span class="pre">fedora13-gems</span></tt></li>
<li><tt class="docutils literal"><span class="pre">ubuntu10.04-gems</span></tt></li>
<li><tt class="docutils literal"><span class="pre">ubuntu10.04-apt</span></tt></li>
<li><tt class="docutils literal"><span class="pre">ubuntu12.04-gems</span></tt></li>
<li>The name of a custom bootstrap template file.</li>
</ul>
<p>When this option is used, knife searches for the template file in the following order:</p>
<ol class="arabic simple">
<li>The <tt class="docutils literal"><span class="pre">bootstrap/</span></tt> folder in the current working directory</li>
<li>The <tt class="docutils literal"><span class="pre">bootstrap/</span></tt> folder in the chef-repo</li>
<li>The <tt class="docutils literal"><span class="pre">bootstrap/</span></tt> folder in the <tt class="docutils literal"><span class="pre">~/.chef/</span></tt> directory</li>
<li>A default bootstrap file.</li>
</ol>
<p class="last">Do not use the <tt class="docutils literal"><span class="pre">--template-file</span></tt> option when <tt class="docutils literal"><span class="pre">--distro</span></tt> is specified.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">-G</span> <span class="pre">GATEWAY</span></tt>, <tt class="docutils literal"><span class="pre">--ssh-gateway</span> <span class="pre">GATEWAY</span></tt></dt>
<dd>The SSH tunnel or gateway that is used to run a bootstrap action on a machine that is not accessible from the workstation.</dd>
<dt><tt class="docutils literal"><span class="pre">-i</span> <span class="pre">IDENTITY_FILE</span></tt>, <tt class="docutils literal"><span class="pre">--identity-file</span> <span class="pre">IDENTITY_FILE</span></tt></dt>
<dd>The SSH identity file used for authentication. Key-based authentication is recommended.</dd>
<dt><tt class="docutils literal"><span class="pre">-j</span> <span class="pre">JSON_ATTRIBS</span></tt>, <tt class="docutils literal"><span class="pre">--json-attributes</span> <span class="pre">JSON_ATTRIBS</span></tt></dt>
<dd>A JSON string that is added to the first run of a chef-client.</dd>
<dt><tt class="docutils literal"><span class="pre">-N</span> <span class="pre">NAME</span></tt>, <tt class="docutils literal"><span class="pre">--node-name</span> <span class="pre">NAME</span></tt></dt>
<dd>The name of the node.</dd>
<dt><tt class="docutils literal"><span class="pre">--[no-]host-key-verify</span></tt></dt>
<dd>Use <tt class="docutils literal"><span class="pre">--no-host-key-verify</span></tt> to disable host key verification. Default setting: <tt class="docutils literal"><span class="pre">--host-key-verify</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-p</span> <span class="pre">PORT</span></tt>, <tt class="docutils literal"><span class="pre">--ssh-port</span> <span class="pre">PORT</span></tt></dt>
<dd>The SSH port.</dd>
<dt><tt class="docutils literal"><span class="pre">-P</span> <span class="pre">PASSWORD</span></tt>, <tt class="docutils literal"><span class="pre">--ssh-password</span> <span class="pre">PASSWORD</span></tt></dt>
<dd>The SSH password. This can be used to pass the password directly on the command line. If this option is not specified (and a password is required) knife prompts for the password.</dd>
<dt><tt class="docutils literal"><span class="pre">--prerelease</span></tt></dt>
<dd>Install pre-release gems.</dd>
<dt><tt class="docutils literal"><span class="pre">-r</span> <span class="pre">RUN_LIST</span></tt>, <tt class="docutils literal"><span class="pre">--run-list</span> <span class="pre">RUN_LIST</span></tt></dt>
<dd>A comma-separated list of roles and/or recipes to be applied.</dd>
<dt><tt class="docutils literal"><span class="pre">-s</span> <span class="pre">SECRET</span></tt>, <tt class="docutils literal"><span class="pre">--secret</span></tt></dt>
<dd>The encryption key that is used for values contained within a data bag item.</dd>
<dt><tt class="docutils literal"><span class="pre">--secret-file</span> <span class="pre">SECRET_FILE</span></tt></dt>
<dd>The path to the file that contains the encryption key.</dd>
<dt><tt class="docutils literal"><span class="pre">--template-file</span> <span class="pre">TEMPLATE</span></tt></dt>
<dd>The path to a template file to be used during a bootstrap operation.</dd>
<dt><tt class="docutils literal"><span class="pre">-x</span> <span class="pre">USER_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--ssh-user</span> <span class="pre">USER_NAME</span></tt></dt>
<dd>The SSH user name.</dd>
</dl>
</div>
</div>
<div class="section" id="winrm">
<h4>winrm<a class="headerlink" href="#winrm" title="Permalink to this headline"></a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">winrm</span></tt> argument to create a connection to one or more remote machines. As each connection is created, a password must be provided. This argument uses the same syntax as the <tt class="docutils literal"><span class="pre">search</span></tt> subcommand.</p>
<p>WinRM requires that a target node be accessible via the ports configured to support access via HTTP or HTTPS.</p>
<div class="section" id="id28">
<h5>Syntax<a class="headerlink" href="#id28" title="Permalink to this headline"></a></h5>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife winrm SEARCH_QUERY SSH_COMMAND <span class="o">(</span>options<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id29">
<h5>Options<a class="headerlink" href="#id29" title="Permalink to this headline"></a></h5>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">-a</span> <span class="pre">ATTR</span></tt>, <tt class="docutils literal"><span class="pre">--attribute</span> <span class="pre">ATTR</span></tt></dt>
<dd>The attribute used when opening an SSH connection. The default attribute is the FQDN of the host. Other possible values include a public IP address, a private IP address, or a hostname.</dd>
<dt><tt class="docutils literal"><span class="pre">-f</span> <span class="pre">CA_TRUST_FILE</span></tt>, <tt class="docutils literal"><span class="pre">--ca-trust-file</span> <span class="pre">CA_TRUST_FILE</span></tt></dt>
<dd>Optional. The certificate authority (CA) trust file used for SSL transport.</dd>
<dt><tt class="docutils literal"><span class="pre">-i</span> <span class="pre">IDENTITY_FILE</span></tt>, <tt class="docutils literal"><span class="pre">--identity-file</span> <span class="pre">IDENTITY_FILE</span></tt></dt>
<dd>The keytab file that contains the encryption key required by Kerberos-based authentication.</dd>
<dt><tt class="docutils literal"><span class="pre">--keytab-file</span> <span class="pre">KEYTAB_FILE</span></tt></dt>
<dd>The keytab file that contains the encryption key required by Kerberos-based authentication.</dd>
<dt><tt class="docutils literal"><span class="pre">-m</span></tt>, <tt class="docutils literal"><span class="pre">--manual-list</span></tt></dt>
<dd>Define a search query as a space-separated list of servers.</dd>
<dt><tt class="docutils literal"><span class="pre">-p</span> <span class="pre">PORT</span></tt>, <tt class="docutils literal"><span class="pre">--winrm-port</span> <span class="pre">PORT</span></tt></dt>
<dd>The WinRM port. The TCP port on the remote system to which <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">windows</span></tt> commands that are made using WinRM are sent. Default: <tt class="docutils literal"><span class="pre">5986</span></tt> when <tt class="docutils literal"><span class="pre">--winrm-transport</span></tt> is set to <tt class="docutils literal"><span class="pre">ssl</span></tt>, otherwise <tt class="docutils literal"><span class="pre">5985</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-P</span> <span class="pre">PASSWORD</span></tt>, <tt class="docutils literal"><span class="pre">--winrm-password</span> <span class="pre">PASSWORD</span></tt></dt>
<dd>The WinRM password.</dd>
<dt><tt class="docutils literal"><span class="pre">-R</span> <span class="pre">KERBEROS_REALM</span></tt>, <tt class="docutils literal"><span class="pre">--kerberos-realm</span> <span class="pre">KERBEROS_REALM</span></tt></dt>
<dd>Optional. The administrative domain to which a user belongs.</dd>
<dt><tt class="docutils literal"><span class="pre">--returns</span> <span class="pre">CODES</span></tt></dt>
<dd>A comma-delimited list of return codes that indicate the success or failure of the command that was run remotely.</dd>
<dt><tt class="docutils literal"><span class="pre">-S</span> <span class="pre">KERBEROS_SERVICE</span></tt>, <tt class="docutils literal"><span class="pre">--kerberos-service</span> <span class="pre">KERBEROS_SERVICE</span></tt></dt>
<dd>Optional. The service principal used during Kerberos-based authentication.</dd>
<dt><tt class="docutils literal"><span class="pre">SEARCH_QUERY</span></tt></dt>
<dd>The search query used to return a list of servers to be accessed using SSH and the specified <tt class="docutils literal"><span class="pre">SSH_COMMAND</span></tt>. This option uses the same syntax as the search subcommand.</dd>
<dt><tt class="docutils literal"><span class="pre">SSH_COMMAND</span></tt></dt>
<dd>The command to be run against the results of a search query.</dd>
<dt><tt class="docutils literal"><span class="pre">--session-timeout</span> <span class="pre">MINUTES</span></tt></dt>
<dd>The amount of time (in minutes) for the maximum length of a WinRM session.</dd>
<dt><tt class="docutils literal"><span class="pre">-t</span> <span class="pre">TRANSPORT</span></tt>, <tt class="docutils literal"><span class="pre">--winrm-transport</span> <span class="pre">TRANSPORT</span></tt></dt>
<dd>The WinRM transport type. Possible values: <tt class="docutils literal"><span class="pre">ssl</span></tt> or <tt class="docutils literal"><span class="pre">plaintext</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--winrm-authentication-protocol</span> <span class="pre">PROTOCOL</span></tt></dt>
<dd>The authentication protocol to be used during WinRM communication. Possible values: <tt class="docutils literal"><span class="pre">basic</span></tt>, <tt class="docutils literal"><span class="pre">kerberos</span></tt> or <tt class="docutils literal"><span class="pre">negotiate</span></tt>. Default value: <tt class="docutils literal"><span class="pre">negotiate</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--winrm-ssl-verify-mode</span> <span class="pre">MODE</span></tt></dt>
<dd>The peer verification mode that is used during WinRM communication. Possible values: <tt class="docutils literal"><span class="pre">verify_none</span></tt> or <tt class="docutils literal"><span class="pre">verify_peer</span></tt>. Default value: <tt class="docutils literal"><span class="pre">verify_peer</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-x</span> <span class="pre">USERNAME</span></tt>, <tt class="docutils literal"><span class="pre">--winrm-user</span> <span class="pre">USERNAME</span></tt></dt>
<dd>The WinRM user name.</dd>
</dl>
</div>
</div>
<div class="section" id="id30">
<h4>Examples<a class="headerlink" href="#id30" title="Permalink to this headline"></a></h4>
<p><strong>Find Uptime for Web Servers</strong></p>
<p>To find the uptime of all web servers, enter:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife winrm <span class="s2">&quot;role:web&quot;</span> <span class="s2">&quot;net stats srv&quot;</span> -x Administrator -P password
</pre></div>
</div>
<p><strong>Force a chef-client run</strong></p>
<p>To force a chef-client run:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>knife winrm <span class="s1">&#39;ec2-50-xx-xx-124.amazonaws.com&#39;</span> <span class="s1">&#39;chef-client -c c:/chef/client.rb&#39;</span> -m -x admin -P <span class="s1">&#39;password&#39;</span>
ec2-50-xx-xx-124.amazonaws.com <span class="o">[</span>date<span class="o">]</span> INFO: Starting Chef Run <span class="o">(</span>Version 0.9.12<span class="o">)</span>
ec2-50-xx-xx-124.amazonaws.com <span class="o">[</span>date<span class="o">]</span> WARN: Node ip-0A502FFB has an empty run list.
ec2-50-xx-xx-124.amazonaws.com <span class="o">[</span>date<span class="o">]</span> INFO: Chef Run <span class="nb">complete</span> in 4.383966 seconds
ec2-50-xx-xx-124.amazonaws.com <span class="o">[</span>date<span class="o">]</span> INFO: cleaning the checksum cache
ec2-50-xx-xx-124.amazonaws.com <span class="o">[</span>date<span class="o">]</span> INFO: Running report handlers
ec2-50-xx-xx-124.amazonaws.com <span class="o">[</span>date<span class="o">]</span> INFO: Report handlers <span class="nb">complete</span>
</pre></div>
</div>
<p>Where in the examples above, <tt class="docutils literal"><span class="pre">[date]</span></tt> represents the date and time the long entry was created. For example: <tt class="docutils literal"><span class="pre">[Fri,</span> <span class="pre">04</span> <span class="pre">Mar</span> <span class="pre">2011</span> <span class="pre">22:00:53</span> <span class="pre">+0000]</span></tt>.</p>
<p><strong>Bootstrap a Windows machine using SSH</strong></p>
<p>To bootstrap a Microsoft Windows machine using SSH:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife bootstrap windows ssh ec2-50-xx-xx-124.compute-1.amazonaws.com -r <span class="s1">&#39;role[webserver],role[production]&#39;</span> -x Administrator -i ~/.ssh/id_rsa
</pre></div>
</div>
<p><strong>Bootstrap a Windows machine using Windows Remote Management</strong></p>
<p>To bootstrap a Microsoft Windows machine using WinRM:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife bootstrap windows winrm ec2-50-xx-xx-124.compute-1.amazonaws.com -r <span class="s1">&#39;role[webserver],role[production]&#39;</span> -x Administrator -P <span class="s1">&#39;super_secret_password&#39;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="resources">
<h2>Resources<a class="headerlink" href="#resources" title="Permalink to this headline"></a></h2>
<p>A resource is a statement of configuration policy that:</p>
<ul class="simple">
<li>Describes the desired state for a configuration item</li>
<li>Declares the steps needed to bring that item to the desired state</li>
<li>Specifies a resource type&#8212;such as <tt class="docutils literal"><span class="pre">package</span></tt>, <tt class="docutils literal"><span class="pre">template</span></tt>, or <tt class="docutils literal"><span class="pre">service</span></tt></li>
<li>Lists additional details (also known as resource properties), as necessary</li>
<li>Are grouped into recipes, which describe working configurations</li>
</ul>
<div class="section" id="common-functionality">
<h3>Common Functionality<a class="headerlink" href="#common-functionality" title="Permalink to this headline"></a></h3>
<p>The following sections describe Microsoft Windows-specific functionality that applies generally to all resources:</p>
<div class="section" id="relative-paths">
<h4>Relative Paths<a class="headerlink" href="#relative-paths" title="Permalink to this headline"></a></h4>
<p>The following relative paths can be used with any resource:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">#{ENV['HOME']}</span></tt></dt>
<dd>Use to return the <tt class="docutils literal"><span class="pre">~</span></tt> path in Linux and Mac OS X or the <tt class="docutils literal"><span class="pre">%HOMEPATH%</span></tt> in Microsoft Windows.</dd>
</dl>
<div class="section" id="id31">
<h5>Examples<a class="headerlink" href="#id31" title="Permalink to this headline"></a></h5>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">template</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;HOME&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">/chef-getting-started.txt&quot;</span> <span class="k">do</span>
  <span class="n">source</span> <span class="s1">&#39;chef-getting-started.txt.erb&#39;</span>
  <span class="n">mode</span> <span class="s1">&#39;0755&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="windows-file-security">
<h4>Windows File Security<a class="headerlink" href="#windows-file-security" title="Permalink to this headline"></a></h4>
<p>To support Microsoft Windows security, the <strong>template</strong>, <strong>file</strong>, <strong>remote_file</strong>, <strong>cookbook_file</strong>, <strong>directory</strong>, and <strong>remote_directory</strong> resources support the use of inheritance and access control lists (ACLs) within recipes.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Windows File Security applies to the <strong>cookbook_file</strong>, <strong>directory</strong>, <strong>file</strong>, <strong>remote_directory</strong>, <strong>remote_file</strong>, and <strong>template</strong> resources.</p>
</div>
<div class="section" id="acls">
<h5>ACLs<a class="headerlink" href="#acls" title="Permalink to this headline"></a></h5>
<p>The <tt class="docutils literal"><span class="pre">rights</span></tt> property can be used in a recipe to manage access control lists (ACLs), which allow permissions to be given to multiple users and groups. Use the <tt class="docutils literal"><span class="pre">rights</span></tt> property can be used as many times as necessary; the chef-client will apply them to the file or directory as required. The syntax for the <tt class="docutils literal"><span class="pre">rights</span></tt> property is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">rights</span> <span class="n">permission</span><span class="p">,</span> <span class="n">principal</span><span class="p">,</span> <span class="n">option_type</span> <span class="o">=&gt;</span> <span class="n">value</span>
</pre></div>
</div>
<p>where</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">permission</span></tt></dt>
<dd><p class="first">Use to specify which rights are granted to the <tt class="docutils literal"><span class="pre">principal</span></tt>. The possible values are: <tt class="docutils literal"><span class="pre">:read</span></tt>, <tt class="docutils literal"><span class="pre">:write</span></tt>, <tt class="docutils literal"><span class="pre">read_execute</span></tt>, <tt class="docutils literal"><span class="pre">:modify</span></tt>, and <tt class="docutils literal"><span class="pre">:full_control</span></tt>.</p>
<p>These permissions are cumulative. If <tt class="docutils literal"><span class="pre">:write</span></tt> is specified, then it includes <tt class="docutils literal"><span class="pre">:read</span></tt>. If <tt class="docutils literal"><span class="pre">:full_control</span></tt> is specified, then it includes both <tt class="docutils literal"><span class="pre">:write</span></tt> and <tt class="docutils literal"><span class="pre">:read</span></tt>.</p>
<p class="last">(For those who know the Microsoft Windows API: <tt class="docutils literal"><span class="pre">:read</span></tt> corresponds to <tt class="docutils literal"><span class="pre">GENERIC_READ</span></tt>; <tt class="docutils literal"><span class="pre">:write</span></tt> corresponds to <tt class="docutils literal"><span class="pre">GENERIC_WRITE</span></tt>; <tt class="docutils literal"><span class="pre">:read_execute</span></tt> corresponds to <tt class="docutils literal"><span class="pre">GENERIC_READ</span></tt> and <tt class="docutils literal"><span class="pre">GENERIC_EXECUTE</span></tt>; <tt class="docutils literal"><span class="pre">:modify</span></tt> corresponds to <tt class="docutils literal"><span class="pre">GENERIC_WRITE</span></tt>, <tt class="docutils literal"><span class="pre">GENERIC_READ</span></tt>, <tt class="docutils literal"><span class="pre">GENERIC_EXECUTE</span></tt>, and <tt class="docutils literal"><span class="pre">DELETE</span></tt>; <tt class="docutils literal"><span class="pre">:full_control</span></tt> corresponds to <tt class="docutils literal"><span class="pre">GENERIC_ALL</span></tt>, which allows a user to change the owner and other metadata about a file.)</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">principal</span></tt></dt>
<dd>Use to specify a group or user name. This is identical to what is entered in the login box for Microsoft Windows, such as <tt class="docutils literal"><span class="pre">user_name</span></tt>, <tt class="docutils literal"><span class="pre">domain\user_name</span></tt>, or <tt class="docutils literal"><span class="pre">user_name&#64;fully_qualified_domain_name</span></tt>. The chef-client does not need to know if a principal is a user or a group.</dd>
<dt><tt class="docutils literal"><span class="pre">option_type</span></tt></dt>
<dd><p class="first">A hash that contains advanced rights options. For example, the rights to a directory that only applies to the first level of children might look something like: <tt class="docutils literal"><span class="pre">rights</span> <span class="pre">:write,</span> <span class="pre">'domain\group_name',</span> <span class="pre">:one_level_deep</span> <span class="pre">=&gt;</span> <span class="pre">true</span></tt>. Possible option types:</p>
<table border="1" class="last docutils">
<colgroup>
<col width="13%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">:applies_to_children</span></tt></td>
<td>Specify how permissions are applied to children. Possible values: <tt class="docutils literal"><span class="pre">true</span></tt> to inherit both child directories and files;  <tt class="docutils literal"><span class="pre">false</span></tt> to not inherit any child directories or files; <tt class="docutils literal"><span class="pre">:containers_only</span></tt> to inherit only child directories (and not files); <tt class="docutils literal"><span class="pre">:objects_only</span></tt> to recursively inherit files (and not child directories).</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">:applies_to_self</span></tt></td>
<td>Indicates whether a permission is applied to the parent directory. Possible values: <tt class="docutils literal"><span class="pre">true</span></tt> to apply to the parent directory or file and its children; <tt class="docutils literal"><span class="pre">false</span></tt> to not apply only to child directories and files.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">:one_level_deep</span></tt></td>
<td>Indicates the depth to which permissions will be applied. Possible values: <tt class="docutils literal"><span class="pre">true</span></tt> to apply only to the first level of children; <tt class="docutils literal"><span class="pre">false</span></tt> to apply to all children.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<p>For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">resource</span> <span class="s1">&#39;x.txt&#39;</span> <span class="k">do</span>
  <span class="n">rights</span> <span class="ss">:read</span><span class="p">,</span> <span class="s1">&#39;Everyone&#39;</span>
  <span class="n">rights</span> <span class="ss">:write</span><span class="p">,</span> <span class="s1">&#39;domain\group&#39;</span>
  <span class="n">rights</span> <span class="ss">:full_control</span><span class="p">,</span> <span class="s1">&#39;group_name_or_user_name&#39;</span>
  <span class="n">rights</span> <span class="ss">:full_control</span><span class="p">,</span> <span class="s1">&#39;user_name&#39;</span><span class="p">,</span> <span class="ss">:applies_to_children</span> <span class="o">=&gt;</span> <span class="kp">true</span>
<span class="k">end</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">rights</span> <span class="ss">:read</span><span class="p">,</span> <span class="o">[</span><span class="s1">&#39;Administrators&#39;</span><span class="p">,</span><span class="s1">&#39;Everyone&#39;</span><span class="o">]</span>
<span class="n">rights</span> <span class="ss">:full_control</span><span class="p">,</span> <span class="s1">&#39;Users&#39;</span><span class="p">,</span> <span class="ss">:applies_to_children</span> <span class="o">=&gt;</span> <span class="kp">true</span>
<span class="n">rights</span> <span class="ss">:write</span><span class="p">,</span> <span class="s1">&#39;Sally&#39;</span><span class="p">,</span> <span class="ss">:applies_to_children</span> <span class="o">=&gt;</span> <span class="ss">:containers_only</span><span class="p">,</span> <span class="ss">:applies_to_self</span> <span class="o">=&gt;</span> <span class="kp">false</span><span class="p">,</span> <span class="ss">:one_level_deep</span> <span class="o">=&gt;</span> <span class="kp">true</span>
</pre></div>
</div>
<p>Some other important things to know when using the <tt class="docutils literal"><span class="pre">rights</span></tt> attribute:</p>
<ul class="simple">
<li>Only inherited rights remain. All existing explicit rights on the object are removed and replaced.</li>
<li>If rights are not specified, nothing will be changed. The chef-client does not clear out the rights on a file or directory if rights are not specified.</li>
<li>Changing inherited rights can be expensive. Microsoft Windows will propagate rights to all children recursively due to inheritance. This is a normal aspect of Microsoft Windows, so consider the frequency with which this type of action is necessary and take steps to control this type of action if performance is the primary consideration.</li>
</ul>
<p>Use the <tt class="docutils literal"><span class="pre">deny_rights</span></tt> property to deny specific rights to specific users. The ordering is independent of using the <tt class="docutils literal"><span class="pre">rights</span></tt> property. For example, it doesn&#8217;t matter if rights are granted to everyone is placed before or after <tt class="docutils literal"><span class="pre">deny_rights</span> <span class="pre">:read,</span> <span class="pre">['Julian',</span> <span class="pre">'Lewis']</span></tt>, both Julian and Lewis will be unable to read the document. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">resource</span> <span class="s1">&#39;x.txt&#39;</span> <span class="k">do</span>
  <span class="n">rights</span> <span class="ss">:read</span><span class="p">,</span> <span class="s1">&#39;Everyone&#39;</span>
  <span class="n">rights</span> <span class="ss">:write</span><span class="p">,</span> <span class="s1">&#39;domain\group&#39;</span>
  <span class="n">rights</span> <span class="ss">:full_control</span><span class="p">,</span> <span class="s1">&#39;group_name_or_user_name&#39;</span>
  <span class="n">rights</span> <span class="ss">:full_control</span><span class="p">,</span> <span class="s1">&#39;user_name&#39;</span><span class="p">,</span> <span class="ss">:applies_to_children</span> <span class="o">=&gt;</span> <span class="kp">true</span>
  <span class="n">deny_rights</span> <span class="ss">:read</span><span class="p">,</span> <span class="o">[</span><span class="s1">&#39;Julian&#39;</span><span class="p">,</span> <span class="s1">&#39;Lewis&#39;</span><span class="o">]</span>
<span class="k">end</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">deny_rights</span> <span class="ss">:full_control</span><span class="p">,</span> <span class="o">[</span><span class="s1">&#39;Sally&#39;</span><span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="inheritance">
<h5>Inheritance<a class="headerlink" href="#inheritance" title="Permalink to this headline"></a></h5>
<p>By default, a file or directory inherits rights from its parent directory. Most of the time this is the preferred behavior, but sometimes it may be necessary to take steps to more specifically control rights. The <tt class="docutils literal"><span class="pre">inherits</span></tt> property can be used to specifically tell the chef-client to apply (or not apply) inherited rights from its parent directory.</p>
<p>For example, the following example specifies the rights for a directory:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">directory</span> <span class="s1">&#39;C:\mordor&#39;</span> <span class="k">do</span>
  <span class="n">rights</span> <span class="ss">:read</span><span class="p">,</span> <span class="s1">&#39;MORDOR\Minions&#39;</span>
  <span class="n">rights</span> <span class="ss">:full_control</span><span class="p">,</span> <span class="s1">&#39;MORDOR\Sauron&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
<p>and then the following example specifies how to use inheritance to deny access to the child directory:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">directory</span> <span class="s1">&#39;C:\mordor\mount_doom&#39;</span> <span class="k">do</span>
  <span class="n">rights</span> <span class="ss">:full_control</span><span class="p">,</span> <span class="s1">&#39;MORDOR\Sauron&#39;</span>
  <span class="n">inherits</span> <span class="kp">false</span> <span class="c1"># Sauron is the only person who should have any sort of access</span>
<span class="k">end</span>
</pre></div>
</div>
<p>If the <tt class="docutils literal"><span class="pre">deny_rights</span></tt> permission were to be used instead, something could slip through unless all users and groups were denied.</p>
<p>Another example also shows how to specify rights for a directory:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">directory</span> <span class="s1">&#39;C:\mordor&#39;</span> <span class="k">do</span>
  <span class="n">rights</span> <span class="ss">:read</span><span class="p">,</span> <span class="s1">&#39;MORDOR\Minions&#39;</span>
  <span class="n">rights</span> <span class="ss">:full_control</span><span class="p">,</span> <span class="s1">&#39;MORDOR\Sauron&#39;</span>
  <span class="n">rights</span> <span class="ss">:write</span><span class="p">,</span> <span class="s1">&#39;SHIRE\Frodo&#39;</span> <span class="c1"># Who put that there I didn&#39;t put that there</span>
<span class="k">end</span>
</pre></div>
</div>
<p>but then not use the <tt class="docutils literal"><span class="pre">inherits</span></tt> property to deny those rights on a child directory:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">directory</span> <span class="s1">&#39;C:\mordor\mount_doom&#39;</span> <span class="k">do</span>
  <span class="n">deny_rights</span> <span class="ss">:read</span><span class="p">,</span> <span class="s1">&#39;MORDOR\Minions&#39;</span> <span class="c1"># Oops, not specific enough</span>
<span class="k">end</span>
</pre></div>
</div>
<p>Because the <tt class="docutils literal"><span class="pre">inherits</span></tt> property is not specified, the chef-client will default it to <tt class="docutils literal"><span class="pre">true</span></tt>, which will ensure that security settings for existing files remain unchanged.</p>
</div>
</div>
<div class="section" id="attributes-for-file-based-resources">
<h4>Attributes for File-based Resources<a class="headerlink" href="#attributes-for-file-based-resources" title="Permalink to this headline"></a></h4>
<p>This resource has the following attributes:</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">group</span></tt></td>
<td>A string or ID that identifies the group owner by group name, including fully qualified group names such as <tt class="docutils literal"><span class="pre">domain\group</span></tt> or <tt class="docutils literal"><span class="pre">group&#64;domain</span></tt>. If this value is not specified, existing groups remain unchanged and new group assignments use the default <tt class="docutils literal"><span class="pre">POSIX</span></tt> group (if available).</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">inherits</span></tt></td>
<td>Microsoft Windows only. Whether a file inherits rights from its parent directory. Default value: <tt class="docutils literal"><span class="pre">true</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">mode</span></tt></td>
<td><p class="first">If <tt class="docutils literal"><span class="pre">mode</span></tt> is not specified and if the file already exists, the existing mode on the file is used. If <tt class="docutils literal"><span class="pre">mode</span></tt> is not specified, the file does not exist, and the <tt class="docutils literal"><span class="pre">:create</span></tt> action is specified, the chef-client assumes a mask value of <tt class="docutils literal"><span class="pre">'0777'</span></tt> and then applies the umask for the system on which the file is to be created to the <tt class="docutils literal"><span class="pre">mask</span></tt> value. For example, if the umask on a system is <tt class="docutils literal"><span class="pre">'022'</span></tt>, the chef-client uses the default value of <tt class="docutils literal"><span class="pre">'0755'</span></tt>.</p>
<p class="last">Microsoft Windows: A quoted 3-5 character string that defines the octal mode that is translated into rights for Microsoft Windows security. For example: <tt class="docutils literal"><span class="pre">'755'</span></tt>, <tt class="docutils literal"><span class="pre">'0755'</span></tt>, or <tt class="docutils literal"><span class="pre">00755</span></tt>. Values up to <tt class="docutils literal"><span class="pre">'0777'</span></tt> are allowed (no sticky bits) and mean the same in Microsoft Windows as they do in UNIX, where <tt class="docutils literal"><span class="pre">4</span></tt> equals <tt class="docutils literal"><span class="pre">GENERIC_READ</span></tt>, <tt class="docutils literal"><span class="pre">2</span></tt> equals <tt class="docutils literal"><span class="pre">GENERIC_WRITE</span></tt>, and <tt class="docutils literal"><span class="pre">1</span></tt> equals <tt class="docutils literal"><span class="pre">GENERIC_EXECUTE</span></tt>. This property cannot be used to set <tt class="docutils literal"><span class="pre">:full_control</span></tt>. This property has no effect if not specified, but when it and <tt class="docutils literal"><span class="pre">rights</span></tt> are both specified, the effects are cumulative.</p>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">owner</span></tt></td>
<td>A string or ID that identifies the group owner by user name, including fully qualified user names such as <tt class="docutils literal"><span class="pre">domain\user</span></tt> or <tt class="docutils literal"><span class="pre">user&#64;domain</span></tt>. If this value is not specified, existing owners remain unchanged and new owner assignments use the current user (when necessary).</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">path</span></tt></td>
<td><p class="first">The full path to the file, including the file name and its extension.</p>
<p class="last">Microsoft Windows: A path that begins with a forward slash (<tt class="docutils literal"><span class="pre">/</span></tt>) will point to the root of the current working directory of the chef-client process. This path can vary from system to system. Therefore, using a path that begins with a forward slash (<tt class="docutils literal"><span class="pre">/</span></tt>) is not recommended.</p>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">rights</span></tt></td>
<td>Microsoft Windows only. The permissions for users and groups in a Microsoft Windows environment. For example: <tt class="docutils literal"><span class="pre">rights</span> <span class="pre">&lt;permissions&gt;,</span> <span class="pre">&lt;principal&gt;,</span> <span class="pre">&lt;options&gt;</span></tt> where <tt class="docutils literal"><span class="pre">&lt;permissions&gt;</span></tt> specifies the rights granted to the principal, <tt class="docutils literal"><span class="pre">&lt;principal&gt;</span></tt> is the group or user name, and <tt class="docutils literal"><span class="pre">&lt;options&gt;</span></tt> is a Hash with one (or more) advanced rights options.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Use the <tt class="docutils literal"><span class="pre">owner</span></tt> and <tt class="docutils literal"><span class="pre">right</span></tt> attributes and avoid the <tt class="docutils literal"><span class="pre">group</span></tt> and <tt class="docutils literal"><span class="pre">mode</span></tt> attributes whenever possible. The <tt class="docutils literal"><span class="pre">group</span></tt> and <tt class="docutils literal"><span class="pre">mode</span></tt> attributes are not true Microsoft Windows concepts and are provided more for backward compatibility than for best practice.</p>
</div>
</div>
<div class="section" id="atomic-file-updates">
<h4>Atomic File Updates<a class="headerlink" href="#atomic-file-updates" title="Permalink to this headline"></a></h4>
<p>Atomic updates are used with <strong>file</strong>-based resources to help ensure that file updates can be made when updating a binary or if disk space runs out.</p>
<p>Atomic updates are enabled by default. They can be managed globally using the <tt class="docutils literal"><span class="pre">file_atomic_update</span></tt> setting in the client.rb file. They can be managed on a per-resource basis using the <tt class="docutils literal"><span class="pre">atomic_update</span></tt> property that is available with the <strong>cookbook_file</strong>, <strong>file</strong>, <strong>remote_file</strong>, and <strong>template</strong> resources.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">On certain platforms, and after a file has been moved into place, the chef-client may modify file permissions to support features specific to those platforms. On platforms with SELinux enabled, the chef-client will fix up the security contexts after a file has been moved into the correct location by running the <tt class="docutils literal"><span class="pre">restorecon</span></tt> command. On the Microsoft Windows platform, the chef-client will create files so that ACL inheritance works as expected.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Atomic File Updates applies to the <strong>template</strong> resource.</p>
</div>
</div>
</div>
<div class="section" id="batch">
<h3>batch<a class="headerlink" href="#batch" title="Permalink to this headline"></a></h3>
<p>Use the <strong>batch</strong> resource to execute a batch script using the cmd.exe interpreter. The <strong>batch</strong> resource creates and executes a temporary file (similar to how the <strong>script</strong> resource behaves), rather than running the command inline. This resource inherits actions (<tt class="docutils literal"><span class="pre">:run</span></tt> and <tt class="docutils literal"><span class="pre">:nothing</span></tt>) and properties (<tt class="docutils literal"><span class="pre">creates</span></tt>, <tt class="docutils literal"><span class="pre">cwd</span></tt>, <tt class="docutils literal"><span class="pre">environment</span></tt>, <tt class="docutils literal"><span class="pre">group</span></tt>, <tt class="docutils literal"><span class="pre">path</span></tt>, <tt class="docutils literal"><span class="pre">timeout</span></tt>, and <tt class="docutils literal"><span class="pre">user</span></tt>) from the <strong>execute</strong> resource. Commands that are executed with this resource are (by their nature) not idempotent, as they are typically unique to the environment in which they are run. Use <tt class="docutils literal"><span class="pre">not_if</span></tt> and <tt class="docutils literal"><span class="pre">only_if</span></tt> to guard this resource for idempotence.</p>
<div class="section" id="id32">
<h4>Syntax<a class="headerlink" href="#id32" title="Permalink to this headline"></a></h4>
<p>A <strong>batch</strong> resource block executes a batch script using the cmd.exe interpreter:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">batch</span> <span class="s1">&#39;echo some env vars&#39;</span> <span class="k">do</span>
  <span class="n">code</span> <span class="o">&lt;&lt;-</span><span class="no">EOH</span>
<span class="sh">    echo %TEMP%</span>
<span class="sh">    echo %SYSTEMDRIVE%</span>
<span class="sh">    echo %PATH%</span>
<span class="sh">    echo %WINDIR%</span>
<span class="no">    EOH</span>
<span class="k">end</span>
</pre></div>
</div>
<p>The full syntax for all of the properties that are available to the <strong>batch</strong> resource is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">batch</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
  <span class="n">architecture</span>               <span class="no">Symbol</span>
  <span class="n">code</span>                       <span class="nb">String</span>
  <span class="n">command</span>                    <span class="nb">String</span><span class="p">,</span> <span class="nb">Array</span>
  <span class="n">creates</span>                    <span class="nb">String</span>
  <span class="n">cwd</span>                        <span class="nb">String</span>
  <span class="n">flags</span>                      <span class="nb">String</span>
  <span class="n">group</span>                      <span class="nb">String</span><span class="p">,</span> <span class="nb">Integer</span>
  <span class="n">guard_interpreter</span>          <span class="no">Symbol</span>
  <span class="n">interpreter</span>                <span class="nb">String</span>
  <span class="n">notifies</span>                   <span class="c1"># see description</span>
  <span class="n">provider</span>                   <span class="no">Chef</span><span class="o">::</span><span class="no">Provider</span><span class="o">::</span><span class="no">Batch</span>
  <span class="n">returns</span>                    <span class="nb">Integer</span><span class="p">,</span> <span class="nb">Array</span>
  <span class="n">subscribes</span>                 <span class="c1"># see description</span>
  <span class="n">timeout</span>                    <span class="nb">Integer</span><span class="p">,</span> <span class="nb">Float</span>
  <span class="n">user</span>                       <span class="nb">String</span><span class="p">,</span> <span class="nb">Integer</span>
  <span class="n">action</span>                     <span class="no">Symbol</span> <span class="c1"># defaults to :run if not specified</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">batch</span></tt> is the resource</li>
<li><tt class="docutils literal"><span class="pre">name</span></tt> is the name of the resource block</li>
<li><tt class="docutils literal"><span class="pre">command</span></tt> is the command to be run and <tt class="docutils literal"><span class="pre">cwd</span></tt> is the location from which the command is run</li>
<li><tt class="docutils literal"><span class="pre">action</span></tt> identifies the steps the chef-client will take to bring the node into the desired state</li>
<li><tt class="docutils literal"><span class="pre">architecture</span></tt>, <tt class="docutils literal"><span class="pre">code</span></tt>, <tt class="docutils literal"><span class="pre">command</span></tt>, <tt class="docutils literal"><span class="pre">creates</span></tt>, <tt class="docutils literal"><span class="pre">cwd</span></tt>, <tt class="docutils literal"><span class="pre">flags</span></tt>, <tt class="docutils literal"><span class="pre">group</span></tt>, <tt class="docutils literal"><span class="pre">guard_interpreter</span></tt>, <tt class="docutils literal"><span class="pre">interpreter</span></tt>, <tt class="docutils literal"><span class="pre">provider</span></tt>, <tt class="docutils literal"><span class="pre">returns</span></tt>, <tt class="docutils literal"><span class="pre">timeout</span></tt>, and <tt class="docutils literal"><span class="pre">user</span></tt> are properties of this resource, with the Ruby type shown. See &#8220;Properties&#8221; section below for more information about all of the properties that may be used with this resource.</li>
</ul>
</div>
<div class="section" id="actions">
<h4>Actions<a class="headerlink" href="#actions" title="Permalink to this headline"></a></h4>
<p>This resource has the following actions:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:nothing</span></tt></dt>
<dd>Define this resource block to do nothing until notified by another resource to take action. When this resource is notified, this resource block is either run immediately or it is queued up to be run at the end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:run</span></tt></dt>
<dd>Run a batch file.</dd>
</dl>
</div>
<div class="section" id="attributes">
<h4>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline"></a></h4>
<p>This resource has the following properties:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">architecture</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol</p>
<p class="last">The architecture of the process under which a script is executed. If a value is not provided, the chef-client defaults to the correct value for the architecture, as determined by Ohai. An exception is raised when anything other than <tt class="docutils literal"><span class="pre">:i386</span></tt> is specified for a 32-bit process. Possible values: <tt class="docutils literal"><span class="pre">:i386</span></tt> (for 32-bit processes) and <tt class="docutils literal"><span class="pre">:x86_64</span></tt> (for 64-bit processes).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">code</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">A quoted (&#8221; &#8221;) string of code to be executed.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">command</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> String, Array</p>
<p class="last">The name of the command to be executed.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">creates</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">Prevent a command from creating a file when that file already exists.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">cwd</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The current working directory from which a command is run.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">flags</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">One or more command line flags that are passed to the interpreter when a command is invoked.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">group</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> String, Integer</p>
<p class="last">The group name or group ID that must be changed before running a command.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">guard_interpreter</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol</p>
<p class="last">Default value: <tt class="docutils literal"><span class="pre">:batch</span></tt>. When this property is set to <tt class="docutils literal"><span class="pre">:batch</span></tt>, the 64-bit version of the cmd.exe shell will be used to evaluate strings values for the <tt class="docutils literal"><span class="pre">not_if</span></tt> and <tt class="docutils literal"><span class="pre">only_if</span></tt> properties. Set this value to <tt class="docutils literal"><span class="pre">:default</span></tt> to use the 32-bit version of the cmd.exe shell.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">ignore_failure</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Continue running a recipe if a resource fails for any reason. Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">interpreter</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The script interpreter to use during code execution. Changing the default value of this property is not supported.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">notifies</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may notify another resource to take action when its state changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> that resource should take, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action. A resource may notifiy more than one resource; use a <tt class="docutils literal"><span class="pre">notifies</span></tt> statement for each resource to be notified.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">notifies</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">notifies</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">provider</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Chef Class</p>
<p class="last">Optional. Explicitly specifies a provider.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retries</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The number of times to catch exceptions and retry the resource. Default value: <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retry_delay</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The retry delay (in seconds). Default value: <tt class="docutils literal"><span class="pre">2</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">returns</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> Integer, Array</p>
<p class="last">The return value for a command. This may be an array of accepted values. An exception is raised when the return value(s) do not match. Default value: <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">subscribes</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> to be taken, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">subscribes</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">subscribes</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">timeout</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> Integer, Float</p>
<p class="last">The amount of time (in seconds) a command is to wait before timing out. Default value: <tt class="docutils literal"><span class="pre">3600</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">user</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> String, Integer</p>
<p class="last">A user name or identifier that must be changed before running a command.</p>
</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">See <a class="reference external" href="http://technet.microsoft.com/en-us/library/bb490880.aspx">http://technet.microsoft.com/en-us/library/bb490880.aspx</a> for more information about the cmd.exe interpreter.</p>
</div>
</div>
<div class="section" id="id33">
<h4>Examples<a class="headerlink" href="#id33" title="Permalink to this headline"></a></h4>
<p>The following examples demonstrate various approaches for using resources in recipes. If you want to see examples of how Chef uses resources in recipes, take a closer look at the cookbooks that Chef authors and maintains: <a class="reference external" href="https://github.com/chef-cookbooks">https://github.com/chef-cookbooks</a>.</p>
<p><strong>Unzip a file, and then move it</strong></p>
<p>To run a batch file that unzips and then moves Ruby, do something like:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">batch</span> <span class="s1">&#39;unzip_and_move_ruby&#39;</span> <span class="k">do</span>
  <span class="n">code</span> <span class="o">&lt;&lt;-</span><span class="no">EOH</span>
<span class="sh">    7z.exe x #{Chef::Config[:file_cache_path]}/ruby-1.8.7-p352-i386-mingw32.7z</span>
<span class="sh">      -oC:\\source -r -y</span>
<span class="sh">    xcopy C:\\source\\ruby-1.8.7-p352-i386-mingw32 C:\\ruby /e /y</span>
<span class="no">    EOH</span>
<span class="k">end</span>

<span class="n">batch</span> <span class="s1">&#39;echo some env vars&#39;</span> <span class="k">do</span>
  <span class="n">code</span> <span class="o">&lt;&lt;-</span><span class="no">EOH</span>
<span class="sh">    echo %TEMP%</span>
<span class="sh">    echo %SYSTEMDRIVE%</span>
<span class="sh">    echo %PATH%</span>
<span class="sh">    echo %WINDIR%</span>
<span class="no">    EOH</span>
<span class="k">end</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">batch</span> <span class="s1">&#39;unzip_and_move_ruby&#39;</span> <span class="k">do</span>
  <span class="n">code</span> <span class="o">&lt;&lt;-</span><span class="no">EOH</span>
<span class="sh">    7z.exe x #{Chef::Config[:file_cache_path]}/ruby-1.8.7-p352-i386-mingw32.7z</span>
<span class="sh">      -oC:\\source -r -y</span>
<span class="sh">    xcopy C:\\source\\ruby-1.8.7-p352-i386-mingw32 C:\\ruby /e /y</span>
<span class="no">    EOH</span>
<span class="k">end</span>

<span class="n">batch</span> <span class="s1">&#39;echo some env vars&#39;</span> <span class="k">do</span>
  <span class="n">code</span> <span class="s1">&#39;echo %TEMP%\\necho %SYSTEMDRIVE%\\necho %PATH%\\necho %WINDIR%&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="dsc-resource">
<h3>dsc_resource<a class="headerlink" href="#dsc-resource" title="Permalink to this headline"></a></h3>
<p>A <a class="reference external" href="https://docs.chef.io/resource.html">resource</a> defines the desired state for a single configuration item present on a node that is under management by Chef. A resource collection&#8212;one (or more) individual resources&#8212;defines the desired state for the entire node. During a <a class="reference external" href="https://docs.chef.io/chef_client.html#the-chef-client-run">chef-client run</a>, the current state of each resource is tested, after which the chef-client will take any steps that are necessary to repair the node and bring it back into the desired state.</p>
<p>Windows PowerShell is a task-based command-line shell and scripting language developed by Microsoft. Windows PowerShell uses a document-oriented approach for managing Microsoft Windows-based machines, similar to the approach that is used for managing UNIX- and Linux-based machines. Windows PowerShell is <a class="reference external" href="http://technet.microsoft.com/en-us/library/bb978526.aspx">a tool-agnostic platform</a> that supports using Chef for configuration management.</p>
<p>Desired State Configuration (DSC) is a feature of Windows PowerShell that provides <a class="reference external" href="http://technet.microsoft.com/en-us/library/dn249912.aspx">a set of language extensions, cmdlets, and resources</a> that can be used to declaratively configure software. DSC is similar to Chef, in that both tools are idempotent, take similar approaches to the concept of resources, describe the configuration of a system, and then take the steps required to do that configuration. The most important difference between Chef and DSC is that Chef uses Ruby and DSC is exposed as configuration data from within Windows PowerShell.</p>
<p>The <strong>dsc_resource</strong> resource allows any DSC resource to be used in a Chef recipe, as well as any custom resources that have been added to your Windows PowerShell environment. Microsoft <a class="reference external" href="https://github.com/powershell/DscResources">frequently adds new resources</a> to the DSC resource collection.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Using the <strong>dsc_resource</strong> has the following requirements:</p>
<ul class="last">
<li><p class="first">Windows Management Framework (WMF) 5.0 February Preview (or higher), which includes Windows PowerShell 5.0.10018.0 (or higher).</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">RefreshMode</span></tt> configuration setting in the Local Configuration Manager must be set to <tt class="docutils literal"><span class="pre">Disabled</span></tt>.</p>
<p><strong>NOTE:</strong> Starting with the chef-client 12.6 release, this requirement applies only for versions of Windows PowerShell earlier than 5.0.10586.0. The latest version of Windows Management Framework (WMF) 5 has relaxed the limitation that prevented the chef-client from running in non-disabled refresh mode.</p>
</li>
<li><p class="first">The <strong>dsc_script</strong> resource  may not be used in the same run-list with the <strong>dsc_resource</strong>. This is because the <strong>dsc_script</strong> resource requires that <tt class="docutils literal"><span class="pre">RefreshMode</span></tt> in the Local Configuration Manager be set to <tt class="docutils literal"><span class="pre">Push</span></tt>, whereas the <strong>dsc_resource</strong> resource requires it to be set to <tt class="docutils literal"><span class="pre">Disabled</span></tt>.</p>
<p><strong>NOTE:</strong> Starting with the chef-client 12.6 release, this requirement applies only for versions of Windows PowerShell earlier than 5.0.10586.0. The latest version of Windows Management Framework (WMF) 5 has relaxed the limitation that prevented the chef-client from running in non-disabled refresh mode, which allows the Local Configuration Manager to be set to <tt class="docutils literal"><span class="pre">Push</span></tt>.</p>
</li>
<li><p class="first">The <strong>dsc_resource</strong> resource can only use binary- or script-based resources. Composite DSC resources may not be used.</p>
<p>This is because composite resources aren&#8217;t &#8220;real&#8221; resources from the perspective of the the Local Configuration Manager (LCM). Composite resources are used by the &#8220;configuration&#8221; keyword from the <tt class="docutils literal"><span class="pre">PSDesiredStateConfiguration</span></tt> module, and then evaluated in that context. When using DSC to create the configuration document (the Managed Object Framework (MOF) file) from the configuration command, the composite resource is evaluated. Any individual resources from that composite resource are written into the Managed Object Framework (MOF) document. As far as the Local Configuration Manager (LCM) is concerned, there is no such thing as a composite resource. Unless that changes, the <strong>dsc_resource</strong> resource and/or <tt class="docutils literal"><span class="pre">Invoke-DscResource</span></tt> command cannot directly use them.</p>
</li>
</ul>
</div>
<div class="section" id="id34">
<h4>Syntax<a class="headerlink" href="#id34" title="Permalink to this headline"></a></h4>
<p>A <strong>dsc_resource</strong> resource block allows DSC resourcs to be used in a Chef recipe. For example, the DSC <tt class="docutils literal"><span class="pre">Archive</span></tt> resource:</p>
<div class="highlight-powershell"><div class="highlight"><pre><span></span><span class="n">Archive</span> <span class="n">ExampleArchive</span> <span class="p">{</span>
  <span class="n">Ensure</span> <span class="p">=</span> <span class="s2">&quot;Present&quot;</span>
  <span class="n">Path</span> <span class="p">=</span> <span class="s2">&quot;C:\Users\Public\Documents\example.zip&quot;</span>
  <span class="n">Destination</span> <span class="p">=</span> <span class="s2">&quot;C:\Users\Public\Documents\ExtractionPath&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and then the same <strong>dsc_resource</strong> with Chef:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">dsc_resource</span> <span class="s1">&#39;example&#39;</span> <span class="k">do</span>
   <span class="n">resource</span> <span class="ss">:archive</span>
   <span class="n">property</span> <span class="ss">:ensure</span><span class="p">,</span> <span class="s1">&#39;Present&#39;</span>
   <span class="n">property</span> <span class="ss">:path</span><span class="p">,</span> <span class="s2">&quot;C:\Users\Public\Documents</span><span class="se">\e</span><span class="s2">xample.zip&quot;</span>
   <span class="n">property</span> <span class="ss">:destination</span><span class="p">,</span> <span class="s2">&quot;C:\Users\Public\Documents\ExtractionPath&quot;</span>
 <span class="k">end</span>
</pre></div>
</div>
<p>The full syntax for all of the properties that are available to the <strong>dsc_resource</strong> resource is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">dsc_resource</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
  <span class="n">module_name</span>                <span class="nb">String</span>
  <span class="n">notifies</span>                   <span class="c1"># see description</span>
  <span class="n">property</span>                   <span class="no">Symbol</span>
  <span class="n">resource</span>                   <span class="nb">String</span>
  <span class="n">subscribes</span>                 <span class="c1"># see description</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">dsc_resource</span></tt> is the resource</li>
<li><tt class="docutils literal"><span class="pre">name</span></tt> is the name of the resource block</li>
<li><tt class="docutils literal"><span class="pre">property</span></tt> is zero (or more) properties in the DSC resource, where each property is entered on a separate line, <tt class="docutils literal"><span class="pre">:dsc_property_name</span></tt> is the case-insensitive name of that property, and <tt class="docutils literal"><span class="pre">&quot;property_value&quot;</span></tt> is a Ruby value to be applied by the chef-client</li>
<li><tt class="docutils literal"><span class="pre">module_name</span></tt>, <tt class="docutils literal"><span class="pre">property</span></tt>, and <tt class="docutils literal"><span class="pre">resource</span></tt> are properties of this resource, with the Ruby type shown. See &#8220;Properties&#8221; section below for more information about all of the properties that may be used with this resource.</li>
</ul>
</div>
<div class="section" id="id35">
<h4>Attributes<a class="headerlink" href="#id35" title="Permalink to this headline"></a></h4>
<p>This resource has the following properties:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">ignore_failure</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Continue running a recipe if a resource fails for any reason. Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">module_name</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The name of the module from which a DSC resource originates. If this property is not specified, it will be inferred.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">notifies</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may notify another resource to take action when its state changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> that resource should take, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action. A resource may notifiy more than one resource; use a <tt class="docutils literal"><span class="pre">notifies</span></tt> statement for each resource to be notified.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">notifies</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">notifies</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">property</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol</p>
<p>A property from a Desired State Configuration (DSC) resource. Use this property multiple times, one for each property in the Desired State Configuration (DSC) resource. The format for this property must follow <tt class="docutils literal"><span class="pre">property</span> <span class="pre">:dsc_property_name,</span> <span class="pre">&quot;property_value&quot;</span></tt> for each DSC property added to the resource block.</p>
<p>The <tt class="docutils literal"><span class="pre">:dsc_property_name</span></tt> must be a symbol.</p>
<p>Use the following Ruby types to define <tt class="docutils literal"><span class="pre">property_value</span></tt>:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Ruby</th>
<th class="head">Windows PowerShell</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">Array</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Object[]</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">Chef::Util::Powershell:PSCredential</span></tt></td>
<td><tt class="docutils literal"><span class="pre">PSCredential</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">FalseClass</span></tt></td>
<td><tt class="docutils literal"><span class="pre">bool($false)</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">Fixnum</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Integer</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">Float</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Double</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">Hash</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Hashtable</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">TrueClass</span></tt></td>
<td><tt class="docutils literal"><span class="pre">bool($true)</span></tt></td>
</tr>
</tbody>
</table>
<p class="last">These are converted into the corresponding Windows PowerShell type during the chef-client run.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">resource</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p>The name of the DSC resource. This value is case-insensitive and must be a symbol that matches the name of the DSC resource.</p>
<p>For built-in DSC resources, use the following values:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">:archive</span></tt></td>
<td>Use to to <a class="reference external" href="https://msdn.microsoft.com/en-us/powershell/dsc/archiveresource">unpack archive (.zip) files</a>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">:environment</span></tt></td>
<td>Use to to <a class="reference external" href="https://msdn.microsoft.com/en-us/powershell/dsc/environmentresource">manage system environment variables</a>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">:file</span></tt></td>
<td>Use to to <a class="reference external" href="https://msdn.microsoft.com/en-us/powershell/dsc/fileresource">manage files and directories</a>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">:group</span></tt></td>
<td>Use to to <a class="reference external" href="https://msdn.microsoft.com/en-us/powershell/dsc/groupresource">manage local groups</a>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">:log</span></tt></td>
<td>Use to to <a class="reference external" href="https://msdn.microsoft.com/en-us/powershell/dsc/logresource">log configuration messages</a>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">:package</span></tt></td>
<td>Use to to <a class="reference external" href="https://msdn.microsoft.com/en-us/powershell/dsc/packageresource">install and manage packages</a>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">:registry</span></tt></td>
<td>Use to to <a class="reference external" href="https://msdn.microsoft.com/en-us/powershell/dsc/registryresource">manage registry keys and registry key values</a>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">:script</span></tt></td>
<td>Use to to <a class="reference external" href="https://msdn.microsoft.com/en-us/powershell/dsc/scriptresource">run Powershell script blocks</a>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">:service</span></tt></td>
<td>Use to to <a class="reference external" href="https://msdn.microsoft.com/en-us/powershell/dsc/serviceresource">manage services</a>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">:user</span></tt></td>
<td>Use to to <a class="reference external" href="https://msdn.microsoft.com/en-us/powershell/dsc/userresource">manage local user accounts</a>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">:windowsfeature</span></tt></td>
<td>Use to to <a class="reference external" href="https://msdn.microsoft.com/en-us/powershell/dsc/windowsfeatureresource">add or remove Windows features and roles</a>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">:windowsoptionalfeature</span></tt></td>
<td>Use to configure Microsoft Windows optional features.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">:windowsprocess</span></tt></td>
<td>Use to to <a class="reference external" href="https://msdn.microsoft.com/en-us/powershell/dsc/windowsprocessresource">configure Windows processes</a>.</td>
</tr>
</tbody>
</table>
<p class="last">Any DSC resource may be used in a Chef recipe. For example, the DSC Resource Kit contains resources for <a class="reference external" href="http://www.powershellgallery.com/packages/xActiveDirectory/2.8.0.0">configuring Active Directory components</a>, such as <tt class="docutils literal"><span class="pre">xADDomain</span></tt>, <tt class="docutils literal"><span class="pre">xADDomainController</span></tt>, and <tt class="docutils literal"><span class="pre">xADUser</span></tt>. Assuming that these resources are available to the chef-client, the corresponding values for the <tt class="docutils literal"><span class="pre">resource</span></tt> attribute would be: <tt class="docutils literal"><span class="pre">:xADDomain</span></tt>, <tt class="docutils literal"><span class="pre">:xADDomainController</span></tt>, and <tt class="docutils literal"><span class="pre">xADUser</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retries</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The number of times to catch exceptions and retry the resource. Default value: <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retry_delay</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The retry delay (in seconds). Default value: <tt class="docutils literal"><span class="pre">2</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">subscribes</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> to be taken, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">subscribes</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">subscribes</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="id36">
<h4>Examples<a class="headerlink" href="#id36" title="Permalink to this headline"></a></h4>
<p><strong>Open a Zip file</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">dsc_resource</span> <span class="s1">&#39;example&#39;</span> <span class="k">do</span>
   <span class="n">resource</span> <span class="ss">:archive</span>
   <span class="n">property</span> <span class="ss">:ensure</span><span class="p">,</span> <span class="s1">&#39;Present&#39;</span>
   <span class="n">property</span> <span class="ss">:path</span><span class="p">,</span> <span class="s1">&#39;C:\Users\Public\Documents\example.zip&#39;</span>
   <span class="n">property</span> <span class="ss">:destination</span><span class="p">,</span> <span class="s1">&#39;C:\Users\Public\Documents\ExtractionPath&#39;</span>
 <span class="k">end</span>
</pre></div>
</div>
<p><strong>Manage users and groups</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">dsc_resource</span> <span class="s1">&#39;demogroupadd&#39;</span> <span class="k">do</span>
  <span class="n">resource</span> <span class="ss">:group</span>
  <span class="n">property</span> <span class="ss">:groupname</span><span class="p">,</span> <span class="s1">&#39;demo1&#39;</span>
  <span class="n">property</span> <span class="ss">:ensure</span><span class="p">,</span> <span class="s1">&#39;present&#39;</span>
<span class="k">end</span>

<span class="n">dsc_resource</span> <span class="s1">&#39;useradd&#39;</span> <span class="k">do</span>
  <span class="n">resource</span> <span class="ss">:user</span>
  <span class="n">property</span> <span class="ss">:username</span><span class="p">,</span> <span class="s1">&#39;Foobar1&#39;</span>
  <span class="n">property</span> <span class="ss">:fullname</span><span class="p">,</span> <span class="s1">&#39;Foobar1&#39;</span>
  <span class="n">property</span> <span class="ss">:password</span><span class="p">,</span> <span class="n">ps_credential</span><span class="p">(</span><span class="s1">&#39;P@assword!&#39;</span><span class="p">)</span>
  <span class="n">property</span> <span class="ss">:ensure</span><span class="p">,</span> <span class="s1">&#39;present&#39;</span>
<span class="k">end</span>

<span class="n">dsc_resource</span> <span class="s1">&#39;AddFoobar1ToUsers&#39;</span> <span class="k">do</span>
  <span class="n">resource</span> <span class="ss">:Group</span>
  <span class="n">property</span> <span class="ss">:GroupName</span><span class="p">,</span> <span class="s1">&#39;demo1&#39;</span>
  <span class="n">property</span> <span class="ss">:MembersToInclude</span><span class="p">,</span> <span class="o">[</span><span class="s1">&#39;Foobar1&#39;</span><span class="o">]</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Create a test message queue</strong></p>
<p>The following example creates a file on a node (based on one that is located in a cookbook), unpacks the <tt class="docutils literal"><span class="pre">MessageQueue.zip</span></tt> Windows PowerShell module, and then uses the <strong>dsc_resource</strong> to ensure that Message Queuing (MSMQ) sub-features are installed, a test queue is created, and that permissions are set on the test queue:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">cookbook_file</span> <span class="s1">&#39;cMessageQueue.zip&#39;</span> <span class="k">do</span>
  <span class="n">path</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">Chef</span><span class="o">::</span><span class="no">Config</span><span class="o">[</span><span class="ss">:file_cache_path</span><span class="o">]</span><span class="si">}</span><span class="se">\\</span><span class="s2">MessageQueue.zip&quot;</span>
  <span class="n">action</span> <span class="ss">:create_if_missing</span>
<span class="k">end</span>

<span class="n">windows_zipfile</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;PROGRAMW6432&#39;</span><span class="o">]</span><span class="si">}</span><span class="se">\\</span><span class="s2">WindowsPowerShell</span><span class="se">\\</span><span class="s2">Modules&quot;</span> <span class="k">do</span>
  <span class="n">source</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">Chef</span><span class="o">::</span><span class="no">Config</span><span class="o">[</span><span class="ss">:file_cache_path</span><span class="o">]</span><span class="si">}</span><span class="se">\\</span><span class="s2">MessageQueue.zip&quot;</span>
  <span class="n">action</span> <span class="ss">:unzip</span>
<span class="k">end</span>

<span class="n">dsc_resource</span> <span class="s1">&#39;install-sub-features&#39;</span> <span class="k">do</span>
  <span class="n">resource</span> <span class="ss">:windowsfeature</span>
  <span class="n">property</span> <span class="ss">:ensure</span><span class="p">,</span> <span class="s1">&#39;Present&#39;</span>
  <span class="n">property</span> <span class="ss">:name</span><span class="p">,</span> <span class="s1">&#39;msmq&#39;</span>
  <span class="n">property</span> <span class="ss">:IncludeAllSubFeature</span><span class="p">,</span> <span class="kp">true</span>
<span class="k">end</span>

<span class="n">dsc_resource</span> <span class="s1">&#39;create-test-queue&#39;</span> <span class="k">do</span>
  <span class="n">resource</span> <span class="ss">:cPrivateMsmqQueue</span>
  <span class="n">property</span> <span class="ss">:ensure</span><span class="p">,</span> <span class="s1">&#39;Present&#39;</span>
  <span class="n">property</span> <span class="ss">:name</span><span class="p">,</span> <span class="s1">&#39;Test_Queue&#39;</span>
<span class="k">end</span>

<span class="n">dsc_resource</span> <span class="s1">&#39;set-permissions&#39;</span> <span class="k">do</span>
  <span class="n">resource</span> <span class="ss">:cPrivateMsmqQueuePermissions</span>
  <span class="n">property</span> <span class="ss">:ensure</span><span class="p">,</span> <span class="s1">&#39;Present&#39;</span>
  <span class="n">property</span> <span class="ss">:name</span><span class="p">,</span> <span class="s1">&#39;Test_Queue_Permissions&#39;</span>
  <span class="n">property</span> <span class="ss">:QueueNames</span><span class="p">,</span> <span class="s1">&#39;Test_Queue&#39;</span>
  <span class="n">property</span> <span class="ss">:ReadUsers</span><span class="p">,</span> <span class="n">node</span><span class="o">[</span><span class="s1">&#39;msmq&#39;</span><span class="o">][</span><span class="s1">&#39;read_user&#39;</span><span class="o">]</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="dsc-script">
<h3>dsc_script<a class="headerlink" href="#dsc-script" title="Permalink to this headline"></a></h3>
<p>A <a class="reference external" href="https://docs.chef.io/resource.html">resource</a> defines the desired state for a single configuration item present on a node that is under management by Chef. A resource collection&#8212;one (or more) individual resources&#8212;defines the desired state for the entire node. During a <a class="reference external" href="https://docs.chef.io/chef_client.html#the-chef-client-run">chef-client run</a>, the current state of each resource is tested, after which the chef-client will take any steps that are necessary to repair the node and bring it back into the desired state.</p>
<p>Windows PowerShell is a task-based command-line shell and scripting language developed by Microsoft. Windows PowerShell uses a document-oriented approach for managing Microsoft Windows-based machines, similar to the approach that is used for managing UNIX- and Linux-based machines. Windows PowerShell is <a class="reference external" href="http://technet.microsoft.com/en-us/library/bb978526.aspx">a tool-agnostic platform</a> that supports using Chef for configuration management.</p>
<p>Desired State Configuration (DSC) is a feature of Windows PowerShell that provides <a class="reference external" href="http://technet.microsoft.com/en-us/library/dn249912.aspx">a set of language extensions, cmdlets, and resources</a> that can be used to declaratively configure software. DSC is similar to Chef, in that both tools are idempotent, take similar approaches to the concept of resources, describe the configuration of a system, and then take the steps required to do that configuration. The most important difference between Chef and DSC is that Chef uses Ruby and DSC is exposed as configuration data from within Windows PowerShell.</p>
<p>Many DSC resources are comparable to built-in Chef resources. For example, both DSC and Chef have <strong>file</strong>, <strong>package</strong>, and <strong>service</strong> resources. The <strong>dsc_script</strong> resource is most useful for those DSC resources that do not have a direct comparison to a resource in Chef, such as the <tt class="docutils literal"><span class="pre">Archive</span></tt> resource, a custom DSC resource, an existing DSC script that performs an important task, and so on. Use the <strong>dsc_script</strong> resource to embed the code that defines a DSC configuration directly within a Chef recipe.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Windows PowerShell 4.0 is required for using the <strong>dsc_script</strong> resource with Chef.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The WinRM service must be enabled. (Use <tt class="docutils literal"><span class="pre">winrm</span> <span class="pre">quickconfig</span></tt> to enable the service.)</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The <strong>dsc_script</strong> resource  may not be used in the same run-list with the <strong>dsc_resource</strong>. This is because the <strong>dsc_script</strong> resource requires that <tt class="docutils literal"><span class="pre">RefreshMode</span></tt> in the Local Configuration Manager be set to <tt class="docutils literal"><span class="pre">Push</span></tt>, whereas the <strong>dsc_resource</strong> resource requires it to be set to <tt class="docutils literal"><span class="pre">Disabled</span></tt>.</p>
</div>
<div class="section" id="id41">
<h4>Syntax<a class="headerlink" href="#id41" title="Permalink to this headline"></a></h4>
<p>A <strong>dsc_script</strong> resource block embeds the code that defines a DSC configuration directly within a Chef recipe:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">dsc_script</span> <span class="s1">&#39;get-dsc-resource-kit&#39;</span> <span class="k">do</span>
  <span class="n">code</span> <span class="o">&lt;&lt;-</span><span class="no">EOH</span>
<span class="sh">    Archive reskit</span>
<span class="sh">    {</span>
<span class="sh">      ensure = &#39;Present&#39;</span>
<span class="sh">      path = &quot;#{Chef::Config[:file_cache_path]}\\DSCResourceKit620082014.zip&quot;</span>
<span class="sh">      destination = &quot;#{ENV[&#39;PROGRAMW6432&#39;]}\\WindowsPowerShell\\Modules&quot;</span>
<span class="sh">    }</span>
<span class="no">  EOH</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where the <strong>remote_file</strong> resource is first used to download the <tt class="docutils literal"><span class="pre">DSCResourceKit620082014.zip</span></tt> file.</p>
<p>The full syntax for all of the properties that are available to the <strong>dsc_script</strong> resource is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">dsc_script</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
  <span class="n">code</span>                       <span class="nb">String</span>
  <span class="n">command</span>                    <span class="nb">String</span>
  <span class="n">configuration_data</span>         <span class="nb">String</span>
  <span class="n">configuration_data_script</span>  <span class="nb">String</span>
  <span class="n">configuration_name</span>         <span class="nb">String</span>
  <span class="n">cwd</span>                        <span class="nb">String</span>
  <span class="n">environment</span>                <span class="no">Hash</span>
  <span class="n">flags</span>                      <span class="no">Hash</span>
  <span class="n">imports</span>                    <span class="nb">Array</span>
  <span class="n">notifies</span>                   <span class="c1"># see description</span>
  <span class="n">subscribes</span>                 <span class="c1"># see description</span>
  <span class="n">timeout</span>                    <span class="nb">Integer</span>
  <span class="n">action</span>                     <span class="no">Symbol</span> <span class="c1"># defaults to :run if not specified</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">dsc_script</span></tt> is the resource</li>
<li><tt class="docutils literal"><span class="pre">name</span></tt> is the name of the resource block</li>
<li><tt class="docutils literal"><span class="pre">action</span></tt> identifies the steps the chef-client will take to bring the node into the desired state</li>
<li><tt class="docutils literal"><span class="pre">code</span></tt>, <tt class="docutils literal"><span class="pre">command</span></tt>, <tt class="docutils literal"><span class="pre">configuration_data</span></tt>, <tt class="docutils literal"><span class="pre">configuration_data_script</span></tt>, <tt class="docutils literal"><span class="pre">configuration_name</span></tt>, <tt class="docutils literal"><span class="pre">cwd</span></tt>, <tt class="docutils literal"><span class="pre">environment</span></tt>, <tt class="docutils literal"><span class="pre">flags</span></tt>, <tt class="docutils literal"><span class="pre">imports</span></tt>, and <tt class="docutils literal"><span class="pre">timeout</span></tt> are properties of this resource, with the Ruby type shown. See &#8220;Properties&#8221; section below for more information about all of the properties that may be used with this resource.</li>
</ul>
</div>
<div class="section" id="id42">
<h4>Actions<a class="headerlink" href="#id42" title="Permalink to this headline"></a></h4>
<p>This resource has the following actions:</p>
<p><tt class="docutils literal"><span class="pre">:nothing</span></tt></p>
<blockquote>
<div>Define this resource block to do nothing until notified by another resource to take action. When this resource is notified, this resource block is either run immediately or it is queued up to be run at the end of the chef-client run.</div></blockquote>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:run</span></tt></dt>
<dd>Default. Use to run the DSC configuration defined as defined in this resource.</dd>
</dl>
</div>
<div class="section" id="id43">
<h4>Attributes<a class="headerlink" href="#id43" title="Permalink to this headline"></a></h4>
<p>This resource has the following properties:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">code</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The code for the DSC configuration script. This property may not be used in the same recipe as the <tt class="docutils literal"><span class="pre">command</span></tt> property.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">command</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The path to a valid Windows PowerShell data file that contains the DSC configuration script. This data file must be capable of running independently of Chef and must generate a valid DSC configuration. This property may not be used in the same recipe as the <tt class="docutils literal"><span class="pre">code</span></tt> property.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">configuration_data</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The configuration data for the DSC script. The configuration data must be <a class="reference external" href="http://msdn.microsoft.com/en-us/library/dd878337(v=vs.85).aspx">a valid Windows Powershell data file</a>. This property may not be used in the same recipe as the <tt class="docutils literal"><span class="pre">configuration_data_script</span></tt> property.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">configuration_data_script</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The path to a valid Windows PowerShell data file that also contains a node called <tt class="docutils literal"><span class="pre">localhost</span></tt>. This property may not be used in the same recipe as the <tt class="docutils literal"><span class="pre">configuration_data</span></tt> property.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">configuration_name</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The name of a valid Windows PowerShell cmdlet. The name may only contain letter (a-z, A-Z), number (0-9), and underscore (_) characters and should start with a letter. The name may not be null or empty. This property may not be used in the same recipe as the <tt class="docutils literal"><span class="pre">code</span></tt> property.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">cwd</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The current working directory.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">environment</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Hash</p>
<p class="last">A Hash of environment variables in the form of <tt class="docutils literal"><span class="pre">({&quot;ENV_VARIABLE&quot;</span> <span class="pre">=&gt;</span> <span class="pre">&quot;VALUE&quot;})</span></tt>. (These variables must exist for a command to be run successfully.)</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">flags</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Hash</p>
<p class="last">Pass parameters to the DSC script that is specified by the <tt class="docutils literal"><span class="pre">command</span></tt> property. Parameters are defined as key-value pairs, where the value of each key is the parameter to pass. This property may not be used in the same recipe as the <tt class="docutils literal"><span class="pre">code</span></tt> property. For example: <tt class="docutils literal"><span class="pre">flags</span> <span class="pre">({</span> <span class="pre">:EditorChoice</span> <span class="pre">=&gt;</span> <span class="pre">'emacs',</span> <span class="pre">:EditorFlags</span> <span class="pre">=&gt;</span> <span class="pre">'--maximized'</span> <span class="pre">})</span></tt>. Default value: <tt class="docutils literal"><span class="pre">nil</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">ignore_failure</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Continue running a recipe if a resource fails for any reason. Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">imports</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Array</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This property <strong>MUST</strong> be used with the <tt class="docutils literal"><span class="pre">code</span></tt> attribute.</p>
</div>
<p>Use to import DSC resources from a module.</p>
<p>To import all resources from a module, specify only the module name:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">imports</span> <span class="s1">&#39;module_name&#39;</span>
</pre></div>
</div>
<p>To import specific resources, specify the module name, and then specify the name for each resource in that module to import:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">imports</span> <span class="s1">&#39;module_name&#39;</span><span class="p">,</span> <span class="s1">&#39;resource_name_a&#39;</span><span class="p">,</span> <span class="s1">&#39;resource_name_b&#39;</span><span class="p">,</span> <span class="o">...</span>
</pre></div>
</div>
<p>For example, to import all resources from a module named <tt class="docutils literal"><span class="pre">cRDPEnabled</span></tt>:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">imports</span> <span class="s1">&#39;cRDPEnabled&#39;</span>
</pre></div>
</div>
<p>To import only the <tt class="docutils literal"><span class="pre">PSHOrg_cRDPEnabled</span></tt> resource:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">imports</span> <span class="s1">&#39;cRDPEnabled&#39;</span><span class="p">,</span> <span class="s1">&#39;PSHOrg_cRDPEnabled&#39;</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">notifies</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may notify another resource to take action when its state changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> that resource should take, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action. A resource may notifiy more than one resource; use a <tt class="docutils literal"><span class="pre">notifies</span></tt> statement for each resource to be notified.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">notifies</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">notifies</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">retries</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The number of times to catch exceptions and retry the resource. Default value: <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retry_delay</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The retry delay (in seconds). Default value: <tt class="docutils literal"><span class="pre">2</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">subscribes</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> to be taken, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">subscribes</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">subscribes</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">timeout</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> Integer</p>
<p class="last">The amount of time (in seconds) a command is to wait before timing out.</p>
</dd>
</dl>
</div>
<div class="section" id="id44">
<h4>Examples<a class="headerlink" href="#id44" title="Permalink to this headline"></a></h4>
<p>The following examples demonstrate various approaches for using resources in recipes. If you want to see examples of how Chef uses resources in recipes, take a closer look at the cookbooks that Chef authors and maintains: <a class="reference external" href="https://github.com/chef-cookbooks">https://github.com/chef-cookbooks</a>.</p>
<p><strong>Specify DSC code directly</strong></p>
<p>DSC data can be specified directly in a recipe:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">dsc_script</span> <span class="s1">&#39;emacs&#39;</span> <span class="k">do</span>
  <span class="n">code</span> <span class="o">&lt;&lt;-</span><span class="no">EOH</span>
<span class="sh">  Environment &#39;texteditor&#39;</span>
<span class="sh">  {</span>
<span class="sh">    Name = &#39;EDITOR&#39;</span>
<span class="sh">    Value = &#39;c:\\emacs\\bin\\emacs.exe&#39;</span>
<span class="sh">  }</span>
<span class="no">  EOH</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Specify DSC code using a Windows Powershell data file</strong></p>
<p>Use the <tt class="docutils literal"><span class="pre">command</span></tt> property to specify the path to a Windows PowerShell data file. For example, the following Windows PowerShell script defines the <tt class="docutils literal"><span class="pre">DefaultEditor</span></tt>:</p>
<div class="highlight-powershell"><div class="highlight"><pre><span></span><span class="n">Configuration</span> <span class="s1">&#39;DefaultEditor&#39;</span>
<span class="p">{</span>
  <span class="n">Environment</span> <span class="s1">&#39;texteditor&#39;</span>
    <span class="p">{</span>
      <span class="n">Name</span> <span class="p">=</span> <span class="s1">&#39;EDITOR&#39;</span>
      <span class="n">Value</span> <span class="p">=</span> <span class="s1">&#39;c:\emacs\bin\emacs.exe&#39;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Use the following recipe to specify the location of that data file:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">dsc_script</span> <span class="s1">&#39;DefaultEditor&#39;</span> <span class="k">do</span>
  <span class="n">command</span> <span class="s1">&#39;c:\dsc_scripts\emacs.ps1&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Pass parameters to DSC configurations</strong></p>
<p>If a DSC script contains configuration data that takes parameters, those parameters may be passed using the <tt class="docutils literal"><span class="pre">flags</span></tt> property. For example, the following Windows PowerShell script takes parameters for the <tt class="docutils literal"><span class="pre">EditorChoice</span></tt> and <tt class="docutils literal"><span class="pre">EditorFlags</span></tt> settings:</p>
<div class="highlight-powershell"><div class="highlight"><pre><span></span><span class="nv">$choices</span> <span class="p">=</span> <span class="p">@{</span><span class="s1">&#39;emacs&#39;</span> <span class="p">=</span> <span class="s1">&#39;c:\emacs\bin\emacs&#39;</span><span class="p">;</span><span class="s1">&#39;vi&#39;</span> <span class="p">=</span> <span class="s1">&#39;c:\vim\vim.exe&#39;</span><span class="p">;</span><span class="s1">&#39;powershell&#39;</span> <span class="p">=</span> <span class="s1">&#39;powershell_ise.exe&#39;</span><span class="p">}</span>
  <span class="n">Configuration</span> <span class="s1">&#39;DefaultEditor&#39;</span>
    <span class="p">{</span>
      <span class="p">[</span><span class="k">CmdletBinding</span><span class="p">()]</span>
      <span class="k">param</span>
        <span class="p">(</span>
          <span class="nv">$EditorChoice</span><span class="p">,</span>
          <span class="nv">$EditorFlags</span> <span class="p">=</span> <span class="s1">&#39;&#39;</span>
        <span class="p">)</span>
      <span class="n">Environment</span> <span class="s1">&#39;TextEditor&#39;</span>
      <span class="p">{</span>
        <span class="n">Name</span> <span class="p">=</span> <span class="s1">&#39;EDITOR&#39;</span>
        <span class="n">Value</span> <span class="p">=</span>  <span class="s2">&quot;</span><span class="p">$(</span><span class="nv">$choices</span><span class="p">[</span><span class="nv">$EditorChoice</span><span class="p">])</span><span class="s2"> $EditorFlags&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>Use the following recipe to set those parameters:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">dsc_script</span> <span class="s1">&#39;DefaultEditor&#39;</span> <span class="k">do</span>
  <span class="n">flags</span> <span class="p">({</span> <span class="ss">:EditorChoice</span> <span class="o">=&gt;</span> <span class="s1">&#39;emacs&#39;</span><span class="p">,</span> <span class="ss">:EditorFlags</span> <span class="o">=&gt;</span> <span class="s1">&#39;--maximized&#39;</span> <span class="p">})</span>
  <span class="n">command</span> <span class="s1">&#39;c:\dsc_scripts\editors.ps1&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Use custom configuration data</strong></p>
<p>Configuration data in DSC scripts may be customized from a recipe. For example, scripts are typically customized to set the behavior for Windows PowerShell credential data types. Configuration data may be specified in one of three ways:</p>
<ul class="simple">
<li>By using the <tt class="docutils literal"><span class="pre">configuration_data</span></tt> attribute</li>
<li>By using the <tt class="docutils literal"><span class="pre">configuration_data_script</span></tt> attribute</li>
<li>By specifying the path to a valid Windows PowerShell data file</li>
</ul>
<p>The following example shows how to specify custom configuration data using the <tt class="docutils literal"><span class="pre">configuration_data</span></tt> property:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">dsc_script</span> <span class="s1">&#39;BackupUser&#39;</span> <span class="k">do</span>
  <span class="n">configuration_data</span> <span class="o">&lt;&lt;-</span><span class="no">EOH</span>
<span class="sh">    @{</span>
<span class="sh">     AllNodes = @(</span>
<span class="sh">          @{</span>
<span class="sh">          NodeName = &quot;localhost&quot;;</span>
<span class="sh">          PSDscAllowPlainTextPassword = $true</span>
<span class="sh">          })</span>
<span class="sh">     }</span>
<span class="no">  EOH</span>
  <span class="n">code</span> <span class="o">&lt;&lt;-</span><span class="no">EOH</span>
<span class="sh">    $user = &#39;backup&#39;</span>
<span class="sh">    $password = ConvertTo-SecureString -String &quot;YourPass$(random)&quot; -AsPlainText -Force</span>
<span class="sh">    $cred = New-Object -TypeName System.Management.Automation.PSCredential -ArgumentList $user, $password</span>

<span class="sh">   User $user</span>
<span class="sh">     {</span>
<span class="sh">       UserName = $user</span>
<span class="sh">       Password = $cred</span>
<span class="sh">       Description = &#39;Backup operator&#39;</span>
<span class="sh">       Ensure = &quot;Present&quot;</span>
<span class="sh">       Disabled = $false</span>
<span class="sh">       PasswordNeverExpires = $true</span>
<span class="sh">       PasswordChangeRequired = $false</span>
<span class="sh">     }</span>
<span class="no">   EOH</span>

  <span class="n">configuration_data</span> <span class="o">&lt;&lt;-</span><span class="no">EOH</span>
<span class="sh">    @{</span>
<span class="sh">      AllNodes = @(</span>
<span class="sh">          @{</span>
<span class="sh">          NodeName = &quot;localhost&quot;;</span>
<span class="sh">          PSDscAllowPlainTextPassword = $true</span>
<span class="sh">          })</span>
<span class="sh">      }</span>
<span class="no">    EOH</span>
<span class="k">end</span>
</pre></div>
</div>
<p>The following example shows how to specify custom configuration data using the <tt class="docutils literal"><span class="pre">configuration_name</span></tt> property. For example, the following Windows PowerShell script defines the <tt class="docutils literal"><span class="pre">vi</span></tt> configuration:</p>
<div class="highlight-powershell"><div class="highlight"><pre><span></span><span class="n">Configuration</span> <span class="s1">&#39;emacs&#39;</span>
  <span class="p">{</span>
    <span class="n">Environment</span> <span class="s1">&#39;TextEditor&#39;</span>
    <span class="p">{</span>
      <span class="n">Name</span> <span class="p">=</span> <span class="s1">&#39;EDITOR&#39;</span>
      <span class="n">Value</span> <span class="p">=</span> <span class="s1">&#39;c:\emacs\bin\emacs.exe&#39;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">Configuration</span> <span class="s1">&#39;vi&#39;</span>
<span class="p">{</span>
    <span class="n">Environment</span> <span class="s1">&#39;TextEditor&#39;</span>
    <span class="p">{</span>
      <span class="n">Name</span> <span class="p">=</span> <span class="s1">&#39;EDITOR&#39;</span>
      <span class="n">Value</span> <span class="p">=</span> <span class="s1">&#39;c:\vim\bin\vim.exe&#39;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Use the following recipe to specify that configuration:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">dsc_script</span> <span class="s1">&#39;EDITOR&#39;</span> <span class="k">do</span>
  <span class="n">configuration_name</span> <span class="s1">&#39;vi&#39;</span>
  <span class="n">command</span> <span class="s1">&#39;C:\dsc_scripts\editors.ps1&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Using DSC with other Chef resources</strong></p>
<p>The <strong>dsc_script</strong> resource can be used with other resources. The following example shows how to download a file using the <strong>remote_file</strong> resource, and then uncompress it using the DSC <tt class="docutils literal"><span class="pre">Archive</span></tt> resource:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">remote_file</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="no">Chef</span><span class="o">::</span><span class="no">Config</span><span class="o">[</span><span class="ss">:file_cache_path</span><span class="o">]</span><span class="si">}</span><span class="se">\\</span><span class="s2">DSCResourceKit620082014.zip&quot;</span> <span class="k">do</span>
  <span class="n">source</span> <span class="s1">&#39;http://gallery.technet.microsoft.com/DSC-Resource-Kit-All-c449312d/file/124481/1/DSC%20Resource%20Kit%20Wave%206%2008282014.zip&#39;</span>
<span class="k">end</span>

<span class="n">dsc_script</span> <span class="s1">&#39;get-dsc-resource-kit&#39;</span> <span class="k">do</span>
  <span class="n">code</span> <span class="o">&lt;&lt;-</span><span class="no">EOH</span>
<span class="sh">    Archive reskit</span>
<span class="sh">    {</span>
<span class="sh">      ensure = &#39;Present&#39;</span>
<span class="sh">      path = &quot;#{Chef::Config[:file_cache_path]}\\DSCResourceKit620082014.zip&quot;</span>
<span class="sh">      destination = &quot;#{ENV[&#39;PROGRAMW6432&#39;]}\\WindowsPowerShell\\Modules&quot;</span>
<span class="sh">    }</span>
<span class="no">  EOH</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="env">
<h3>env<a class="headerlink" href="#env" title="Permalink to this headline"></a></h3>
<p>Use the <strong>env</strong> resource to manage environment keys in Microsoft Windows. After an environment key is set, Microsoft Windows must be restarted before the environment key will be available to the Task Scheduler.</p>
<div class="section" id="id45">
<h4>Syntax<a class="headerlink" href="#id45" title="Permalink to this headline"></a></h4>
<p>A <strong>env</strong> resource block manages environment keys in Microsoft Windows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">env</span> <span class="s1">&#39;ComSpec&#39;</span> <span class="k">do</span>
  <span class="n">value</span> <span class="s1">&#39;C:\\Windows\\system32\\cmd.exe&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
<p>The full syntax for all of the properties that are available to the <strong>env</strong> resource is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">env</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
  <span class="n">delim</span>                      <span class="nb">String</span>
  <span class="n">key_name</span>                   <span class="nb">String</span> <span class="c1"># defaults to &#39;name&#39; if not specified</span>
  <span class="n">notifies</span>                   <span class="c1"># see description</span>
  <span class="n">provider</span>                   <span class="no">Chef</span><span class="o">::</span><span class="no">Provider</span><span class="o">::</span><span class="no">Env</span>
  <span class="n">subscribes</span>                 <span class="c1"># see description</span>
  <span class="n">value</span>                      <span class="nb">String</span>
  <span class="n">action</span>                     <span class="no">Symbol</span> <span class="c1"># defaults to :create if not specified</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">env</span></tt> is the resource</li>
<li><tt class="docutils literal"><span class="pre">name</span></tt> is the name of the resource block</li>
<li><tt class="docutils literal"><span class="pre">action</span></tt> identifies the steps the chef-client will take to bring the node into the desired state</li>
<li><tt class="docutils literal"><span class="pre">delim</span></tt>, <tt class="docutils literal"><span class="pre">key_name</span></tt>, <tt class="docutils literal"><span class="pre">provider</span></tt>, and <tt class="docutils literal"><span class="pre">value</span></tt> are properties of this resource, with the Ruby type shown. See &#8220;Properties&#8221; section below for more information about all of the properties that may be used with this resource.</li>
</ul>
</div>
<div class="section" id="id46">
<h4>Actions<a class="headerlink" href="#id46" title="Permalink to this headline"></a></h4>
<p>This resource has the following actions:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:create</span></tt></dt>
<dd>Default. Create an environment variable. If an environment variable already exists (but does not match), update that environment variable to match.</dd>
<dt><tt class="docutils literal"><span class="pre">:delete</span></tt></dt>
<dd>Delete an environment variable.</dd>
<dt><tt class="docutils literal"><span class="pre">:modify</span></tt></dt>
<dd>Modify an existing environment variable. This prepends the new value to the existing value, using the delimiter specified by the <tt class="docutils literal"><span class="pre">delim</span></tt> property.</dd>
<dt><tt class="docutils literal"><span class="pre">:nothing</span></tt></dt>
<dd>Define this resource block to do nothing until notified by another resource to take action. When this resource is notified, this resource block is either run immediately or it is queued up to be run at the end of the chef-client run.</dd>
</dl>
</div>
<div class="section" id="id47">
<h4>Attributes<a class="headerlink" href="#id47" title="Permalink to this headline"></a></h4>
<p>This resource has the following properties:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">delim</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The delimiter that is used to separate multiple values for a single key.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">ignore_failure</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Continue running a recipe if a resource fails for any reason. Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">key_name</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The name of the key that is to be created, deleted, or modified. Default value: the <tt class="docutils literal"><span class="pre">name</span></tt> of the resource block See &#8220;Syntax&#8221; section above for more information.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">notifies</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may notify another resource to take action when its state changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> that resource should take, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action. A resource may notifiy more than one resource; use a <tt class="docutils literal"><span class="pre">notifies</span></tt> statement for each resource to be notified.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">notifies</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">notifies</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">provider</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Chef Class</p>
<p class="last">Optional. Explicitly specifies a provider.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retries</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The number of times to catch exceptions and retry the resource. Default value: <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retry_delay</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The retry delay (in seconds). Default value: <tt class="docutils literal"><span class="pre">2</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">subscribes</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> to be taken, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">subscribes</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">subscribes</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">value</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The value with which <tt class="docutils literal"><span class="pre">key_name</span></tt> is set.</p>
</dd>
</dl>
</div>
<div class="section" id="id48">
<h4>Examples<a class="headerlink" href="#id48" title="Permalink to this headline"></a></h4>
<p>The following examples demonstrate various approaches for using resources in recipes. If you want to see examples of how Chef uses resources in recipes, take a closer look at the cookbooks that Chef authors and maintains: <a class="reference external" href="https://github.com/chef-cookbooks">https://github.com/chef-cookbooks</a>.</p>
<p><strong>Set an environment variable</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">env</span> <span class="s1">&#39;ComSpec&#39;</span> <span class="k">do</span>
  <span class="n">value</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">Windows</span><span class="se">\\</span><span class="s2">system32</span><span class="se">\\</span><span class="s2">cmd.exe&quot;</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="powershell-script">
<h3>powershell_script<a class="headerlink" href="#powershell-script" title="Permalink to this headline"></a></h3>
<p>Use the <strong>powershell_script</strong> resource to execute a script using the Windows PowerShell interpreter, much like how the <strong>script</strong> and <strong>script</strong>-based resources&#8212;<strong>bash</strong>, <strong>csh</strong>, <strong>perl</strong>, <strong>python</strong>, and <strong>ruby</strong>&#8212;are used. The <strong>powershell_script</strong> is specific to the Microsoft Windows platform and the Windows PowerShell interpreter.</p>
<p>The <strong>powershell_script</strong> resource creates and executes a temporary file (similar to how the <strong>script</strong> resource behaves), rather than running the command inline. Commands that are executed with this resource are (by their nature) not idempotent, as they are typically unique to the environment in which they are run. Use <tt class="docutils literal"><span class="pre">not_if</span></tt> and <tt class="docutils literal"><span class="pre">only_if</span></tt> to guard this resource for idempotence.</p>
<div class="section" id="id49">
<h4>Syntax<a class="headerlink" href="#id49" title="Permalink to this headline"></a></h4>
<p>A <strong>powershell_script</strong> resource block executes a batch script using the Windows PowerShell interpreter. For example, writing to an interpolated path:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">powershell_script</span> <span class="s1">&#39;write-to-interpolated-path&#39;</span> <span class="k">do</span>
  <span class="n">code</span> <span class="o">&lt;&lt;-</span><span class="no">EOH</span>
<span class="sh">  $stream = [System.IO.StreamWriter] &quot;#{Chef::Config[:file_cache_path]}/powershell-test.txt&quot;</span>
<span class="sh">  $stream.WriteLine(&quot;In #{Chef::Config[:file_cache_path]}...word.&quot;)</span>
<span class="sh">  $stream.close()</span>
<span class="no">  EOH</span>
<span class="k">end</span>
</pre></div>
</div>
<p>The full syntax for all of the properties that are available to the <strong>powershell_script</strong> resource is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">powershell_script</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
  <span class="n">architecture</span>               <span class="no">Symbol</span>
  <span class="n">code</span>                       <span class="nb">String</span>
  <span class="n">command</span>                    <span class="nb">String</span><span class="p">,</span> <span class="nb">Array</span>
  <span class="n">convert_boolean_return</span>     <span class="no">TrueClass</span><span class="p">,</span> <span class="no">FalseClass</span>
  <span class="n">creates</span>                    <span class="nb">String</span>
  <span class="n">cwd</span>                        <span class="nb">String</span>
  <span class="n">environment</span>                <span class="no">Hash</span>
  <span class="n">flags</span>                      <span class="nb">String</span>
  <span class="n">group</span>                      <span class="nb">String</span><span class="p">,</span> <span class="nb">Integer</span>
  <span class="n">guard_interpreter</span>          <span class="no">Symbol</span>
  <span class="n">interpreter</span>                <span class="nb">String</span>
  <span class="n">notifies</span>                   <span class="c1"># see description</span>
  <span class="n">provider</span>                   <span class="no">Chef</span><span class="o">::</span><span class="no">Provider</span><span class="o">::</span><span class="no">PowershellScript</span>
  <span class="n">returns</span>                    <span class="nb">Integer</span><span class="p">,</span> <span class="nb">Array</span>
  <span class="n">subscribes</span>                 <span class="c1"># see description</span>
  <span class="n">timeout</span>                    <span class="nb">Integer</span><span class="p">,</span> <span class="nb">Float</span>
  <span class="n">action</span>                     <span class="no">Symbol</span> <span class="c1"># defaults to :run if not specified</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">powershell_script</span></tt> is the resource</li>
<li><tt class="docutils literal"><span class="pre">name</span></tt> is the name of the resource block</li>
<li><tt class="docutils literal"><span class="pre">command</span></tt> is the command to be run and <tt class="docutils literal"><span class="pre">cwd</span></tt> is the location from which the command is run</li>
<li><tt class="docutils literal"><span class="pre">action</span></tt> identifies the steps the chef-client will take to bring the node into the desired state</li>
<li><tt class="docutils literal"><span class="pre">architecture</span></tt>, <tt class="docutils literal"><span class="pre">code</span></tt>, <tt class="docutils literal"><span class="pre">command</span></tt>, <tt class="docutils literal"><span class="pre">convert_boolean_return</span></tt>, <tt class="docutils literal"><span class="pre">creates</span></tt>, <tt class="docutils literal"><span class="pre">cwd</span></tt>, <tt class="docutils literal"><span class="pre">environment</span></tt>, <tt class="docutils literal"><span class="pre">flags</span></tt>, <tt class="docutils literal"><span class="pre">group</span></tt>, <tt class="docutils literal"><span class="pre">guard_interpreter</span></tt>, <tt class="docutils literal"><span class="pre">interpreter</span></tt>, <tt class="docutils literal"><span class="pre">provider</span></tt>, <tt class="docutils literal"><span class="pre">returns</span></tt>, and <tt class="docutils literal"><span class="pre">timeout</span></tt> are properties of this resource, with the Ruby type shown. See &#8220;Properties&#8221; section below for more information about all of the properties that may be used with this resource.</li>
</ul>
</div>
<div class="section" id="id50">
<h4>Actions<a class="headerlink" href="#id50" title="Permalink to this headline"></a></h4>
<p>This resource has the following actions:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:nothing</span></tt></dt>
<dd>Inherited from <strong>execute</strong> resource. Prevent a command from running. This action is used to specify that a command is run only when another resource notifies it.</dd>
<dt><tt class="docutils literal"><span class="pre">:run</span></tt></dt>
<dd>Default. Run the script.</dd>
</dl>
</div>
<div class="section" id="id51">
<h4>Attributes<a class="headerlink" href="#id51" title="Permalink to this headline"></a></h4>
<p>This resource has the following properties:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">architecture</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol</p>
<p class="last">The architecture of the process under which a script is executed. If a value is not provided, the chef-client defaults to the correct value for the architecture, as determined by Ohai. An exception is raised when anything other than <tt class="docutils literal"><span class="pre">:i386</span></tt> is specified for a 32-bit process. Possible values: <tt class="docutils literal"><span class="pre">:i386</span></tt> (for 32-bit processes) and <tt class="docutils literal"><span class="pre">:x86_64</span></tt> (for 64-bit processes).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">code</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">A quoted (&#8221; &#8221;) string of code to be executed.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">command</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> String, Array</p>
<p class="last">The name of the command to be executed. Default value: the <tt class="docutils literal"><span class="pre">name</span></tt> of the resource block See &#8220;Syntax&#8221; section above for more information.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">convert_boolean_return</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p>Return <tt class="docutils literal"><span class="pre">0</span></tt> if the last line of a command is evaluated to be true or to return <tt class="docutils literal"><span class="pre">1</span></tt> if the last line is evaluated to be false. Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
<p>When the <tt class="docutils literal"><span class="pre">guard_intrepreter</span></tt> common attribute is set to <tt class="docutils literal"><span class="pre">:powershell_script</span></tt>, a string command will be evaluated as if this value were set to <tt class="docutils literal"><span class="pre">true</span></tt>. This is because the behavior of this attribute is similar to the value of the <tt class="docutils literal"><span class="pre">&quot;$?&quot;</span></tt> expression common in UNIX interpreters. For example, this:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">powershell_script</span> <span class="s1">&#39;make_safe_backup&#39;</span> <span class="k">do</span>
  <span class="n">guard_interpreter</span> <span class="ss">:powershell_script</span>
  <span class="n">code</span> <span class="s1">&#39;cp ~/data/nodes.json ~/data/nodes.bak&#39;</span>
  <span class="n">not_if</span> <span class="s1">&#39;test-path ~/data/nodes.bak&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
<p>is similar to:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">bash</span> <span class="s1">&#39;make_safe_backup&#39;</span> <span class="k">do</span>
  <span class="n">code</span> <span class="s1">&#39;cp ~/data/nodes.json ~/data/nodes.bak&#39;</span>
  <span class="n">not_if</span> <span class="s1">&#39;test -e ~/data/nodes.bak&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">creates</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">Inherited from <strong>execute</strong> resource. Prevent a command from creating a file when that file already exists.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">cwd</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">Inherited from <strong>execute</strong> resource. The current working directory from which a command is run.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">environment</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Hash</p>
<p class="last">Inherited from <strong>execute</strong> resource. A Hash of environment variables in the form of <tt class="docutils literal"><span class="pre">({&quot;ENV_VARIABLE&quot;</span> <span class="pre">=&gt;</span> <span class="pre">&quot;VALUE&quot;})</span></tt>. (These variables must exist for a command to be run successfully.)</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">flags</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">A string that is passed to the Windows PowerShell command. Default value: <tt class="docutils literal"><span class="pre">-NoLogo,</span> <span class="pre">-NonInteractive,</span> <span class="pre">-NoProfile,</span> <span class="pre">-ExecutionPolicy</span> <span class="pre">RemoteSigned,</span> <span class="pre">-InputFormat</span> <span class="pre">None,</span> <span class="pre">-File</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">group</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> String, Integer</p>
<p class="last">Inherited from <strong>execute</strong> resource. The group name or group ID that must be changed before running a command.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">guard_interpreter</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol</p>
<p class="last">Default value: <tt class="docutils literal"><span class="pre">:powershell_script</span></tt>. When this property is set to <tt class="docutils literal"><span class="pre">:powershell_script</span></tt>, the 64-bit version of the Windows PowerShell shell will be used to evaluate strings values for the <tt class="docutils literal"><span class="pre">not_if</span></tt> and <tt class="docutils literal"><span class="pre">only_if</span></tt> properties. Set this value to <tt class="docutils literal"><span class="pre">:default</span></tt> to use the 32-bit version of the cmd.exe shell.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">ignore_failure</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Continue running a recipe if a resource fails for any reason. Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">interpreter</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The script interpreter to use during code execution. Changing the default value of this property is not supported.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">notifies</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may notify another resource to take action when its state changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> that resource should take, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action. A resource may notifiy more than one resource; use a <tt class="docutils literal"><span class="pre">notifies</span></tt> statement for each resource to be notified.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">notifies</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">notifies</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">provider</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Chef Class</p>
<p class="last">Optional. Explicitly specifies a provider.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retries</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The number of times to catch exceptions and retry the resource. Default value: <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retry_delay</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The retry delay (in seconds). Default value: <tt class="docutils literal"><span class="pre">2</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">returns</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> Integer, Array</p>
<p class="last">Inherited from <strong>execute</strong> resource. The return value for a command. This may be an array of accepted values. An exception is raised when the return value(s) do not match. Default value: <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">subscribes</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> to be taken, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">subscribes</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">subscribes</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">timeout</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> Integer, Float</p>
<p class="last">Inherited from <strong>execute</strong> resource. The amount of time (in seconds) a command is to wait before timing out. Default value: <tt class="docutils literal"><span class="pre">3600</span></tt>.</p>
</dd>
</dl>
</div>
<div class="section" id="id52">
<h4>Examples<a class="headerlink" href="#id52" title="Permalink to this headline"></a></h4>
<p>The following examples demonstrate various approaches for using resources in recipes. If you want to see examples of how Chef uses resources in recipes, take a closer look at the cookbooks that Chef authors and maintains: <a class="reference external" href="https://github.com/chef-cookbooks">https://github.com/chef-cookbooks</a>.</p>
<p><strong>Write to an interpolated path</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">powershell_script</span> <span class="s1">&#39;write-to-interpolated-path&#39;</span> <span class="k">do</span>
  <span class="n">code</span> <span class="o">&lt;&lt;-</span><span class="no">EOH</span>
<span class="sh">  $stream = [System.IO.StreamWriter] &quot;#{Chef::Config[:file_cache_path]}/powershell-test.txt&quot;</span>
<span class="sh">  $stream.WriteLine(&quot;In #{Chef::Config[:file_cache_path]}...word.&quot;)</span>
<span class="sh">  $stream.close()</span>
<span class="no">  EOH</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Change the working directory</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">powershell_script</span> <span class="s1">&#39;cwd-then-write&#39;</span> <span class="k">do</span>
  <span class="n">cwd</span> <span class="no">Chef</span><span class="o">::</span><span class="no">Config</span><span class="o">[</span><span class="ss">:file_cache_path</span><span class="o">]</span>
  <span class="n">code</span> <span class="o">&lt;&lt;-</span><span class="no">EOH</span>
<span class="sh">  $stream = [System.IO.StreamWriter] &quot;C:/powershell-test2.txt&quot;</span>
<span class="sh">  $pwd = pwd</span>
<span class="sh">  $stream.WriteLine(&quot;This is the contents of: $pwd&quot;)</span>
<span class="sh">  $dirs = dir</span>
<span class="sh">  foreach ($dir in $dirs) {</span>
<span class="sh">    $stream.WriteLine($dir.fullname)</span>
<span class="sh">  }</span>
<span class="sh">  $stream.close()</span>
<span class="no">  EOH</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Change the working directory in Microsoft Windows</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">powershell_script</span> <span class="s1">&#39;cwd-to-win-env-var&#39;</span> <span class="k">do</span>
  <span class="n">cwd</span> <span class="s1">&#39;%TEMP%&#39;</span>
  <span class="n">code</span> <span class="o">&lt;&lt;-</span><span class="no">EOH</span>
<span class="sh">  $stream = [System.IO.StreamWriter] &quot;./temp-write-from-chef.txt&quot;</span>
<span class="sh">  $stream.WriteLine(&quot;chef on windows rox yo!&quot;)</span>
<span class="sh">  $stream.close()</span>
<span class="no">  EOH</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Pass an environment variable to a script</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">powershell_script</span> <span class="s1">&#39;read-env-var&#39;</span> <span class="k">do</span>
  <span class="n">cwd</span> <span class="no">Chef</span><span class="o">::</span><span class="no">Config</span><span class="o">[</span><span class="ss">:file_cache_path</span><span class="o">]</span>
  <span class="n">environment</span> <span class="p">({</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;BAZ&#39;</span><span class="p">})</span>
  <span class="n">code</span> <span class="o">&lt;&lt;-</span><span class="no">EOH</span>
<span class="sh">  $stream = [System.IO.StreamWriter] &quot;./test-read-env-var.txt&quot;</span>
<span class="sh">  $stream.WriteLine(&quot;FOO is $env:foo&quot;)</span>
<span class="sh">  $stream.close()</span>
<span class="no">  EOH</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="registry-key">
<h3>registry_key<a class="headerlink" href="#registry-key" title="Permalink to this headline"></a></h3>
<p>Use the <strong>registry_key</strong> resource to create and delete registry keys in Microsoft Windows.</p>
<div class="section" id="id53">
<h4>Syntax<a class="headerlink" href="#id53" title="Permalink to this headline"></a></h4>
<p>A <strong>registry_key</strong> resource block creates and deletes registry keys in Microsoft Windows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">registry_key</span> <span class="s2">&quot;HKEY_LOCAL_MACHINE</span><span class="se">\\</span><span class="s2">...</span><span class="se">\\</span><span class="s2">System&quot;</span> <span class="k">do</span>
  <span class="n">values</span> <span class="o">[</span><span class="p">{</span>
    <span class="ss">:name</span> <span class="o">=&gt;</span> <span class="s2">&quot;NewRegistryKeyValue&quot;</span><span class="p">,</span>
    <span class="ss">:type</span> <span class="o">=&gt;</span> <span class="ss">:multi_string</span><span class="p">,</span>
    <span class="ss">:data</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="s1">&#39;foo\0bar\0\0&#39;</span><span class="o">]</span>
  <span class="p">}</span><span class="o">]</span>
  <span class="n">action</span> <span class="ss">:create</span>
<span class="k">end</span>
</pre></div>
</div>
<p>Use multiple registry key entries with key values that are based on node attributes:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">registry_key</span> <span class="s1">&#39;HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\name_of_registry_key&#39;</span> <span class="k">do</span>
  <span class="n">values</span> <span class="o">[</span><span class="p">{</span><span class="ss">:name</span> <span class="o">=&gt;</span> <span class="s1">&#39;key_name&#39;</span><span class="p">,</span> <span class="ss">:type</span> <span class="o">=&gt;</span> <span class="ss">:string</span><span class="p">,</span> <span class="ss">:data</span> <span class="o">=&gt;</span> <span class="s1">&#39;C:\Windows\System32\file_name.bmp&#39;</span><span class="p">},</span>
          <span class="p">{</span><span class="ss">:name</span> <span class="o">=&gt;</span> <span class="s1">&#39;key_name&#39;</span><span class="p">,</span> <span class="ss">:type</span> <span class="o">=&gt;</span> <span class="ss">:string</span><span class="p">,</span> <span class="ss">:data</span> <span class="o">=&gt;</span> <span class="n">node</span><span class="o">[</span><span class="s1">&#39;node_name&#39;</span><span class="o">][</span><span class="s1">&#39;attribute&#39;</span><span class="o">][</span><span class="s1">&#39;value&#39;</span><span class="o">]</span><span class="p">},</span>
          <span class="p">{</span><span class="ss">:name</span> <span class="o">=&gt;</span> <span class="s1">&#39;key_name&#39;</span><span class="p">,</span> <span class="ss">:type</span> <span class="o">=&gt;</span> <span class="ss">:string</span><span class="p">,</span> <span class="ss">:data</span> <span class="o">=&gt;</span> <span class="n">node</span><span class="o">[</span><span class="s1">&#39;node_name&#39;</span><span class="o">][</span><span class="s1">&#39;attribute&#39;</span><span class="o">][</span><span class="s1">&#39;value&#39;</span><span class="o">]</span><span class="p">}</span>
         <span class="o">]</span>
  <span class="n">action</span> <span class="ss">:create</span>
<span class="k">end</span>
</pre></div>
</div>
<p>The full syntax for all of the properties that are available to the <strong>registry_key</strong> resource is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">registry_key</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
  <span class="n">architecture</span>               <span class="no">Symbol</span>
  <span class="n">key</span>                        <span class="nb">String</span> <span class="c1"># defaults to &#39;name&#39; if not specified</span>
  <span class="n">notifies</span>                   <span class="c1"># see description</span>
  <span class="n">provider</span>                   <span class="no">Chef</span><span class="o">::</span><span class="no">Provider</span><span class="o">::</span><span class="no">Windows</span><span class="o">::</span><span class="no">Registry</span>
  <span class="n">recursive</span>                  <span class="no">TrueClass</span><span class="p">,</span> <span class="no">FalseClass</span>
  <span class="n">subscribes</span>                 <span class="c1"># see description</span>
  <span class="n">values</span>                     <span class="no">Hash</span><span class="p">,</span> <span class="nb">Array</span>
  <span class="n">action</span>                     <span class="no">Symbol</span> <span class="c1"># defaults to :create if not specified</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">registry_key</span></tt> is the resource</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">name</span></tt> is the name of the resource block</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">values</span></tt> is a hash that contains at least one registry key to be created or deleted. Each registry key in the hash is grouped by brackets in which the <tt class="docutils literal"><span class="pre">:name</span></tt>, <tt class="docutils literal"><span class="pre">:type</span></tt>, and <tt class="docutils literal"><span class="pre">:data</span></tt> values for that registry key are specified.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">:type</span></tt> represents the values available for registry keys in Microsoft Windows. Use <tt class="docutils literal"><span class="pre">:binary</span></tt> for REG_BINARY, <tt class="docutils literal"><span class="pre">:string</span></tt> for REG_SZ, <tt class="docutils literal"><span class="pre">:multi_string</span></tt> for REG_MULTI_SZ, <tt class="docutils literal"><span class="pre">:expand_string</span></tt> for REG_EXPAND_SZ, <tt class="docutils literal"><span class="pre">:dword</span></tt> for REG_DWORD, <tt class="docutils literal"><span class="pre">:dword_big_endian</span></tt> for REG_DWORD_BIG_ENDIAN, or <tt class="docutils literal"><span class="pre">:qword</span></tt> for REG_QWORD.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><tt class="docutils literal"><span class="pre">:multi_string</span></tt> must be an array, even if there is only a single string.</p>
</div>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">action</span></tt> identifies the steps the chef-client will take to bring the node into the desired state</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">architecture</span></tt>, <tt class="docutils literal"><span class="pre">key</span></tt>, <tt class="docutils literal"><span class="pre">provider</span></tt>, <tt class="docutils literal"><span class="pre">recursive</span></tt> and <tt class="docutils literal"><span class="pre">values</span></tt> are properties of this resource, with the Ruby type shown. See &#8220;Properties&#8221; section below for more information about all of the properties that may be used with this resource.</p>
</li>
</ul>
<div class="section" id="path-separators">
<h5>Path Separators<a class="headerlink" href="#path-separators" title="Permalink to this headline"></a></h5>
<p>A Microsoft Windows registry key can be used as a string in Ruby code, such as when a registry key is used as the name of a recipe. In Ruby, when a registry key is enclosed in a double-quoted string (<tt class="docutils literal"><span class="pre">&quot;</span> <span class="pre">&quot;</span></tt>), the same backslash character (<tt class="docutils literal"><span class="pre">\</span></tt>) that is used to define the registry key path separator is also used in Ruby to define an escape character. Therefore, the registry key path separators must be escaped when they are enclosed in a double-quoted string. For example, the following registry key:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="no">HKCU</span><span class="p">\</span><span class="no">SOFTWARE</span><span class="p">\</span><span class="no">Policies</span><span class="p">\</span><span class="no">Microsoft</span><span class="p">\</span><span class="no">Windows</span><span class="p">\</span><span class="no">CurrentVersion</span><span class="p">\</span><span class="no">Themes</span>
</pre></div>
</div>
<p>may be encloused in a single-quoted string with a single backslash:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="s1">&#39;HKCU\SOFTWARE\path\to\key\Themes&#39;</span>
</pre></div>
</div>
<p>or may be enclosed in a double-quoted string with an extra backslash as an escape character:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="s2">&quot;HKCU</span><span class="se">\\</span><span class="s2">SOFTWARE</span><span class="se">\\</span><span class="s2">path</span><span class="se">\\</span><span class="s2">to</span><span class="se">\\</span><span class="s2">key</span><span class="se">\\</span><span class="s2">Themes&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="recipe-dsl-methods">
<h4>Recipe DSL Methods<a class="headerlink" href="#recipe-dsl-methods" title="Permalink to this headline"></a></h4>
<p>Six methods are present in the Recipe DSL to help verify the registry during a chef-client run on the Microsoft Windows platform&#8212;<tt class="docutils literal"><span class="pre">registry_data_exists?</span></tt>, <tt class="docutils literal"><span class="pre">registry_get_subkeys</span></tt>, <tt class="docutils literal"><span class="pre">registry_get_values</span></tt>, <tt class="docutils literal"><span class="pre">registry_has_subkeys?</span></tt>, <tt class="docutils literal"><span class="pre">registry_key_exists?</span></tt>, and <tt class="docutils literal"><span class="pre">registry_value_exists?</span></tt>&#8212;these helpers ensure the <strong>powershell_script</strong> resource is idempotent.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The recommended order in which registry key-specific methods should be used within a recipe is: <tt class="docutils literal"><span class="pre">key_exists?</span></tt>, <tt class="docutils literal"><span class="pre">value_exists?</span></tt>, <tt class="docutils literal"><span class="pre">data_exists?</span></tt>, <tt class="docutils literal"><span class="pre">get_values</span></tt>, <tt class="docutils literal"><span class="pre">has_subkeys?</span></tt>, and then <tt class="docutils literal"><span class="pre">get_subkeys</span></tt>.</p>
</div>
<div class="section" id="registry-data-exists">
<h5>registry_data_exists?<a class="headerlink" href="#registry-data-exists" title="Permalink to this headline"></a></h5>
<p>Use the <tt class="docutils literal"><span class="pre">registry_data_exists?</span></tt> method to find out if a Microsoft Windows registry key contains the specified data of the specified type under the value.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method can be used in recipes and from within the <tt class="docutils literal"><span class="pre">not_if</span></tt> and <tt class="docutils literal"><span class="pre">only_if</span></tt> blocks in resources. This method is not designed to create or modify a registry key. If a registry key needs to be modified, use the <strong>registry_key</strong> resource.</p>
</div>
<p>The syntax for the <tt class="docutils literal"><span class="pre">registry_data_exists?</span></tt> method is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">registry_data_exists?</span><span class="p">(</span>
  <span class="no">KEY_PATH</span><span class="p">,</span>
  <span class="p">{</span> <span class="ss">:name</span> <span class="o">=&gt;</span> <span class="s1">&#39;NAME&#39;</span><span class="p">,</span> <span class="ss">:type</span> <span class="o">=&gt;</span> <span class="no">TYPE</span><span class="p">,</span> <span class="ss">:data</span> <span class="o">=&gt;</span> <span class="no">DATA</span> <span class="p">},</span>
  <span class="no">ARCHITECTURE</span>
<span class="p">)</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">KEY_PATH</span></tt> is the path to the registry key value. The path must include the registry hive, which can be specified either as its full name or as the 3- or 4-letter abbreviation. For example, both <tt class="docutils literal"><span class="pre">HKLM\SECURITY</span></tt> and <tt class="docutils literal"><span class="pre">HKEY_LOCAL_MACHINE\SECURITY</span></tt> are both valid and equivalent. The following hives are valid: <tt class="docutils literal"><span class="pre">HKEY_LOCAL_MACHINE</span></tt>, <tt class="docutils literal"><span class="pre">HKLM</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CURRENT_CONFIG</span></tt>, <tt class="docutils literal"><span class="pre">HKCC</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CLASSES_ROOT</span></tt>, <tt class="docutils literal"><span class="pre">HKCR</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_USERS</span></tt>, <tt class="docutils literal"><span class="pre">HKU</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CURRENT_USER</span></tt>, and <tt class="docutils literal"><span class="pre">HKCU</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">{</span> <span class="pre">:name</span> <span class="pre">=&gt;</span> <span class="pre">'NAME',</span> <span class="pre">:type</span> <span class="pre">=&gt;</span> <span class="pre">TYPE,</span> <span class="pre">:data</span> <span class="pre">=&gt;</span> <span class="pre">DATA</span> <span class="pre">}</span></tt> is a hash that contains the expected name, type, and data of the registry key value</li>
<li><tt class="docutils literal"><span class="pre">:type</span></tt> represents the values available for registry keys in Microsoft Windows. Use <tt class="docutils literal"><span class="pre">:binary</span></tt> for REG_BINARY, <tt class="docutils literal"><span class="pre">:string</span></tt> for REG_SZ, <tt class="docutils literal"><span class="pre">:multi_string</span></tt> for REG_MULTI_SZ, <tt class="docutils literal"><span class="pre">:expand_string</span></tt> for REG_EXPAND_SZ, <tt class="docutils literal"><span class="pre">:dword</span></tt> for REG_DWORD, <tt class="docutils literal"><span class="pre">:dword_big_endian</span></tt> for REG_DWORD_BIG_ENDIAN, or <tt class="docutils literal"><span class="pre">:qword</span></tt> for REG_QWORD.</li>
<li><tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> is one of the following values: <tt class="docutils literal"><span class="pre">:x86_64</span></tt>, <tt class="docutils literal"><span class="pre">:i386</span></tt>, or <tt class="docutils literal"><span class="pre">:machine</span></tt>. In order to read or write 32-bit registry keys on 64-bit machines running Microsoft Windows, the <tt class="docutils literal"><span class="pre">architecture</span></tt> property must be set to <tt class="docutils literal"><span class="pre">:i386</span></tt>. The <tt class="docutils literal"><span class="pre">:x86_64</span></tt> value can be used to force writing to a 64-bit registry location, but this value is less useful than the default (<tt class="docutils literal"><span class="pre">:machine</span></tt>) because the chef-client returns an exception if <tt class="docutils literal"><span class="pre">:x86_64</span></tt> is used and the machine turns out to be a 32-bit machine (whereas with <tt class="docutils literal"><span class="pre">:machine</span></tt>, the chef-client is able to access the registry key on the 32-bit machine).</li>
</ul>
<p>This method will return <tt class="docutils literal"><span class="pre">true</span></tt> or <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> attribute should only specify <tt class="docutils literal"><span class="pre">:x86_64</span></tt> or <tt class="docutils literal"><span class="pre">:i386</span></tt> when it is necessary to write 32-bit (<tt class="docutils literal"><span class="pre">:i386</span></tt>) or 64-bit (<tt class="docutils literal"><span class="pre">:x86_64</span></tt>) values on a 64-bit machine. <tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> will default to <tt class="docutils literal"><span class="pre">:machine</span></tt> unless a specific value is given.</p>
</div>
</div>
<div class="section" id="registry-get-subkeys">
<h5>registry_get_subkeys<a class="headerlink" href="#registry-get-subkeys" title="Permalink to this headline"></a></h5>
<p>Use the <tt class="docutils literal"><span class="pre">registry_get_subkeys</span></tt> method to get a list of registry key values that are present for a Microsoft Windows registry key.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method can be used in recipes and from within the <tt class="docutils literal"><span class="pre">not_if</span></tt> and <tt class="docutils literal"><span class="pre">only_if</span></tt> blocks in resources. This method is not designed to create or modify a registry key. If a registry key needs to be modified, use the <strong>registry_key</strong> resource.</p>
</div>
<p>The syntax for the <tt class="docutils literal"><span class="pre">registry_get_subkeys</span></tt> method is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">subkey_array</span> <span class="o">=</span> <span class="n">registry_get_subkeys</span><span class="p">(</span><span class="no">KEY_PATH</span><span class="p">,</span> <span class="no">ARCHITECTURE</span><span class="p">)</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">KEY_PATH</span></tt> is the path to the registry key. The path must include the registry hive, which can be specified either as its full name or as the 3- or 4-letter abbreviation. For example, both <tt class="docutils literal"><span class="pre">HKLM\SECURITY</span></tt> and <tt class="docutils literal"><span class="pre">HKEY_LOCAL_MACHINE\SECURITY</span></tt> are both valid and equivalent. The following hives are valid: <tt class="docutils literal"><span class="pre">HKEY_LOCAL_MACHINE</span></tt>, <tt class="docutils literal"><span class="pre">HKLM</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CURRENT_CONFIG</span></tt>, <tt class="docutils literal"><span class="pre">HKCC</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CLASSES_ROOT</span></tt>, <tt class="docutils literal"><span class="pre">HKCR</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_USERS</span></tt>, <tt class="docutils literal"><span class="pre">HKU</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CURRENT_USER</span></tt>, and <tt class="docutils literal"><span class="pre">HKCU</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> is one of the following values: <tt class="docutils literal"><span class="pre">:x86_64</span></tt>, <tt class="docutils literal"><span class="pre">:i386</span></tt>, or <tt class="docutils literal"><span class="pre">:machine</span></tt>. In order to read or write 32-bit registry keys on 64-bit machines running Microsoft Windows, the <tt class="docutils literal"><span class="pre">architecture</span></tt> property must be set to <tt class="docutils literal"><span class="pre">:i386</span></tt>. The <tt class="docutils literal"><span class="pre">:x86_64</span></tt> value can be used to force writing to a 64-bit registry location, but this value is less useful than the default (<tt class="docutils literal"><span class="pre">:machine</span></tt>) because the chef-client returns an exception if <tt class="docutils literal"><span class="pre">:x86_64</span></tt> is used and the machine turns out to be a 32-bit machine (whereas with <tt class="docutils literal"><span class="pre">:machine</span></tt>, the chef-client is able to access the registry key on the 32-bit machine).</li>
</ul>
<p>This returns an array of registry key values.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> attribute should only specify <tt class="docutils literal"><span class="pre">:x86_64</span></tt> or <tt class="docutils literal"><span class="pre">:i386</span></tt> when it is necessary to write 32-bit (<tt class="docutils literal"><span class="pre">:i386</span></tt>) or 64-bit (<tt class="docutils literal"><span class="pre">:x86_64</span></tt>) values on a 64-bit machine. <tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> will default to <tt class="docutils literal"><span class="pre">:machine</span></tt> unless a specific value is given.</p>
</div>
</div>
<div class="section" id="registry-get-values">
<h5>registry_get_values<a class="headerlink" href="#registry-get-values" title="Permalink to this headline"></a></h5>
<p>Use the <tt class="docutils literal"><span class="pre">registry_get_values</span></tt> method to get the registry key values (name, type, and data) for a Microsoft Windows registry key.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method can be used in recipes and from within the <tt class="docutils literal"><span class="pre">not_if</span></tt> and <tt class="docutils literal"><span class="pre">only_if</span></tt> blocks in resources. This method is not designed to create or modify a registry key. If a registry key needs to be modified, use the <strong>registry_key</strong> resource.</p>
</div>
<p>The syntax for the <tt class="docutils literal"><span class="pre">registry_get_values</span></tt> method is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">subkey_array</span> <span class="o">=</span> <span class="n">registry_get_values</span><span class="p">(</span><span class="no">KEY_PATH</span><span class="p">,</span> <span class="no">ARCHITECTURE</span><span class="p">)</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">KEY_PATH</span></tt> is the path to the registry key. The path must include the registry hive, which can be specified either as its full name or as the 3- or 4-letter abbreviation. For example, both <tt class="docutils literal"><span class="pre">HKLM\SECURITY</span></tt> and <tt class="docutils literal"><span class="pre">HKEY_LOCAL_MACHINE\SECURITY</span></tt> are both valid and equivalent. The following hives are valid: <tt class="docutils literal"><span class="pre">HKEY_LOCAL_MACHINE</span></tt>, <tt class="docutils literal"><span class="pre">HKLM</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CURRENT_CONFIG</span></tt>, <tt class="docutils literal"><span class="pre">HKCC</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CLASSES_ROOT</span></tt>, <tt class="docutils literal"><span class="pre">HKCR</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_USERS</span></tt>, <tt class="docutils literal"><span class="pre">HKU</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CURRENT_USER</span></tt>, and <tt class="docutils literal"><span class="pre">HKCU</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> is one of the following values: <tt class="docutils literal"><span class="pre">:x86_64</span></tt>, <tt class="docutils literal"><span class="pre">:i386</span></tt>, or <tt class="docutils literal"><span class="pre">:machine</span></tt>. In order to read or write 32-bit registry keys on 64-bit machines running Microsoft Windows, the <tt class="docutils literal"><span class="pre">architecture</span></tt> property must be set to <tt class="docutils literal"><span class="pre">:i386</span></tt>. The <tt class="docutils literal"><span class="pre">:x86_64</span></tt> value can be used to force writing to a 64-bit registry location, but this value is less useful than the default (<tt class="docutils literal"><span class="pre">:machine</span></tt>) because the chef-client returns an exception if <tt class="docutils literal"><span class="pre">:x86_64</span></tt> is used and the machine turns out to be a 32-bit machine (whereas with <tt class="docutils literal"><span class="pre">:machine</span></tt>, the chef-client is able to access the registry key on the 32-bit machine).</li>
</ul>
<p>This returns an array of registry key values.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> attribute should only specify <tt class="docutils literal"><span class="pre">:x86_64</span></tt> or <tt class="docutils literal"><span class="pre">:i386</span></tt> when it is necessary to write 32-bit (<tt class="docutils literal"><span class="pre">:i386</span></tt>) or 64-bit (<tt class="docutils literal"><span class="pre">:x86_64</span></tt>) values on a 64-bit machine. <tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> will default to <tt class="docutils literal"><span class="pre">:machine</span></tt> unless a specific value is given.</p>
</div>
</div>
<div class="section" id="registry-has-subkeys">
<h5>registry_has_subkeys?<a class="headerlink" href="#registry-has-subkeys" title="Permalink to this headline"></a></h5>
<p>Use the <tt class="docutils literal"><span class="pre">registry_has_subkeys?</span></tt> method to find out if a Microsoft Windows registry key has one (or more) values.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method can be used in recipes and from within the <tt class="docutils literal"><span class="pre">not_if</span></tt> and <tt class="docutils literal"><span class="pre">only_if</span></tt> blocks in resources. This method is not designed to create or modify a registry key. If a registry key needs to be modified, use the <strong>registry_key</strong> resource.</p>
</div>
<p>The syntax for the <tt class="docutils literal"><span class="pre">registry_has_subkeys?</span></tt> method is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">registry_has_subkeys?</span><span class="p">(</span><span class="no">KEY_PATH</span><span class="p">,</span> <span class="no">ARCHITECTURE</span><span class="p">)</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">KEY_PATH</span></tt> is the path to the registry key. The path must include the registry hive, which can be specified either as its full name or as the 3- or 4-letter abbreviation. For example, both <tt class="docutils literal"><span class="pre">HKLM\SECURITY</span></tt> and <tt class="docutils literal"><span class="pre">HKEY_LOCAL_MACHINE\SECURITY</span></tt> are both valid and equivalent. The following hives are valid: <tt class="docutils literal"><span class="pre">HKEY_LOCAL_MACHINE</span></tt>, <tt class="docutils literal"><span class="pre">HKLM</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CURRENT_CONFIG</span></tt>, <tt class="docutils literal"><span class="pre">HKCC</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CLASSES_ROOT</span></tt>, <tt class="docutils literal"><span class="pre">HKCR</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_USERS</span></tt>, <tt class="docutils literal"><span class="pre">HKU</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CURRENT_USER</span></tt>, and <tt class="docutils literal"><span class="pre">HKCU</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> is one of the following values: <tt class="docutils literal"><span class="pre">:x86_64</span></tt>, <tt class="docutils literal"><span class="pre">:i386</span></tt>, or <tt class="docutils literal"><span class="pre">:machine</span></tt>. In order to read or write 32-bit registry keys on 64-bit machines running Microsoft Windows, the <tt class="docutils literal"><span class="pre">architecture</span></tt> property must be set to <tt class="docutils literal"><span class="pre">:i386</span></tt>. The <tt class="docutils literal"><span class="pre">:x86_64</span></tt> value can be used to force writing to a 64-bit registry location, but this value is less useful than the default (<tt class="docutils literal"><span class="pre">:machine</span></tt>) because the chef-client returns an exception if <tt class="docutils literal"><span class="pre">:x86_64</span></tt> is used and the machine turns out to be a 32-bit machine (whereas with <tt class="docutils literal"><span class="pre">:machine</span></tt>, the chef-client is able to access the registry key on the 32-bit machine).</li>
</ul>
<p>This method will return <tt class="docutils literal"><span class="pre">true</span></tt> or <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> attribute should only specify <tt class="docutils literal"><span class="pre">:x86_64</span></tt> or <tt class="docutils literal"><span class="pre">:i386</span></tt> when it is necessary to write 32-bit (<tt class="docutils literal"><span class="pre">:i386</span></tt>) or 64-bit (<tt class="docutils literal"><span class="pre">:x86_64</span></tt>) values on a 64-bit machine. <tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> will default to <tt class="docutils literal"><span class="pre">:machine</span></tt> unless a specific value is given.</p>
</div>
</div>
<div class="section" id="registry-key-exists">
<h5>registry_key_exists?<a class="headerlink" href="#registry-key-exists" title="Permalink to this headline"></a></h5>
<p>Use the <tt class="docutils literal"><span class="pre">registry_key_exists?</span></tt> method to find out if a Microsoft Windows registry key exists at the specified path.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method can be used in recipes and from within the <tt class="docutils literal"><span class="pre">not_if</span></tt> and <tt class="docutils literal"><span class="pre">only_if</span></tt> blocks in resources. This method is not designed to create or modify a registry key. If a registry key needs to be modified, use the <strong>registry_key</strong> resource.</p>
</div>
<p>The syntax for the <tt class="docutils literal"><span class="pre">registry_key_exists?</span></tt> method is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">registry_key_exists?</span><span class="p">(</span><span class="no">KEY_PATH</span><span class="p">,</span> <span class="no">ARCHITECTURE</span><span class="p">)</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">KEY_PATH</span></tt> is the path to the registry key. The path must include the registry hive, which can be specified either as its full name or as the 3- or 4-letter abbreviation. For example, both <tt class="docutils literal"><span class="pre">HKLM\SECURITY</span></tt> and <tt class="docutils literal"><span class="pre">HKEY_LOCAL_MACHINE\SECURITY</span></tt> are both valid and equivalent. The following hives are valid: <tt class="docutils literal"><span class="pre">HKEY_LOCAL_MACHINE</span></tt>, <tt class="docutils literal"><span class="pre">HKLM</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CURRENT_CONFIG</span></tt>, <tt class="docutils literal"><span class="pre">HKCC</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CLASSES_ROOT</span></tt>, <tt class="docutils literal"><span class="pre">HKCR</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_USERS</span></tt>, <tt class="docutils literal"><span class="pre">HKU</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CURRENT_USER</span></tt>, and <tt class="docutils literal"><span class="pre">HKCU</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> is one of the following values: <tt class="docutils literal"><span class="pre">:x86_64</span></tt>, <tt class="docutils literal"><span class="pre">:i386</span></tt>, or <tt class="docutils literal"><span class="pre">:machine</span></tt>. In order to read or write 32-bit registry keys on 64-bit machines running Microsoft Windows, the <tt class="docutils literal"><span class="pre">architecture</span></tt> property must be set to <tt class="docutils literal"><span class="pre">:i386</span></tt>. The <tt class="docutils literal"><span class="pre">:x86_64</span></tt> value can be used to force writing to a 64-bit registry location, but this value is less useful than the default (<tt class="docutils literal"><span class="pre">:machine</span></tt>) because the chef-client returns an exception if <tt class="docutils literal"><span class="pre">:x86_64</span></tt> is used and the machine turns out to be a 32-bit machine (whereas with <tt class="docutils literal"><span class="pre">:machine</span></tt>, the chef-client is able to access the registry key on the 32-bit machine).</li>
</ul>
<p>This method will return <tt class="docutils literal"><span class="pre">true</span></tt> or <tt class="docutils literal"><span class="pre">false</span></tt>. (Any registry key values that are associated with this registry key are ignored.)</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> attribute should only specify <tt class="docutils literal"><span class="pre">:x86_64</span></tt> or <tt class="docutils literal"><span class="pre">:i386</span></tt> when it is necessary to write 32-bit (<tt class="docutils literal"><span class="pre">:i386</span></tt>) or 64-bit (<tt class="docutils literal"><span class="pre">:x86_64</span></tt>) values on a 64-bit machine. <tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> will default to <tt class="docutils literal"><span class="pre">:machine</span></tt> unless a specific value is given.</p>
</div>
</div>
<div class="section" id="registry-value-exists">
<h5>registry_value_exists?<a class="headerlink" href="#registry-value-exists" title="Permalink to this headline"></a></h5>
<p>Use the <tt class="docutils literal"><span class="pre">registry_value_exists?</span></tt> method to find out if a registry key value exists. Use <tt class="docutils literal"><span class="pre">registry_data_exists?</span></tt> to test for the type and data of a registry key value.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method can be used in recipes and from within the <tt class="docutils literal"><span class="pre">not_if</span></tt> and <tt class="docutils literal"><span class="pre">only_if</span></tt> blocks in resources. This method is not designed to create or modify a registry key. If a registry key needs to be modified, use the <strong>registry_key</strong> resource.</p>
</div>
<p>The syntax for the <tt class="docutils literal"><span class="pre">registry_value_exists?</span></tt> method is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">registry_value_exists?</span><span class="p">(</span>
  <span class="no">KEY_PATH</span><span class="p">,</span>
  <span class="p">{</span> <span class="ss">:name</span> <span class="o">=&gt;</span> <span class="s1">&#39;NAME&#39;</span> <span class="p">},</span>
  <span class="no">ARCHITECTURE</span>
<span class="p">)</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">KEY_PATH</span></tt> is the path to the registry key. The path must include the registry hive, which can be specified either as its full name or as the 3- or 4-letter abbreviation. For example, both <tt class="docutils literal"><span class="pre">HKLM\SECURITY</span></tt> and <tt class="docutils literal"><span class="pre">HKEY_LOCAL_MACHINE\SECURITY</span></tt> are both valid and equivalent. The following hives are valid: <tt class="docutils literal"><span class="pre">HKEY_LOCAL_MACHINE</span></tt>, <tt class="docutils literal"><span class="pre">HKLM</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CURRENT_CONFIG</span></tt>, <tt class="docutils literal"><span class="pre">HKCC</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CLASSES_ROOT</span></tt>, <tt class="docutils literal"><span class="pre">HKCR</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_USERS</span></tt>, <tt class="docutils literal"><span class="pre">HKU</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CURRENT_USER</span></tt>, and <tt class="docutils literal"><span class="pre">HKCU</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">{</span> <span class="pre">:name</span> <span class="pre">=&gt;</span> <span class="pre">'NAME'</span> <span class="pre">}</span></tt> is a hash that contains the name of the registry key value; if either <tt class="docutils literal"><span class="pre">:type</span></tt> or <tt class="docutils literal"><span class="pre">:value</span></tt> are specified in the hash, they are ignored</li>
<li><tt class="docutils literal"><span class="pre">:type</span></tt> represents the values available for registry keys in Microsoft Windows. Use <tt class="docutils literal"><span class="pre">:binary</span></tt> for REG_BINARY, <tt class="docutils literal"><span class="pre">:string</span></tt> for REG_SZ, <tt class="docutils literal"><span class="pre">:multi_string</span></tt> for REG_MULTI_SZ, <tt class="docutils literal"><span class="pre">:expand_string</span></tt> for REG_EXPAND_SZ, <tt class="docutils literal"><span class="pre">:dword</span></tt> for REG_DWORD, <tt class="docutils literal"><span class="pre">:dword_big_endian</span></tt> for REG_DWORD_BIG_ENDIAN, or <tt class="docutils literal"><span class="pre">:qword</span></tt> for REG_QWORD.</li>
<li><tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> is one of the following values: <tt class="docutils literal"><span class="pre">:x86_64</span></tt>, <tt class="docutils literal"><span class="pre">:i386</span></tt>, or <tt class="docutils literal"><span class="pre">:machine</span></tt>. In order to read or write 32-bit registry keys on 64-bit machines running Microsoft Windows, the <tt class="docutils literal"><span class="pre">architecture</span></tt> property must be set to <tt class="docutils literal"><span class="pre">:i386</span></tt>. The <tt class="docutils literal"><span class="pre">:x86_64</span></tt> value can be used to force writing to a 64-bit registry location, but this value is less useful than the default (<tt class="docutils literal"><span class="pre">:machine</span></tt>) because the chef-client returns an exception if <tt class="docutils literal"><span class="pre">:x86_64</span></tt> is used and the machine turns out to be a 32-bit machine (whereas with <tt class="docutils literal"><span class="pre">:machine</span></tt>, the chef-client is able to access the registry key on the 32-bit machine).</li>
</ul>
<p>This method will return <tt class="docutils literal"><span class="pre">true</span></tt> or <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> attribute should only specify <tt class="docutils literal"><span class="pre">:x86_64</span></tt> or <tt class="docutils literal"><span class="pre">:i386</span></tt> when it is necessary to write 32-bit (<tt class="docutils literal"><span class="pre">:i386</span></tt>) or 64-bit (<tt class="docutils literal"><span class="pre">:x86_64</span></tt>) values on a 64-bit machine. <tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> will default to <tt class="docutils literal"><span class="pre">:machine</span></tt> unless a specific value is given.</p>
</div>
</div>
</div>
<div class="section" id="id54">
<h4>Actions<a class="headerlink" href="#id54" title="Permalink to this headline"></a></h4>
<p>This resource has the following actions:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:create</span></tt></dt>
<dd>Default. Create a registry key. If a registry key already exists (but does not match), update that registry key to match.</dd>
<dt><tt class="docutils literal"><span class="pre">:create_if_missing</span></tt></dt>
<dd>Create a registry key if it does not exist. Also, create a registry key value if it does not exist.</dd>
<dt><tt class="docutils literal"><span class="pre">:delete</span></tt></dt>
<dd>Delete the specified values for a registry key.</dd>
<dt><tt class="docutils literal"><span class="pre">:delete_key</span></tt></dt>
<dd>Delete the specified registry key and all of its subkeys.</dd>
<dt><tt class="docutils literal"><span class="pre">:nothing</span></tt></dt>
<dd>Define this resource block to do nothing until notified by another resource to take action. When this resource is notified, this resource block is either run immediately or it is queued up to be run at the end of the chef-client run.</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Be careful when using the <tt class="docutils literal"><span class="pre">:delete_key</span></tt> action with the <tt class="docutils literal"><span class="pre">recursive</span></tt> attribute. This will delete the registry key, all of its values and all of the names, types, and data associated with them. This cannot be undone by the chef-client.</p>
</div>
</div>
<div class="section" id="id55">
<h4>Attributes<a class="headerlink" href="#id55" title="Permalink to this headline"></a></h4>
<p>This resource has the following properties:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">architecture</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol</p>
<p>The architecture of the node for which keys are to be created or deleted. Possible values: <tt class="docutils literal"><span class="pre">:i386</span></tt> (for nodes with a 32-bit registry), <tt class="docutils literal"><span class="pre">:x86_64</span></tt> (for nodes with a 64-bit registry), and <tt class="docutils literal"><span class="pre">:machine</span></tt> (to have the chef-client determine the architecture during the chef-client run). Default value: <tt class="docutils literal"><span class="pre">:machine</span></tt>.</p>
<p>In order to read or write 32-bit registry keys on 64-bit machines running Microsoft Windows, the <tt class="docutils literal"><span class="pre">architecture</span></tt> property must be set to <tt class="docutils literal"><span class="pre">:i386</span></tt>. The <tt class="docutils literal"><span class="pre">:x86_64</span></tt> value can be used to force writing to a 64-bit registry location, but this value is less useful than the default (<tt class="docutils literal"><span class="pre">:machine</span></tt>) because the chef-client returns an exception if <tt class="docutils literal"><span class="pre">:x86_64</span></tt> is used and the machine turns out to be a 32-bit machine (whereas with <tt class="docutils literal"><span class="pre">:machine</span></tt>, the chef-client is able to access the registry key on the 32-bit machine).</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> attribute should only specify <tt class="docutils literal"><span class="pre">:x86_64</span></tt> or <tt class="docutils literal"><span class="pre">:i386</span></tt> when it is necessary to write 32-bit (<tt class="docutils literal"><span class="pre">:i386</span></tt>) or 64-bit (<tt class="docutils literal"><span class="pre">:x86_64</span></tt>) values on a 64-bit machine. <tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> will default to <tt class="docutils literal"><span class="pre">:machine</span></tt> unless a specific value is given.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">ignore_failure</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Continue running a recipe if a resource fails for any reason. Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">key</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The path to the location in which a registry key is to be created or from which a registry key is to be deleted. Default value: the <tt class="docutils literal"><span class="pre">name</span></tt> of the resource block See &#8220;Syntax&#8221; section above for more information.
The path must include the registry hive, which can be specified either as its full name or as the 3- or 4-letter abbreviation. For example, both <tt class="docutils literal"><span class="pre">HKLM\SECURITY</span></tt> and <tt class="docutils literal"><span class="pre">HKEY_LOCAL_MACHINE\SECURITY</span></tt> are both valid and equivalent. The following hives are valid: <tt class="docutils literal"><span class="pre">HKEY_LOCAL_MACHINE</span></tt>, <tt class="docutils literal"><span class="pre">HKLM</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CURRENT_CONFIG</span></tt>, <tt class="docutils literal"><span class="pre">HKCC</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CLASSES_ROOT</span></tt>, <tt class="docutils literal"><span class="pre">HKCR</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_USERS</span></tt>, <tt class="docutils literal"><span class="pre">HKU</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CURRENT_USER</span></tt>, and <tt class="docutils literal"><span class="pre">HKCU</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">notifies</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may notify another resource to take action when its state changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> that resource should take, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action. A resource may notifiy more than one resource; use a <tt class="docutils literal"><span class="pre">notifies</span></tt> statement for each resource to be notified.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">notifies</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">notifies</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">provider</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Chef Class</p>
<p class="last">Optional. Explicitly specifies a provider.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">recursive</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p>When creating a key, this value specifies that the required keys for the specified path are to be created. When using the <tt class="docutils literal"><span class="pre">:delete_key</span></tt> action in a recipe, and if the registry key has subkeys, then set the value for this property to <tt class="docutils literal"><span class="pre">true</span></tt>.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Be careful when using the <tt class="docutils literal"><span class="pre">:delete_key</span></tt> action with the <tt class="docutils literal"><span class="pre">recursive</span></tt> attribute. This will delete the registry key, all of its values and all of the names, types, and data associated with them. This cannot be undone by the chef-client.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">retries</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The number of times to catch exceptions and retry the resource. Default value: <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retry_delay</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The retry delay (in seconds). Default value: <tt class="docutils literal"><span class="pre">2</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">subscribes</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> to be taken, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">subscribes</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">subscribes</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">values</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> Hash, Array</p>
<p>An array of hashes, where each Hash contains the values that are to be set under a registry key. Each Hash must contain <tt class="docutils literal"><span class="pre">:name</span></tt>, <tt class="docutils literal"><span class="pre">:type</span></tt>, and <tt class="docutils literal"><span class="pre">:data</span></tt> (and must contain no other key values).</p>
<p><tt class="docutils literal"><span class="pre">:type</span></tt> represents the values available for registry keys in Microsoft Windows. Use <tt class="docutils literal"><span class="pre">:binary</span></tt> for REG_BINARY, <tt class="docutils literal"><span class="pre">:string</span></tt> for REG_SZ, <tt class="docutils literal"><span class="pre">:multi_string</span></tt> for REG_MULTI_SZ, <tt class="docutils literal"><span class="pre">:expand_string</span></tt> for REG_EXPAND_SZ, <tt class="docutils literal"><span class="pre">:dword</span></tt> for REG_DWORD, <tt class="docutils literal"><span class="pre">:dword_big_endian</span></tt> for REG_DWORD_BIG_ENDIAN, or <tt class="docutils literal"><span class="pre">:qword</span></tt> for REG_QWORD.</p>
<div class="last admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><tt class="docutils literal"><span class="pre">:multi_string</span></tt> must be an array, even if there is only a single string.</p>
</div>
</dd>
</dl>
</div>
<div class="section" id="id56">
<h4>Examples<a class="headerlink" href="#id56" title="Permalink to this headline"></a></h4>
<p>The following examples demonstrate various approaches for using resources in recipes. If you want to see examples of how Chef uses resources in recipes, take a closer look at the cookbooks that Chef authors and maintains: <a class="reference external" href="https://github.com/chef-cookbooks">https://github.com/chef-cookbooks</a>.</p>
<p><strong>Create a registry key</strong></p>
<p>Use a double-quoted string:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">registry_key</span> <span class="s2">&quot;HKEY_LOCAL_MACHINE</span><span class="se">\\</span><span class="s2">path-to-key</span><span class="se">\\</span><span class="s2">Policies</span><span class="se">\\</span><span class="s2">System&quot;</span> <span class="k">do</span>
  <span class="n">values</span> <span class="o">[</span><span class="p">{</span>
    <span class="ss">:name</span> <span class="o">=&gt;</span> <span class="s1">&#39;EnableLUA&#39;</span><span class="p">,</span>
    <span class="ss">:type</span> <span class="o">=&gt;</span> <span class="ss">:dword</span><span class="p">,</span>
    <span class="ss">:data</span> <span class="o">=&gt;</span> <span class="mi">0</span>
  <span class="p">}</span><span class="o">]</span>
  <span class="n">action</span> <span class="ss">:create</span>
<span class="k">end</span>
</pre></div>
</div>
<p>or a single-quoted string:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">registry_key</span> <span class="s1">&#39;HKEY_LOCAL_MACHINE\path-to-key\Policies\System&#39;</span> <span class="k">do</span>
  <span class="n">values</span> <span class="o">[</span><span class="p">{</span>
    <span class="ss">:name</span> <span class="o">=&gt;</span> <span class="s1">&#39;EnableLUA&#39;</span><span class="p">,</span>
    <span class="ss">:type</span> <span class="o">=&gt;</span> <span class="ss">:dword</span><span class="p">,</span>
    <span class="ss">:data</span> <span class="o">=&gt;</span> <span class="mi">0</span>
  <span class="p">}</span><span class="o">]</span>
  <span class="n">action</span> <span class="ss">:create</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Delete a registry key value</strong></p>
<p>Use a double-quoted string:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">registry_key</span> <span class="s2">&quot;HKEY_LOCAL_MACHINE</span><span class="se">\\</span><span class="s2">SOFTWARE</span><span class="se">\\</span><span class="s2">path</span><span class="se">\\</span><span class="s2">to</span><span class="se">\\</span><span class="s2">key</span><span class="se">\\</span><span class="s2">AU&quot;</span> <span class="k">do</span>
  <span class="n">values</span> <span class="o">[</span><span class="p">{</span>
    <span class="ss">:name</span> <span class="o">=&gt;</span> <span class="s1">&#39;NoAutoRebootWithLoggedOnUsers&#39;</span><span class="p">,</span>
    <span class="ss">:type</span> <span class="o">=&gt;</span> <span class="ss">:dword</span><span class="p">,</span>
    <span class="ss">:data</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span>
    <span class="p">}</span><span class="o">]</span>
  <span class="n">action</span> <span class="ss">:delete</span>
<span class="k">end</span>
</pre></div>
</div>
<p>or a single-quoted string:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">registry_key</span> <span class="s1">&#39;HKEY_LOCAL_MACHINE\SOFTWARE\path\to\key\AU&#39;</span> <span class="k">do</span>
  <span class="n">values</span> <span class="o">[</span><span class="p">{</span>
    <span class="ss">:name</span> <span class="o">=&gt;</span> <span class="s1">&#39;NoAutoRebootWithLoggedOnUsers&#39;</span><span class="p">,</span>
    <span class="ss">:type</span> <span class="o">=&gt;</span> <span class="ss">:dword</span><span class="p">,</span>
    <span class="ss">:data</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span>
    <span class="p">}</span><span class="o">]</span>
  <span class="n">action</span> <span class="ss">:delete</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If <tt class="docutils literal"><span class="pre">:data</span></tt> is not specified, you get an error: <tt class="docutils literal"><span class="pre">Missing</span> <span class="pre">data</span> <span class="pre">key</span> <span class="pre">in</span> <span class="pre">RegistryKey</span> <span class="pre">values</span> <span class="pre">hash</span></tt></p>
</div>
<p><strong>Delete a registry key and its subkeys, recursively</strong></p>
</div>
</div>
<div class="section" id="remote-file">
<h3>remote_file<a class="headerlink" href="#remote-file" title="Permalink to this headline"></a></h3>
<p><strong>Specify local Windows file path as a valid URI</strong></p>
<p>When specifying a local Microsoft Windows file path as a valid file URI, an additional forward slash (<tt class="docutils literal"><span class="pre">/</span></tt>) is required. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">remote_file</span> <span class="s1">&#39;file:///c:/path/to/file&#39;</span> <span class="k">do</span>
  <span class="o">...</span>       <span class="c1"># other attributes</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="section" id="windows-package">
<h3>windows_package<a class="headerlink" href="#windows-package" title="Permalink to this headline"></a></h3>
<p>Use the <strong>windows_package</strong> resource to manage Microsoft Installer Package (MSI) packages for the Microsoft Windows platform.</p>
<div class="section" id="id57">
<h4>Syntax<a class="headerlink" href="#id57" title="Permalink to this headline"></a></h4>
<p>A <strong>windows_package</strong> resource block manages a package on a node, typically by installing it. The simplest use of the <strong>windows_package</strong> resource is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">windows_package</span> <span class="s1">&#39;package_name&#39;</span>
</pre></div>
</div>
<p>which will install the named package using all of the default options and the default action (<tt class="docutils literal"><span class="pre">:install</span></tt>).</p>
<p>The full syntax for all of the properties that are available to the <strong>windows_package</strong> resource is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">windows_package</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
  <span class="n">checksum</span>                   <span class="nb">String</span>
  <span class="n">installer_type</span>             <span class="no">Symbol</span>
  <span class="n">notifies</span>                   <span class="c1"># see description</span>
  <span class="n">options</span>                    <span class="nb">String</span>
  <span class="n">provider</span>                   <span class="no">Chef</span><span class="o">::</span><span class="no">Provider</span><span class="o">::</span><span class="no">Package</span><span class="o">::</span><span class="no">Windows</span>
  <span class="n">remote_file_attributes</span>     <span class="no">Hash</span>
  <span class="n">returns</span>                    <span class="nb">Integer</span><span class="p">,</span> <span class="nb">Array</span> <span class="n">of</span> <span class="n">integers</span>
  <span class="n">source</span>                     <span class="nb">String</span> <span class="c1"># defaults to &#39;name&#39; if not specified</span>
  <span class="n">subscribes</span>                 <span class="c1"># see description</span>
  <span class="n">timeout</span>                    <span class="nb">String</span><span class="p">,</span> <span class="nb">Integer</span>
  <span class="n">action</span>                     <span class="no">Symbol</span> <span class="c1"># defaults to :install if not specified</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">windows_package</span></tt> tells the chef-client to manage a package</li>
<li><tt class="docutils literal"><span class="pre">'name'</span></tt> is the name of the package</li>
<li><tt class="docutils literal"><span class="pre">action</span></tt> identifies which steps the chef-client will take to bring the node into the desired state</li>
<li><tt class="docutils literal"><span class="pre">checksum</span></tt>, <tt class="docutils literal"><span class="pre">installer_type</span></tt>, <tt class="docutils literal"><span class="pre">options</span></tt>, <tt class="docutils literal"><span class="pre">package_name</span></tt>, <tt class="docutils literal"><span class="pre">provider</span></tt>, <tt class="docutils literal"><span class="pre">remote_file_attributes</span></tt>, <tt class="docutils literal"><span class="pre">returns</span></tt>, <tt class="docutils literal"><span class="pre">source</span></tt>, and <tt class="docutils literal"><span class="pre">timeout</span></tt> are properties of this resource, with the Ruby type shown. See &#8220;Properties&#8221; section below for more information about all of the properties that may be used with this resource.</li>
</ul>
</div>
<div class="section" id="id58">
<h4>Actions<a class="headerlink" href="#id58" title="Permalink to this headline"></a></h4>
<p>This resource has the following actions:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:install</span></tt></dt>
<dd>Default. Install a package. If a version is specified, install the specified version of the package.</dd>
<dt><tt class="docutils literal"><span class="pre">:nothing</span></tt></dt>
<dd>Define this resource block to do nothing until notified by another resource to take action. When this resource is notified, this resource block is either run immediately or it is queued up to be run at the end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:remove</span></tt></dt>
<dd>Remove a package.</dd>
</dl>
</div>
<div class="section" id="id59">
<h4>Attributes<a class="headerlink" href="#id59" title="Permalink to this headline"></a></h4>
<p>This resource has the following properties:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">checksum</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p>The SHA-256 checksum of the file. Use to prevent a file from being re-downloaded. When the local file matches the checksum, the chef-client does not download it. Use when a URL is specified by the <tt class="docutils literal"><span class="pre">source</span></tt> property.</p>
<p class="last">New in Chef client 12.6.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">ignore_failure</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Continue running a recipe if a resource fails for any reason. Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">installer_type</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol</p>
<p class="last">A symbol that specifies the type of package. Possible values: <tt class="docutils literal"><span class="pre">:custom</span></tt> (such as installing a non-.msi file that embeds an .msi-based installer), <tt class="docutils literal"><span class="pre">:inno</span></tt> (Inno Setup), <tt class="docutils literal"><span class="pre">:installshield</span></tt> (InstallShield), <tt class="docutils literal"><span class="pre">:msi</span></tt> (Microsoft Installer Package (MSI)), <tt class="docutils literal"><span class="pre">:nsis</span></tt> (Nullsoft Scriptable Install System (NSIS)), <tt class="docutils literal"><span class="pre">:wise</span></tt> (Wise).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">notifies</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may notify another resource to take action when its state changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> that resource should take, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action. A resource may notifiy more than one resource; use a <tt class="docutils literal"><span class="pre">notifies</span></tt> statement for each resource to be notified.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">notifies</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">notifies</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">options</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">One (or more) additional options that are passed to the command.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">provider</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Chef Class</p>
<p class="last">Optional. Explicitly specifies a provider. See &#8220;Providers&#8221; section below for more information.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">remote_file_attributes</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Hash</p>
<p class="last">A package at a remote location define as a Hash of properties that modifes the properties of the <strong>remote_file</strong> resource.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retries</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The number of times to catch exceptions and retry the resource. Default value: <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retry_delay</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The retry delay (in seconds). Default value: <tt class="docutils literal"><span class="pre">2</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">returns</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> Integer, Array of integers</p>
<p class="last">A comma-delimited list of return codes that indicate the success or failure of the command that was run remotely. This code signals a successful <tt class="docutils literal"><span class="pre">:install</span></tt> action. Default value: <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">source</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p>Optional. The path to a package in the local file system. The location of the package may be at a URL. Default value: the <tt class="docutils literal"><span class="pre">name</span></tt> of the resource block See &#8220;Syntax&#8221; section above for more information.</p>
<p>If the <tt class="docutils literal"><span class="pre">source</span></tt> property is not specified, the package name MUST be exactly the same as the display name found in <strong>Add/Remove programs</strong> or exacty the same as the <tt class="docutils literal"><span class="pre">DisplayName</span></tt> property in the appropriate registry key:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="no">HKEY_LOCAL_MACHINE</span><span class="p">\</span><span class="no">Software</span><span class="p">\</span><span class="no">Microsoft</span><span class="p">\</span><span class="no">Windows</span><span class="p">\</span><span class="no">CurrentVersion</span><span class="p">\</span><span class="no">Uninstall</span>
<span class="no">HKEY_CURRENT_USER</span><span class="p">\</span><span class="no">Software</span><span class="p">\</span><span class="no">Microsoft</span><span class="p">\</span><span class="no">Windows</span><span class="p">\</span><span class="no">CurrentVersion</span><span class="p">\</span><span class="no">Uninstall</span>
<span class="no">HKEY_LOCAL_MACHINE</span><span class="p">\</span><span class="no">Software</span><span class="p">\</span><span class="no">Wow6464Node</span><span class="p">\</span><span class="no">Microsoft</span><span class="p">\</span><span class="no">Windows</span><span class="p">\</span><span class="no">CurrentVersion</span><span class="p">\</span><span class="no">Uninstall</span>
</pre></div>
</div>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If there are multiple versions of a package installed with the same display name, all of those packages will be removed unless a version is provided in the <tt class="docutils literal"><span class="pre">version</span></tt> property or unless it can be discovered in the installer file specified by the <tt class="docutils literal"><span class="pre">source</span></tt> property.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">subscribes</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> to be taken, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">subscribes</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">subscribes</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">timeout</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> String, Integer</p>
<p class="last">The amount of time (in seconds) to wait before timing out. Default value: <tt class="docutils literal"><span class="pre">600</span></tt> (seconds).</p>
</dd>
</dl>
</div>
<div class="section" id="providers">
<h4>Providers<a class="headerlink" href="#providers" title="Permalink to this headline"></a></h4>
<p>This resource has the following providers:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">Chef::Provider::Package</span></tt>, <tt class="docutils literal"><span class="pre">package</span></tt></dt>
<dd>When this short name is used, the chef-client will attempt to determine the correct provider during the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">Chef::Provider::Package::Windows</span></tt>, <tt class="docutils literal"><span class="pre">windows_package</span></tt></dt>
<dd>The provider for the Microsoft Windows platform.</dd>
</dl>
</div>
<div class="section" id="id60">
<h4>Examples<a class="headerlink" href="#id60" title="Permalink to this headline"></a></h4>
<p>The following examples demonstrate various approaches for using resources in recipes. If you want to see examples of how Chef uses resources in recipes, take a closer look at the cookbooks that Chef authors and maintains: <a class="reference external" href="https://github.com/chef-cookbooks">https://github.com/chef-cookbooks</a>.</p>
<p><strong>Install a package</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">windows_package</span> <span class="s1">&#39;7zip&#39;</span> <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:install</span>
  <span class="n">source</span> <span class="s1">&#39;C:\7z920.msi&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Specify a URL for the source attribute</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">windows_package</span> <span class="s1">&#39;7zip&#39;</span> <span class="k">do</span>
  <span class="n">source</span> <span class="s1">&#39;http://www.7-zip.org/a/7z938-x64.msi&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Specify path and checksum</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">windows_package</span> <span class="s1">&#39;7zip&#39;</span> <span class="k">do</span>
  <span class="n">source</span> <span class="s1">&#39;http://www.7-zip.org/a/7z938-x64.msi&#39;</span>
  <span class="n">checksum</span> <span class="s1">&#39;7c8e873991c82ad9cfc123415254ea6101e9a645e12977dcd518979e50fdedf3&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Modify remote_file resource attributes</strong></p>
<p>The <strong>windows_package</strong> resource may specify a package at a remote location using the <tt class="docutils literal"><span class="pre">remote_file_attributes</span></tt> property. This uses the <strong>remote_file</strong> resource to download the contents at the specified URL and passes in a Hash that modifes the properties of the <a class="reference external" href="https://docs.chef.io/resource_remote_file.html">remote_file resource</a>.</p>
<p>For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">windows_package</span> <span class="s1">&#39;7zip&#39;</span> <span class="k">do</span>
  <span class="n">source</span> <span class="s1">&#39;http://www.7-zip.org/a/7z938-x64.msi&#39;</span>
  <span class="n">remote_file_attributes</span> <span class="p">({</span>
    <span class="ss">:path</span> <span class="o">=&gt;</span> <span class="s1">&#39;C:\\7zip.msi&#39;</span><span class="p">,</span>
    <span class="ss">:checksum</span> <span class="o">=&gt;</span> <span class="s1">&#39;7c8e873991c82ad9cfc123415254ea6101e9a645e12977dcd518979e50fdedf3&#39;</span>
  <span class="p">})</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Download a nsis (Nullsoft) package resource</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">windows_package</span> <span class="s1">&#39;Mercurial 3.6.1 (64-bit)&#39;</span> <span class="k">do</span>
  <span class="n">source</span> <span class="s1">&#39;http://mercurial.selenic.com/release/windows/Mercurial-3.6.1-x64.exe&#39;</span>
  <span class="n">checksum</span> <span class="s1">&#39;febd29578cb6736163d232708b834a2ddd119aa40abc536b2c313fc5e1b5831d&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Download a custom package</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">windows_package</span> <span class="s1">&#39;Microsoft Visual C++ 2005 Redistributable&#39;</span> <span class="k">do</span>
  <span class="n">source</span> <span class="s1">&#39;https://download.microsoft.com/download/6/B/B/6BB661D6-A8AE-4819-B79F-236472F6070C/vcredist_x86.exe&#39;</span>
  <span class="n">installer_type</span> <span class="ss">:custom</span>
  <span class="n">options</span> <span class="s1">&#39;/Q&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="windows-service">
<h3>windows_service<a class="headerlink" href="#windows-service" title="Permalink to this headline"></a></h3>
<p>Use the <strong>windows_service</strong> resource to manage a service on the Microsoft Windows platform.</p>
<div class="section" id="id61">
<h4>Syntax<a class="headerlink" href="#id61" title="Permalink to this headline"></a></h4>
<p>A <strong>windows_service</strong> resource block manages the state of a service on a machine that is running Microsoft Windows. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">windows_service</span> <span class="s1">&#39;BITS&#39;</span> <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:configure_startup</span>
  <span class="n">startup_type</span> <span class="ss">:manual</span>
<span class="k">end</span>
</pre></div>
</div>
<p>The full syntax for all of the properties that are available to the <strong>windows_service</strong> resource is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">windows_service</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
  <span class="n">init_command</span>               <span class="nb">String</span>
  <span class="n">notifies</span>                   <span class="c1"># see description</span>
  <span class="n">pattern</span>                    <span class="nb">String</span>
  <span class="n">provider</span>                   <span class="no">Chef</span><span class="o">::</span><span class="no">Provider</span><span class="o">::</span><span class="no">Service</span><span class="o">::</span><span class="no">Windows</span>
  <span class="n">reload_command</span>             <span class="nb">String</span>
  <span class="n">restart_command</span>            <span class="nb">String</span>
  <span class="n">run_as_password</span>            <span class="nb">String</span>
  <span class="n">run_as_user</span>                <span class="nb">String</span>
  <span class="n">service_name</span>               <span class="nb">String</span> <span class="c1"># defaults to &#39;name&#39; if not specified</span>
  <span class="n">start_command</span>              <span class="nb">String</span>
  <span class="n">startup_type</span>               <span class="no">Symbol</span>
  <span class="n">status_command</span>             <span class="nb">String</span>
  <span class="n">stop_command</span>               <span class="nb">String</span>
  <span class="n">subscribes</span>                 <span class="c1"># see description</span>
  <span class="n">supports</span>                   <span class="no">Hash</span>
  <span class="n">timeout</span>                    <span class="nb">Integer</span>
  <span class="n">action</span>                     <span class="no">Symbol</span> <span class="c1"># defaults to :nothing if not specified</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">windows_service</span></tt> is the resource</li>
<li><tt class="docutils literal"><span class="pre">name</span></tt> is the name of the resource block</li>
<li><tt class="docutils literal"><span class="pre">action</span></tt> identifies the steps the chef-client will take to bring the node into the desired state</li>
<li><tt class="docutils literal"><span class="pre">init_command</span></tt>, <tt class="docutils literal"><span class="pre">pattern</span></tt>, <tt class="docutils literal"><span class="pre">provider</span></tt>, <tt class="docutils literal"><span class="pre">reload_command</span></tt>, <tt class="docutils literal"><span class="pre">restart_command</span></tt>, <tt class="docutils literal"><span class="pre">run_as_password</span></tt>, <tt class="docutils literal"><span class="pre">run_as_user</span></tt>, <tt class="docutils literal"><span class="pre">service_name</span></tt>, <tt class="docutils literal"><span class="pre">start_command</span></tt>, <tt class="docutils literal"><span class="pre">startup_type</span></tt>, <tt class="docutils literal"><span class="pre">status_command</span></tt>, <tt class="docutils literal"><span class="pre">stop_command</span></tt>, <tt class="docutils literal"><span class="pre">supports</span></tt>, and <tt class="docutils literal"><span class="pre">timeout</span></tt> are properties of this resource, with the Ruby type shown. See &#8220;Properties&#8221; section below for more information about all of the properties that may be used with this resource.</li>
</ul>
</div>
<div class="section" id="id62">
<h4>Actions<a class="headerlink" href="#id62" title="Permalink to this headline"></a></h4>
<p>This resource has the following actions:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:configure_startup</span></tt></dt>
<dd>Configure a service based on the value of the <tt class="docutils literal"><span class="pre">startup_type</span></tt> property.</dd>
<dt><tt class="docutils literal"><span class="pre">:disable</span></tt></dt>
<dd>Disable a service. This action is equivalent to a <tt class="docutils literal"><span class="pre">Disabled</span></tt> startup type on the Microsoft Windows platform.</dd>
<dt><tt class="docutils literal"><span class="pre">:enable</span></tt></dt>
<dd>Enable a service at boot. This action is equivalent to an <tt class="docutils literal"><span class="pre">Automatic</span></tt> startup type on the Microsoft Windows platform.</dd>
<dt><tt class="docutils literal"><span class="pre">:nothing</span></tt></dt>
<dd>Default. Do nothing with a service.</dd>
<dt><tt class="docutils literal"><span class="pre">:reload</span></tt></dt>
<dd>Reload the configuration for this service.</dd>
<dt><tt class="docutils literal"><span class="pre">:restart</span></tt></dt>
<dd>Restart a service.</dd>
<dt><tt class="docutils literal"><span class="pre">:start</span></tt></dt>
<dd>Start a service, and keep it running until stopped or disabled.</dd>
<dt><tt class="docutils literal"><span class="pre">:stop</span></tt></dt>
<dd>Stop a service.</dd>
</dl>
</div>
<div class="section" id="id63">
<h4>Attributes<a class="headerlink" href="#id63" title="Permalink to this headline"></a></h4>
<p>This resource has the following properties:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">ignore_failure</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Continue running a recipe if a resource fails for any reason. Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">init_command</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The path to the init script that is associated with the service. This is typically <tt class="docutils literal"><span class="pre">/etc/init.d/SERVICE_NAME</span></tt>. The <tt class="docutils literal"><span class="pre">init_command</span></tt> property can be used to prevent the need to specify  overrides for the <tt class="docutils literal"><span class="pre">start_command</span></tt>, <tt class="docutils literal"><span class="pre">stop_command</span></tt>, and <tt class="docutils literal"><span class="pre">restart_command</span></tt> attributes. Default value: <tt class="docutils literal"><span class="pre">nil</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">notifies</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may notify another resource to take action when its state changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> that resource should take, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action. A resource may notifiy more than one resource; use a <tt class="docutils literal"><span class="pre">notifies</span></tt> statement for each resource to be notified.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">notifies</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">notifies</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">pattern</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The pattern to look for in the process table. Default value: <tt class="docutils literal"><span class="pre">service_name</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">provider</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Chef Class</p>
<p class="last">Optional. Explicitly specifies a provider.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">reload_command</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The command used to tell a service to reload its configuration.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">restart_command</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The command used to restart a service.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retries</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The number of times to catch exceptions and retry the resource. Default value: <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retry_delay</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The retry delay (in seconds). Default value: <tt class="docutils literal"><span class="pre">2</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">run_as_password</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The password for the user specified by <tt class="docutils literal"><span class="pre">run_as_user</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">run_as_user</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The user under which a Microsoft Windows service runs.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">service_name</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The name of the service. Default value: the <tt class="docutils literal"><span class="pre">name</span></tt> of the resource block See &#8220;Syntax&#8221; section above for more information.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">start_command</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The command used to start a service.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">startup_type</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol</p>
<p class="last">Use to specify the startup type for a Microsoft Windows service. Possible values: <tt class="docutils literal"><span class="pre">:automatic</span></tt>, <tt class="docutils literal"><span class="pre">:disabled</span></tt>, or <tt class="docutils literal"><span class="pre">:manual</span></tt>. Default value: <tt class="docutils literal"><span class="pre">:automatic</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">status_command</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The command used to check the run status for a service.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">stop_command</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The command used to stop a service.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">subscribes</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> to be taken, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">subscribes</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">subscribes</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">supports</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Hash</p>
<p class="last">A list of properties that controls how the chef-client is to attempt to manage a service: <tt class="docutils literal"><span class="pre">:restart</span></tt>, <tt class="docutils literal"><span class="pre">:reload</span></tt>, <tt class="docutils literal"><span class="pre">:status</span></tt>. For <tt class="docutils literal"><span class="pre">:restart</span></tt>, the init script or other service provider can use a restart command; if <tt class="docutils literal"><span class="pre">:restart</span></tt> is not specified, the chef-client attempts to stop and then start a service. For <tt class="docutils literal"><span class="pre">:reload</span></tt>, the init script or other service provider can use a reload command. For <tt class="docutils literal"><span class="pre">:status</span></tt>, the init script or other service provider can use a status command to determine if the service is running; if <tt class="docutils literal"><span class="pre">:status</span></tt> is not specified, the chef-client attempts to match the <tt class="docutils literal"><span class="pre">service_name</span></tt> against the process table as a regular expression, unless a pattern is specified as a parameter property. Default value: <tt class="docutils literal"><span class="pre">{</span> <span class="pre">:restart</span> <span class="pre">=&gt;</span> <span class="pre">false,</span> <span class="pre">:reload</span> <span class="pre">=&gt;</span> <span class="pre">false,</span> <span class="pre">:status</span> <span class="pre">=&gt;</span> <span class="pre">false</span> <span class="pre">}</span></tt> for all platforms (except for the Red Hat platform family, which defaults to <tt class="docutils literal"><span class="pre">{</span> <span class="pre">:restart</span> <span class="pre">=&gt;</span> <span class="pre">false,</span> <span class="pre">:reload</span> <span class="pre">=&gt;</span> <span class="pre">false,</span> <span class="pre">:status</span> <span class="pre">=&gt;</span> <span class="pre">true</span> <span class="pre">}</span></tt>.)</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">timeout</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The amount of time (in seconds) to wait before timing out. Default value: <tt class="docutils literal"><span class="pre">60</span></tt>.</p>
</dd>
</dl>
</div>
<div class="section" id="id64">
<h4>Examples<a class="headerlink" href="#id64" title="Permalink to this headline"></a></h4>
<p><strong>Start a service manually</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">windows_service</span> <span class="s1">&#39;BITS&#39;</span> <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:configure_startup</span>
  <span class="n">startup_type</span> <span class="ss">:manual</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="cookbook-resources">
<h2>Cookbook Resources<a class="headerlink" href="#cookbook-resources" title="Permalink to this headline"></a></h2>
<p>Some of the most popular Chef-maintained cookbooks that contain lightweight resources useful when configuring machines running Microsoft Windows are listed below:</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Cookbook</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference external" href="https://github.com/chef-cookbooks/iis">iis</a></td>
<td>The <tt class="docutils literal"><span class="pre">iis</span></tt> cookbook is used to install and configure Internet Information Services (IIS).</td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="https://github.com/chef-cookbooks/webpi">webpi</a></td>
<td>The <tt class="docutils literal"><span class="pre">webpi</span></tt> cookbook is used to run the Microsoft Web Platform Installer (WebPI).</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/chef-cookbooks/windows">windows</a></td>
<td>The <tt class="docutils literal"><span class="pre">windows</span></tt> cookbook is used to configure auto run, batch, reboot, enable built-in operating system packages, configure Microsoft Windows packages, reboot machines, and more.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id67">
<h2>Recipe DSL Methods<a class="headerlink" href="#id67" title="Permalink to this headline"></a></h2>
<p>Six methods are present in the Recipe DSL to help verify the registry during a chef-client run on the Microsoft Windows platform&#8212;<tt class="docutils literal"><span class="pre">registry_data_exists?</span></tt>, <tt class="docutils literal"><span class="pre">registry_get_subkeys</span></tt>, <tt class="docutils literal"><span class="pre">registry_get_values</span></tt>, <tt class="docutils literal"><span class="pre">registry_has_subkeys?</span></tt>, <tt class="docutils literal"><span class="pre">registry_key_exists?</span></tt>, and <tt class="docutils literal"><span class="pre">registry_value_exists?</span></tt>&#8212;these helpers ensure the <strong>powershell_script</strong> resource is idempotent.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The recommended order in which registry key-specific methods should be used within a recipe is: <tt class="docutils literal"><span class="pre">key_exists?</span></tt>, <tt class="docutils literal"><span class="pre">value_exists?</span></tt>, <tt class="docutils literal"><span class="pre">data_exists?</span></tt>, <tt class="docutils literal"><span class="pre">get_values</span></tt>, <tt class="docutils literal"><span class="pre">has_subkeys?</span></tt>, and then <tt class="docutils literal"><span class="pre">get_subkeys</span></tt>.</p>
</div>
<div class="section" id="id68">
<h3>registry_data_exists?<a class="headerlink" href="#id68" title="Permalink to this headline"></a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">registry_data_exists?</span></tt> method to find out if a Microsoft Windows registry key contains the specified data of the specified type under the value.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method can be used in recipes and from within the <tt class="docutils literal"><span class="pre">not_if</span></tt> and <tt class="docutils literal"><span class="pre">only_if</span></tt> blocks in resources. This method is not designed to create or modify a registry key. If a registry key needs to be modified, use the <strong>registry_key</strong> resource.</p>
</div>
<p>The syntax for the <tt class="docutils literal"><span class="pre">registry_data_exists?</span></tt> method is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">registry_data_exists?</span><span class="p">(</span>
  <span class="no">KEY_PATH</span><span class="p">,</span>
  <span class="p">{</span> <span class="ss">:name</span> <span class="o">=&gt;</span> <span class="s1">&#39;NAME&#39;</span><span class="p">,</span> <span class="ss">:type</span> <span class="o">=&gt;</span> <span class="no">TYPE</span><span class="p">,</span> <span class="ss">:data</span> <span class="o">=&gt;</span> <span class="no">DATA</span> <span class="p">},</span>
  <span class="no">ARCHITECTURE</span>
<span class="p">)</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">KEY_PATH</span></tt> is the path to the registry key value. The path must include the registry hive, which can be specified either as its full name or as the 3- or 4-letter abbreviation. For example, both <tt class="docutils literal"><span class="pre">HKLM\SECURITY</span></tt> and <tt class="docutils literal"><span class="pre">HKEY_LOCAL_MACHINE\SECURITY</span></tt> are both valid and equivalent. The following hives are valid: <tt class="docutils literal"><span class="pre">HKEY_LOCAL_MACHINE</span></tt>, <tt class="docutils literal"><span class="pre">HKLM</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CURRENT_CONFIG</span></tt>, <tt class="docutils literal"><span class="pre">HKCC</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CLASSES_ROOT</span></tt>, <tt class="docutils literal"><span class="pre">HKCR</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_USERS</span></tt>, <tt class="docutils literal"><span class="pre">HKU</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CURRENT_USER</span></tt>, and <tt class="docutils literal"><span class="pre">HKCU</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">{</span> <span class="pre">:name</span> <span class="pre">=&gt;</span> <span class="pre">'NAME',</span> <span class="pre">:type</span> <span class="pre">=&gt;</span> <span class="pre">TYPE,</span> <span class="pre">:data</span> <span class="pre">=&gt;</span> <span class="pre">DATA</span> <span class="pre">}</span></tt> is a hash that contains the expected name, type, and data of the registry key value</li>
<li><tt class="docutils literal"><span class="pre">:type</span></tt> represents the values available for registry keys in Microsoft Windows. Use <tt class="docutils literal"><span class="pre">:binary</span></tt> for REG_BINARY, <tt class="docutils literal"><span class="pre">:string</span></tt> for REG_SZ, <tt class="docutils literal"><span class="pre">:multi_string</span></tt> for REG_MULTI_SZ, <tt class="docutils literal"><span class="pre">:expand_string</span></tt> for REG_EXPAND_SZ, <tt class="docutils literal"><span class="pre">:dword</span></tt> for REG_DWORD, <tt class="docutils literal"><span class="pre">:dword_big_endian</span></tt> for REG_DWORD_BIG_ENDIAN, or <tt class="docutils literal"><span class="pre">:qword</span></tt> for REG_QWORD.</li>
<li><tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> is one of the following values: <tt class="docutils literal"><span class="pre">:x86_64</span></tt>, <tt class="docutils literal"><span class="pre">:i386</span></tt>, or <tt class="docutils literal"><span class="pre">:machine</span></tt>. In order to read or write 32-bit registry keys on 64-bit machines running Microsoft Windows, the <tt class="docutils literal"><span class="pre">architecture</span></tt> property must be set to <tt class="docutils literal"><span class="pre">:i386</span></tt>. The <tt class="docutils literal"><span class="pre">:x86_64</span></tt> value can be used to force writing to a 64-bit registry location, but this value is less useful than the default (<tt class="docutils literal"><span class="pre">:machine</span></tt>) because the chef-client returns an exception if <tt class="docutils literal"><span class="pre">:x86_64</span></tt> is used and the machine turns out to be a 32-bit machine (whereas with <tt class="docutils literal"><span class="pre">:machine</span></tt>, the chef-client is able to access the registry key on the 32-bit machine).</li>
</ul>
<p>This method will return <tt class="docutils literal"><span class="pre">true</span></tt> or <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> attribute should only specify <tt class="docutils literal"><span class="pre">:x86_64</span></tt> or <tt class="docutils literal"><span class="pre">:i386</span></tt> when it is necessary to write 32-bit (<tt class="docutils literal"><span class="pre">:i386</span></tt>) or 64-bit (<tt class="docutils literal"><span class="pre">:x86_64</span></tt>) values on a 64-bit machine. <tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> will default to <tt class="docutils literal"><span class="pre">:machine</span></tt> unless a specific value is given.</p>
</div>
</div>
<div class="section" id="id69">
<h3>registry_get_subkeys<a class="headerlink" href="#id69" title="Permalink to this headline"></a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">registry_get_subkeys</span></tt> method to get a list of registry key values that are present for a Microsoft Windows registry key.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method can be used in recipes and from within the <tt class="docutils literal"><span class="pre">not_if</span></tt> and <tt class="docutils literal"><span class="pre">only_if</span></tt> blocks in resources. This method is not designed to create or modify a registry key. If a registry key needs to be modified, use the <strong>registry_key</strong> resource.</p>
</div>
<p>The syntax for the <tt class="docutils literal"><span class="pre">registry_get_subkeys</span></tt> method is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">subkey_array</span> <span class="o">=</span> <span class="n">registry_get_subkeys</span><span class="p">(</span><span class="no">KEY_PATH</span><span class="p">,</span> <span class="no">ARCHITECTURE</span><span class="p">)</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">KEY_PATH</span></tt> is the path to the registry key. The path must include the registry hive, which can be specified either as its full name or as the 3- or 4-letter abbreviation. For example, both <tt class="docutils literal"><span class="pre">HKLM\SECURITY</span></tt> and <tt class="docutils literal"><span class="pre">HKEY_LOCAL_MACHINE\SECURITY</span></tt> are both valid and equivalent. The following hives are valid: <tt class="docutils literal"><span class="pre">HKEY_LOCAL_MACHINE</span></tt>, <tt class="docutils literal"><span class="pre">HKLM</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CURRENT_CONFIG</span></tt>, <tt class="docutils literal"><span class="pre">HKCC</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CLASSES_ROOT</span></tt>, <tt class="docutils literal"><span class="pre">HKCR</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_USERS</span></tt>, <tt class="docutils literal"><span class="pre">HKU</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CURRENT_USER</span></tt>, and <tt class="docutils literal"><span class="pre">HKCU</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> is one of the following values: <tt class="docutils literal"><span class="pre">:x86_64</span></tt>, <tt class="docutils literal"><span class="pre">:i386</span></tt>, or <tt class="docutils literal"><span class="pre">:machine</span></tt>. In order to read or write 32-bit registry keys on 64-bit machines running Microsoft Windows, the <tt class="docutils literal"><span class="pre">architecture</span></tt> property must be set to <tt class="docutils literal"><span class="pre">:i386</span></tt>. The <tt class="docutils literal"><span class="pre">:x86_64</span></tt> value can be used to force writing to a 64-bit registry location, but this value is less useful than the default (<tt class="docutils literal"><span class="pre">:machine</span></tt>) because the chef-client returns an exception if <tt class="docutils literal"><span class="pre">:x86_64</span></tt> is used and the machine turns out to be a 32-bit machine (whereas with <tt class="docutils literal"><span class="pre">:machine</span></tt>, the chef-client is able to access the registry key on the 32-bit machine).</li>
</ul>
<p>This returns an array of registry key values.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> attribute should only specify <tt class="docutils literal"><span class="pre">:x86_64</span></tt> or <tt class="docutils literal"><span class="pre">:i386</span></tt> when it is necessary to write 32-bit (<tt class="docutils literal"><span class="pre">:i386</span></tt>) or 64-bit (<tt class="docutils literal"><span class="pre">:x86_64</span></tt>) values on a 64-bit machine. <tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> will default to <tt class="docutils literal"><span class="pre">:machine</span></tt> unless a specific value is given.</p>
</div>
</div>
<div class="section" id="id70">
<h3>registry_get_values<a class="headerlink" href="#id70" title="Permalink to this headline"></a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">registry_get_values</span></tt> method to get the registry key values (name, type, and data) for a Microsoft Windows registry key.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method can be used in recipes and from within the <tt class="docutils literal"><span class="pre">not_if</span></tt> and <tt class="docutils literal"><span class="pre">only_if</span></tt> blocks in resources. This method is not designed to create or modify a registry key. If a registry key needs to be modified, use the <strong>registry_key</strong> resource.</p>
</div>
<p>The syntax for the <tt class="docutils literal"><span class="pre">registry_get_values</span></tt> method is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">subkey_array</span> <span class="o">=</span> <span class="n">registry_get_values</span><span class="p">(</span><span class="no">KEY_PATH</span><span class="p">,</span> <span class="no">ARCHITECTURE</span><span class="p">)</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">KEY_PATH</span></tt> is the path to the registry key. The path must include the registry hive, which can be specified either as its full name or as the 3- or 4-letter abbreviation. For example, both <tt class="docutils literal"><span class="pre">HKLM\SECURITY</span></tt> and <tt class="docutils literal"><span class="pre">HKEY_LOCAL_MACHINE\SECURITY</span></tt> are both valid and equivalent. The following hives are valid: <tt class="docutils literal"><span class="pre">HKEY_LOCAL_MACHINE</span></tt>, <tt class="docutils literal"><span class="pre">HKLM</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CURRENT_CONFIG</span></tt>, <tt class="docutils literal"><span class="pre">HKCC</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CLASSES_ROOT</span></tt>, <tt class="docutils literal"><span class="pre">HKCR</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_USERS</span></tt>, <tt class="docutils literal"><span class="pre">HKU</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CURRENT_USER</span></tt>, and <tt class="docutils literal"><span class="pre">HKCU</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> is one of the following values: <tt class="docutils literal"><span class="pre">:x86_64</span></tt>, <tt class="docutils literal"><span class="pre">:i386</span></tt>, or <tt class="docutils literal"><span class="pre">:machine</span></tt>. In order to read or write 32-bit registry keys on 64-bit machines running Microsoft Windows, the <tt class="docutils literal"><span class="pre">architecture</span></tt> property must be set to <tt class="docutils literal"><span class="pre">:i386</span></tt>. The <tt class="docutils literal"><span class="pre">:x86_64</span></tt> value can be used to force writing to a 64-bit registry location, but this value is less useful than the default (<tt class="docutils literal"><span class="pre">:machine</span></tt>) because the chef-client returns an exception if <tt class="docutils literal"><span class="pre">:x86_64</span></tt> is used and the machine turns out to be a 32-bit machine (whereas with <tt class="docutils literal"><span class="pre">:machine</span></tt>, the chef-client is able to access the registry key on the 32-bit machine).</li>
</ul>
<p>This returns an array of registry key values.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> attribute should only specify <tt class="docutils literal"><span class="pre">:x86_64</span></tt> or <tt class="docutils literal"><span class="pre">:i386</span></tt> when it is necessary to write 32-bit (<tt class="docutils literal"><span class="pre">:i386</span></tt>) or 64-bit (<tt class="docutils literal"><span class="pre">:x86_64</span></tt>) values on a 64-bit machine. <tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> will default to <tt class="docutils literal"><span class="pre">:machine</span></tt> unless a specific value is given.</p>
</div>
</div>
<div class="section" id="id71">
<h3>registry_has_subkeys?<a class="headerlink" href="#id71" title="Permalink to this headline"></a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">registry_has_subkeys?</span></tt> method to find out if a Microsoft Windows registry key has one (or more) values.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method can be used in recipes and from within the <tt class="docutils literal"><span class="pre">not_if</span></tt> and <tt class="docutils literal"><span class="pre">only_if</span></tt> blocks in resources. This method is not designed to create or modify a registry key. If a registry key needs to be modified, use the <strong>registry_key</strong> resource.</p>
</div>
<p>The syntax for the <tt class="docutils literal"><span class="pre">registry_has_subkeys?</span></tt> method is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">registry_has_subkeys?</span><span class="p">(</span><span class="no">KEY_PATH</span><span class="p">,</span> <span class="no">ARCHITECTURE</span><span class="p">)</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">KEY_PATH</span></tt> is the path to the registry key. The path must include the registry hive, which can be specified either as its full name or as the 3- or 4-letter abbreviation. For example, both <tt class="docutils literal"><span class="pre">HKLM\SECURITY</span></tt> and <tt class="docutils literal"><span class="pre">HKEY_LOCAL_MACHINE\SECURITY</span></tt> are both valid and equivalent. The following hives are valid: <tt class="docutils literal"><span class="pre">HKEY_LOCAL_MACHINE</span></tt>, <tt class="docutils literal"><span class="pre">HKLM</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CURRENT_CONFIG</span></tt>, <tt class="docutils literal"><span class="pre">HKCC</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CLASSES_ROOT</span></tt>, <tt class="docutils literal"><span class="pre">HKCR</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_USERS</span></tt>, <tt class="docutils literal"><span class="pre">HKU</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CURRENT_USER</span></tt>, and <tt class="docutils literal"><span class="pre">HKCU</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> is one of the following values: <tt class="docutils literal"><span class="pre">:x86_64</span></tt>, <tt class="docutils literal"><span class="pre">:i386</span></tt>, or <tt class="docutils literal"><span class="pre">:machine</span></tt>. In order to read or write 32-bit registry keys on 64-bit machines running Microsoft Windows, the <tt class="docutils literal"><span class="pre">architecture</span></tt> property must be set to <tt class="docutils literal"><span class="pre">:i386</span></tt>. The <tt class="docutils literal"><span class="pre">:x86_64</span></tt> value can be used to force writing to a 64-bit registry location, but this value is less useful than the default (<tt class="docutils literal"><span class="pre">:machine</span></tt>) because the chef-client returns an exception if <tt class="docutils literal"><span class="pre">:x86_64</span></tt> is used and the machine turns out to be a 32-bit machine (whereas with <tt class="docutils literal"><span class="pre">:machine</span></tt>, the chef-client is able to access the registry key on the 32-bit machine).</li>
</ul>
<p>This method will return <tt class="docutils literal"><span class="pre">true</span></tt> or <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> attribute should only specify <tt class="docutils literal"><span class="pre">:x86_64</span></tt> or <tt class="docutils literal"><span class="pre">:i386</span></tt> when it is necessary to write 32-bit (<tt class="docutils literal"><span class="pre">:i386</span></tt>) or 64-bit (<tt class="docutils literal"><span class="pre">:x86_64</span></tt>) values on a 64-bit machine. <tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> will default to <tt class="docutils literal"><span class="pre">:machine</span></tt> unless a specific value is given.</p>
</div>
</div>
<div class="section" id="id72">
<h3>registry_key_exists?<a class="headerlink" href="#id72" title="Permalink to this headline"></a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">registry_key_exists?</span></tt> method to find out if a Microsoft Windows registry key exists at the specified path.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method can be used in recipes and from within the <tt class="docutils literal"><span class="pre">not_if</span></tt> and <tt class="docutils literal"><span class="pre">only_if</span></tt> blocks in resources. This method is not designed to create or modify a registry key. If a registry key needs to be modified, use the <strong>registry_key</strong> resource.</p>
</div>
<p>The syntax for the <tt class="docutils literal"><span class="pre">registry_key_exists?</span></tt> method is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">registry_key_exists?</span><span class="p">(</span><span class="no">KEY_PATH</span><span class="p">,</span> <span class="no">ARCHITECTURE</span><span class="p">)</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">KEY_PATH</span></tt> is the path to the registry key. The path must include the registry hive, which can be specified either as its full name or as the 3- or 4-letter abbreviation. For example, both <tt class="docutils literal"><span class="pre">HKLM\SECURITY</span></tt> and <tt class="docutils literal"><span class="pre">HKEY_LOCAL_MACHINE\SECURITY</span></tt> are both valid and equivalent. The following hives are valid: <tt class="docutils literal"><span class="pre">HKEY_LOCAL_MACHINE</span></tt>, <tt class="docutils literal"><span class="pre">HKLM</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CURRENT_CONFIG</span></tt>, <tt class="docutils literal"><span class="pre">HKCC</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CLASSES_ROOT</span></tt>, <tt class="docutils literal"><span class="pre">HKCR</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_USERS</span></tt>, <tt class="docutils literal"><span class="pre">HKU</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CURRENT_USER</span></tt>, and <tt class="docutils literal"><span class="pre">HKCU</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> is one of the following values: <tt class="docutils literal"><span class="pre">:x86_64</span></tt>, <tt class="docutils literal"><span class="pre">:i386</span></tt>, or <tt class="docutils literal"><span class="pre">:machine</span></tt>. In order to read or write 32-bit registry keys on 64-bit machines running Microsoft Windows, the <tt class="docutils literal"><span class="pre">architecture</span></tt> property must be set to <tt class="docutils literal"><span class="pre">:i386</span></tt>. The <tt class="docutils literal"><span class="pre">:x86_64</span></tt> value can be used to force writing to a 64-bit registry location, but this value is less useful than the default (<tt class="docutils literal"><span class="pre">:machine</span></tt>) because the chef-client returns an exception if <tt class="docutils literal"><span class="pre">:x86_64</span></tt> is used and the machine turns out to be a 32-bit machine (whereas with <tt class="docutils literal"><span class="pre">:machine</span></tt>, the chef-client is able to access the registry key on the 32-bit machine).</li>
</ul>
<p>This method will return <tt class="docutils literal"><span class="pre">true</span></tt> or <tt class="docutils literal"><span class="pre">false</span></tt>. (Any registry key values that are associated with this registry key are ignored.)</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> attribute should only specify <tt class="docutils literal"><span class="pre">:x86_64</span></tt> or <tt class="docutils literal"><span class="pre">:i386</span></tt> when it is necessary to write 32-bit (<tt class="docutils literal"><span class="pre">:i386</span></tt>) or 64-bit (<tt class="docutils literal"><span class="pre">:x86_64</span></tt>) values on a 64-bit machine. <tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> will default to <tt class="docutils literal"><span class="pre">:machine</span></tt> unless a specific value is given.</p>
</div>
</div>
<div class="section" id="id73">
<h3>registry_value_exists?<a class="headerlink" href="#id73" title="Permalink to this headline"></a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">registry_value_exists?</span></tt> method to find out if a registry key value exists. Use <tt class="docutils literal"><span class="pre">registry_data_exists?</span></tt> to test for the type and data of a registry key value.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method can be used in recipes and from within the <tt class="docutils literal"><span class="pre">not_if</span></tt> and <tt class="docutils literal"><span class="pre">only_if</span></tt> blocks in resources. This method is not designed to create or modify a registry key. If a registry key needs to be modified, use the <strong>registry_key</strong> resource.</p>
</div>
<p>The syntax for the <tt class="docutils literal"><span class="pre">registry_value_exists?</span></tt> method is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">registry_value_exists?</span><span class="p">(</span>
  <span class="no">KEY_PATH</span><span class="p">,</span>
  <span class="p">{</span> <span class="ss">:name</span> <span class="o">=&gt;</span> <span class="s1">&#39;NAME&#39;</span> <span class="p">},</span>
  <span class="no">ARCHITECTURE</span>
<span class="p">)</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">KEY_PATH</span></tt> is the path to the registry key. The path must include the registry hive, which can be specified either as its full name or as the 3- or 4-letter abbreviation. For example, both <tt class="docutils literal"><span class="pre">HKLM\SECURITY</span></tt> and <tt class="docutils literal"><span class="pre">HKEY_LOCAL_MACHINE\SECURITY</span></tt> are both valid and equivalent. The following hives are valid: <tt class="docutils literal"><span class="pre">HKEY_LOCAL_MACHINE</span></tt>, <tt class="docutils literal"><span class="pre">HKLM</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CURRENT_CONFIG</span></tt>, <tt class="docutils literal"><span class="pre">HKCC</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CLASSES_ROOT</span></tt>, <tt class="docutils literal"><span class="pre">HKCR</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_USERS</span></tt>, <tt class="docutils literal"><span class="pre">HKU</span></tt>, <tt class="docutils literal"><span class="pre">HKEY_CURRENT_USER</span></tt>, and <tt class="docutils literal"><span class="pre">HKCU</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">{</span> <span class="pre">:name</span> <span class="pre">=&gt;</span> <span class="pre">'NAME'</span> <span class="pre">}</span></tt> is a hash that contains the name of the registry key value; if either <tt class="docutils literal"><span class="pre">:type</span></tt> or <tt class="docutils literal"><span class="pre">:value</span></tt> are specified in the hash, they are ignored</li>
<li><tt class="docutils literal"><span class="pre">:type</span></tt> represents the values available for registry keys in Microsoft Windows. Use <tt class="docutils literal"><span class="pre">:binary</span></tt> for REG_BINARY, <tt class="docutils literal"><span class="pre">:string</span></tt> for REG_SZ, <tt class="docutils literal"><span class="pre">:multi_string</span></tt> for REG_MULTI_SZ, <tt class="docutils literal"><span class="pre">:expand_string</span></tt> for REG_EXPAND_SZ, <tt class="docutils literal"><span class="pre">:dword</span></tt> for REG_DWORD, <tt class="docutils literal"><span class="pre">:dword_big_endian</span></tt> for REG_DWORD_BIG_ENDIAN, or <tt class="docutils literal"><span class="pre">:qword</span></tt> for REG_QWORD.</li>
<li><tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> is one of the following values: <tt class="docutils literal"><span class="pre">:x86_64</span></tt>, <tt class="docutils literal"><span class="pre">:i386</span></tt>, or <tt class="docutils literal"><span class="pre">:machine</span></tt>. In order to read or write 32-bit registry keys on 64-bit machines running Microsoft Windows, the <tt class="docutils literal"><span class="pre">architecture</span></tt> property must be set to <tt class="docutils literal"><span class="pre">:i386</span></tt>. The <tt class="docutils literal"><span class="pre">:x86_64</span></tt> value can be used to force writing to a 64-bit registry location, but this value is less useful than the default (<tt class="docutils literal"><span class="pre">:machine</span></tt>) because the chef-client returns an exception if <tt class="docutils literal"><span class="pre">:x86_64</span></tt> is used and the machine turns out to be a 32-bit machine (whereas with <tt class="docutils literal"><span class="pre">:machine</span></tt>, the chef-client is able to access the registry key on the 32-bit machine).</li>
</ul>
<p>This method will return <tt class="docutils literal"><span class="pre">true</span></tt> or <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> attribute should only specify <tt class="docutils literal"><span class="pre">:x86_64</span></tt> or <tt class="docutils literal"><span class="pre">:i386</span></tt> when it is necessary to write 32-bit (<tt class="docutils literal"><span class="pre">:i386</span></tt>) or 64-bit (<tt class="docutils literal"><span class="pre">:x86_64</span></tt>) values on a 64-bit machine. <tt class="docutils literal"><span class="pre">ARCHITECTURE</span></tt> will default to <tt class="docutils literal"><span class="pre">:machine</span></tt> unless a specific value is given.</p>
</div>
</div>
<div class="section" id="helpers">
<h3>Helpers<a class="headerlink" href="#helpers" title="Permalink to this headline"></a></h3>
<p>A recipe can define specific behaviors for specific Microsoft Windows platform versions by using a series of helper methods. To enable these helper methods, add the following to a recipe:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="nb">require</span> <span class="s1">&#39;chef/win32/version&#39;</span>
</pre></div>
</div>
<p>Then declare a variable using the <tt class="docutils literal"><span class="pre">Chef::ReservedNames::Win32::Version</span></tt> class:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">variable_name</span> <span class="o">=</span> <span class="no">Chef</span><span class="o">::</span><span class="no">ReservedNames</span><span class="o">::</span><span class="no">Win32</span><span class="o">::</span><span class="no">Version</span><span class="o">.</span><span class="n">new</span>
</pre></div>
</div>
<p>And then use this variable to define specific behaviors for specific Microsoft Windows platform versions. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">variable_name</span><span class="o">.</span><span class="n">helper_name?</span>
  <span class="c1"># Ruby code goes here, such as</span>
  <span class="n">resource_name</span> <span class="k">do</span>
    <span class="c1"># resource block</span>
  <span class="k">end</span>

<span class="k">elsif</span> <span class="n">variable_name</span><span class="o">.</span><span class="n">helper_name?</span>
  <span class="c1"># Ruby code goes here</span>
  <span class="n">resource_name</span> <span class="k">do</span>
    <span class="c1"># resource block for something else</span>
  <span class="k">end</span>

<span class="k">else</span> <span class="n">variable_name</span><span class="o">.</span><span class="n">helper_name?</span>
  <span class="c1"># Ruby code goes here, such as</span>
  <span class="n">log</span> <span class="s1">&#39;log entry&#39;</span> <span class="k">do</span>
    <span class="n">level</span> <span class="ss">:level</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div>
</div>
<p>The following Microsoft Windows platform-specific helpers can be used in recipes:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Helper</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">cluster?</span></tt></td>
<td>Use to test for a Cluster SKU (Windows Server 2003 and later).</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">core?</span></tt></td>
<td>Use to test for a Core SKU (Windows Server 2003 and later).</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">datacenter?</span></tt></td>
<td>Use to test for a Datacenter SKU.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">marketing_name</span></tt></td>
<td>Use to display the marketing name for a Microsoft Windows platform.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">windows_7?</span></tt></td>
<td>Use to test for Windows 7.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">windows_8?</span></tt></td>
<td>Use to test for Windows 8.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">windows_8_1?</span></tt></td>
<td>Use to test for Windows 8.1.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">windows_2000?</span></tt></td>
<td>Use to test for Windows 2000.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">windows_home_server?</span></tt></td>
<td>Use to test for Windows Home Server.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">windows_server_2003?</span></tt></td>
<td>Use to test for Windows Server 2003.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">windows_server_2003_r2?</span></tt></td>
<td>Use to test for Windows Server 2003 R2.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">windows_server_2008?</span></tt></td>
<td>Use to test for Windows Server 2008.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">windows_server_2008_r2?</span></tt></td>
<td>Use to test for Windows Server 2008 R2.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">windows_server_2012?</span></tt></td>
<td>Use to test for Windows Server 2012.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">windows_server_2012_r2?</span></tt></td>
<td>Use to test for Windows Server 2012 R2.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">windows_vista?</span></tt></td>
<td>Use to test for Windows Vista.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">windows_xp?</span></tt></td>
<td>Use to test for Windows XP.</td>
</tr>
</tbody>
</table>
<p>The following example installs Windows PowerShell 2.0 on systems that do not already have it installed. Microsoft Windows platform helper methods are used to define specific behaviors for specific platform versions:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="k">case</span> <span class="n">node</span><span class="o">[</span><span class="s1">&#39;platform&#39;</span><span class="o">]</span>
<span class="k">when</span> <span class="s1">&#39;windows&#39;</span>

  <span class="nb">require</span> <span class="s1">&#39;chef/win32/version&#39;</span>
  <span class="n">windows_version</span> <span class="o">=</span> <span class="no">Chef</span><span class="o">::</span><span class="no">ReservedNames</span><span class="o">::</span><span class="no">Win32</span><span class="o">::</span><span class="no">Version</span><span class="o">.</span><span class="n">new</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">windows_version</span><span class="o">.</span><span class="n">windows_server_2008_r2?</span> <span class="o">||</span> <span class="n">windows_version</span><span class="o">.</span><span class="n">windows_7?</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">windows_version</span><span class="o">.</span><span class="n">core?</span>

    <span class="n">windows_feature</span> <span class="s1">&#39;NetFx2-ServerCore&#39;</span> <span class="k">do</span>
      <span class="n">action</span> <span class="ss">:install</span>
    <span class="k">end</span>
    <span class="n">windows_feature</span> <span class="s1">&#39;NetFx2-ServerCore-WOW64&#39;</span> <span class="k">do</span>
      <span class="n">action</span> <span class="ss">:install</span>
      <span class="n">only_if</span> <span class="p">{</span> <span class="n">node</span><span class="o">[</span><span class="s1">&#39;kernel&#39;</span><span class="o">][</span><span class="s1">&#39;machine&#39;</span><span class="o">]</span> <span class="o">==</span> <span class="s1">&#39;x86_64&#39;</span> <span class="p">}</span>
    <span class="k">end</span>

  <span class="k">elsif</span> <span class="n">windows_version</span><span class="o">.</span><span class="n">windows_server_2008?</span> <span class="o">||</span> <span class="n">windows_version</span><span class="o">.</span><span class="n">windows_server_2003_r2?</span> <span class="o">||</span>
      <span class="n">windows_version</span><span class="o">.</span><span class="n">windows_server_2003?</span> <span class="o">||</span> <span class="n">windows_version</span><span class="o">.</span><span class="n">windows_xp?</span>

    <span class="k">if</span> <span class="n">windows_version</span><span class="o">.</span><span class="n">windows_server_2008?</span>
      <span class="n">windows_feature</span> <span class="s1">&#39;NET-Framework-Core&#39;</span> <span class="k">do</span>
        <span class="n">action</span> <span class="ss">:install</span>
      <span class="k">end</span>

    <span class="k">else</span>
      <span class="n">windows_package</span> <span class="s1">&#39;Microsoft .NET Framework 2.0 Service Pack 2&#39;</span> <span class="k">do</span>
        <span class="n">source</span> <span class="n">node</span><span class="o">[</span><span class="s1">&#39;ms_dotnet2&#39;</span><span class="o">][</span><span class="s1">&#39;url&#39;</span><span class="o">]</span>
        <span class="n">checksum</span> <span class="n">node</span><span class="o">[</span><span class="s1">&#39;ms_dotnet2&#39;</span><span class="o">][</span><span class="s1">&#39;checksum&#39;</span><span class="o">]</span>
        <span class="n">installer_type</span> <span class="ss">:custom</span>
        <span class="n">options</span> <span class="s1">&#39;/quiet /norestart&#39;</span>
        <span class="n">action</span> <span class="ss">:install</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">else</span>
    <span class="n">log</span> <span class="s1">&#39;.NET Framework 2.0 is already enabled on this version of Windows&#39;</span> <span class="k">do</span>
      <span class="n">level</span> <span class="ss">:warn</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">else</span>
  <span class="n">log</span> <span class="s1">&#39;.NET Framework 2.0 cannot be installed on platforms other than Windows&#39;</span> <span class="k">do</span>
    <span class="n">level</span> <span class="ss">:warn</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>The previous example is from the <a class="reference external" href="https://github.com/juliandunn/ms_dotnet2">ms_dotnet2 cookbook</a>, created by community member <tt class="docutils literal"><span class="pre">juliandunn</span></tt>.</p>
</div>
</div>
<div class="section" id="chef-client">
<h2>chef-client<a class="headerlink" href="#chef-client" title="Permalink to this headline"></a></h2>
<p>A chef-client is an agent that runs locally on every node that is under management by Chef. When a chef-client is run, it will perform all of the steps that are required to bring the node into the expected state, including:</p>
<ul class="simple">
<li>Registering and authenticating the node with the Chef server</li>
<li>Building the node object</li>
<li>Synchronizing cookbooks</li>
<li>Compiling the resource collection by loading each of the required cookbooks, including recipes, attributes, and all other dependencies</li>
<li>Taking the appropriate and required actions to configure the node</li>
<li>Looking for exceptions and notifications, handling each as required</li>
</ul>
<p>This command has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-client OPTION VALUE OPTION VALUE ...
</pre></div>
</div>
<p>This command has the following options specific to Microsoft Windows:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">-A</span></tt>, <tt class="docutils literal"><span class="pre">--fatal-windows-admin-check</span></tt></dt>
<dd>Cause a chef-client run to fail when the chef-client does not have administrator privileges in Microsoft Windows.</dd>
<dt><tt class="docutils literal"><span class="pre">-d</span></tt>, <tt class="docutils literal"><span class="pre">--daemonize</span></tt></dt>
<dd><p class="first">Run the executable as a daemon.</p>
<p class="last">This option is only available on machines that run in UNIX or Linux environments. For machines that are running Microsoft Windows that require similar functionality, use the <tt class="docutils literal"><span class="pre">chef-client::service</span></tt> recipe in the <tt class="docutils literal"><span class="pre">chef-client</span></tt> cookbook: <a class="reference external" href="https://supermarket.chef.io/cookbooks/chef-client">https://supermarket.chef.io/cookbooks/chef-client</a>. This will install a chef-client service under Microsoft Windows using the Windows Service Wrapper.</p>
</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">chef-solo also uses the <tt class="docutils literal"><span class="pre">--daemonize</span></tt> setting for Microsoft Windows.</p>
</div>
<div class="section" id="run-w-elevated-privileges">
<h3>Run w/Elevated Privileges<a class="headerlink" href="#run-w-elevated-privileges" title="Permalink to this headline"></a></h3>
<p>The chef-client may need to be run with elevated privileges in order to get a recipe to converge correctly. On UNIX and UNIX-like operating systems this can be done by running the command as root. On Microsoft Windows this can be done by running the command prompt as an administrator.</p>
<p>On Microsoft Windows, running without elevated privileges (when they are necessary) is an issue that fails silently. It will appear that the chef-client completed its run successfully, but the changes will not have been made. When this occurs, do one of the following to run the chef-client as the administrator:</p>
<ul>
<li><p class="first">Log in to the administrator account. (This is not the same as an account in the administrator&#8217;s security group.)</p>
</li>
<li><p class="first">Run the chef-client process from the administrator account while being logged into another account. Run the following command:</p>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ runas /user:Administrator <span class="s2">&quot;cmd /C chef-client&quot;</span>
</pre></div>
</div>
<p>This will prompt for the administrator account password.</p>
</div></blockquote>
</li>
<li><p class="first">Open a command prompt by right-clicking on the command prompt application, and then selecting <strong>Run as administrator</strong>. After the command window opens, the chef-client can be run as the administrator</p>
</li>
</ul>
</div>
</div>
<div class="section" id="knife-rb">
<h2>knife.rb<a class="headerlink" href="#knife-rb" title="Permalink to this headline"></a></h2>
<p>When running Microsoft Windows, the knife.rb file is located at <tt class="docutils literal"><span class="pre">%HOMEDRIVE%:%HOMEPATH%\.chef</span></tt> (e.g. <tt class="docutils literal"><span class="pre">c:\Users\&lt;username&gt;\.chef</span></tt>). If this path needs to be scripted, use <tt class="docutils literal"><span class="pre">%USERPROFILE%\.chef</span></tt>.</p>
</div>
</div>


          </div>


          <div class="footer" role="contentinfo">
                &copy; Copyright: This work is licensed under a Creative Commons Attribution 3.0 Unported License.
              This page is about: current version of Chef.
            <a href="/feedback.html">Provide feedback on Chef documentation</a>.
            </div>

<!-- Start of Async Google Analytics Code -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-6369228-7', 'auto', {'legacyCookieDomain': '.chef.io', 'allowLinker': true});
  ga('send', 'pageview');

  var trackOutboundLink = function(url) {
    if (ga.q) {
     document.location = url;
    } else {
      ga('send', 'event', 'outbound', 'click', url, {'hitCallback':
        function () {
          document.location = url;
        }
      });
    }
  };
</script>
<!-- End of Async Google Analytics Code -->

<!-- Start of Marketo Analytics Code -->
<script type="text/javascript">
(function() {
  var didInit = false;
  function initMunchkin() {
    if(didInit === false) {
      didInit = true;
      Munchkin.init('255-VFB-268');
    }
  }
  var s = document.createElement('script');
  s.type = 'text/javascript';
  s.async = true;
  s.src = document.location.protocol + '//munchkin.marketo.net/munchkin.js';
  s.onreadystatechange = function() {
    if (this.readyState == 'complete' || this.readyState == 'loaded') {
      initMunchkin();
    }
  };
  s.onload = initMunchkin;
  document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>
<!-- End of Marketo Analytics Code -->

<!-- Start of DemandBase Analytics Code -->
<script type="text/javascript">
	(function(d,b,a,s,e){ var t = b.createElement(a),
		fs = b.getElementsByTagName(a)[0]; t.async=1; t.id=e;
		t.src=('https:'==document.location.protocol ? 'https://' : 'http://') + s;
		fs.parentNode.insertBefore(t, fs); })
	(window,document,'script','scripts.demandbase.com/zH7sZrWR.min.js','demandbase_js_lib');
</script>
<!-- End of DemandBase Analytics Code -->

<!-- Start of Segment Analytics Code -->
<script type="text/javascript">
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="4.0.0";
  analytics.load("RtyoRfLf1ZETiJcIfkKND3Wq1K1LhYHx");
  analytics.page();
  }}();
</script>
<!-- End of Segment Analytics Code -->


        </div>
      </div>

      <div class="clearer"></div>
    </div>

  </div>
  </body>
</html>