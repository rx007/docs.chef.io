<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    
    <title>Release Notes: chef-client 12.0 - 12.17 &mdash; Chef Docs</title>
    <link rel="stylesheet" href="_static/chefv2.css" type="text/css" />
<link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
    URL_ROOT:    './',
    VERSION:     '',
    COLLAPSE_INDEX: false,
    FILE_SUFFIX: '.html',
    HAS_SOURCE:  true
  };
</script>
<script type="text/javascript" src="_static/jquery.js"></script>
<script type="text/javascript" src="_static/underscore.js"></script>
<script type="text/javascript" src="_static/doctools.js"></script>
<script type="text/javascript" src="_static/script.js"></script>

    <link rel="top" title="Chef Docs" href="index.html" />
    <link rel="next" title="Release Notes: Chef Development Kit 0.19 - 1.1" href="release_notes_chefdk.html" />
    <link rel="prev" title="Reporting" href="reporting.html" /> 
  </head>
  <body role="document">
    <div class="body-wrap">

  <nav class="nav-main" role="navigation" data-topbar>
    <div class="nav-inner">
      <div class="left">
        <h1>
          <a href="https://learn.chef.io">
            <span>Learn Chef</span>
          </a>
        </h1>
      </div>

      <i id="nav-icon" class="fa fa-bars"></i>
      <a href="https://www.chef.io/">
        <img id="logo" src="_static/chef_logo_v2.svg" onerror="_static/chef_logo_v2.png"/>
      </a>

      <ul class="nav-links links-main">
        <li class="nav-link">
          <a href="https://learn.chef.io/tutorials">Tutorials</a>
        </li>
        <li class="nav-link">
          <a href="https://learn.chef.io/skills/">Skills Library</a>
        </li>
        <li class="nav-link is-active">
          <a href="https://docs.chef.io/">Docs</a>
        </li>
        <li class="nav-link">
          <a href="https://www.chef.io/training/">Training</a>
        </li>
      </ul>
    </div>
  </nav>





    <div class="document chef-docs">
    <nav class="nav-docs">
  <ul class="nav-docs-items" id="nav-docs-list">
    <li class="main-item dark-item docs-search">
      <form action="/search.html" method="get">
        <input type="text" placeholder="Search" id="docs-search" name="q">
        <input type="submit" class="submit-button" value="">
        <i class="fa fa-search icon-search"></i>
      </form>
   

    </li>
    
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Overview"> <!-- else item does not have custom image and should use FontAwesome icon -->

        <i class="fa fa-home icon-left"></i> Overview <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items"> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/platform_overview.html" title="Platform Overview">
            Platform Overview
          </a>
        </li>

         <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Community">
            Community
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/community.html" title="About the Community">
                About the Community
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/community_contributions.html" title="Contributing">
                Contributing
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/community_guidelines.html" title="Guidelines">
                Guidelines
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/style_guide.html" title="Docs Style Guide">
                Docs Style Guide
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Packages &amp; Platforms">
            Packages &amp; Platforms
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/packages.html" title="Packages">
                Packages
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/platforms.html" title="Platforms">
                Platforms
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_omnitruck.html" title="Omnitruck API">
                Omnitruck API
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_license.html" title="Licensing">
                Licensing
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Chef"> <!-- else item does not have custom image and should use FontAwesome icon -->

        <i class="fa fa-tasks icon-left"></i> Chef <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items">

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Getting Started">
            Getting Started
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_overview.html" title="Chef Overview">
                Chef Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/quick_start.html" title="Quick Start">
                Quick Start
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_system_requirements.html" title="System Requirements">
                System Requirements
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Release Notes">
                Release Notes
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/release_notes.html" title="Chef Client">
                    Chef Client
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/release_notes_chefdk.html" title="Chef Development Kit">
                    Chef Development Kit
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/release_notes_server.html" title="Chef Server">
                    Chef Server
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/release_notes_push_jobs.html" title="Chef Push Jobs">
                    Chef Push Jobs
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/release_notes_ohai.html" title="Ohai">
                    Ohai
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_deprecations_client.html" title="Deprecations">
                Deprecations
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Tutorials">
            Tutorials
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/learn-the-basics/" title="Learn the Basics">
                Learn the Basics
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/manage-a-node/" title="Manage a Node">
                Manage a Node
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/local-development/" title="Get started with Test Kitchen">
                Get started with Test Kitchen
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/manage-a-web-app/" title="Develop a web app cookbook">
                Develop a web app cookbook
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/inspec/" title="Verify with InSpec">
                Verify with InSpec
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/chefspec/" title="Unit test with ChefSpec">
                Unit test with ChefSpec
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/verify-style/" title="Verify code style">
                Verify code style
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/refactor-web-app-cookbook/" title="Refactor the web app cookbook">
                Refactor the web app cookbook
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Concepts">
            Concepts
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/workstation.html" title="Workstation">
                Workstation
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_repo.html" title="chef-repo">
                chef-repo
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/nodes.html" title="Nodes">
                Nodes
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_client.html" title="chef-client">
                chef-client
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_components.html" title="Server">
                Server
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_search.html" title="Search">
                Search
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/cookbooks.html" title="Cookbooks">
                Cookbooks
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/handlers.html" title="Handlers">
                Handlers
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/manage.html" title="Management Console">
                Management Console
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Policy">
                Policy
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/policy.html" title="About Policy">
                    About Policy
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/data_bags.html" title="Data Bags">
                    Data Bags
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/environments.html" title="Environments">
                    Environments
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/roles.html" title="Roles">
                    Roles
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/push_jobs.html" title="Push Jobs">
                Push Jobs
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/run_lists.html" title="Run-lists">
                Run-lists
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Security">
                Security
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/auth.html#authentication" title="Authentication">
                    Authentication
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/auth.html#authorization" title="Authorization">
                    Authorization
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/chef_private_keys.html" title="Private Keys">
                    Private Keys
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef_client.html#run-in-fips-mode" title="FIPS-mode">
                    FIPS-mode
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Supermarket">
                Supermarket
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/supermarket.html#public-supermarket" title="Public Supermarket">
                    Public Supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/supermarket.html#private-supermarket" title="Private Supermarket">
                    Private Supermarket
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/windows.html" title="Microsoft Windows">
                Microsoft Windows
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Appendix">
                Appendix
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/environment_variables.html" title="Env Variables">
                    Env Variables
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/errors.html" title="Troubleshooting">
                    Troubleshooting
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/glossary.html" title="Glossary">
                    Glossary
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Setup">
            Setup
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/proxies.html" title="Proxies">
                Proxies
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_dk.html" title="Workstation">
                Workstation
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Nodes">
                Nodes
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/install_bootstrap.html" title="Install via Bootstrap">
                    Install via Bootstrap
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_omnibus.html" title="Install via URL">
                    Install via URL
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_windows.html" title="Install on Windows">
                    Install on Windows
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/junos.html" title="Install on Junos OS">
                    Install on Junos OS
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef_client.html" title="chef-client (executable)">
                    chef-client (executable)
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_client.html" title="client.rb">
                    client.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/upgrade_client.html" title="Upgrades">
                    Upgrades
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/chef_client_security.html" title="Security">
                    Security
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Server">
                Server
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="https://manage.chef.io/signup" title="Hosted Chef Server">
                    Hosted Chef Server
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_server.html#standalone" title="Install Standalone">
                    Install Standalone
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_server_ha.html" title="Install High Availability">
                    Install High Availability
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/aws_marketplace.html" title="AWS Marketplace">
                    AWS Marketplace
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/azure_portal.html" title="Microsoft Azure">
                    Microsoft Azure
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/openstack.html" title="Openstack">
                    Openstack
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Supermarket">
                Supermarket
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="https://supermarket.chef.io" title="Public Supermarket">
                    Public Supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_supermarket.html" title="Install Private Supermarket">
                    Install Private Supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_supermarket.html#customize-supermarket" title="Customize Supermarket">
                    Customize Supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/install_supermarket.html#run-supermarket-in-kitchen" title="Run in Test Kitchen">
                    Run in Test Kitchen
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_server.html#install" title="Management Console">
                Management Console
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_push_jobs.html" title="Push Jobs">
                Push Jobs
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Integrations">
                Integrations
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/integrate_compliance_chef_server.html" title="w/Chef Compliance">
                    w/Chef Compliance
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/uninstall.html" title="Uninstall">
                Uninstall
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Cookbook Reference">
            Cookbook Reference
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/cookbooks.html" title="About Cookbooks">
                About Cookbooks
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/attributes.html" title="Attributes">
                Attributes
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/definitions.html" title="Definitions">
                Definitions
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/files.html" title="Files">
                Files
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/libraries.html" title="Libraries">
                Libraries
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Recipes">
                Recipes
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/recipes.html" title="About Recipes">
                    About Recipes
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/debug.html" title="Debug Recipes, Client Runs">
                    Debug Recipes, Client Runs
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Recipe DSL">
                Recipe DSL
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#attribute" title="attribute?">
                    attribute?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#control" title="control">
                    control
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#control-group" title="control_group">
                    control_group
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#cookbook-name" title="cookbook_name">
                    cookbook_name
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#data-bag" title="data_bag">
                    data_bag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#data-bag-item" title="data_bag_item">
                    data_bag_item
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#platform" title="platform?">
                    platform?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#platform-family" title="platform_family?">
                    platform_family?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#reboot-pending" title="reboot_pending?">
                    reboot_pending?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#recipe-name" title="recipe_name">
                    recipe_name
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-data-exists" title="registry_data_exists?">
                    registry_data_exists?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-get-subkeys" title="registry_get_subkeys">
                    registry_get_subkeys
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-get-values" title="registry_get_values">
                    registry_get_values
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-has-subkeys" title="registry_has_subkeys?">
                    registry_has_subkeys?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-key-exists" title="registry_key_exists?">
                    registry_key_exists?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#registry-value-exists" title="registry_value_exists?">
                    registry_value_exists?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#resources" title="resources">
                    resources
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#search" title="search">
                    search
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#shell-out" title="shell_out">
                    shell_out
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#shell-out-bang" title="shell_out!">
                    shell_out!
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#shell-out-with-systems-locale" title="shell_out_with_systems_locale">
                    shell_out_with_systems_locale
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#tag-tagged-untag" title="tag">
                    tag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#tag-tagged-untag" title="tagged?">
                    tagged?
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#tag-tagged-untag" title="untag">
                    untag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#value-for-platform" title="value_for_platform">
                    value_for_platform
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#value-for-platform-family" title="value_for_platform_family">
                    value_for_platform_family
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/dsl_recipe.html#helpers" title="Windows Platform Helpers">
                    Windows Platform Helpers
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Resources">
                Resources
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/resource.html" title="About Resources">
                    About Resources
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_common.html" title="Common Functionality">
                    Common Functionality
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/custom_resources.html" title="Custom Resources">
                    Custom Resources
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resources.html" title="All Resources (Single Page)">
                    All Resources (Single Page)
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_apt_package.html" title="apt_package">
                    apt_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_apt_repository.html" title="apt_repository">
                    apt_repository
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_apt_update.html" title="apt_update">
                    apt_update
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_bash.html" title="bash">
                    bash
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_batch.html" title="batch">
                    batch
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_bff_package.html" title="bff_package">
                    bff_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_breakpoint.html" title="breakpoint">
                    breakpoint
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_cab_package.html" title="cab_package">
                    cab_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_gem.html" title="chef_gem">
                    chef_gem
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_acl.html" title="chef_acl">
                    chef_acl
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_client.html" title="chef_client">
                    chef_client
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_container.html" title="chef_container">
                    chef_container
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_data_bag_item.html" title="chef_data_bag_item">
                    chef_data_bag_item
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_data_bag.html" title="chef_data_bag">
                    chef_data_bag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_environment.html" title="chef_environment">
                    chef_environment
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_group.html" title="chef_group">
                    chef_group
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_handler.html" title="chef_handler">
                    chef_handler
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_mirror.html" title="chef_mirror">
                    chef_mirror
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_node.html" title="chef_node">
                    chef_node
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_organization.html" title="chef_organization">
                    chef_organization
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_role.html" title="chef_role">
                    chef_role
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chef_user.html" title="chef_user">
                    chef_user
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_chocolatey_package.html" title="chocolatey_package">
                    chocolatey_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_cookbook_file.html" title="cookbook_file">
                    cookbook_file
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_cron.html" title="cron">
                    cron
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_csh.html" title="csh">
                    csh
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_deploy.html" title="deploy">
                    deploy
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_directory.html" title="directory">
                    directory
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_dpkg_package.html" title="dpkg_package">
                    dpkg_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_dsc_resource.html" title="dsc_resource">
                    dsc_resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_dsc_script.html" title="dsc_script">
                    dsc_script
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_easy_install_package.html" title="easy_install_package">
                    easy_install_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_env.html" title="env">
                    env
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_erlang_call.html" title="erl_call">
                    erl_call
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_execute.html" title="execute">
                    execute
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_file.html" title="file">
                    file
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_freebsd_package.html" title="freebsd_package">
                    freebsd_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_gem_package.html" title="gem_package">
                    gem_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_git.html" title="git">
                    git
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_group.html" title="group">
                    group
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_homebrew_package.html" title="homebrew_package">
                    homebrew_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_http_request.html" title="http_request">
                    http_request
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ifconfig.html" title="ifconfig">
                    ifconfig
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ips_package.html" title="ips_package">
                    ips_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ksh.html" title="ksh">
                    ksh
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_launchd.html" title="launchd">
                    launchd
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_link.html" title="link">
                    link
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_log.html" title="log">
                    log
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_macports_package.html" title="macports_package">
                    macports_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_mdadm.html" title="mdadm">
                    mdadm
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_mount.html" title="mount">
                    mount
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_msu_package.html" title="msu_package">
                    msu_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ohai.html" title="ohai">
                    ohai
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_openbsd_package.html" title="openbsd_package">
                    openbsd_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_osx_profile.html" title="osx_profile">
                    osx_profile
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_package.html" title="package">
                    package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_pacman_package.html" title="pacman_package">
                    pacman_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_paludis_package.html" title="paludis_package">
                    paludis_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_perl.html" title="perl">
                    perl
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_portage_package.html" title="portage_package">
                    portage_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_powershell_script.html" title="powershell_script">
                    powershell_script
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_private_key.html" title="private_key">
                    private_key
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_public_key.html" title="public_key">
                    public_key
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_python.html" title="python">
                    python
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_reboot.html" title="reboot">
                    reboot
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_registry_key.html" title="registry_key">
                    registry_key
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_remote_directory.html" title="remote_directory">
                    remote_directory
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_remote_file.html" title="remote_file">
                    remote_file
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_route.html" title="route">
                    route
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_rpm_package.html" title="rpm_package">
                    rpm_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ruby.html" title="ruby">
                    ruby
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_ruby_block.html" title="ruby_block">
                    ruby_block
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_script.html" title="script">
                    script
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_service.html" title="service">
                    service
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_smartos_package.html" title="smartos_package">
                    smartos_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_solaris_package.html" title="solaris_package">
                    solaris_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_subversion.html" title="subversion">
                    subversion
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_systemd_unit.html" title="systemd_unit">
                    systemd_unit
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_template.html" title="template">
                    template
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_user.html" title="user">
                    user
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_windows_package.html" title="windows_package">
                    windows_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_windows_service.html" title="windows_service">
                    windows_service
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_yum.html" title="yum_package">
                    yum_package
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_yum_repository.html" title="yum_repository">
                    yum_repository
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_examples.html" title="Examples (by Resource)">
                    Examples (by Resource)
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/templates.html" title="Templates">
                Templates
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/cookbook_repo.html" title="Cookbook Repo">
                Cookbook Repo
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_metadata.html" title="metadata.rb">
                metadata.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/cookbook_versions.html" title="Cookbook Versions">
                Cookbook Versions
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ruby.html" title="Ruby">
                Ruby
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Chef DK">
            Chef DK
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/about_chefdk.html" title="About the ChefDK">
                About the ChefDK
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/berkshelf.html" title="Berkshelf">
                Berkshelf
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_apply.html" title="chef-apply (executable)">
                chef-apply (executable)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_shell.html" title="chef-shell (executable)">
                chef-shell (executable)
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="chef (executable)">
                chef (executable)
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-env" title="chef env">
                    chef env
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-exec" title="chef exec">
                    chef exec
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-gem" title="chef gem">
                    chef gem
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-app" title="chef generate app">
                    chef generate app
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-attribute" title="chef generate attribute">
                    chef generate attribute
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-cookbook" title="chef generate cookbook">
                    chef generate cookbook
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-file" title="chef generate file">
                    chef generate file
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-lwrp" title="chef generate lwrp">
                    chef generate lwrp
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-recipe" title="chef generate recipe">
                    chef generate recipe
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-repo" title="chef generate repo">
                    chef generate repo
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-generate-template" title="chef generate template">
                    chef generate template
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-provision" title="chef provision">
                    chef provision
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-shell-init" title="chef shell-init">
                    chef shell-init
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef.html#chef-verify" title="chef verify">
                    chef verify
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Chef Solo">
                Chef Solo
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/chef_solo.html" title="About Chef Solo">
                    About Chef Solo
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_chef_solo.html" title="chef-solo (executable)">
                    chef-solo (executable)
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_solo.html" title="solo.rb">
                    solo.rb
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_shell.html" title="chef-shell (executable)">
                chef-shell (executable)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_client.html#run-in-local-mode" title="chef-zero (local mode)">
                chef-zero (local mode)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_vault.html" title="chef-vault">
                chef-vault
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chefspec.html" title="ChefSpec">
                ChefSpec
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Configuration">
                Configuration
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/config_rb.html" title="config.rb">
                    config.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_client.html#d-directories" title="Multiple Config Files">
                    Multiple Config Files
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/cookstyle.html" title="cookstyle">
                cookstyle
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_delivery.html" title="Delivery CLI">
                Delivery CLI
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/foodcritic.html" title="Foodcritic">
                Foodcritic
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Test Kitchen">
                Test Kitchen
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/kitchen.html" title="About Test Kitchen">
                    About Test Kitchen
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_kitchen.html" title="kitchen (executable)">
                    kitchen (executable)
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_yml_kitchen.html" title=".kitchen.yml">
                    .kitchen.yml
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_kitchen_vagrant.html" title="kitchen-vagrant">
                    kitchen-vagrant
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Knife">
                Knife
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/knife.html" title="About Knife">
                    About Knife
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_common_options.html" title="Common Options">
                    Common Options
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_using.html" title="Using Knife">
                    Using Knife
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_knife.html" title="knife.rb">
                    knife.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_bootstrap.html" title="knife bootstrap">
                    knife bootstrap
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_client.html" title="knife client">
                    knife client
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_configure.html" title="knife configure">
                    knife configure
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_cookbook.html" title="knife cookbook">
                    knife cookbook
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_cookbook_site.html" title="knife cookbook site">
                    knife cookbook site
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_data_bag.html" title="knife data bag">
                    knife data bag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_delete.html" title="knife delete">
                    knife delete
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_deps.html" title="knife deps">
                    knife deps
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_diff.html" title="knife diff">
                    knife diff
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_download.html" title="knife download">
                    knife download
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_edit.html" title="knife edit">
                    knife edit
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_environment.html" title="knife environment">
                    knife environment
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_exec.html" title="knife exec">
                    knife exec
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_list.html" title="knife list">
                    knife list
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_node.html" title="knife node">
                    knife node
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_raw.html" title="knife raw">
                    knife raw
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_recipe_list.html" title="knife recipe list">
                    knife recipe list
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_role.html" title="knife role">
                    knife role
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_search.html" title="knife search">
                    knife search
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_serve.html" title="knife serve">
                    knife serve
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_show.html" title="knife show">
                    knife show
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_ssh.html" title="knife ssh">
                    knife ssh
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_ssl_check.html" title="knife ssl_check">
                    knife ssl_check
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_ssl_fetch.html" title="knife ssl_fetch">
                    knife ssl_fetch
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_status.html" title="knife status">
                    knife status
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_tag.html" title="knife tag">
                    knife tag
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_upload.html" title="knife upload">
                    knife upload
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_user.html" title="knife user">
                    knife user
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/knife_xargs.html" title="knife xargs">
                    knife xargs
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="knife opc">
                knife opc
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html" title="About knife opc">
                    About knife opc
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#knife-rb-configuration" title="knife.rb Configuration">
                    knife.rb Configuration
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-list" title="opc user list">
                    opc user list
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-show" title="opc user show">
                    opc user show
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-create" title="opc user create">
                    opc user create
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-delete" title="opc user delete">
                    opc user delete
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-edit" title="opc user edit">
                    opc user edit
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-user-password" title="opc user password">
                    opc user password
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-list" title="opc org list">
                    opc org list
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-show" title="opc org show">
                    opc org show
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-create" title="opc org create">
                    opc org create
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-delete" title="opc org delete">
                    opc org delete
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-user-add" title="opc org user add">
                    opc org user add
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_opc.html#opc-org-user-remove" title="opc org user remove">
                    opc org user remove
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_knife_spork.html" title="knife spork">
                knife spork
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="knife supermarket">
                knife supermarket
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html" title="About knife supermarket">
                    About knife supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#download" title="supermarket download">
                    supermarket download
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#install" title="supermarket install">
                    supermarket install
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#list" title="supermarket list">
                    supermarket list
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#search" title="supermarket search">
                    supermarket search
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#share" title="supermarket share">
                    supermarket share
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#show" title="supermarket show">
                    supermarket show
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html#unshare" title="supermarket unshare">
                    supermarket unshare
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Ohai">
                Ohai
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/ohai.html" title="About Ohai">
                    About Ohai
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_ohai.html" title="ohai (executable)">
                    ohai (executable)
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Policyfile">
                Policyfile
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/policyfile.html" title="About Policyfile">
                    About Policyfile
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_policyfile.html" title="Policyfile.rb">
                    Policyfile.rb
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Provisioning">
                Provisioning
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/provisioning.html" title="About Provisioning">
                    About Provisioning
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_load_balancer.html" title="load_balancer resource">
                    load_balancer resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_machine.html" title="machine resource">
                    machine resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_machine_batch.html" title="machine_batch resource">
                    machine_batch resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_machine_execute.html" title="machine_execute resource">
                    machine_execute resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_machine_file.html" title="machine_file resource">
                    machine_file resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/resource_machine_image.html" title="machine_image resource">
                    machine_image resource
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/provisioning_aws.html" title="AWS Driver Resources">
                    AWS Driver Resources
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/provisioning_fog.html" title="Fog Driver Resources">
                    Fog Driver Resources
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/provisioning_vagrant.html" title="Vagrant Driver Resources">
                    Vagrant Driver Resources
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_push_jobs_client.html" title="push-jobs-client (executable)">
                push-jobs-client (executable)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/rubocop.html" title="Rubocop">
                Rubocop
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Managing the Server">
            Managing the Server
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/runbook.html" title="Runbook (Single Page)">
                Runbook (Single Page)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_backup_restore.html" title="Backup &amp; Restore">
                Backup &amp; Restore
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_data.html" title="Data Storage">
                Data Storage
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_firewalls_and_ports.html" title="Firewalls &amp; Ports">
                Firewalls &amp; Ports
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_ldap.html" title="Active Directory &amp; LDAP">
                Active Directory &amp; LDAP
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_logs.html" title="Log Files">
                Log Files
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_monitor.html" title="Monitor">
                Monitor
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_orgs.html" title="Organizations &amp; Groups">
                Organizations &amp; Groups
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/secrets.html" title="Secrets">
                Secrets
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_security.html" title="Security">
                Security
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_services.html" title="Services">
                Services
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_tuning.html" title="Tuning">
                Tuning
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/upgrade_server.html" title="Upgrades">
                Upgrades
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/upgrade_server_ha_v2.html" title="Upgrade HA Cluster">
                Upgrade HA Cluster
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_users.html" title="Users">
                Users
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_server.html" title="chef-server-ctl">
                chef-server-ctl
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_chef_backend.html" title="chef-backend-ctl">
                chef-backend-ctl
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_server.html" title="chef-server.rb">
                chef-server.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_opscode_expander.html" title="opscode-expander-ctl">
                opscode-expander-ctl
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_chef_server.html" title="Chef Server API">
                Chef Server API
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Push Jobs">
                Push Jobs
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_push_jobs.html" title="knife push jobs">
                    knife push jobs
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_push_jobs_client.html" title="push-jobs-client">
                    push-jobs-client
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_push_jobs_client.html" title="push-jobs-client.rb">
                    push-jobs-client.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_push_jobs_server.html" title="push-jobs-server.rb">
                    push-jobs-server.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/api_push_jobs.html" title="Push Jobs API">
                    Push Jobs API
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_sent_events.html" title="Server Sent Events">
                    Server Sent Events
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Supermarket">
                Supermarket
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/supermarket_logs.html" title="Log Files">
                    Log Files
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/supermarket_monitor.html" title="Monitoring">
                    Monitoring
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_supermarket.html" title="supermarket.rb">
                    supermarket.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/plugin_knife_supermarket.html" title="knife supermarket">
                    knife supermarket
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_supermarket.html" title="supermarket-ctl">
                    supermarket-ctl
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/supermarket_api.html" title="Supermarket API">
                    Supermarket API
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Management Console">
                Management Console
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/server_configure_saml.html" title="Configure SAML">
                    Configure SAML
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_clients.html" title="Clients">
                    Clients
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_cookbooks.html" title="Cookbooks">
                    Cookbooks
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_data_bags.html" title="Data Bags">
                    Data Bags
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_environments.html" title="Environments">
                    Environments
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_nodes.html" title="Nodes">
                    Nodes
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_manage_roles.html" title="Roles">
                    Roles
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/server_users.html#chef-manage" title="Users">
                    Users
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/config_rb_manage.html" title="manage.rb">
                    manage.rb
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_manage.html" title="chef-manage-ctl">
                    chef-manage-ctl
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Habitat"> <!-- if item has custom image -->

        <img class="icon-left" src="./_static/habitat-mark.png"></img> Habitat <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items"> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/habitat.html" title="Habitat Overview">
            Habitat Overview
          </a>
        </li>

         <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Tutorials">
            Tutorials
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://www.habitat.sh/tutorials/getting-started-overview" title="Getting started">
                Getting started
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="InSpec"> <!-- if item has custom image -->

        <img class="icon-left" src="./_static/inspec_logo.png"></img> InSpec <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items"> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/inspec.html" title="InSpec Overview">
            InSpec Overview
          </a>
        </li>

         <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Chef Automate"> <!-- else item does not have custom image and should use FontAwesome icon -->

        <i class="fa fa-cogs icon-left"></i> Chef Automate <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items">

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Getting Started">
            Getting Started
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_automate.html" title="Chef Automate Overview">
                Chef Automate Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_chef_automate.html" title="Installation Guide">
                Installation Guide
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Tutorials">
            Tutorials
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/automate/install" title="Get Started">
                Get Started
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/automate/visibility" title="Visibility into Infrastructure">
                Visibility into Infrastructure
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/automate/deploy-cookbook/" title="Deploy with Chef Automate">
                Deploy with Chef Automate
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/compliance-assess" title="Assess for Compliance">
                Assess for Compliance
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="https://learn.chef.io/tutorials/compliance-remediate" title="Remediate Compliance Failures">
                Remediate Compliance Failures
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Setup">
            Setup
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_pipeline.html" title="Configure a Pipeline">
                Configure a Pipeline
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_json_delivery.html" title="Configure a Project">
                Configure a Project
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/setup_visibility_chef_automate.html" title="Configure Data Collection">
                Configure Data Collection
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Concepts">
            Concepts
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2">

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Workflow">
                Workflow
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/workflow.html" title="Workflow Overview">
                    Workflow Overview
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/delivery_manage_dependencies.html" title="Manage Dependencies">
                    Manage Dependencies
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/visibility.html" title="Visibility Overview">
                Visibility Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/compliance.html" title="Compliance Overview">
                Compliance Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/ctl_delivery.html" title="Delivery CLI">
            Delivery CLI
          </a>
        </li>

         <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Integrations">
            Integrations
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_delivery_bitbucket.html" title="w/Bitbucket">
                w/Bitbucket
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_delivery_smtp.html" title="w/Email (SMTP)">
                w/Email (SMTP)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_delivery_github.html" title="w/GitHub">
                w/GitHub
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_delivery_ldap.html" title="w/LDAP">
                w/LDAP
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_chef_automate_saml.html" title="w/SAML">
                w/SAML
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_delivery_slack.html" title="w/Slack">
                w/Slack
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Cookbooks">
            Cookbooks
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_build_cookbook.html" title="build-cookbook (cookbook)">
                build-cookbook (cookbook)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_truck.html" title="delivery-truck (cookbook)">
                delivery-truck (cookbook)
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/publish_cookbooks_multiple_servers.html" title="Publish to Multiple Chef Servers">
                Publish to Multiple Chef Servers
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/dsl_delivery.html" title="Workflow DSL">
            Workflow DSL
          </a>
        </li>

         <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/job_dispatch.html" title="Job Dispatch">
            Job Dispatch
          </a>
        </li>

         <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Managing the Server">
            Managing the Server
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2">

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="Backups">
                Backups
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/delivery_server_backup.html#configuration" title="Configuration">
                    Configuration
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/delivery_server_backup.html#create-backups" title="Create Backups">
                    Create Backups
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/delivery_server_backup.html#list-backups" title="List Backups">
                    List Backups
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/delivery_server_backup.html#delete-backups" title="Delete Backups">
                    Delete Backups
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/delivery_server_backup.html#restore-backups" title="Restore Backups">
                    Restore Backups
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/scaling_capacity_planning_chef_automate.html" title="Capacity Planning">
                Capacity Planning
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_delivery.html" title="Chef Automate API">
                Chef Automate API
              </a>
            </li> <!-- /if subItem2.hasSubItems -->

            <li class="has-sub-items">
              <div class="has-sub-items-content" title="automate-ctl">
                automate-ctl
                <i class="fa fa-chevron-down"></i>
              </div>
              <ul class="sub-items level-3">

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#cleanse" title="cleanse">
                    cleanse
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#create-enterprise" title="create-enterprise">
                    create-enterprise
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#create-user" title="create-user">
                    create-user
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-application" title="delete-application">
                    delete-application
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-enterprise" title="delete-enterprise">
                    delete-enterprise
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-project" title="delete-project">
                    delete-project
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-user" title="delete-user">
                    delete-user
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-visibility-node" title="delete-visibility-node">
                    delete-visibility-node
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#delete-visibility-node-by-id" title="delete-visibility-node-by-id">
                    delete-visibility-node-by-id
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#gather-logs" title="gather-logs">
                    gather-logs
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#help" title="help">
                    help
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#install-runner" title="install-runner">
                    install-runner
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#list-applications" title="list-applications">
                    list-applications
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#list-enterprises" title="list-enterprises">
                    list-enterprises
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#list-users" title="list-users">
                    list-users
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#migrate-change-description" title="migrate-change-description">
                    migrate-change-description
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#migrate-patchset-diffs" title="migrate-patchset-diffs">
                    migrate-patchset-diffs
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#preflight-check" title="preflight-check">
                    preflight-check
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#reconfigure" title="reconfigure">
                    reconfigure
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#rename-enterprise" title="rename-enterprise">
                    rename-enterprise
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#reset-password" title="reset-password">
                    reset-password
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#restore-backup" title="restore-backup">
                    restore-backup
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#revoke-token" title="revoke-token">
                    revoke-token
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#show-config" title="show-config">
                    show-config
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#uninstall" title="uninstall">
                    uninstall
                  </a>
                </li>

                <li>
                  <a class="nav-docs-link" href="/ctl_delivery_server.html#update-project-hooks" title="update-project-hooks">
                    update-project-hooks
                  </a>
                </li> <!-- /for subItem3 in subItem2.subItems -->

              </ul>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_delivery.html" title="delivery.rb">
                delivery.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_server_disaster_recovery.html" title="Disaster Recovery">
                Disaster Recovery
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/elasticsearch_and_kibana_auth.html" title="Elasticsearch &amp; Kibana Auth">
                Elasticsearch &amp; Kibana Auth
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/manage_indices_chef_automate.html" title="Manage Elasticsearch Indices">
                Manage Elasticsearch Indices
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/search_query_chef_automate.html" title="Node Search Reference">
                Node Search Reference
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_manage_secrets.html" title="Secrets">
                Secrets
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/stream_data_chef_automate.html" title="Stream Data">
                Stream Data
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_server_tuning.html" title="Tuning">
                Tuning
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/upgrade_chef_automate.html" title="Upgrades">
                Upgrades
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/delivery_users_and_roles.html" title="Users &amp; Roles">
                Users &amp; Roles
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Compliance scanner">
            Compliance scanner
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/compliance.html" title="Overview">
                Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/release_notes_compliance.html" title="Release Notes">
                Release Notes
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_compliance.html" title="Installation Guide">
                Installation Guide
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_compliance_chef_server.html" title="Integrate w/Chef Server">
                Integrate w/Chef Server
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/integrate_compliance_chef_automate.html" title="Integrate w/Chef Automate">
                Integrate w/Chef Automate
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/upgrade_compliance.html" title="Upgrade Compliance">
                Upgrade Compliance
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_compliance.html" title="chef-compliance.rb">
                chef-compliance.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_compliance.html" title="Chef Compliance API">
                Chef Compliance API
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/aws_opsworks_chef_automate.html" title="AWS OpsWorks for Chef Automate">
            AWS OpsWorks for Chef Automate
          </a>
        </li>

         <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/troubleshooting_chef_automate.html" title="Troubleshooting">
            Troubleshooting
          </a>
        </li>

         <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Legacy"> <!-- else item does not have custom image and should use FontAwesome icon -->

        <i class="fa fa-hdd-o icon-left"></i> Legacy <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items">

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Analytics">
            Analytics
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics.html" title="Overview">
                Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/release_notes_analytics.html" title="Release Notes">
                Release Notes
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_analytics.html" title="Install Standalone">
                Install Standalone
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/actions.html" title="Web UI">
                Web UI
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics_webui_tasks.html" title="Management Console">
                Management Console
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics_nodes_view.html" title="Nodes View">
                Nodes View
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics.html#integrations" title="Integrations">
                Integrations
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics_splunk.html" title="Splunk">
                Splunk
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics_rules.html" title="Rules">
                Rules
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/analytics_monitor.html" title="Monitor">
                Monitor
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/upgrade_analytics.html" title="Upgrades">
                Upgrades
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/chef_client_analytics.html" title="Chef Client for Analytics">
                Chef Client for Analytics
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_analytics.html" title="opscode-analytics-ctl">
                opscode-analytics-ctl
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_analytics.html" title="opscode-analytics.rb">
                opscode-analytics.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_knife_analytics.html" title="knife-analytics">
                knife-analytics
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_analytics.html" title="Analytics API">
                Analytics API
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/dsl_recipe_analytics.html" title="Recipe DSL for Analytics">
                Recipe DSL for Analytics
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Reporting">
            Reporting
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/reporting.html" title="Overview">
                Overview
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/install_reporting.html" title="Install Reporting">
                Install Reporting
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/server_manage_reports.html" title="View Reports">
                View Reports
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_knife_reporting.html" title="knife reporting">
                knife reporting
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ctl_reporting.html" title="opscode-reporting-ctl">
                opscode-reporting-ctl
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/config_rb_reporting.html" title="opscode-reporting.rb">
                opscode-reporting.rb
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/api_reporting.html" title="Reporting API">
                Reporting API
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li>
    <li class="main-item has-sub-items">

      <div class="has-sub-items-content" title="Extension APIs"> <!-- else item does not have custom image and should use FontAwesome icon -->

        <i class="fa fa-clone icon-left"></i> Extension APIs <!-- endif -->

        <i class="fa fa-chevron-down"></i>
      </div>


      <ul class="sub-items"> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/dsl_compliance.html" title="Compliance DSL">
            Compliance DSL
          </a>
        </li>

         <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Handlers">
            Handlers
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/handlers.html#custom-handlers" title="Custom Handlers">
                Custom Handlers
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/dsl_handler.html" title="Handler DSL">
                Handler DSL
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_community.html#handlers" title="Community Handlers">
                Community Handlers
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Knife Plugins">
            Knife Plugins
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_knife.html" title="About Cloud Plugins">
                About Cloud Plugins
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_knife_custom.html" title="Custom Plugins">
                Custom Plugins
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_community.html#knife" title="Community Plugins">
                Community Plugins
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems -->

        <li class="has-sub-items">
          <div class="has-sub-items-content" title="Ohai Plugins">
            Ohai Plugins
            <i class="fa fa-chevron-down"></i>
          </div>
          <ul class="sub-items level-2"> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/ohai_custom.html" title="Custom Plugins">
                Custom Plugins
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem2 does not have sub items -->

            <li>
              <a class="nav-docs-link" href="/plugin_community.html#ohai" title="Community Plugins">
                Community Plugins
              </a>
            </li> <!-- /if subItem2.hasSubItems --> <!-- /for subItem2 in subItem.subItems -->

          </ul>
        
        </li> <!-- /if subItem2.hasSubItems --> <!-- if subItem does not have sub items  -->

        <li>
          <a class="nav-docs-link" href="/plugin_community.html#chef-client" title="Chef Client Plugins">
            Chef Client Plugins
          </a>
        </li>

         <!-- /if subItem2.hasSubItems --> <!-- /for subItem in subItems -->

      </ul>
    </li> <!-- /for item in navItems -->
    
    <li class="main-item dark-item">
      <a href="https://github.com/chef/chef-web-docs" title="Available on GitHub">
        <i class="fa fa-github icon-left"></i>
        Available on GitHub
      </a>
    </li>
    <li class="main-item dark-item">
      <a href="https://www.chef.io/chef/get-chef">
        <i class="fa fa-download icon-left"></i>
        Get Chef
      </a>
    </li>
    <li class="main-item dark-item">
      <a href="https://docs.chef.io/feedback.html">
        <i class="fa fa-commenting icon-left"></i>
        Send Feedback
      </a>
    </li>
    <li class="main-item dark-item">
      <a href="https://www.chef.io/support/">
        <i class="fa fa-support icon-left"></i>
        Support
      </a>
    </li>
    <li class="main-item dark-item">
      <a href="https://docs.chef.io/index.html">
        <i class="fa fa-map-o icon-left"></i>
        Site Map
      </a>
    </li>
    <li class="main-item dark-item">
      <a href="https://docs-archive.chef.io/">
        <i class="fa fa-archive icon-left"></i>
        Archive
      </a>
    </li>
  </ul>
</nav>
      <div class="documentwrapper"><div class="sphinxsidebar" role="navigation" aria-label="main navigation">
  <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Release Notes: chef-client 12.0 - 12.17</a><ul>
<li><a class="reference internal" href="#what-s-new-in-12-17">What&#8217;s New in 12.17</a><ul>
<li><a class="reference internal" href="#msu-package-resource">msu_package resource</a></li>
<li><a class="reference internal" href="#unmount-alias-for-umount-action"><tt class="docutils literal"><span class="pre">unmount</span></tt> alias for <tt class="docutils literal"><span class="pre">umount</span></tt> action</a></li>
<li><a class="reference internal" href="#multiple-client-node-deletion-in-knife">Multiple client/node deletion in knife</a></li>
<li><a class="reference internal" href="#ohai-enhancements">Ohai Enhancements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#what-s-new-in-12-16">What&#8217;s New in 12.16</a><ul>
<li><a class="reference internal" href="#attribute-changed-event-hook"><tt class="docutils literal"><span class="pre">attribute_changed</span></tt> event hook</a></li>
<li><a class="reference internal" href="#automatic-connection-to-chef-automate-s-data-collector-with-supported-chef-server">Automatic connection to Chef Automate&#8217;s data collector with supported Chef server</a></li>
<li><a class="reference internal" href="#rfc018-partially-implemented-specify-field-separator-for-attribute-filtering">RFC018 Partially Implemented: Specify <tt class="docutils literal"><span class="pre">--field-separator</span></tt> for attribute filtering</a></li>
<li><a class="reference internal" href="#package-locking-for-apt-yum-and-zypper">Package locking for Apt, Yum, and Zypper</a></li>
</ul>
</li>
<li><a class="reference internal" href="#what-s-new-in-12-15">What&#8217;s New in 12.15</a><ul>
<li><a class="reference internal" href="#cab-package">cab_package</a></li>
<li><a class="reference internal" href="#exit-code-213">exit code 213</a></li>
</ul>
</li>
<li><a class="reference internal" href="#what-s-new-in-12-14">What&#8217;s New in 12.14</a><ul>
<li><a class="reference internal" href="#yum-repository">yum_repository</a></li>
<li><a class="reference internal" href="#sensitive-true">sensitive: true</a></li>
</ul>
</li>
<li><a class="reference internal" href="#what-s-new-in-12-13">What&#8217;s New in 12.13</a><ul>
<li><a class="reference internal" href="#config-option">&#8211;config-option</a></li>
<li><a class="reference internal" href="#updated-dependencies">Updated Dependencies</a><ul>
<li><a class="reference internal" href="#updated-gems">Updated Gems</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#what-s-new-in-12-12">What&#8217;s New in 12.12</a><ul>
<li><a class="reference internal" href="#new-node-attribute-read-write-unlink-and-exist-apis">New node attribute read, write, unlink, and exist? APIs</a><ul>
<li><a class="reference internal" href="#read-read">read/read!</a></li>
<li><a class="reference internal" href="#write-write">write/write!</a></li>
<li><a class="reference internal" href="#unlink-unlink">unlink/unlink!</a></li>
<li><a class="reference internal" href="#exist">exist?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#depreciated-node-attribute-methods">Depreciated node attribute methods</a></li>
<li><a class="reference internal" href="#data-collector-updates">data_collector updates</a></li>
</ul>
</li>
<li><a class="reference internal" href="#what-s-new-in-12-11">What&#8217;s New in 12.11</a><ul>
<li><a class="reference internal" href="#exit-status">exit_status</a></li>
<li><a class="reference internal" href="#data-collector">Data collector</a></li>
<li><a class="reference internal" href="#replace-previous-chef-solo-behavior-with-chef-client-local-mode">Replace previous Chef-solo behavior with Chef client local mode</a></li>
<li><a class="reference internal" href="#systemd-unit">systemd_unit</a><ul>
<li><a class="reference internal" href="#syntax">Syntax</a></li>
<li><a class="reference internal" href="#actions">Actions</a></li>
<li><a class="reference internal" href="#properties">Properties</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#what-s-new-in-12-10">What&#8217;s New in 12.10</a><ul>
<li><a class="reference internal" href="#with-run-context">with_run_context</a></li>
<li><a class="reference internal" href="#declare-resource">declare_resource</a></li>
<li><a class="reference internal" href="#delete-resource">delete_resource</a></li>
<li><a class="reference internal" href="#id1">delete_resource!</a></li>
<li><a class="reference internal" href="#edit-resource">edit_resource</a></li>
<li><a class="reference internal" href="#id2">edit_resource!</a></li>
<li><a class="reference internal" href="#find-resource">find_resource</a></li>
<li><a class="reference internal" href="#id3">find_resource!</a></li>
</ul>
</li>
<li><a class="reference internal" href="#what-s-new-in-12-9">What&#8217;s New in 12.9</a><ul>
<li><a class="reference internal" href="#bit-chef-client">64-bit chef-client</a><ul>
<li><a class="reference internal" href="#file-redirection">File Redirection</a></li>
<li><a class="reference internal" href="#key-redirection">Key Redirection</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#what-s-new-in-12-8">What&#8217;s New in 12.8</a><ul>
<li><a class="reference internal" href="#fips-mode">FIPS Mode</a><ul>
<li><a class="reference internal" href="#enable-fips-mode">Enable FIPS Mode</a></li>
<li><a class="reference internal" href="#command-option">Command Option</a></li>
<li><a class="reference internal" href="#configuration-setting">Configuration Setting</a></li>
</ul>
</li>
<li><a class="reference internal" href="#d-directories">.d Directories</a></li>
<li><a class="reference internal" href="#launchd">launchd</a><ul>
<li><a class="reference internal" href="#id4">Syntax</a></li>
<li><a class="reference internal" href="#id5">Actions</a></li>
<li><a class="reference internal" href="#id6">Properties</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#gem-metadata-rb">gem, metadata.rb</a></li>
</ul>
</li>
<li><a class="reference internal" href="#what-s-new-in-12-7">What&#8217;s New in 12.7</a><ul>
<li><a class="reference internal" href="#chef-rest-require-chef-rest">Chef::REST =&gt; require &#8216;chef/rest&#8217;</a></li>
<li><a class="reference internal" href="#chocolatey-package">chocolatey_package</a><ul>
<li><a class="reference internal" href="#id7">Syntax</a></li>
<li><a class="reference internal" href="#id8">Actions</a></li>
<li><a class="reference internal" href="#id9">Properties</a></li>
<li><a class="reference internal" href="#id10">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#osx-profile">osx_profile</a><ul>
<li><a class="reference internal" href="#id11">Syntax</a></li>
<li><a class="reference internal" href="#id12">Actions</a></li>
<li><a class="reference internal" href="#id13">Properties</a></li>
<li><a class="reference internal" href="#id14">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#apt-update">apt_update</a><ul>
<li><a class="reference internal" href="#id15">Syntax</a></li>
<li><a class="reference internal" href="#id16">Actions</a></li>
<li><a class="reference internal" href="#id17">Properties</a></li>
<li><a class="reference internal" href="#id18">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#new-chef-client-options">New chef-client options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#what-s-new-in-12-6">What&#8217;s New in 12.6</a><ul>
<li><a class="reference internal" href="#notification-timers">Notification Timers</a></li>
<li><a class="reference internal" href="#ksh">ksh</a><ul>
<li><a class="reference internal" href="#id19">Syntax</a></li>
<li><a class="reference internal" href="#id20">Actions</a></li>
<li><a class="reference internal" href="#id21">Properties</a></li>
</ul>
</li>
<li><a class="reference internal" href="#changes-for-powershell-5-0-10586-0">Changes for PowerShell 5.0.10586.0</a></li>
<li><a class="reference internal" href="#new-metadata-rb-settings">New metadata.rb Settings</a></li>
<li><a class="reference internal" href="#knife-bootstrap-options">knife bootstrap Options</a></li>
<li><a class="reference internal" href="#profile-ruby-option">&#8211;profile-ruby Option</a></li>
</ul>
</li>
<li><a class="reference internal" href="#what-s-new-in-12-5">What&#8217;s New in 12.5</a><ul>
<li><a class="reference internal" href="#custom-resources">Custom Resources</a><ul>
<li><a class="reference internal" href="#id22">Syntax</a></li>
</ul>
</li>
<li><a class="reference internal" href="#custom-resource-dsl">Custom Resource DSL</a><ul>
<li><a class="reference internal" href="#action-class">action_class</a></li>
<li><a class="reference internal" href="#converge-if-changed">converge_if_changed</a><ul>
<li><a class="reference internal" href="#multiple-properties">Multiple Properties</a></li>
</ul>
</li>
<li><a class="reference internal" href="#default-action">default_action</a></li>
<li><a class="reference internal" href="#load-current-value">load_current_value</a></li>
<li><a class="reference internal" href="#new-resource-property">new_resource.property</a></li>
<li><a class="reference internal" href="#property">property</a><ul>
<li><a class="reference internal" href="#ruby-type">ruby_type</a></li>
<li><a class="reference internal" href="#validators">validators</a></li>
<li><a class="reference internal" href="#desired-state">desired_state</a></li>
<li><a class="reference internal" href="#identity">identity</a></li>
<li><a class="reference internal" href="#block-arguments">Block Arguments</a></li>
</ul>
</li>
<li><a class="reference internal" href="#property-is-set">property_is_set?</a></li>
<li><a class="reference internal" href="#provides">provides</a><ul>
<li><a class="reference internal" href="#override">override</a></li>
</ul>
</li>
<li><a class="reference internal" href="#reset-property">reset_property</a></li>
</ul>
</li>
<li><a class="reference internal" href="#definition-vs-resource">Definition vs. Resource</a><ul>
<li><a class="reference internal" href="#as-a-definition">As a Definition</a></li>
<li><a class="reference internal" href="#as-a-resource">As a Resource</a></li>
<li><a class="reference internal" href="#common-properties">Common Properties</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ps-credential-helper">ps_credential Helper</a></li>
<li><a class="reference internal" href="#handler-dsl">Handler DSL</a><ul>
<li><a class="reference internal" href="#on-method">on Method</a></li>
<li><a class="reference internal" href="#example-send-email">Example: Send Email</a></li>
</ul>
</li>
<li><a class="reference internal" href="#new-resource-properties">New Resource Properties</a></li>
<li><a class="reference internal" href="#specify-policy-revision">Specify Policy Revision</a></li>
<li><a class="reference internal" href="#new-configuration-settings">New Configuration Settings</a></li>
<li><a class="reference internal" href="#chef-client-options">chef-client Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#what-s-new-in-12-4">What&#8217;s New in 12.4</a><ul>
<li><a class="reference internal" href="#unc-paths-remote-file">UNC paths, <strong>remote_file</strong></a></li>
<li><a class="reference internal" href="#import-module-chef">Import-Module chef</a></li>
<li><a class="reference internal" href="#client-rb-settings">client.rb Settings</a></li>
<li><a class="reference internal" href="#windows-package-updates"><strong>windows_package</strong> Updates</a></li>
<li><a class="reference internal" href="#knife-client-key">knife client key</a><ul>
<li><a class="reference internal" href="#key-create">key create</a><ul>
<li><a class="reference internal" href="#id23">Syntax</a></li>
<li><a class="reference internal" href="#options">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#key-delete">key delete</a><ul>
<li><a class="reference internal" href="#id24">Syntax</a></li>
</ul>
</li>
<li><a class="reference internal" href="#key-edit">key edit</a><ul>
<li><a class="reference internal" href="#id25">Syntax</a></li>
<li><a class="reference internal" href="#id26">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#key-list">key list</a><ul>
<li><a class="reference internal" href="#id27">Syntax</a></li>
<li><a class="reference internal" href="#id28">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#key-show">key show</a><ul>
<li><a class="reference internal" href="#id29">Syntax</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#knife-user-key">knife user key</a><ul>
<li><a class="reference internal" href="#id30">key create</a><ul>
<li><a class="reference internal" href="#id31">Syntax</a></li>
<li><a class="reference internal" href="#id32">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id33">key delete</a><ul>
<li><a class="reference internal" href="#id34">Syntax</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id35">key edit</a><ul>
<li><a class="reference internal" href="#id36">Syntax</a></li>
<li><a class="reference internal" href="#id37">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id38">key list</a><ul>
<li><a class="reference internal" href="#id39">Syntax</a></li>
<li><a class="reference internal" href="#id40">Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id41">key show</a><ul>
<li><a class="reference internal" href="#id42">Syntax</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#updated-knife-options">Updated knife Options</a><ul>
<li><a class="reference internal" href="#knife-client-create">knife client create</a></li>
<li><a class="reference internal" href="#knife-user-create">knife user create</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#what-s-new-in-12-3">What&#8217;s New in 12.3</a><ul>
<li><a class="reference internal" href="#socketless-local-mode">Socketless Local Mode</a></li>
<li><a class="reference internal" href="#minimal-ohai">Minimal Ohai</a></li>
<li><a class="reference internal" href="#dynamic-resolution">Dynamic Resolution</a></li>
</ul>
</li>
<li><a class="reference internal" href="#what-s-new-in-12-2">What&#8217;s New in 12.2</a><ul>
<li><a class="reference internal" href="#dsc-resource">dsc_resource</a><ul>
<li><a class="reference internal" href="#id43">Syntax</a></li>
<li><a class="reference internal" href="#attributes">Attributes</a></li>
<li><a class="reference internal" href="#id44">Examples</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#what-s-new-in-12-1">What&#8217;s New in 12.1</a><ul>
<li><a class="reference internal" href="#chef-client-audit-mode">chef-client, audit-mode</a><ul>
<li><a class="reference internal" href="#the-audit-run">The Audit Run</a></li>
</ul>
</li>
<li><a class="reference internal" href="#control">control</a><ul>
<li><a class="reference internal" href="#directory-matcher">directory Matcher</a></li>
<li><a class="reference internal" href="#file-matcher">file Matcher</a></li>
<li><a class="reference internal" href="#package-matcher">package Matcher</a></li>
<li><a class="reference internal" href="#port-matcher">port Matcher</a></li>
<li><a class="reference internal" href="#service-matcher">service Matcher</a></li>
<li><a class="reference internal" href="#id45">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#control-group">control_group</a><ul>
<li><a class="reference internal" href="#id46">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#validatorless-bootstrap">Validatorless Bootstrap</a><ul>
<li><a class="reference internal" href="#id47">knife bootstrap Options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#new-resource-attributes">New Resource Attributes</a><ul>
<li><a class="reference internal" href="#verify">verify</a></li>
<li><a class="reference internal" href="#imports">imports</a></li>
<li><a class="reference internal" href="#compile-time">compile_time</a></li>
<li><a class="reference internal" href="#run-as">run_as</a></li>
</ul>
</li>
<li><a class="reference internal" href="#paludis-package">paludis_package</a><ul>
<li><a class="reference internal" href="#id48">Syntax</a></li>
<li><a class="reference internal" href="#id49">Actions</a></li>
<li><a class="reference internal" href="#id50">Attributes</a></li>
<li><a class="reference internal" href="#id51">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#openbsd-package">openbsd_package</a><ul>
<li><a class="reference internal" href="#id52">Syntax</a></li>
<li><a class="reference internal" href="#id53">Actions</a></li>
<li><a class="reference internal" href="#id54">Attributes</a></li>
<li><a class="reference internal" href="#id55">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#new-client-rb-settings">New client.rb Settings</a></li>
<li><a class="reference internal" href="#multiple-packages-and-versions">Multiple Packages and Versions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#what-s-new-in-12-0">What&#8217;s New in 12.0</a><ul>
<li><a class="reference internal" href="#change-attributes">Change Attributes</a><ul>
<li><a class="reference internal" href="#remove-precedence-level">Remove Precedence Level</a><ul>
<li><a class="reference internal" href="#id56">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#remove-all-levels">Remove All Levels</a><ul>
<li><a class="reference internal" href="#id57">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#full-assignment">Full Assignment</a><ul>
<li><a class="reference internal" href="#id58">Examples</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#provides-method">provides Method</a></li>
<li><a class="reference internal" href="#aix-platform-support">AIX Platform Support</a></li>
<li><a class="reference internal" href="#recipe-dsl-encrypted-data-bags">Recipe DSL, Encrypted Data Bags</a></li>
<li><a class="reference internal" href="#bff-package">bff_package</a><ul>
<li><a class="reference internal" href="#id59">Syntax</a></li>
<li><a class="reference internal" href="#id60">Actions</a></li>
<li><a class="reference internal" href="#id61">Properties</a></li>
<li><a class="reference internal" href="#providers">Providers</a></li>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#homebrew-package">homebrew_package</a><ul>
<li><a class="reference internal" href="#id62">Syntax</a></li>
<li><a class="reference internal" href="#id63">Actions</a></li>
<li><a class="reference internal" href="#id64">Properties</a></li>
<li><a class="reference internal" href="#id65">Providers</a></li>
<li><a class="reference internal" href="#id66">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#reboot">reboot</a><ul>
<li><a class="reference internal" href="#id67">Syntax</a></li>
<li><a class="reference internal" href="#id68">Actions</a></li>
<li><a class="reference internal" href="#id69">Properties</a></li>
<li><a class="reference internal" href="#id70">Providers</a></li>
<li><a class="reference internal" href="#id71">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#windows-service">windows_service</a><ul>
<li><a class="reference internal" href="#id72">Syntax</a></li>
<li><a class="reference internal" href="#id73">Actions</a></li>
<li><a class="reference internal" href="#id74">Properties</a></li>
<li><a class="reference internal" href="#id75">Providers</a></li>
<li><a class="reference internal" href="#id76">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#knife-bootstrap-settings">knife bootstrap Settings</a></li>
<li><a class="reference internal" href="#knife-status-settings">knife status Settings</a></li>
<li><a class="reference internal" href="#fsck-device-property">fsck_device Property</a></li>
<li><a class="reference internal" href="#metadata-rb-settings">metadata.rb Settings</a></li>
<li><a class="reference internal" href="#http-request-actions">http_request Actions</a></li>
<li><a class="reference internal" href="#recipe-dsl">Recipe DSL</a><ul>
<li><a class="reference internal" href="#shell-out">shell_out</a></li>
<li><a class="reference internal" href="#id77">shell_out!</a></li>
<li><a class="reference internal" href="#shell-out-with-systems-locale">shell_out_with_systems_locale</a></li>
<li><a class="reference internal" href="#value-for-platform">value_for_platform</a></li>
</ul>
</li>
<li><a class="reference internal" href="#file-specificity">File Specificity</a></li>
<li><a class="reference internal" href="#mac-os-x-passwords">Mac OS X, Passwords</a></li>
<li><a class="reference internal" href="#id78">chef-client Options</a></li>
<li><a class="reference internal" href="#filter-search-results">Filter Search Results</a><ul>
<li><a class="reference internal" href="#knife-search">knife search</a></li>
</ul>
</li>
<li><a class="reference internal" href="#execute-resource-path-property"><strong>execute</strong> Resource, <tt class="docutils literal"><span class="pre">path</span></tt> Property</a></li>
<li><a class="reference internal" href="#git-property"><strong>git</strong> Property</a></li>
<li><a class="reference internal" href="#chef-provider-custom-resources">Chef::Provider, Custom Resources</a></li>
<li><a class="reference internal" href="#ssl-certificates">SSL Certificates</a></li>
</ul>
</li>
<li><a class="reference internal" href="#changelog">Changelog</a></li>
</ul>
</li>
</ul>

  </div>
</div>
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="release-notes-chef-client-12-0-12-17">
<h1>Release Notes: chef-client 12.0 - 12.17<a class="headerlink" href="#release-notes-chef-client-12-0-12-17" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://github.com/chef/chef-web-docs/blob/master/chef_master/source/release_notes.rst">[edit on GitHub]</a></p>
<p>Chef client is released on a monthly schedule with new releases the first Wednesday of every month. Below are the major changes for each release. For a detailed list of changes see the <a class="reference external" href="https://github.com/chef/chef/blob/master/CHANGELOG.md">Chef CHANGELOG.md</a></p>
<div class="section" id="what-s-new-in-12-17">
<h2>What&#8217;s New in 12.17<a class="headerlink" href="#what-s-new-in-12-17" title="Permalink to this headline">¶</a></h2>
<p>The following items are new for chef-client 12.17 and/or are changes from previous versions. The short version:</p>
<ul class="simple">
<li><strong>Added msu_package resource and provider</strong></li>
<li><strong>Added alias unmount to umount action for mount resource</strong></li>
<li><strong>Can now delete multiple nodes/clients in knife</strong></li>
<li><strong>Haskell language plugin added to Ohai</strong></li>
</ul>
<div class="section" id="msu-package-resource">
<h3>msu_package resource<a class="headerlink" href="#msu-package-resource" title="Permalink to this headline">¶</a></h3>
<p>The <strong>msu_package</strong> resource installs or removes Microsoft Update(MSU) packages on Microsoft Windows machines. Here are some examples:</p>
<p><strong>Using local path in source</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">msu_package</span> <span class="s1">&#39;Install Windows 2012R2 Update KB2959977&#39;</span> <span class="k">do</span>
  <span class="n">source</span> <span class="s1">&#39;C:\Users\xyz\AppData\Local\Temp\Windows8.1-KB2959977-x64.msu&#39;</span>
  <span class="n">action</span> <span class="ss">:install</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">msu_package</span> <span class="s1">&#39;Remove Windows 2012R2 Update KB2959977&#39;</span> <span class="k">do</span>
  <span class="n">source</span> <span class="s1">&#39;C:\Users\xyz\AppData\Local\Temp\Windows8.1-KB2959977-x64.msu&#39;</span>
  <span class="n">action</span> <span class="ss">:remove</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Using URL in source</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">msu_package</span> <span class="s1">&#39;Install Windows 2012R2 Update KB2959977&#39;</span> <span class="k">do</span>
  <span class="n">source</span> <span class="s1">&#39;https://s3.amazonaws.com/my_bucket/Windows8.1-KB2959977-x64.msu&#39;</span>
  <span class="n">action</span> <span class="ss">:install</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">msu_package</span> <span class="s1">&#39;Remove Windows 2012R2 Update KB2959977&#39;</span> <span class="k">do</span>
  <span class="n">source</span> <span class="s1">&#39;https://s3.amazonaws.com/my_bucket/Windows8.1-KB2959977-x64.msu&#39;</span>
  <span class="n">action</span> <span class="ss">:remove</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="section" id="unmount-alias-for-umount-action">
<h3><tt class="docutils literal"><span class="pre">unmount</span></tt> alias for <tt class="docutils literal"><span class="pre">umount</span></tt> action<a class="headerlink" href="#unmount-alias-for-umount-action" title="Permalink to this headline">¶</a></h3>
<p>Now you can use <tt class="docutils literal"><span class="pre">action</span> <span class="pre">:unmount</span></tt> to unmout a mount point through the mount resource. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">mount</span> <span class="s1">&#39;/mount/tmp&#39;</span> <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:unmount</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="section" id="multiple-client-node-deletion-in-knife">
<h3>Multiple client/node deletion in knife<a class="headerlink" href="#multiple-client-node-deletion-in-knife" title="Permalink to this headline">¶</a></h3>
<p>You can now pass multiple nodes/clients to <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">node</span> <span class="pre">delete</span></tt> or <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">client</span> <span class="pre">delete</span></tt> subcommands.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife client delete client1,client2,client3
</pre></div>
</div>
</div>
<div class="section" id="ohai-enhancements">
<h3>Ohai Enhancements<a class="headerlink" href="#ohai-enhancements" title="Permalink to this headline">¶</a></h3>
<p><strong>Haskell Language plugin</strong></p>
<p>Haskell is now detected in a new haskell language plugin:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="s2">&quot;languages&quot;</span><span class="o">:</span> <span class="p">{</span>
  <span class="s2">&quot;haskell&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;stack&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;1.2.0&quot;</span><span class="p">,</span>
      <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;Version 1.2.0 x86_64 hpack-0.14.0&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>LSB Release Detection</strong></p>
<p>The lsb_release command line tool is now preferred to the contents of <tt class="docutils literal"><span class="pre">/etc/lsb-release</span></tt> for release detection. This resolves an issue where a distro can be upgraded, but <tt class="docutils literal"><span class="pre">/etc/lsb-release</span></tt> is not upgraded to reflect the change.</p>
</div>
</div>
<div class="section" id="what-s-new-in-12-16">
<h2>What&#8217;s New in 12.16<a class="headerlink" href="#what-s-new-in-12-16" title="Permalink to this headline">¶</a></h2>
<p>The following items are new for chef-client 12.16 and/or are changes from previous versions. The short version:</p>
<ul class="simple">
<li><strong>Added new attribute_changed event hook</strong></li>
<li><strong>Automatic connection to Chef Automate&#8217;s data collector through Chef server</strong></li>
<li><strong>Added new &#8211;field-separator flag to knife show commands</strong></li>
</ul>
<div class="section" id="attribute-changed-event-hook">
<h3><tt class="docutils literal"><span class="pre">attribute_changed</span></tt> event hook<a class="headerlink" href="#attribute-changed-event-hook" title="Permalink to this headline">¶</a></h3>
<p>In a cookbook library file, you can add this in order to print out all attribute changes in cookbooks:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="no">Chef</span><span class="o">.</span><span class="n">event_handler</span> <span class="k">do</span>
  <span class="n">on</span> <span class="ss">:attribute_changed</span> <span class="k">do</span> <span class="o">|</span><span class="n">precedence</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">|</span>
    <span class="nb">puts</span> <span class="s2">&quot;setting attribute </span><span class="si">#{</span><span class="n">precedence</span><span class="si">}#{</span><span class="n">key</span><span class="o">.</span><span class="n">map</span> <span class="si">{</span><span class="o">|</span><span class="n">n</span><span class="o">|</span> <span class="s2">&quot;[</span><span class="se">\&quot;</span><span class="si">#{</span><span class="n">n</span><span class="si">}</span><span class="se">\&quot;</span><span class="s2">]&quot;</span> <span class="si">}</span><span class="o">.</span><span class="n">join</span><span class="si">}</span><span class="s2"> = </span><span class="si">#{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>If you want to setup a policy that override attributes should never be used:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="no">Chef</span><span class="o">.</span><span class="n">event_handler</span> <span class="k">do</span>
  <span class="n">on</span> <span class="ss">:attribute_changed</span> <span class="k">do</span> <span class="o">|</span><span class="n">precedence</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">|</span>
    <span class="k">raise</span> <span class="s2">&quot;override policy violation&quot;</span> <span class="k">if</span> <span class="n">precedence</span> <span class="o">==</span> <span class="ss">:override</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="section" id="automatic-connection-to-chef-automate-s-data-collector-with-supported-chef-server">
<h3>Automatic connection to Chef Automate&#8217;s data collector with supported Chef server<a class="headerlink" href="#automatic-connection-to-chef-automate-s-data-collector-with-supported-chef-server" title="Permalink to this headline">¶</a></h3>
<p>Chef client will automatically attempt to connect to the Chef server authenticated data collector proxy. If you have a supported version of Chef
server with this feature enabled, Chef client run data will automatically be forwarded to Chef Automate without additional Chef
client configuration. If you do not have Chef Automate, or the feature is disabled on the Chef server, Chef client will detect this and disable data collection.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Chef Server 12.11.0 or newer is required for this feature.</p>
</div>
</div>
<div class="section" id="rfc018-partially-implemented-specify-field-separator-for-attribute-filtering">
<h3>RFC018 Partially Implemented: Specify <tt class="docutils literal"><span class="pre">--field-separator</span></tt> for attribute filtering<a class="headerlink" href="#rfc018-partially-implemented-specify-field-separator-for-attribute-filtering" title="Permalink to this headline">¶</a></h3>
<p>If you have periods (<tt class="docutils literal"><span class="pre">.</span></tt>) in your Chef Node attribute keys, you can now pass the <tt class="docutils literal"><span class="pre">--field-separator</span></tt> (or <tt class="docutils literal"><span class="pre">-S</span></tt>) flag along with your <tt class="docutils literal"><span class="pre">--attribute</span></tt> (or <tt class="docutils literal"><span class="pre">-a</span></tt>)
flag to specify a custom nesting character other than <tt class="docutils literal"><span class="pre">.</span></tt>.</p>
<p>In a situation where the <em>webapp</em> node has the following node data:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;foo.bar&quot;</span><span class="o">:</span> <span class="s2">&quot;baz&quot;</span><span class="p">,</span>
  <span class="s2">&quot;alpha&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;beta&quot;</span><span class="o">:</span> <span class="s2">&quot;omega&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Running <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">node</span> <span class="pre">show</span></tt> with the default field separator (<tt class="docutils literal"><span class="pre">.</span></tt>) won&#8217;t show us the data we&#8217;re expecting for the <tt class="docutils literal"><span class="pre">foo.bar</span></tt> attribute because of the period:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife node show webapp -a foo.bar
webapp:
  foo.bar:

$ knife node show webapp -a alpha.beta
webapp:
  alpha.beta: omega
</pre></div>
</div>
<p>However, by specifying a field separator other than <tt class="docutils literal"><span class="pre">.</span></tt> we are now able to show the data.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife node show webapp -S: -a foo.bar
webapp:
  foo.bar: baz

$ knife node show webapp -S: -a alpha:beta
webapp:
  alpha:beta: omega
</pre></div>
</div>
</div>
<div class="section" id="package-locking-for-apt-yum-and-zypper">
<h3>Package locking for Apt, Yum, and Zypper<a class="headerlink" href="#package-locking-for-apt-yum-and-zypper" title="Permalink to this headline">¶</a></h3>
<p>To allow for more fine grain control of package installation the <tt class="docutils literal"><span class="pre">apt_package</span></tt>, <tt class="docutils literal"><span class="pre">yum_package</span></tt>, and <tt class="docutils literal"><span class="pre">zypper_package</span></tt> resources now support the <tt class="docutils literal"><span class="pre">:lock</span></tt> and <tt class="docutils literal"><span class="pre">:unlock</span></tt> actions.</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="s2">&quot;httpd&quot;</span> <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:lock</span>
<span class="k">end</span>

<span class="n">package</span> <span class="s2">&quot;httpd&quot;</span> <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:unlock</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="what-s-new-in-12-15">
<h2>What&#8217;s New in 12.15<a class="headerlink" href="#what-s-new-in-12-15" title="Permalink to this headline">¶</a></h2>
<p>The following items are new for chef-client 12.15 and/or are changes from previous versions. The short version:</p>
<ul class="simple">
<li><strong>Omnibus packages are now available for Ubuntu 16.04</strong></li>
<li><strong>New cab_package resource</strong> Supports the installation of cabinet packages on Microsoft Windows.</li>
<li><strong>Added new Chef client exit code (213)</strong> New exit code when Chef client exits during upgrade.</li>
<li><strong>Default for gpgcheck on yum_repository resource is set to true</strong></li>
<li><strong>Allow deletion of registry_key without the need for users to pass data key in values hash</strong></li>
<li><strong>If provided, knife ssh will pass the -P option on the command line as the sudo password and will bypass prompting</strong></li>
</ul>
<div class="section" id="cab-package">
<h3>cab_package<a class="headerlink" href="#cab-package" title="Permalink to this headline">¶</a></h3>
<p>Supports the installation of cabinet packages on Microsoft Windows. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">cab_package</span> <span class="s1">&#39;Install .NET 3.5 sp1 via KB958488&#39;</span> <span class="k">do</span>
  <span class="n">source</span> <span class="s1">&#39;C:\Users\xyz\AppData\Local\Temp\Windows6.1-KB958488-x64.cab&#39;</span>
  <span class="n">action</span> <span class="ss">:install</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">cab_package</span> <span class="s1">&#39;Remove .NET 3.5 sp1 via KB958488&#39;</span> <span class="k">do</span>
  <span class="n">source</span> <span class="s1">&#39;C:\Users\xyz\AppData\Local\Temp\Windows6.1-KB958488-x64.cab&#39;</span>
  <span class="n">action</span> <span class="ss">:remove</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">cab_package</span></tt> resource does not support URL strings in the source property.</p>
</div>
</div>
<div class="section" id="exit-code-213">
<h3>exit code 213<a class="headerlink" href="#exit-code-213" title="Permalink to this headline">¶</a></h3>
<p>This new exit code signals Chef has exited during a client upgrade. This allows for easier testing of chef client upgrades in Test Kitchen.
See <a class="reference external" href="https://github.com/chef-cookbooks/omnibus_updater#chef-killing">Chef Killing</a> in the omnibus_updater cookbook for more information.</p>
</div>
</div>
<div class="section" id="what-s-new-in-12-14">
<h2>What&#8217;s New in 12.14<a class="headerlink" href="#what-s-new-in-12-14" title="Permalink to this headline">¶</a></h2>
<p>The following items are new for chef-client 12.14 and/or are changes from previous versions. The short version:</p>
<ul class="simple">
<li><strong>Upgraded Ruby version from 2.1.9 to 2.3.1</strong> Adds several performance and functionality enhancements.</li>
<li><strong>Now support for Chef client runs on Windows Nano Server</strong> A small patch to Ruby 2.3.1 and improvements to the Ohai network plugin now allow you to do chef client runs on Windows Nano Server.</li>
<li><strong>New yum_repository resource</strong> Use the <strong>yum_repository</strong> resource to manage a yum repository configuration file.</li>
<li><strong>Added the ability to mark a property of a custom resource as sensitive</strong> This will suppress the property&#8217;s value when it&#8217;s used in other outputs, such as messages used by the data collector.</li>
</ul>
<div class="section" id="yum-repository">
<h3>yum_repository<a class="headerlink" href="#yum-repository" title="Permalink to this headline">¶</a></h3>
<p>Use the <strong>yum_repository</strong> resource to manage a Yum repository configuration file located at <tt class="docutils literal"><span class="pre">/etc/yum.repos.d/repositoryid.repo</span></tt> on the local machine. This configuration file specifies which repositories to reference, how to handle cached data, etc.</p>
<p>For syntax, a list of properties and actions, see <a class="reference internal" href="resource_yum_repository.html"><em>yum_repository</em></a>.</p>
</div>
<div class="section" id="sensitive-true">
<h3>sensitive: true<a class="headerlink" href="#sensitive-true" title="Permalink to this headline">¶</a></h3>
<p>Some properties in custom resources may include sensitive data, such as a password for a database server. When the resource&#8217;s state is built for use by data collector or a similar auditing tool,
a hash is built of all state properties for that resource and their values. This leads to sensitive data being transmitted and potentially stored in the clear.</p>
<p>Individual properties can now be marked as sensitive and then have the value of that property suppressed when exporting the resource&#8217;s state. To do this, add <tt class="docutils literal"><span class="pre">sensitive:</span> <span class="pre">true</span></tt> when definine the property, such as in the following example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">property</span> <span class="ss">:db_password</span><span class="p">,</span> <span class="nb">String</span><span class="p">,</span> <span class="ss">sensitive</span><span class="p">:</span> <span class="kp">true</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="what-s-new-in-12-13">
<h2>What&#8217;s New in 12.13<a class="headerlink" href="#what-s-new-in-12-13" title="Permalink to this headline">¶</a></h2>
<p>The following items are new for chef-client 12.13 and/or are changes from previous versions. The short version:</p>
<ul class="simple">
<li><strong>Ohai 8.18 includes new plugin for gathering available user shells</strong> Other additions include a new hardware plugin for OSX that gathers system information and detection of VMWare and VirtualBox installations.</li>
<li><strong>New Chef client option to override any config key/value pair</strong> Use <tt class="docutils literal"><span class="pre">chef-client</span> <span class="pre">--config-option</span></tt> to override any config setting from the command line.</li>
</ul>
<div class="section" id="config-option">
<h3>&#8211;config-option<a class="headerlink" href="#config-option" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">--config-option</span></tt> option to override a single configuration option when calling a command on <tt class="docutils literal"><span class="pre">chef-client</span></tt>. To override multiple configuration options, simply add additional <tt class="docutils literal"><span class="pre">--config-option</span></tt> options like in the following example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-client --config-option <span class="nv">chef_server_url</span><span class="o">=</span>http://example --config-option <span class="nv">policy_name</span><span class="o">=</span>web<span class="s2">&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="updated-dependencies">
<h3>Updated Dependencies<a class="headerlink" href="#updated-dependencies" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>ruby - 2.1.9 (from 2.1.8)</li>
</ul>
<div class="section" id="updated-gems">
<h4>Updated Gems<a class="headerlink" href="#updated-gems" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>chef-zero - 4.8.0 (from 4.7.0)</li>
<li>cheffish - 2.0.5 (from 2.0.4)</li>
<li>compat_resource - 12.10.7 (from 12.10.6)</li>
<li>ffi - 1.9.14 (from 1.9.10)</li>
<li>ffi-yajl - 2.3.0 (from 2.2.3)</li>
<li>fuzzyurl - 0.9.0 (from 0.8.0)</li>
<li>mixlib-cli - 1.7.0 (from 1.6.0)</li>
<li>mixlib-log - 1.7.0 (from 1.6.0)</li>
<li>ohai - 8.18.0 (from 8.17.1)</li>
<li>pry - 0.10.4 (from 0.10.3)</li>
<li>rspec - 3.5.0 (from 3.4.0)</li>
<li>rspec-core - 3.5.2 (from 3.4.4)</li>
<li>rspec-expectations - 3.5.0 (from 3.4.0)</li>
<li>rspec-mocks - 3.5.0 (from 3.4.1)</li>
<li>rspec-support - 3.5.0 (from 3.4.1)</li>
<li>simplecov - 0.12.0 (from 0.11.2)</li>
<li>specinfra - 2.60.3 (from 2.59.4)</li>
<li>mixlib-archive - 0.2.0 (added to package)</li>
</ul>
</div>
</div>
</div>
<div class="section" id="what-s-new-in-12-12">
<h2>What&#8217;s New in 12.12<a class="headerlink" href="#what-s-new-in-12-12" title="Permalink to this headline">¶</a></h2>
<p>The following items are new for chef-client 12.12 and/or are changes from previous versions. The short version:</p>
<ul class="simple">
<li><strong>New node attribute APIs</strong> Common set of methods to read, write, delete, and check if node attributes exist.</li>
<li><strong>Data collector updates</strong> Minor enhancements to data that the data collector reports on.</li>
<li><strong>knife cookbook create has been deprecated</strong> You should use <a class="reference external" href="https://docs.chef.io/ctl_chef.html#chef-generate-cookbook">chef generate cookbook</a> instead.</li>
</ul>
<div class="section" id="new-node-attribute-read-write-unlink-and-exist-apis">
<h3>New node attribute read, write, unlink, and exist? APIs<a class="headerlink" href="#new-node-attribute-read-write-unlink-and-exist-apis" title="Permalink to this headline">¶</a></h3>
<p>The four methods <tt class="docutils literal"><span class="pre">read</span></tt>, <tt class="docutils literal"><span class="pre">write</span></tt>, <tt class="docutils literal"><span class="pre">unlink</span></tt>, and <tt class="docutils literal"><span class="pre">exist?</span></tt> (and their corresponding unsafe versions) can be used on node objects to set, retrieve, delete, and validate existance of attributes.</p>
<div class="section" id="read-read">
<h4>read/read!<a class="headerlink" href="#read-read" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">read</span></tt> method to retrieve an attribute value on a node object. It is a safe, non-autovivifying reader that returns <tt class="docutils literal"><span class="pre">nil</span></tt> if the attribute does not exist.</p>
<p><tt class="docutils literal"><span class="pre">node.read(&quot;foo&quot;,</span> <span class="pre">&quot;bar&quot;,</span> <span class="pre">&quot;baz&quot;)</span></tt> is equivalent to <tt class="docutils literal"><span class="pre">node[&quot;foo&quot;][&quot;bar&quot;][&quot;baz&quot;]</span></tt> but returns <tt class="docutils literal"><span class="pre">nil</span></tt> instead of raising an exception when no value is set.</p>
<p>The <tt class="docutils literal"><span class="pre">read!</span></tt> method is a non-autovivifying reader that also retrieves an attribute value on a node object; however, it will throw a NoMethodError exception if the attribute does not exist.</p>
<p>On the node level, <tt class="docutils literal"><span class="pre">node.default.read/read!(&quot;foo&quot;)</span></tt> behaves similarly to <tt class="docutils literal"><span class="pre">node.read(&quot;foo&quot;)</span></tt>, but only on the default level.</p>
</div>
<div class="section" id="write-write">
<h4>write/write!<a class="headerlink" href="#write-write" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">write</span></tt> method set an attribute value on a node object. It is a safe, autovivifying writer that replaces intermediate non-hash objects.</p>
<p><tt class="docutils literal"><span class="pre">node.write(:default,</span> <span class="pre">&quot;foo&quot;,</span> <span class="pre">&quot;bar&quot;,</span> <span class="pre">&quot;baz&quot;)</span></tt> is equivalent to <tt class="docutils literal"><span class="pre">node.default[&quot;foo&quot;][&quot;bar&quot;]</span> <span class="pre">=</span> <span class="pre">&quot;baz&quot;</span></tt>.</p>
<p>The <tt class="docutils literal"><span class="pre">write!</span></tt> method is also an autovivifying method to set an attribute value on a node object; however, it will throw an NoSuchAttribute exception if there is a non-hash on an intermediate key.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There is currently no non-autovivifying writer method for attributes.</p>
</div>
<p>On the node level, <tt class="docutils literal"><span class="pre">node.default.write/write!(&quot;foo&quot;,</span> <span class="pre">&quot;bar&quot;)</span></tt> is equivalent to <tt class="docutils literal"><span class="pre">node.write/write!(:default,</span> <span class="pre">&quot;foo&quot;,</span> <span class="pre">&quot;bar&quot;)</span></tt>.</p>
</div>
<div class="section" id="unlink-unlink">
<h4>unlink/unlink!<a class="headerlink" href="#unlink-unlink" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">unlink</span></tt> method to delete an attribute on a node object. <tt class="docutils literal"><span class="pre">nil</span></tt> will be returned if the value is not a valid Hash or Array.</p>
<p>The <tt class="docutils literal"><span class="pre">unlink!</span></tt> method also deletes an attribute on a node object; however, it will throw a NoSuchAttribute exception if the attribute does not exist.</p>
<p>On the node level, <tt class="docutils literal"><span class="pre">node.default.unlink/unlink!(&quot;foo&quot;)</span></tt> is equivalent to <tt class="docutils literal"><span class="pre">node.unlink/unlink!(:default,</span> <span class="pre">&quot;foo&quot;)</span></tt>.</p>
</div>
<div class="section" id="exist">
<h4>exist?<a class="headerlink" href="#exist" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">exist?</span></tt> method to check whether the attribute exists. For example, <tt class="docutils literal"><span class="pre">node.exist?(&quot;foo&quot;,</span> <span class="pre">&quot;bar&quot;)</span></tt> can be used to see if <tt class="docutils literal"><span class="pre">node[&quot;foo&quot;][&quot;bar&quot;]</span></tt> exists.</p>
<p>On the node level, <tt class="docutils literal"><span class="pre">node.default.exist?(&quot;foo&quot;,</span> <span class="pre">&quot;bar&quot;)</span></tt> can be used to see if <tt class="docutils literal"><span class="pre">node.default[&quot;foo&quot;][&quot;bar&quot;]</span></tt> exists.</p>
</div>
</div>
<div class="section" id="depreciated-node-attribute-methods">
<h3>Depreciated node attribute methods<a class="headerlink" href="#depreciated-node-attribute-methods" title="Permalink to this headline">¶</a></h3>
<p>The following methods have been deprecated in this release:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">node.set</span></tt></li>
<li><tt class="docutils literal"><span class="pre">node.set_unless</span></tt></li>
</ul>
</div>
<div class="section" id="data-collector-updates">
<h3>data_collector updates<a class="headerlink" href="#data-collector-updates" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Adds <tt class="docutils literal"><span class="pre">node</span></tt> to the data_collector message.</li>
<li><tt class="docutils literal"><span class="pre">data_collector</span></tt> reports on all resources and not just those that have been processed.</li>
</ul>
</div>
</div>
<div class="section" id="what-s-new-in-12-11">
<h2>What&#8217;s New in 12.11<a class="headerlink" href="#what-s-new-in-12-11" title="Permalink to this headline">¶</a></h2>
<p>The following items are new for chef-client 12.11 and/or are changes from previous versions. The short version:</p>
<ul class="simple">
<li><strong>Support for standard exit codes in Chef client</strong> Standard exit codes are now used by Chef client and should be identical across all OS platforms. New configuration setting <tt class="docutils literal"><span class="pre">exit_status</span></tt> has been added to specify how Chef client reports non-standard exit codes.</li>
<li><strong>New data collector functionality for run statistics</strong> New feature that provides a unified method for sharing statistics about your Chef runs in webhook-like manner.</li>
<li><strong>Default chef-solo behavior is equivalent to chef-client local mode</strong> chef-solo now uses chef-client local mode. To use the previous <tt class="docutils literal"><span class="pre">chef-solo</span></tt> behavior, run in <tt class="docutils literal"><span class="pre">chef-solo</span> <span class="pre">--legacy-mode</span></tt>.</li>
<li><strong>New systemd_unit resource</strong> Use the <strong>systemd_unit</strong> to manage systemd units.</li>
</ul>
<div class="section" id="exit-status">
<h3>exit_status<a class="headerlink" href="#exit-status" title="Permalink to this headline">¶</a></h3>
<p>When set to <tt class="docutils literal"><span class="pre">:enabled</span></tt>, chef-client will use <a href="https://github.com/chef/chef-rfc/blob/master/rfc062-exit-status.#exit-codes-in-use" target="_blank">stardardized exit codes</a> for Chef client run status, and any non-standard exit codes will be converted to <tt class="docutils literal"><span class="pre">1</span></tt> or <tt class="docutils literal"><span class="pre">GENERIC_FAILURE</span></tt>. This setting can also be set to <tt class="docutils literal"><span class="pre">:disabled</span></tt> which preserves the old behavior of using non-standardized exit codes and skips the deprecation warnings. Default value: <tt class="docutils literal"><span class="pre">nil</span></tt>.</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The behavior with the default value consists of a warning on the use of deprecated and non-standard exit codes. In a future release of Chef client, using standardized exit codes will be the default behavior.</p>
</div>
</div></blockquote>
</div>
<div class="section" id="data-collector">
<h3>Data collector<a class="headerlink" href="#data-collector" title="Permalink to this headline">¶</a></h3>
<p>The data collector feature is new to Chef 12.11. It provides a unified method for sharing statistics about your Chef runs in a webhook-like manner. The data collector supports Chef in all its modes: Chef client, Chef solo (commonly referred to as &#8220;Chef client local mode&#8221;), and Chef solo legacy mode.</p>
<p>To enable the data collector, specify the following settings in your client configuration file:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">data_collector.server_url</span></tt>: Required. The URL to which the Chef client will POST the data collector messages</li>
<li><tt class="docutils literal"><span class="pre">data_collector.token</span></tt>: Optional. An token which will be sent in a x-data-collector-token HTTP header which can be used to authenticate the message.</li>
<li><tt class="docutils literal"><span class="pre">data_collector.mode</span></tt>: The Chef mode in which the data collector should run. Chef client mode is chef client configured to use Chef server to provide Chef client its resources and artifacts. Chef solo mode is Chef client configured to use a local Chef zero server (<tt class="docutils literal"><span class="pre">chef-client</span> <span class="pre">--local-mode</span></tt>). This setting also allows you to only enable data collector in Chef solo mode but not Chef client mode. Available options are <tt class="docutils literal"><span class="pre">:solo</span></tt>, <tt class="docutils literal"><span class="pre">:client</span></tt>, or <tt class="docutils literal"><span class="pre">:both</span></tt>. Default is <tt class="docutils literal"><span class="pre">:both</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">data_collector.raise_on_failure</span></tt>: If enabled, Chef will raise an exception and fail to run if the data collector cannot be reached at the start of the Chef run. Defaults to false.</li>
<li><tt class="docutils literal"><span class="pre">data_collector.organization</span></tt>: Optional. In Chef solo mode, the organization field in the messages will be set to this value. Default is <tt class="docutils literal"><span class="pre">chef_solo</span></tt>. This field does not apply to Chef client mode.</li>
</ul>
</div>
<div class="section" id="replace-previous-chef-solo-behavior-with-chef-client-local-mode">
<h3>Replace previous Chef-solo behavior with Chef client local mode<a class="headerlink" href="#replace-previous-chef-solo-behavior-with-chef-client-local-mode" title="Permalink to this headline">¶</a></h3>
<p>The default operation of chef-solo is now the equivalent to <tt class="docutils literal"><span class="pre">chef-client</span> <span class="pre">-z</span></tt> or <tt class="docutils literal"><span class="pre">chef-client</span> <span class="pre">--local-mode</span></tt>, but you can use the previous chef-solo behavior by running in <tt class="docutils literal"><span class="pre">chef-solo</span> <span class="pre">--legacy-mode</span></tt>.
As part of this change, environment and role files written in ruby are now fully supported by <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">upload</span></tt>.</p>
</div>
<div class="section" id="systemd-unit">
<h3>systemd_unit<a class="headerlink" href="#systemd-unit" title="Permalink to this headline">¶</a></h3>
<p>Use the <strong>systemd_unit</strong> resource to create, manage, and run <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd.html#Concepts">systemd units</a>.</p>
<div class="section" id="syntax">
<h4>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline">¶</a></h4>
<p>A <strong>systemd_unit</strong> resource describes the configuration behavior for systemd units. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">systemd_unit</span> <span class="s1">&#39;sysstat-collect.timer&#39;</span> <span class="k">do</span>
  <span class="n">enabled</span> <span class="kp">true</span>
  <span class="n">content</span> <span class="s1">&#39;[Unit]\nDescription=Run system activity accounting tool every 10 minutes\n\n[Timer]\nOnCalendar=*:00/10\n\n[Install]\nWantedBy=sysstat.service&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
<p>The full syntax for all of the properties that are available to the <strong>systemd_unit</strong> resource is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">systemd_unit</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
  <span class="n">enabled</span>                <span class="no">Boolean</span>
  <span class="n">active</span>                 <span class="no">Boolean</span>
  <span class="n">masked</span>                 <span class="no">Boolean</span>
  <span class="n">static</span>                 <span class="no">Boolean</span>
  <span class="n">user</span>                   <span class="nb">String</span>
  <span class="n">content</span>                <span class="nb">String</span> <span class="ow">or</span> <span class="no">Hash</span>
  <span class="n">triggers_reload</span>        <span class="no">Boolean</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">name</span></tt> is the name of the unit</li>
<li><tt class="docutils literal"><span class="pre">active</span></tt> specifies if the service unit type should be started</li>
<li><tt class="docutils literal"><span class="pre">user</span></tt> is the user account that systemd units run under. If not specified, systemd units will run under the system account.</li>
<li><tt class="docutils literal"><span class="pre">content</span></tt> describes the behavior of the unit</li>
</ul>
</div>
<div class="section" id="actions">
<h4>Actions<a class="headerlink" href="#actions" title="Permalink to this headline">¶</a></h4>
<p>This resource has the following actions:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:create</span></tt></dt>
<dd>Create a unit file, if it does not already exist.</dd>
<dt><tt class="docutils literal"><span class="pre">:delete</span></tt></dt>
<dd>Delete a unit file, if it exists.</dd>
<dt><tt class="docutils literal"><span class="pre">:enable</span></tt></dt>
<dd>Ensure the unit will be started after the next system boot.</dd>
<dt><tt class="docutils literal"><span class="pre">:disable</span></tt></dt>
<dd>Ensure the unit will not be started after the next system boot.</dd>
<dt><tt class="docutils literal"><span class="pre">:nothing</span></tt></dt>
<dd>Default. Do nothing with the unit.</dd>
<dt><tt class="docutils literal"><span class="pre">:mask</span></tt></dt>
<dd>Ensure the unit will not start, even to satisfy dependencies.</dd>
<dt><tt class="docutils literal"><span class="pre">:unmask</span></tt></dt>
<dd>Stop the unit from being masked and cause it to start as specified.</dd>
<dt><tt class="docutils literal"><span class="pre">:start</span></tt></dt>
<dd>Start a unit based in its systemd unit file.</dd>
<dt><tt class="docutils literal"><span class="pre">:stop</span></tt></dt>
<dd>Stop a running unit.</dd>
<dt><tt class="docutils literal"><span class="pre">:restart</span></tt></dt>
<dd>Restart a unit.</dd>
<dt><tt class="docutils literal"><span class="pre">:reload</span></tt></dt>
<dd>Reload the configuration file for a unit.</dd>
<dt><tt class="docutils literal"><span class="pre">:try_restart</span></tt></dt>
<dd>Try to restart a unit if the unit is running.</dd>
<dt><tt class="docutils literal"><span class="pre">:reload_or_restart</span></tt></dt>
<dd>For units that are services, this action reloads the configuration of the service without restarting, if possible; otherwise, it will restart the service so the new configuration is applied.</dd>
<dt><tt class="docutils literal"><span class="pre">:reload_or_try_restart</span></tt></dt>
<dd>For units that are services, this action reloads the configuration of the service without restarting, if possible; otherwise, it will try to restart the service so the new configuration is applied.</dd>
</dl>
</div>
<div class="section" id="properties">
<h4>Properties<a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h4>
<p>This resource has the following properties:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">enabled</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Specifies whether the unit is enabled or disabled.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">active</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> TrueClass, FalseClass</p>
<p class="last">Specifies whether the unit is started or stopped.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">masked</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> TrueClass, FalseClass</p>
<p class="last">Specifies whether the unit is masked or not.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">static</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> TrueClass, FalseClass</p>
<p class="last">Specifies whether the unit is static or not. Static units cannot be enabled or disabled.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">user</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The user account that the systemd unit process is run under. The path to the unit for that user would be something like
<tt class="docutils literal"><span class="pre">/etc/systemd/user/sshd.service</span></tt>. If no user account is specified, the systemd unit will run under a <tt class="docutils literal"><span class="pre">system</span></tt> account, with the path to the unit being something like <tt class="docutils literal"><span class="pre">/etc/systemd/system/sshd.service</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">content</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String, Hash</p>
<p class="last">A string or hash that contains a systemd <a class="reference external" href="https://www.freedesktop.org/software/systemd/man/systemd.unit.html">unit file</a> definition that describes the properties of systemd-managed entities, such as services, sockets, devices, and so on.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">triggers_reload</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> TrueClass, FalseClass</p>
<p class="last">Specifies whether to trigger a daemon reload when creating or deleting a unit. Default is true.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="section" id="what-s-new-in-12-10">
<h2>What&#8217;s New in 12.10<a class="headerlink" href="#what-s-new-in-12-10" title="Permalink to this headline">¶</a></h2>
<p>The following items are new for chef-client 12.10 and/or are changes from previous versions. The short version:</p>
<ul class="simple">
<li><strong>New layout property for mdadm resource</strong> Use the <tt class="docutils literal"><span class="pre">layout</span></tt> property to set the RAID5 parity algorithm. Possible values: <tt class="docutils literal"><span class="pre">left-asymmetric</span></tt> (or <tt class="docutils literal"><span class="pre">la</span></tt>), <tt class="docutils literal"><span class="pre">left-symmetric</span></tt> (or <tt class="docutils literal"><span class="pre">ls</span></tt>), <tt class="docutils literal"><span class="pre">right-asymmetric</span></tt> (or <tt class="docutils literal"><span class="pre">ra</span></tt>), or <tt class="docutils literal"><span class="pre">right-symmetric</span></tt> (or <tt class="docutils literal"><span class="pre">rs</span></tt>).</li>
<li><strong>New with_run_context for the Recipe DSL</strong> Use <tt class="docutils literal"><span class="pre">with_run_context</span></tt> to run resource blocks as part of the root or parent run context.</li>
<li><strong>New Recipe DSL methods for declaring, deleting, editing, and finding resources</strong> Use the <tt class="docutils literal"><span class="pre">declare_resource</span></tt>, <tt class="docutils literal"><span class="pre">delete_resource</span></tt>, <tt class="docutils literal"><span class="pre">edit_resource</span></tt>, and <tt class="docutils literal"><span class="pre">find_resource</span></tt> methods to interact with resources in the resource collection. Use the <tt class="docutils literal"><span class="pre">delete_resource!</span></tt>, <tt class="docutils literal"><span class="pre">edit_resource!</span></tt>, or <tt class="docutils literal"><span class="pre">find_resource!</span></tt> methods to trigger an exception when the resource is not found in the collection.</li>
</ul>
<div class="section" id="with-run-context">
<h3>with_run_context<a class="headerlink" href="#with-run-context" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">with_run_context</span></tt> method to define a block that has a pointer to a location in the <tt class="docutils literal"><span class="pre">run_context</span></tt> hierarchy. Resources in recipes always run at the root of the <tt class="docutils literal"><span class="pre">run_context</span></tt> hierarchy, whereas custom resources and notification blocks always build a child <tt class="docutils literal"><span class="pre">run_context</span></tt> which contains their sub-resources.</p>
<p>The syntax for the <tt class="docutils literal"><span class="pre">with_run_context</span></tt> method is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">with_run_context</span> <span class="ss">:type</span> <span class="k">do</span>
  <span class="c1"># some arbitrary pure Ruby stuff goes here</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">:type</span></tt> may be one of the following:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">:root</span></tt> runs the block as part of the root <tt class="docutils literal"><span class="pre">run_context</span></tt> hierarchy</li>
<li><tt class="docutils literal"><span class="pre">:parent</span></tt> runs the block as part of the parent process in the <tt class="docutils literal"><span class="pre">run_context</span></tt> hierarchy</li>
</ul>
<p>For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">action</span> <span class="ss">:run</span> <span class="k">do</span>
  <span class="n">with_run_context</span> <span class="ss">:root</span> <span class="k">do</span>
    <span class="n">edit_resource</span><span class="p">(</span><span class="ss">:my_thing</span><span class="p">,</span> <span class="s2">&quot;accumulated state&quot;</span><span class="p">)</span> <span class="k">do</span>
      <span class="n">action</span> <span class="ss">:nothing</span>
      <span class="n">my_array_property</span> <span class="o">&lt;&lt;</span> <span class="n">accumulate_some_stuff</span>
    <span class="k">end</span>
  <span class="k">end</span>
  <span class="n">log</span> <span class="s2">&quot;kick it off&quot;</span> <span class="k">do</span>
    <span class="n">notifies</span> <span class="ss">:run</span><span class="p">,</span> <span class="s2">&quot;my_thing[accumulated state], :delayed</span>
<span class="s2">  end</span>
<span class="s2">end</span>
</pre></div>
</div>
</div>
<div class="section" id="declare-resource">
<h3>declare_resource<a class="headerlink" href="#declare-resource" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">declare_resource</span></tt> method to instantiate a resource and then add it to the resource collection.</p>
<p>The syntax for the <tt class="docutils literal"><span class="pre">declare_resource</span></tt> method is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">declare_resource</span><span class="p">(</span><span class="ss">:resource_type</span><span class="p">,</span> <span class="s1">&#39;resource_name&#39;</span><span class="p">,</span> <span class="n">resource_attrs_block</span><span class="p">)</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">:resource_type</span></tt> is the resource type, such as <tt class="docutils literal"><span class="pre">:file</span> <span class="pre">``(for</span> <span class="pre">the</span> <span class="pre">**file**</span> <span class="pre">resource),</span> <span class="pre">``:template</span></tt> (for the <strong>template</strong> resource), and so on. Any resource available to Chef may be declared.</li>
<li><tt class="docutils literal"><span class="pre">resource_name</span></tt> the property that is the default name of the resource, typically the string that appears in the <tt class="docutils literal"><span class="pre">resource</span> <span class="pre">'name'</span> <span class="pre">do</span></tt> block of a resource (but not always); see the Syntax section for the resource to be declared to verify the default name property.</li>
<li><tt class="docutils literal"><span class="pre">resource_attrs_block</span></tt> is a block in which properties of the instantiated resource are declared.</li>
</ul>
<p>For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">declare_resource</span><span class="p">(</span><span class="ss">:file</span><span class="p">,</span> <span class="s1">&#39;/x/y.txy&#39;</span><span class="p">,</span> <span class="nb">caller</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:delete</span>
<span class="k">end</span>
</pre></div>
</div>
<p>is equivalent to:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">file</span> <span class="s1">&#39;/x/y.txt&#39;</span> <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:delete</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="section" id="delete-resource">
<h3>delete_resource<a class="headerlink" href="#delete-resource" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">delete_resource</span></tt> method to find a resource in the resource collection, and then delete it.</p>
<p>The syntax for the <tt class="docutils literal"><span class="pre">delete_resource</span></tt> method is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">delete_resource</span><span class="p">(</span><span class="ss">:resource_type</span><span class="p">,</span> <span class="s1">&#39;resource_name&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">:resource_type</span></tt> is the resource type, such as <tt class="docutils literal"><span class="pre">:file</span> <span class="pre">``(for</span> <span class="pre">the</span> <span class="pre">**file**</span> <span class="pre">resource),</span> <span class="pre">``:template</span></tt> (for the <strong>template</strong> resource), and so on. Any resource available to Chef may be declared.</li>
<li><tt class="docutils literal"><span class="pre">resource_name</span></tt> the property that is the default name of the resource, typically the string that appears in the <tt class="docutils literal"><span class="pre">resource</span> <span class="pre">'name'</span> <span class="pre">do</span></tt> block of a resource (but not always); see the Syntax section for the resource to be declared to verify the default name property.</li>
</ul>
<p>For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">delete_resource</span><span class="p">(</span><span class="ss">:template</span><span class="p">,</span> <span class="s1">&#39;/x/y.erb&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id1">
<h3>delete_resource!<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">delete_resource!</span></tt> method to find a resource in the resource collection, and then delete it. If the resource is not found, an exception is returned.</p>
<p>The syntax for the <tt class="docutils literal"><span class="pre">delete_resource!</span></tt> method is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">delete_resource!</span><span class="p">(</span><span class="ss">:resource_type</span><span class="p">,</span> <span class="s1">&#39;resource_name&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">:resource_type</span></tt> is the resource type, such as <tt class="docutils literal"><span class="pre">:file</span> <span class="pre">``(for</span> <span class="pre">the</span> <span class="pre">**file**</span> <span class="pre">resource),</span> <span class="pre">``:template</span></tt> (for the <strong>template</strong> resource), and so on. Any resource available to Chef may be declared.</li>
<li><tt class="docutils literal"><span class="pre">resource_name</span></tt> the property that is the default name of the resource, typically the string that appears in the <tt class="docutils literal"><span class="pre">resource</span> <span class="pre">'name'</span> <span class="pre">do</span></tt> block of a resource (but not always); see the Syntax section for the resource to be declared to verify the default name property.</li>
</ul>
<p>For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">delete_resource!</span><span class="p">(</span><span class="ss">:file</span><span class="p">,</span> <span class="s1">&#39;/x/file.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="edit-resource">
<h3>edit_resource<a class="headerlink" href="#edit-resource" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">edit_resource</span></tt> method to:</p>
<ul class="simple">
<li>Find a resource in the resource collection, and then edit it.</li>
<li>Define a resource block. If a resource block with the same name exists in the resource collection, it will be updated with the contents of the resource block defined by the <tt class="docutils literal"><span class="pre">edit_resource</span></tt> method. If a resource block does not exist in the resource collection, it will be created.</li>
</ul>
<p>The syntax for the <tt class="docutils literal"><span class="pre">edit_resource</span></tt> method is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">edit_resource</span><span class="p">(</span><span class="ss">:resource_type</span><span class="p">,</span> <span class="s1">&#39;resource_name&#39;</span><span class="p">,</span> <span class="n">resource_attrs_block</span><span class="p">)</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">:resource_type</span></tt> is the resource type, such as <tt class="docutils literal"><span class="pre">:file</span> <span class="pre">``(for</span> <span class="pre">the</span> <span class="pre">**file**</span> <span class="pre">resource),</span> <span class="pre">``:template</span></tt> (for the <strong>template</strong> resource), and so on. Any resource available to Chef may be declared.</li>
<li><tt class="docutils literal"><span class="pre">resource_name</span></tt> the property that is the default name of the resource, typically the string that appears in the <tt class="docutils literal"><span class="pre">resource</span> <span class="pre">'name'</span> <span class="pre">do</span></tt> block of a resource (but not always); see the Syntax section for the resource to be declared to verify the default name property.</li>
<li><tt class="docutils literal"><span class="pre">resource_attrs_block</span></tt> is a block in which properties of the instantiated resource are declared.</li>
</ul>
<p>For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">edit_resource</span><span class="p">(</span><span class="ss">:template</span><span class="p">,</span> <span class="s1">&#39;/x/y.txy&#39;</span><span class="p">)</span> <span class="k">do</span>
  <span class="ss">cookbook_name</span><span class="p">:</span> <span class="n">cookbook_name</span>
<span class="k">end</span>
</pre></div>
</div>
<p>and a resource block:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">edit_resource</span><span class="p">(</span><span class="ss">:template</span><span class="p">,</span> <span class="s1">&#39;/etc/aliases&#39;</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">source</span> <span class="s1">&#39;aliases.erb&#39;</span>
  <span class="n">cookbook</span> <span class="s1">&#39;aliases&#39;</span>
  <span class="n">variables</span><span class="p">({</span><span class="ss">:aliases</span> <span class="o">=&gt;</span> <span class="p">{}</span> <span class="p">})</span>
  <span class="n">notifies</span> <span class="ss">:run</span><span class="p">,</span> <span class="s1">&#39;execute[newaliases]&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h3>edit_resource!<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">edit_resource!</span></tt> method to:</p>
<ul class="simple">
<li>Find a resource in the resource collection, and then edit it.</li>
<li>Define a resource block. If a resource with the same name exists in the resource collection, its properties will be updated with the contents of the resource block defined by the <tt class="docutils literal"><span class="pre">edit_resource</span></tt> method.</li>
</ul>
<p>In both cases, if the resource is not found, an exception is returned.</p>
<p>The syntax for the <tt class="docutils literal"><span class="pre">edit_resource!</span></tt> method is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">edit_resource!</span><span class="p">(</span><span class="ss">:resource_type</span><span class="p">,</span> <span class="s1">&#39;resource_name&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">:resource_type</span></tt> is the resource type, such as <tt class="docutils literal"><span class="pre">:file</span> <span class="pre">``(for</span> <span class="pre">the</span> <span class="pre">**file**</span> <span class="pre">resource),</span> <span class="pre">``:template</span></tt> (for the <strong>template</strong> resource), and so on. Any resource available to Chef may be declared.</li>
<li><tt class="docutils literal"><span class="pre">resource_name</span></tt> the property that is the default name of the resource, typically the string that appears in the <tt class="docutils literal"><span class="pre">resource</span> <span class="pre">'name'</span> <span class="pre">do</span></tt> block of a resource (but not always); see the Syntax section for the resource to be declared to verify the default name property.</li>
<li><tt class="docutils literal"><span class="pre">resource_attrs_block</span></tt> is a block in which properties of the instantiated resource are declared.</li>
</ul>
<p>For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">edit_resource!</span><span class="p">(</span><span class="ss">:file</span><span class="p">,</span> <span class="s1">&#39;/x/y.rst&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="find-resource">
<h3>find_resource<a class="headerlink" href="#find-resource" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">find_resource</span></tt> method to:</p>
<ul class="simple">
<li>Find a resource in the resource collection.</li>
<li>Define a resource block. If a resource block with the same name exists in the resource collection, it will be returned. If a resource block does not exist in the resource collection, it will be created.</li>
</ul>
<p>The syntax for the <tt class="docutils literal"><span class="pre">find_resource</span></tt> method is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">find_resource</span><span class="p">(</span><span class="ss">:resource_type</span><span class="p">,</span> <span class="s1">&#39;resource_name&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">:resource_type</span></tt> is the resource type, such as <tt class="docutils literal"><span class="pre">:file</span> <span class="pre">``(for</span> <span class="pre">the</span> <span class="pre">**file**</span> <span class="pre">resource),</span> <span class="pre">``:template</span></tt> (for the <strong>template</strong> resource), and so on. Any resource available to Chef may be declared.</li>
<li><tt class="docutils literal"><span class="pre">resource_name</span></tt> the property that is the default name of the resource, typically the string that appears in the <tt class="docutils literal"><span class="pre">resource</span> <span class="pre">'name'</span> <span class="pre">do</span></tt> block of a resource (but not always); see the Syntax section for the resource to be declared to verify the default name property.</li>
</ul>
<p>For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">find_resource</span><span class="p">(</span><span class="ss">:template</span><span class="p">,</span> <span class="s1">&#39;/x/y.txy&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>and a resource block:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">find_resource</span><span class="p">(</span><span class="ss">:template</span><span class="p">,</span> <span class="s1">&#39;/etc/seapower&#39;</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">source</span> <span class="s1">&#39;seapower.erb&#39;</span>
  <span class="n">cookbook</span> <span class="s1">&#39;seapower&#39;</span>
  <span class="n">variables</span><span class="p">({</span><span class="ss">:seapower</span> <span class="o">=&gt;</span> <span class="p">{}</span> <span class="p">})</span>
  <span class="n">notifies</span> <span class="ss">:run</span><span class="p">,</span> <span class="s1">&#39;execute[newseapower]&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h3>find_resource!<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">find_resource!</span></tt> method to find a resource in the resource collection. If the resource is not found, an exception is returned.</p>
<p>The syntax for the <tt class="docutils literal"><span class="pre">find_resource!</span></tt> method is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">find_resource!</span><span class="p">(</span><span class="ss">:resource_type</span><span class="p">,</span> <span class="s1">&#39;resource_name&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">:resource_type</span></tt> is the resource type, such as <tt class="docutils literal"><span class="pre">:file</span> <span class="pre">``(for</span> <span class="pre">the</span> <span class="pre">**file**</span> <span class="pre">resource),</span> <span class="pre">``:template</span></tt> (for the <strong>template</strong> resource), and so on. Any resource available to Chef may be declared.</li>
<li><tt class="docutils literal"><span class="pre">resource_name</span></tt> the property that is the default name of the resource, typically the string that appears in the <tt class="docutils literal"><span class="pre">resource</span> <span class="pre">'name'</span> <span class="pre">do</span></tt> block of a resource (but not always); see the Syntax section for the resource to be declared to verify the default name property.</li>
</ul>
<p>For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">find_resource!</span><span class="p">(</span><span class="ss">:template</span><span class="p">,</span> <span class="s1">&#39;/x/y.erb&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="what-s-new-in-12-9">
<h2>What&#8217;s New in 12.9<a class="headerlink" href="#what-s-new-in-12-9" title="Permalink to this headline">¶</a></h2>
<p>The following items are new for chef-client 12.9 and/or are changes from previous versions. The short version:</p>
<ul class="simple">
<li><strong>64-bit chef-client for Microsoft Windows</strong> Starting with chef-client 12.9, 64-bit</li>
<li><strong>New property for the mdadm resource</strong> Use the <tt class="docutils literal"><span class="pre">mdadm_defaults</span></tt> property to set the default values for <tt class="docutils literal"><span class="pre">chunk</span></tt> and <tt class="docutils literal"><span class="pre">metadata</span></tt> to <tt class="docutils literal"><span class="pre">nil</span></tt>, which allows mdadm to apply its own default values.</li>
<li><strong>File redirection in Windows for 32-bit applications</strong> Files on Microsoft Windows that are managed by the <strong>file</strong> and <strong>directory</strong> resources are subject to file redirection, depending if the chef-client is 64-bit or 32-bit.</li>
<li><strong>Registry key redirection in Windows for 32-bit applications</strong> Registry keys on Microsoft Windows that are managed by the <strong>registry_key</strong> resource are subject to key redirection, depending if the chef-client is 64-bit or 32-bit.</li>
<li><strong>New values for log_location</strong> Use <tt class="docutils literal"><span class="pre">:win_evt</span></tt> to write log output to the (Windows Event Logger and <tt class="docutils literal"><span class="pre">:syslog</span></tt> to write log output to the syslog daemon facility with the originator set as <tt class="docutils literal"><span class="pre">chef-client</span></tt>.</li>
<li><strong>New timeout setting for knife ssh</strong> Set the <tt class="docutils literal"><span class="pre">--ssh-timeout</span></tt> setting to an integer (in seconds) as part of a <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">ssh</span></tt> command. The <tt class="docutils literal"><span class="pre">ssh_timeout</span></tt> setting may also be configured (as seconds) in the knife.rb file.</li>
<li><strong>New &#8220;seconds to wait before first chef-client run&#8221; setting</strong> The <tt class="docutils literal"><span class="pre">-daemonized</span></tt> option for the chef-client now allows the seconds to wait before starting the chef-client run to be specified. For example, if <tt class="docutils literal"><span class="pre">--daemonize</span> <span class="pre">10</span></tt> is specified, the chef-client will wait ten seconds.</li>
</ul>
<div class="section" id="bit-chef-client">
<h3>64-bit chef-client<a class="headerlink" href="#bit-chef-client" title="Permalink to this headline">¶</a></h3>
<p>The chef-client now runs on 64-bit Microsoft Windows operating systems.</p>
<ul class="simple">
<li>Support for file redirection</li>
<li>Support for key redirection</li>
</ul>
<div class="section" id="file-redirection">
<h4>File Redirection<a class="headerlink" href="#file-redirection" title="Permalink to this headline">¶</a></h4>
<p>64-bit versions of Microsoft Windows have a 32-bit compatibility layer that redirects attempts by 32-bit application to access the <tt class="docutils literal"><span class="pre">System32</span></tt> directory to a different location. Starting with chef-client version 12.9, the 32-bit version of the chef-client is subject to the file redirection policy.</p>
<p>For example, consider the following script:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">process_type</span> <span class="o">=</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;PROCESSOR_ARCHITECTURE&#39;</span><span class="o">]</span> <span class="o">==</span> <span class="s1">&#39;AMD64&#39;</span> <span class="p">?</span> <span class="s1">&#39;64-bit&#39;</span> <span class="p">:</span> <span class="s1">&#39;32-bit&#39;</span>
<span class="n">system32_dir</span> <span class="o">=</span> <span class="o">::</span><span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;SYSTEMROOT&#39;</span><span class="o">]</span><span class="p">,</span> <span class="s1">&#39;system32&#39;</span><span class="p">)</span>
<span class="n">test_dir</span> <span class="o">=</span> <span class="o">::</span><span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">system32_dir</span><span class="p">,</span> <span class="s1">&#39;cheftest&#39;</span><span class="p">)</span>
<span class="n">test_file</span> <span class="o">=</span> <span class="o">::</span><span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">test_dir</span><span class="p">,</span> <span class="s1">&#39;chef_architecture.txt&#39;</span><span class="p">)</span>

<span class="n">directory</span> <span class="n">test_dir</span> <span class="k">do</span>
  <span class="c1"># some directory</span>
<span class="k">end</span>

<span class="n">file</span> <span class="n">test_file</span> <span class="k">do</span>
  <span class="n">content</span> <span class="s2">&quot;Chef made me, I come from a </span><span class="si">#{</span><span class="n">process_type</span><span class="si">}</span><span class="s2"> process.&quot;</span>
<span class="k">end</span>
</pre></div>
</div>
<p>When running a 32-bit version of chef-client, the script will write the <tt class="docutils literal"><span class="pre">chef_architecture</span></tt> file to the <tt class="docutils literal"><span class="pre">C:\Windows\SysWow64</span></tt> directory. However, when running a native 64-bit version of the chef-client, the script will write a file to the <tt class="docutils literal"><span class="pre">C:\Windows\System32</span></tt> directory, as expected.</p>
<p>For more information, see: <a class="reference external" href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa384187(v=vs.85).aspx">https://msdn.microsoft.com/en-us/library/windows/desktop/aa384187(v=vs.85).aspx</a>.</p>
</div>
<div class="section" id="key-redirection">
<h4>Key Redirection<a class="headerlink" href="#key-redirection" title="Permalink to this headline">¶</a></h4>
<p>64-bit versions of Microsoft Windows have a 32-bit compatibility layer in the registry that reflects and redirects certain keys (and their values) into specific locations (or logical views) of the registry hive.</p>
<p>The chef-client can access any reflected or redirected registry key. The machine architecture of the system on which the chef-client is running is used as the default (non-redirected) location. Access to the <tt class="docutils literal"><span class="pre">SysWow64</span></tt> location is redirected must be specified. Typically, this is only necessary to ensure compatibility with 32-bit applications that are running on a 64-bit operating system.</p>
<p>32-bit versions of the chef-client (12.8 and earlier) and 64-bit versions of the chef-client (12.9 and later) generally behave the same in this situation, with one exception: it is only possible to read and write from a redirected registry location using chef-client version 12.9 (and later).</p>
<p>For more information, see: <a class="reference external" href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa384235(v=vs.85).aspx">http://msdn.microsoft.com/en-us/library/windows/desktop/aa384235(v=vs.85).aspx</a>.</p>
</div>
</div>
</div>
<div class="section" id="what-s-new-in-12-8">
<h2>What&#8217;s New in 12.8<a class="headerlink" href="#what-s-new-in-12-8" title="Permalink to this headline">¶</a></h2>
<p>The following items are new for chef-client 12.8 and/or are changes from previous versions. The short version:</p>
<ul class="simple">
<li><strong>Support for OpenSSL validation of FIPS</strong> The chef-client can be configured to allow OpenSSL to enforce FIPS-validated security during a chef-client run.</li>
<li><strong>Support for multiple configuration files</strong> The chef-client supports reading multiple configuration files by putting them inside a <tt class="docutils literal"><span class="pre">.d</span></tt> configuration directory.</li>
<li><strong>New launchd resource</strong> Use the <strong>launchd</strong> resource to manage system-wide services (daemons) and per-user services (agents) on the Mac OS X platform.</li>
<li><strong>chef-zero support for Chef Server API endpoints</strong> chef-zero now supports using all Chef server API version 12 endpoints, with the exception of <tt class="docutils literal"><span class="pre">/universe</span></tt>.</li>
<li><strong>Updated support for OpenSSL</strong> OpenSSL is updated to version 1.0.1.</li>
<li><strong>Ohai auto-detects hosts for Azure instances</strong> Ohai will auto-detect hosts for instances that are hosted by Microsoft Azure.</li>
<li><strong>gem attribute added to metadata.rb</strong> Specify a gem dependency to be installed via the <strong>chef_gem</strong> resource after all cookbooks are synchronized, but before any other cookbook loading is done.</li>
</ul>
<div class="section" id="fips-mode">
<h3>FIPS Mode<a class="headerlink" href="#fips-mode" title="Permalink to this headline">¶</a></h3>
<p>Federal Information Processing Standards (FIPS) is a United States government computer security standard that specifies security requirements for cryptography. The current version of the standard is FIPS 140-2. The chef-client can be configured to allow OpenSSL to enforce FIPS-validated security during a chef-client run. This will disable cryptography that is explicitly disallowed in FIPS-validated software, including certain ciphers and hashing algorithms. Any attempt to use any disallowed cryptography will cause the chef-client to throw an exception during a chef-client run.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Chef uses MD5 hashes to uniquely identify files that are stored on the Chef server. MD5 is used only to generate a unique hash identifier and is not used for any cryptographic purpose.</p>
</div>
<p>Notes about FIPS:</p>
<ul class="simple">
<li>May be enabled for nodes running on Microsoft Windows and Enterprise Linux platforms</li>
<li>Should only be enabled for environments that require FIPS 140-2 compliance</li>
<li>May not be enabled for any version of the chef-client earlier than 12.8</li>
</ul>
<div class="section" id="enable-fips-mode">
<h4>Enable FIPS Mode<a class="headerlink" href="#enable-fips-mode" title="Permalink to this headline">¶</a></h4>
<p>Allowing OpenSSL to enforce FIPS-validated security may be enabled by using any of the following ways:</p>
<ul class="simple">
<li>Set the <tt class="docutils literal"><span class="pre">fips</span></tt> configuration setting to <tt class="docutils literal"><span class="pre">true</span></tt> in the client.rb or knife.rb files</li>
<li>Set the <tt class="docutils literal"><span class="pre">--fips</span></tt> command-line option when running any knife command or the chef-client executable</li>
<li>Set the <tt class="docutils literal"><span class="pre">--fips</span></tt> command-line option when bootstrapping a node using the <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">bootstrap</span></tt> command</li>
</ul>
</div>
<div class="section" id="command-option">
<h4>Command Option<a class="headerlink" href="#command-option" title="Permalink to this headline">¶</a></h4>
<p>The following command-line option may be used to with a knife or chef-client executable command:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--[no-]fips</span></tt></dt>
<dd>Allows OpenSSL to enforce FIPS-validated security during the chef-client run.</dd>
</dl>
<p><strong>Bootstrap a node using FIPS</strong></p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife bootstrap 12.34.56.789 -P vanilla -x root -r <span class="s1">&#39;recipe[apt],recipe[xfs],recipe[vim]&#39;</span> --fips
</pre></div>
</div>
<p>which shows something similar to:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>OpenSSL FIPS 140 mode enabled
...
12.34.56.789 Chef Client finished, 12/12 resources updated in 78.942455583 seconds
</pre></div>
</div>
</div>
<div class="section" id="configuration-setting">
<h4>Configuration Setting<a class="headerlink" href="#configuration-setting" title="Permalink to this headline">¶</a></h4>
<p>The following configuration setting may be set in the knife.rb, client.rb, or config.rb files:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">fips</span></tt></dt>
<dd>Allows OpenSSL to enforce FIPS-validated security during the chef-client run. Set to <tt class="docutils literal"><span class="pre">true</span></tt> to enable FIPS-validated security.</dd>
</dl>
</div>
</div>
<div class="section" id="d-directories">
<h3>.d Directories<a class="headerlink" href="#d-directories" title="Permalink to this headline">¶</a></h3>
<p>The chef-client supports reading multiple configuration files by putting them inside a <tt class="docutils literal"><span class="pre">.d</span></tt> configuration directory. For example: <tt class="docutils literal"><span class="pre">/etc/chef/client.d</span></tt>. All files that end in <tt class="docutils literal"><span class="pre">.rb</span></tt> in the <tt class="docutils literal"><span class="pre">.d</span></tt> directory are loaded; other non-<tt class="docutils literal"><span class="pre">.rb</span></tt> files are ignored.</p>
<p><tt class="docutils literal"><span class="pre">.d</span></tt> directories may exist in any location where the <tt class="docutils literal"><span class="pre">client.rb</span></tt>, <tt class="docutils literal"><span class="pre">config.rb</span></tt>, or <tt class="docutils literal"><span class="pre">solo.rb</span></tt> files are present, such as:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">/etc/chef/client.d</span></tt></li>
<li><tt class="docutils literal"><span class="pre">/etc/chef/config.d</span></tt></li>
<li><tt class="docutils literal"><span class="pre">~/chef/solo.d</span></tt></li>
</ul>
<p>(There is no support for a <tt class="docutils literal"><span class="pre">knife.d</span></tt> directory; use <tt class="docutils literal"><span class="pre">config.d</span></tt> instead.)</p>
<p>For example, when using knife, the following configuration files would be loaded:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">~/.chef/config.rb</span></tt></li>
<li><tt class="docutils literal"><span class="pre">~/.chef/config.d/company_settings.rb</span></tt></li>
<li><tt class="docutils literal"><span class="pre">~/.chef/config.d/ec2_configuration.rb</span></tt></li>
<li><tt class="docutils literal"><span class="pre">~/.chef/config.d/old_settings.rb.bak</span></tt></li>
</ul>
<p>The <tt class="docutils literal"><span class="pre">old_settings.rb.bak</span></tt> file is ignored because it&#8217;s not a configuration file. The <tt class="docutils literal"><span class="pre">config.rb</span></tt>, <tt class="docutils literal"><span class="pre">company_settings.rb</span></tt>, and <tt class="docutils literal"><span class="pre">ec2_configuration</span></tt> files are merged together as if they are a single configuration file.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If multiple configuration files exists in a <tt class="docutils literal"><span class="pre">.d</span></tt> directory, ensure that the same setting has the same value in all files.</p>
</div>
</div>
<div class="section" id="launchd">
<h3>launchd<a class="headerlink" href="#launchd" title="Permalink to this headline">¶</a></h3>
<p>Use the <strong>launchd</strong> resource to manage system-wide services (daemons) and per-user services (agents) on the Mac OS X platform.</p>
<div class="section" id="id4">
<h4>Syntax<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<p>A <strong>launchd</strong> resource manages system-wide services (daemons) and per-user services (agents) on the Mac OS X platform:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">launchd</span> <span class="s1">&#39;call.mom.weekly&#39;</span> <span class="k">do</span>
  <span class="n">program</span> <span class="s1">&#39;/Library/scripts/call_mom.sh&#39;</span>
  <span class="n">start_calendar_interval</span> <span class="s1">&#39;weekday&#39;</span> <span class="o">=&gt;</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;hourly&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span>
  <span class="n">time_out</span> <span class="mi">300</span>
<span class="k">end</span>
</pre></div>
</div>
<p>The full syntax for all of the properties that are available to the <strong>launchd</strong> resource is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">launchd</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
  <span class="n">abandon_process_group</span>      <span class="no">TrueClass</span><span class="p">,</span> <span class="no">FalseClass</span>
  <span class="n">backup</span>                     <span class="nb">Integer</span><span class="p">,</span> <span class="no">FalseClass</span>
  <span class="n">cookbook</span>                   <span class="nb">String</span>
  <span class="n">debug</span>                      <span class="no">TrueClass</span><span class="p">,</span> <span class="no">FalseClass</span>
  <span class="n">disabled</span>                   <span class="no">TrueClass</span><span class="p">,</span> <span class="no">FalseClass</span>
  <span class="n">enable_globbing</span>            <span class="no">TrueClass</span><span class="p">,</span> <span class="no">FalseClass</span>
  <span class="n">enable_transactions</span>        <span class="no">TrueClass</span><span class="p">,</span> <span class="no">FalseClass</span>
  <span class="n">environment_variables</span>      <span class="no">Hash</span>
  <span class="n">exit_timeout</span>               <span class="nb">Integer</span>
  <span class="n">group</span>                      <span class="nb">String</span><span class="p">,</span> <span class="nb">Integer</span>
  <span class="n">hard_resource_limits</span>       <span class="no">Hash</span>
  <span class="nb">hash</span>                       <span class="no">Hash</span>
  <span class="n">ignore_failure</span>             <span class="no">TrueClass</span><span class="p">,</span> <span class="no">FalseClass</span>
  <span class="n">inetd_compatibility</span>        <span class="no">Hash</span>
  <span class="n">init_groups</span>                <span class="no">TrueClass</span><span class="p">,</span> <span class="no">FalseClass</span>
  <span class="n">keep_alive</span>                 <span class="no">TrueClass</span><span class="p">,</span> <span class="no">FalseClass</span>
  <span class="n">label</span>                      <span class="nb">String</span>
  <span class="n">launch_only_once</span>           <span class="no">TrueClass</span><span class="p">,</span> <span class="no">FalseClass</span>
  <span class="n">limit_load_from_hosts</span>      <span class="nb">Array</span>
  <span class="n">limit_load_to_hosts</span>        <span class="nb">Array</span>
  <span class="n">limit_load_to_session_type</span> <span class="nb">String</span>
  <span class="n">low_priority_io</span>            <span class="no">TrueClass</span><span class="p">,</span> <span class="no">FalseClass</span>
  <span class="n">mach_services</span>              <span class="no">Hash</span>
  <span class="n">mode</span>                       <span class="nb">Integer</span><span class="p">,</span> <span class="nb">String</span>
  <span class="n">nice</span>                       <span class="nb">Integer</span>
  <span class="n">notifies</span>                   <span class="c1"># see description</span>
  <span class="n">on_demand</span>                  <span class="no">TrueClass</span><span class="p">,</span> <span class="no">FalseClass</span>
  <span class="n">owner</span>                      <span class="nb">Integer</span><span class="p">,</span> <span class="nb">String</span>
  <span class="n">path</span>                       <span class="nb">String</span>
  <span class="n">process_type</span>               <span class="nb">String</span>
  <span class="n">program</span>                    <span class="nb">String</span>
  <span class="n">program_arguments</span>          <span class="nb">Array</span>
  <span class="n">provider</span>                   <span class="no">Chef</span><span class="o">::</span><span class="no">Provider</span><span class="o">::</span><span class="no">Launchd</span>
  <span class="n">queue_directories</span>          <span class="nb">Array</span>
  <span class="n">retries</span>                    <span class="nb">Integer</span>
  <span class="n">retry_delay</span>                <span class="nb">Integer</span>
  <span class="n">root_directory</span>             <span class="nb">String</span>
  <span class="n">run_at_load</span>                <span class="no">TrueClass</span><span class="p">,</span> <span class="no">FalseClass</span>
  <span class="n">sockets</span>                    <span class="no">Hash</span>
  <span class="n">soft_resource_limits</span>       <span class="nb">Array</span>
  <span class="n">standard_error_path</span>        <span class="nb">String</span>
  <span class="n">standard_in_path</span>           <span class="nb">String</span>
  <span class="n">standard_out_path</span>          <span class="nb">String</span>
  <span class="n">start_calendar_interval</span>    <span class="no">Hash</span>
  <span class="n">start_interval</span>             <span class="nb">Integer</span>
  <span class="n">start_on_mount</span>             <span class="no">TrueClass</span><span class="p">,</span> <span class="no">FalseClass</span>
  <span class="n">subscribes</span>                 <span class="c1"># see description</span>
  <span class="n">throttle_interval</span>          <span class="nb">Integer</span>
  <span class="n">time_out</span>                   <span class="nb">Integer</span>
  <span class="n">type</span>                       <span class="nb">String</span>
  <span class="n">umask</span>                      <span class="nb">Integer</span>
  <span class="n">username</span>                   <span class="nb">String</span>
  <span class="n">wait_for_debugger</span>          <span class="no">TrueClass</span><span class="p">,</span> <span class="no">FalseClass</span>
  <span class="n">watch_paths</span>                <span class="nb">Array</span>
  <span class="n">working_directory</span>          <span class="nb">String</span>
  <span class="n">action</span>                     <span class="no">Symbol</span> <span class="c1"># defaults to :create if not specified</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">launchd</span></tt> is the resource</li>
<li><tt class="docutils literal"><span class="pre">name</span></tt> is the name of the resource block</li>
<li><tt class="docutils literal"><span class="pre">action</span></tt> identifies the steps the chef-client will take to bring the node into the desired state</li>
<li><tt class="docutils literal"><span class="pre">abandon_process_group</span></tt>, <tt class="docutils literal"><span class="pre">backup</span></tt>, <tt class="docutils literal"><span class="pre">cookbook</span></tt>, <tt class="docutils literal"><span class="pre">debug</span></tt>, <tt class="docutils literal"><span class="pre">disabled</span></tt>, <tt class="docutils literal"><span class="pre">enable_globbing</span></tt>, <tt class="docutils literal"><span class="pre">enable_transactions</span></tt>, <tt class="docutils literal"><span class="pre">environment_variables</span></tt>, <tt class="docutils literal"><span class="pre">exit_timeout</span></tt>, <tt class="docutils literal"><span class="pre">group</span></tt>, <tt class="docutils literal"><span class="pre">hard_resource_limits</span></tt>, <tt class="docutils literal"><span class="pre">hash</span></tt>, <tt class="docutils literal"><span class="pre">inetd_compatibility</span></tt>, <tt class="docutils literal"><span class="pre">init_groups</span></tt>, <tt class="docutils literal"><span class="pre">keep_alive</span></tt>, <tt class="docutils literal"><span class="pre">label</span></tt>, <tt class="docutils literal"><span class="pre">launch_only_once</span></tt>, <tt class="docutils literal"><span class="pre">limit_load_from_hosts</span></tt>, <tt class="docutils literal"><span class="pre">limit_load_to_hosts</span></tt>, <tt class="docutils literal"><span class="pre">limit_load_to_session_type</span></tt>, <tt class="docutils literal"><span class="pre">low_priority_io</span></tt>, <tt class="docutils literal"><span class="pre">mach_services</span></tt>, <tt class="docutils literal"><span class="pre">mode</span></tt>, <tt class="docutils literal"><span class="pre">nice</span></tt>, <tt class="docutils literal"><span class="pre">on_demand</span></tt>, <tt class="docutils literal"><span class="pre">owner</span></tt>, <tt class="docutils literal"><span class="pre">path</span></tt>, <tt class="docutils literal"><span class="pre">process_type</span></tt>, <tt class="docutils literal"><span class="pre">program</span></tt>, <tt class="docutils literal"><span class="pre">program_arguments</span></tt>, <tt class="docutils literal"><span class="pre">queue_directories</span></tt>, <tt class="docutils literal"><span class="pre">retries</span></tt>, <tt class="docutils literal"><span class="pre">retry_delay</span></tt>, <tt class="docutils literal"><span class="pre">root_directory</span></tt>, <tt class="docutils literal"><span class="pre">run_at_load</span></tt>, <tt class="docutils literal"><span class="pre">sockets</span></tt>, <tt class="docutils literal"><span class="pre">soft_resource_limits</span></tt>, <tt class="docutils literal"><span class="pre">standard_error_path</span></tt>, <tt class="docutils literal"><span class="pre">standard_in_path</span></tt>, <tt class="docutils literal"><span class="pre">standard_out_path</span></tt>, <tt class="docutils literal"><span class="pre">start_calendar_interval</span></tt>, <tt class="docutils literal"><span class="pre">start_interval</span></tt>, <tt class="docutils literal"><span class="pre">start_on_mount</span></tt>, <tt class="docutils literal"><span class="pre">throttle_interval</span></tt>, <tt class="docutils literal"><span class="pre">time_out</span></tt>, <tt class="docutils literal"><span class="pre">type</span></tt>, <tt class="docutils literal"><span class="pre">umask</span></tt>, <tt class="docutils literal"><span class="pre">username</span></tt>, <tt class="docutils literal"><span class="pre">wait_for_debugger</span></tt>, <tt class="docutils literal"><span class="pre">watch_paths</span></tt>, and <tt class="docutils literal"><span class="pre">working_directory</span></tt> are properties of this resource, with the Ruby type shown. See &#8220;Properties&#8221; section below for more information about all of the properties that may be used with this resource.</li>
</ul>
</div>
<div class="section" id="id5">
<h4>Actions<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<p>This resource has the following actions:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:create</span></tt></dt>
<dd>Default. Create a launchd property list.</dd>
<dt><tt class="docutils literal"><span class="pre">:create_if_missing</span></tt></dt>
<dd>Create a launchd property list, if it does not already exist.</dd>
<dt><tt class="docutils literal"><span class="pre">:delete</span></tt></dt>
<dd>Delete a launchd property list. This will unload a daemon or agent, if loaded.</dd>
<dt><tt class="docutils literal"><span class="pre">:disable</span></tt></dt>
<dd>Disable a launchd property list.</dd>
<dt><tt class="docutils literal"><span class="pre">:enable</span></tt></dt>
<dd>Create a launchd property list, and then ensure that it is enabled. If a launchd property list already exists, but does not match, updates the property list to match, and then restarts the daemon or agent.</dd>
</dl>
</div>
<div class="section" id="id6">
<h4>Properties<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<p>This resource has the following properties:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">backup</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> Integer, FalseClass</p>
<p class="last">The number of backups to be kept in <tt class="docutils literal"><span class="pre">/var/chef/backup</span></tt>. Set to <tt class="docutils literal"><span class="pre">false</span></tt> to prevent backups from being kept.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">cookbook</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The name of the cookbook in which the source files are located.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">group</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> String, Integer</p>
<p class="last">When launchd is run as the root user, the group to run the job as. If the <tt class="docutils literal"><span class="pre">username</span></tt> property is specified and this property is not, this value is set to the default group for the user.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">hash</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Hash</p>
<p class="last">A Hash of key value pairs used to create the launchd property list.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">ignore_failure</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Continue running a recipe if a resource fails for any reason. Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">label</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The unique identifier for the job.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">mode</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> Integer, String</p>
<p>A quoted 3-5 character string that defines the octal mode. For example: <tt class="docutils literal"><span class="pre">'755'</span></tt>, <tt class="docutils literal"><span class="pre">'0755'</span></tt>, or <tt class="docutils literal"><span class="pre">00755</span></tt>. If <tt class="docutils literal"><span class="pre">mode</span></tt> is not specified and if the directory already exists, the existing mode on the directory is used. If <tt class="docutils literal"><span class="pre">mode</span></tt> is not specified, the directory does not exist, and the <tt class="docutils literal"><span class="pre">:create</span></tt> action is specified, the chef-client assumes a mask value of <tt class="docutils literal"><span class="pre">'0777'</span></tt>, and then applies the umask for the system on which the directory is to be created to the <tt class="docutils literal"><span class="pre">mask</span></tt> value. For example, if the umask on a system is <tt class="docutils literal"><span class="pre">'022'</span></tt>, the chef-client uses the default value of <tt class="docutils literal"><span class="pre">'0755'</span></tt>.</p>
<p>The behavior is different depending on the platform.</p>
<p>UNIX- and Linux-based systems: A quoted 3-5 character string that defines the octal mode that is passed to chmod. For example: <tt class="docutils literal"><span class="pre">'755'</span></tt>, <tt class="docutils literal"><span class="pre">'0755'</span></tt>, or <tt class="docutils literal"><span class="pre">00755</span></tt>. If the value is specified as a quoted string, it works exactly as if the <tt class="docutils literal"><span class="pre">chmod</span></tt> command was passed. If the value is specified as an integer, prepend a zero (<tt class="docutils literal"><span class="pre">0</span></tt>) to the value to ensure that it is interpreted as an octal number. For example, to assign read, write, and execute rights for all users, use <tt class="docutils literal"><span class="pre">'0777'</span></tt> or <tt class="docutils literal"><span class="pre">'777'</span></tt>; for the same rights, plus the sticky bit, use <tt class="docutils literal"><span class="pre">01777</span></tt> or <tt class="docutils literal"><span class="pre">'1777'</span></tt>.</p>
<p class="last">Microsoft Windows: A quoted 3-5 character string that defines the octal mode that is translated into rights for Microsoft Windows security. For example: <tt class="docutils literal"><span class="pre">'755'</span></tt>, <tt class="docutils literal"><span class="pre">'0755'</span></tt>, or <tt class="docutils literal"><span class="pre">00755</span></tt>. Values up to <tt class="docutils literal"><span class="pre">'0777'</span></tt> are allowed (no sticky bits) and mean the same in Microsoft Windows as they do in UNIX, where <tt class="docutils literal"><span class="pre">4</span></tt> equals <tt class="docutils literal"><span class="pre">GENERIC_READ</span></tt>, <tt class="docutils literal"><span class="pre">2</span></tt> equals <tt class="docutils literal"><span class="pre">GENERIC_WRITE</span></tt>, and <tt class="docutils literal"><span class="pre">1</span></tt> equals <tt class="docutils literal"><span class="pre">GENERIC_EXECUTE</span></tt>. This property cannot be used to set <tt class="docutils literal"><span class="pre">:full_control</span></tt>. This property has no effect if not specified, but when it and <tt class="docutils literal"><span class="pre">rights</span></tt> are both specified, the effects are cumulative.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">notifies</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may notify another resource to take action when its state changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> that resource should take, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action. A resource may notifiy more than one resource; use a <tt class="docutils literal"><span class="pre">notifies</span></tt> statement for each resource to be notified.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">notifies</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">notifies</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">owner</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> Integer, String</p>
<p class="last">A string or ID that identifies the group owner by user name, including fully qualified user names such as <tt class="docutils literal"><span class="pre">domain\user</span></tt> or <tt class="docutils literal"><span class="pre">user&#64;domain</span></tt>. If this value is not specified, existing owners remain unchanged and new owner assignments use the current user (when necessary).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">path</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The path to the directory. Using a fully qualified path is recommended, but is not always required. Default value: the <tt class="docutils literal"><span class="pre">name</span></tt> of the resource block See &#8220;Syntax&#8221; section above for more information.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">provider</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Chef::Provider::Launchd</p>
<p class="last">Optional. Explicitly specifies a provider. See &#8220;Providers&#8221; section below for more information.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retries</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The number of times to catch exceptions and retry the resource. Default value: <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retry_delay</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The retry delay (in seconds). Default value: <tt class="docutils literal"><span class="pre">2</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">session_type</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The type of launchd plist to be created. Possible values: <tt class="docutils literal"><span class="pre">system</span></tt> (default) or <tt class="docutils literal"><span class="pre">user</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">source</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The path to the launchd property list.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">subscribes</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> to be taken, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">subscribes</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">subscribes</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">supports</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Array</p>
<p class="last">An array of options for supported mount features. Default value: <tt class="docutils literal"><span class="pre">{</span> <span class="pre">:remount</span> <span class="pre">=&gt;</span> <span class="pre">false</span> <span class="pre">}</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">type</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The type of resource. Possible values: <tt class="docutils literal"><span class="pre">daemon</span></tt> (default), <tt class="docutils literal"><span class="pre">agent</span></tt>.</p>
</dd>
</dl>
<p>The following resource properties may be used to define keys in the XML property list for a daemon or agent. Please refer to the Apple man page documentation for launchd for more information about these keys:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">abandon_process_group</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">If a job dies, all remaining processes with the same process ID may be kept running. Set to <tt class="docutils literal"><span class="pre">true</span></tt> to kill all remaining processes.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">debug</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Sets the log mask to <tt class="docutils literal"><span class="pre">LOG_DEBUG</span></tt> for this job.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">disabled</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Hints to <tt class="docutils literal"><span class="pre">launchctl</span></tt> to not submit this job to launchd. Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">enable_globbing</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Update program arguments before invocation.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">enable_transactions</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Track in-progress transactions; if none, then send the <tt class="docutils literal"><span class="pre">SIGKILL</span></tt> signal.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">environment_variables</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Hash</p>
<p class="last">Additional environment variables to set before running a job.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">exit_timeout</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The amount of time (in seconds) launchd waits before sending a <tt class="docutils literal"><span class="pre">SIGKILL</span></tt> signal. Default value: <tt class="docutils literal"><span class="pre">20</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">hard_resource_limits</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Hash</p>
<p class="last">A Hash of resource limits to be imposed on a job.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">inetd_compatibility</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Hash</p>
<p class="last">Specifies if a daemon expects to be run as if it were launched from <tt class="docutils literal"><span class="pre">inetd</span></tt>. Set to <tt class="docutils literal"><span class="pre">wait</span> <span class="pre">=&gt;</span> <span class="pre">true</span></tt> to pass standard input, output, and error file descriptors. Set to <tt class="docutils literal"><span class="pre">wait</span> <span class="pre">=&gt;</span> <span class="pre">false</span></tt> to call the <tt class="docutils literal"><span class="pre">accept</span></tt> system call on behalf of the job, and then pass standard input, output, and error file descriptors.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">init_groups</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Specify if <tt class="docutils literal"><span class="pre">initgroups</span></tt> is called before running a job. Default value: <tt class="docutils literal"><span class="pre">true</span></tt> (starting with Mac OS X 10.5).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">keep_alive</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass, Hash</p>
<p>Keep a job running continuously (<tt class="docutils literal"><span class="pre">true</span></tt>) or allow demand and conditions on the node to determine if the job keeps running (<tt class="docutils literal"><span class="pre">false</span></tt>). Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
<p class="last">Hash type was added in Chef client 12.14.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">launch_only_once</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Specify if a job can be run only one time. Set this value to <tt class="docutils literal"><span class="pre">true</span></tt> if a job cannot be restarted without a full machine reboot.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">limit_load_from_hosts</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Array</p>
<p class="last">An array of hosts to which this configuration file does not apply, i.e. &#8220;apply this configuration file to all hosts not specified in this array&#8221;.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">limit_load_to_hosts</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Array</p>
<p class="last">An array of hosts to which this configuration file applies.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">limit_load_to_session_type</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The session type to which this configuration file applies.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">low_priority_io</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Specify if the kernel on the node should consider this daemon to be low priority during file system I/O.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">mach_services</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Hash</p>
<p class="last">Specify services to be registered with the bootstrap subsystem.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">nice</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The program scheduling priority value in the range <tt class="docutils literal"><span class="pre">-20</span></tt> to <tt class="docutils literal"><span class="pre">20</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">on_demand</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Keep a job alive. Only applies to Mac OS X version 10.4 (and earlier); use <tt class="docutils literal"><span class="pre">keep_alive</span></tt> instead for newer versions.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">process_type</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The intended purpose of the job: <tt class="docutils literal"><span class="pre">Adaptive</span></tt>, <tt class="docutils literal"><span class="pre">Background</span></tt>, <tt class="docutils literal"><span class="pre">Interactive</span></tt>, or <tt class="docutils literal"><span class="pre">Standard</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">program</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The first argument of <tt class="docutils literal"><span class="pre">execvp</span></tt>, typically the file name associated with the file to be executed. This value must be specified if <tt class="docutils literal"><span class="pre">program_arguments</span></tt> is not specified, and vice-versa.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">program_arguments</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Array</p>
<p class="last">The second argument of <tt class="docutils literal"><span class="pre">execvp</span></tt>. If <tt class="docutils literal"><span class="pre">program</span></tt> is not specified, this property must be specified and will be handled as if it were the first argument.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">queue_directories</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Array</p>
<p class="last">An array of non-empty directories which, if any are modified, will cause a job to be started.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">root_directory</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last"><tt class="docutils literal"><span class="pre">chroot</span></tt> to this directory, and then run the job.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">run_at_load</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Launch a job once (at the time it is loaded). Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">sockets</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Hash</p>
<p class="last">A Hash of on-demand sockets that notify launchd when a job should be run.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">soft_resource_limits</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Array</p>
<p class="last">A Hash of resource limits to be imposed on a job.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">standard_error_path</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The file to which standard error (<tt class="docutils literal"><span class="pre">stderr</span></tt>) is sent.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">standard_in_path</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The file to which standard input (<tt class="docutils literal"><span class="pre">stdin</span></tt>) is sent.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">standard_out_path</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The file to which standard output (<tt class="docutils literal"><span class="pre">stdout</span></tt>) is sent.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">start_calendar_interval</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Hash</p>
<p class="last">A Hash (similar to <tt class="docutils literal"><span class="pre">crontab</span></tt>) that defines the calendar frequency at which a job is started. For example: <tt class="docutils literal"><span class="pre">{</span> <span class="pre">minute</span> <span class="pre">=&gt;</span> <span class="pre">&quot;0&quot;,</span> <span class="pre">hour</span> <span class="pre">=&gt;</span> <span class="pre">&quot;20&quot;,</span> <span class="pre">day</span> <span class="pre">=&gt;</span> <span class="pre">&quot;*&quot;,</span> <span class="pre">weekday</span> <span class="pre">=&gt;</span> <span class="pre">&quot;1-5&quot;,</span> <span class="pre">month</span> <span class="pre">=&gt;</span> <span class="pre">&quot;*&quot;</span> <span class="pre">}</span></tt> will run a job at 8:00 PM every day, Monday through Friday, every month of the year.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">start_interval</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The frequency (in seconds) at which a job is started.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">start_on_mount</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Start a job every time a file system is mounted.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">throttle_interval</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The frequency (in seconds) at which jobs are allowed to spawn. Default value: <tt class="docutils literal"><span class="pre">10</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">time_out</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The amount of time (in seconds) a job may be idle before it times out. If no value is specified, the default timeout value for launchd will be used.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">umask</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">A decimal value to pass to <tt class="docutils literal"><span class="pre">umask</span></tt> before running a job.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">username</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">When launchd is run as the root user, the user to run the job as.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">wait_for_debugger</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Specify if launchd has a job wait for a debugger to attach before executing code.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">watch_paths</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Array</p>
<p class="last">An array of paths which, if any are modified, will cause a job to be started.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">working_directory</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last"><tt class="docutils literal"><span class="pre">chdir</span></tt> to this directory, and then run the job.</p>
</dd>
</dl>
</div>
<div class="section" id="examples">
<h4>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h4>
<p><strong>Create a Launch Daemon from a cookbook file</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">launchd</span> <span class="s1">&#39;com.chef.every15&#39;</span> <span class="k">do</span>
  <span class="n">source</span> <span class="s1">&#39;com.chef.every15.plist&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Create a Launch Daemon using keys</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">launchd</span> <span class="s1">&#39;call.mom.weekly&#39;</span> <span class="k">do</span>
  <span class="n">program</span> <span class="s1">&#39;/Library/scripts/call_mom.sh&#39;</span>
  <span class="n">start_calendar_interval</span> <span class="s1">&#39;weekday&#39;</span> <span class="o">=&gt;</span> <span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;hourly&#39;</span> <span class="o">=&gt;</span> <span class="mi">10</span>
  <span class="n">time_out</span> <span class="mi">300</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Remove a Launch Daemon</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">launchd</span> <span class="s1">&#39;com.chef.every15&#39;</span> <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:delete</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="gem-metadata-rb">
<h3>gem, metadata.rb<a class="headerlink" href="#gem-metadata-rb" title="Permalink to this headline">¶</a></h3>
<p>Specifies a gem dependency to be installed via the <strong>chef_gem</strong> resource after all cookbooks are synchronized, but before any other cookbook loading is done. Use this attribute once per gem dependency. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">gem</span> <span class="s2">&quot;poise&quot;</span>
<span class="n">gem</span> <span class="s2">&quot;chef-sugar&quot;</span>
<span class="n">gem</span> <span class="s2">&quot;chef-provisioning&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="what-s-new-in-12-7">
<h2>What&#8217;s New in 12.7<a class="headerlink" href="#what-s-new-in-12-7" title="Permalink to this headline">¶</a></h2>
<p>The following items are new for chef-client 12.7 and/or are changes from previous versions. The short version:</p>
<ul class="simple">
<li><strong>Chef::REST =&gt; require &#8216;chef/rest&#8217;</strong> Internal API calls are moved from <tt class="docutils literal"><span class="pre">Chef::REST</span></tt> to <tt class="docutils literal"><span class="pre">Chef::ServerAPI</span></tt>. Any code that uses <tt class="docutils literal"><span class="pre">Chef::REST</span></tt> must use <tt class="docutils literal"><span class="pre">require</span> <span class="pre">'chef/rest'</span></tt>.</li>
<li><strong>New chocolatey_package resource</strong> Use the <strong>chocolatey_package</strong> resource to manage packages using Chocolatey for the Microsoft Windows platform.</li>
<li><strong>New osx_profile resource</strong> Use the <strong>osx_profile</strong> resource to manage configuration profiles (<tt class="docutils literal"><span class="pre">.mobileconfig</span></tt> files) on the Mac OS X platform.</li>
<li><strong>New apt_update resource</strong> Use the <strong>apt_update</strong> resource to manage Apt repository updates on Debian and Ubuntu platforms.</li>
<li><strong>Improved support for UTF-8</strong> The chef-client 12.7 release fixes a UTF-8 handling bug present in chef-client versions 12.4, 12.5, and 12.6.</li>
<li><strong>New options for the chef-client</strong> The chef-client has a new option: <tt class="docutils literal"><span class="pre">--delete-entire-chef-repo</span></tt>.</li>
<li><strong>Multi-package support for Chocolatey and Zypper</strong> A resource may specify multiple packages and/or versions for platforms that use Zypper or Chocolatey package managers (in addition to the existing support for specifying multiple packages for Yum and Apt packages).</li>
</ul>
<div class="section" id="chef-rest-require-chef-rest">
<h3>Chef::REST =&gt; require &#8216;chef/rest&#8217;<a class="headerlink" href="#chef-rest-require-chef-rest" title="Permalink to this headline">¶</a></h3>
<p>Internal API calls are moved from <tt class="docutils literal"><span class="pre">Chef::REST</span></tt> to <tt class="docutils literal"><span class="pre">Chef::ServerAPI</span></tt>. As a result of this move, <tt class="docutils literal"><span class="pre">Chef::REST</span></tt> is no longer globally required. Any code that uses <tt class="docutils literal"><span class="pre">Chef::REST</span></tt> must be required as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="nb">require</span> <span class="s1">&#39;chef/rest&#39;</span>
</pre></div>
</div>
<p>For code that is run using knife or chef command line interfaces, consider using <tt class="docutils literal"><span class="pre">Chef::ServerAPI</span></tt> instead.</p>
</div>
<div class="section" id="chocolatey-package">
<h3>chocolatey_package<a class="headerlink" href="#chocolatey-package" title="Permalink to this headline">¶</a></h3>
<p>Use the <strong>chocolatey_package</strong> resource to manage packages using Chocolatey for the Microsoft Windows platform.</p>
<div class="section" id="id7">
<h4>Syntax<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<p>A <strong>chocolatey_package</strong> resource block manages packages using Chocolatey for the Microsoft Windows platform. The simplest use of the <strong>chocolatey_package</strong> resource is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">chocolatey_package</span> <span class="s1">&#39;package_name&#39;</span>
</pre></div>
</div>
<p>which will install the named package using all of the default options and the default action (<tt class="docutils literal"><span class="pre">:install</span></tt>).</p>
<p>The full syntax for all of the properties that are available to the <strong>chocolatey_package</strong> resource is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">chocolatey_package</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
  <span class="n">notifies</span>                   <span class="c1"># see description</span>
  <span class="n">options</span>                    <span class="nb">String</span>
  <span class="n">package_name</span>               <span class="nb">String</span><span class="p">,</span> <span class="nb">Array</span> <span class="c1"># defaults to &#39;name&#39; if not specified</span>
  <span class="n">provider</span>                   <span class="no">Chef</span><span class="o">::</span><span class="no">Provider</span><span class="o">::</span><span class="no">Package</span><span class="o">::</span><span class="no">Chocolatey</span>
  <span class="n">source</span>                     <span class="nb">String</span>
  <span class="n">subscribes</span>                 <span class="c1"># see description</span>
  <span class="n">timeout</span>                    <span class="nb">String</span><span class="p">,</span> <span class="nb">Integer</span>
  <span class="n">version</span>                    <span class="nb">String</span><span class="p">,</span> <span class="nb">Array</span>
  <span class="n">action</span>                     <span class="no">Symbol</span> <span class="c1"># defaults to :install if not specified</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">chocolatey_package</span></tt> tells the chef-client to manage a package</li>
<li><tt class="docutils literal"><span class="pre">'name'</span></tt> is the name of the package</li>
<li><tt class="docutils literal"><span class="pre">action</span></tt> identifies which steps the chef-client will take to bring the node into the desired state</li>
<li><tt class="docutils literal"><span class="pre">options</span></tt>, <tt class="docutils literal"><span class="pre">package_name</span></tt>, <tt class="docutils literal"><span class="pre">provider</span></tt>, <tt class="docutils literal"><span class="pre">source</span></tt>, <tt class="docutils literal"><span class="pre">timeout</span></tt>, and <tt class="docutils literal"><span class="pre">version</span></tt> are properties of this resource, with the Ruby type shown. See &#8220;Properties&#8221; section below for more information about all of the properties that may be used with this resource.</li>
</ul>
</div>
<div class="section" id="id8">
<h4>Actions<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<p>This resource has the following actions:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:install</span></tt></dt>
<dd>Default. Install a package. If a version is specified, install the specified version of the package.</dd>
<dt><tt class="docutils literal"><span class="pre">:nothing</span></tt></dt>
<dd>Define this resource block to do nothing until notified by another resource to take action. When this resource is notified, this resource block is either run immediately or it is queued up to be run at the end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:purge</span></tt></dt>
<dd>Purge a package. This action typically removes the configuration files as well as the package.</dd>
<dt><tt class="docutils literal"><span class="pre">:reconfig</span></tt></dt>
<dd>Reconfigure a package. This action requires a response file.</dd>
<dt><tt class="docutils literal"><span class="pre">:remove</span></tt></dt>
<dd>Remove a package.</dd>
<dt><tt class="docutils literal"><span class="pre">:uninstall</span></tt></dt>
<dd>Uninstall a package.</dd>
<dt><tt class="docutils literal"><span class="pre">:upgrade</span></tt></dt>
<dd>Install a package and/or ensure that a package is the latest version.</dd>
</dl>
</div>
<div class="section" id="id9">
<h4>Properties<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<p>This resource has the following properties:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">ignore_failure</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Continue running a recipe if a resource fails for any reason. Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">notifies</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may notify another resource to take action when its state changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> that resource should take, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action. A resource may notifiy more than one resource; use a <tt class="docutils literal"><span class="pre">notifies</span></tt> statement for each resource to be notified.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">notifies</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">notifies</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">options</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">One (or more) additional options that are passed to the command.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">package_name</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> String, Array</p>
<p class="last">The name of the package. Default value: the <tt class="docutils literal"><span class="pre">name</span></tt> of the resource block See &#8220;Syntax&#8221; section above for more information.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">provider</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Chef Class</p>
<p class="last">Optional. Explicitly specifies a provider. See &#8220;Providers&#8221; section below for more information.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retries</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The number of times to catch exceptions and retry the resource. Default value: <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retry_delay</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The retry delay (in seconds). Default value: <tt class="docutils literal"><span class="pre">2</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">source</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">Optional. The path to a package in the local file system.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">subscribes</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> to be taken, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">subscribes</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">subscribes</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">timeout</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> String, Integer</p>
<p class="last">The amount of time (in seconds) to wait before timing out.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">version</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> String, Array</p>
<p class="last">The version of a package to be installed or upgraded.</p>
</dd>
</dl>
</div>
<div class="section" id="id10">
<h4>Examples<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h4>
<p><strong>Install a package</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">chocolatey_package</span> <span class="s1">&#39;name of package&#39;</span> <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:install</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="osx-profile">
<h3>osx_profile<a class="headerlink" href="#osx-profile" title="Permalink to this headline">¶</a></h3>
<p>Use the <strong>osx_profile</strong> resource to manage configuration profiles (<tt class="docutils literal"><span class="pre">.mobileconfig</span></tt> files) on the Mac OS X platform. The <strong>osx_profile</strong> resource installs profiles by using the <tt class="docutils literal"><span class="pre">uuidgen</span></tt> library to generate a unique <tt class="docutils literal"><span class="pre">ProfileUUID</span></tt>, and then using the <tt class="docutils literal"><span class="pre">profiles</span></tt> command to install the profile on the system.</p>
<div class="section" id="id11">
<h4>Syntax<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<p>A <strong>osx_profile</strong> resource block manages configuration profiles on the Mac OS X platform:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">osx_profile</span> <span class="s1">&#39;Install screensaver profile&#39;</span> <span class="k">do</span>
  <span class="n">profile</span> <span class="s1">&#39;com.company.screensaver.mobileconfig&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
<p>The full syntax for all of the properties that are available to the <strong>osx_profile</strong> resource is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">osx_profile</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
  <span class="n">path</span>                       <span class="c1"># set automatically</span>
  <span class="n">profile</span>                    <span class="nb">String</span><span class="p">,</span> <span class="no">Hash</span>
  <span class="n">profile_name</span>               <span class="nb">String</span> <span class="c1"># defaults to &#39;name&#39; if not specified</span>
  <span class="n">identifier</span>                 <span class="nb">String</span>
  <span class="n">action</span>                     <span class="no">Symbol</span> <span class="c1"># defaults to :install if not specified</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">osx_profile</span></tt> is the resource</li>
<li><tt class="docutils literal"><span class="pre">name</span></tt> is the name of the resource block</li>
<li><tt class="docutils literal"><span class="pre">action</span></tt> identifies the steps the chef-client will take to bring the node into the desired state</li>
<li><tt class="docutils literal"><span class="pre">profile</span></tt>, <tt class="docutils literal"><span class="pre">profile_name</span></tt>, and <tt class="docutils literal"><span class="pre">identifier</span></tt> are properties of this resource, with the Ruby type shown. See &#8220;Properties&#8221; section below for more information about all of the properties that may be used with this resource.</li>
</ul>
</div>
<div class="section" id="id12">
<h4>Actions<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h4>
<p>This resource has the following actions:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:install</span></tt></dt>
<dd>Default. Install the specified configuration profile.</dd>
<dt><tt class="docutils literal"><span class="pre">:nothing</span></tt></dt>
<dd><p class="first">Default. .. tag resources_common_actions_nothing</p>
<blockquote class="last">
<div>Define this resource block to do nothing until notified by another resource to take action. When this resource is notified, this resource block is either run immediately or it is queued up to be run at the end of the chef-client run.</div></blockquote>
</dd>
<dt><tt class="docutils literal"><span class="pre">:remove</span></tt></dt>
<dd>Remove the specified configuration profile.</dd>
</dl>
</div>
<div class="section" id="id13">
<h4>Properties<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h4>
<p>This resource has the following properties:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">identifier</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">Use to specify the identifier for the profile, such as <tt class="docutils literal"><span class="pre">com.company.screensaver</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">ignore_failure</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Continue running a recipe if a resource fails for any reason. Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">notifies</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may notify another resource to take action when its state changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> that resource should take, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action. A resource may notifiy more than one resource; use a <tt class="docutils literal"><span class="pre">notifies</span></tt> statement for each resource to be notified.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">notifies</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">notifies</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">profile</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> String, Hash</p>
<p class="last">Use to specify a profile. This may be the name of a profile contained in a cookbook or a Hash that contains the contents of the profile.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">profile_name</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">Use to specify the name of the profile, if different from the name of the resource block.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">provider</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Chef Class</p>
<p class="last">Optional. Explicitly specifies a provider.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retries</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The number of times to catch exceptions and retry the resource. Default value: <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retry_delay</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The retry delay (in seconds). Default value: <tt class="docutils literal"><span class="pre">2</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">subscribes</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> to be taken, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">subscribes</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">subscribes</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="id14">
<h4>Examples<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h4>
<p><strong>One liner to install profile from cookbook file</strong></p>
<p>The <tt class="docutils literal"><span class="pre">profiles</span></tt> command will be used to install the specified configuration profile.</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">osx_profile</span> <span class="s1">&#39;com.company.screensaver.mobileconfig&#39;</span>
</pre></div>
</div>
<p><strong>Install profile from cookbook file</strong></p>
<p>The <tt class="docutils literal"><span class="pre">profiles</span></tt> command will be used to install the specified configuration profile. It can be in sub-directory within a cookbook.</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">osx_profile</span> <span class="s1">&#39;Install screensaver profile&#39;</span> <span class="k">do</span>
  <span class="n">profile</span> <span class="s1">&#39;screensaver/com.company.screensaver.mobileconfig&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Install profile from a hash</strong></p>
<p>The <tt class="docutils literal"><span class="pre">profiles</span></tt> command will be used to install the configuration profile, which is provided as a hash.</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">profile_hash</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;PayloadIdentifier&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;com.company.screensaver&#39;</span><span class="p">,</span>
  <span class="s1">&#39;PayloadRemovalDisallowed&#39;</span> <span class="o">=&gt;</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s1">&#39;PayloadScope&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;System&#39;</span><span class="p">,</span>
  <span class="s1">&#39;PayloadType&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Configuration&#39;</span><span class="p">,</span>
  <span class="s1">&#39;PayloadUUID&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;1781fbec-3325-565f-9022-8aa28135c3cc&#39;</span><span class="p">,</span>
  <span class="s1">&#39;PayloadOrganization&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Chef&#39;</span><span class="p">,</span>
  <span class="s1">&#39;PayloadVersion&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s1">&#39;PayloadDisplayName&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Screensaver Settings&#39;</span><span class="p">,</span>
  <span class="s1">&#39;PayloadContent&#39;</span><span class="o">=&gt;</span> <span class="o">[</span>
    <span class="p">{</span>
      <span class="s1">&#39;PayloadType&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;com.apple.ManagedClient.preferences&#39;</span><span class="p">,</span>
      <span class="s1">&#39;PayloadVersion&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
      <span class="s1">&#39;PayloadIdentifier&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;com.company.screensaver&#39;</span><span class="p">,</span>
      <span class="s1">&#39;PayloadUUID&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;73fc30e0-1e57-0131-c32d-000c2944c108&#39;</span><span class="p">,</span>
      <span class="s1">&#39;PayloadEnabled&#39;</span> <span class="o">=&gt;</span> <span class="kp">true</span><span class="p">,</span>
      <span class="s1">&#39;PayloadDisplayName&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;com.apple.screensaver&#39;</span><span class="p">,</span>
      <span class="s1">&#39;PayloadContent&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="s1">&#39;com.apple.screensaver&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="s1">&#39;Forced&#39;</span> <span class="o">=&gt;</span> <span class="o">[</span>
            <span class="p">{</span>
              <span class="s1">&#39;mcx_preference_settings&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="s1">&#39;idleTime&#39;</span> <span class="o">=&gt;</span> <span class="mi">0</span><span class="p">,</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="o">]</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="o">]</span>
<span class="p">}</span>

<span class="n">osx_profile</span> <span class="s1">&#39;Install screensaver profile&#39;</span> <span class="k">do</span>
  <span class="n">profile</span> <span class="n">profile_hash</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Remove profile using identifier in resource name</strong></p>
<p>The <tt class="docutils literal"><span class="pre">profiles</span></tt> command will be used to remove the configuration profile specified by the provided <tt class="docutils literal"><span class="pre">identifier</span></tt> property.</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">osx_profile</span> <span class="s1">&#39;com.company.screensaver&#39;</span> <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:remove</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Remove profile by identifier and user friendly resource name</strong></p>
<p>The <tt class="docutils literal"><span class="pre">profiles</span></tt> command will be used to remove the configuration profile specified by the provided <tt class="docutils literal"><span class="pre">identifier</span></tt> property.</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">osx_profile</span> <span class="s1">&#39;Remove screensaver profile&#39;</span> <span class="k">do</span>
  <span class="n">identifier</span> <span class="s1">&#39;com.company.screensaver&#39;</span>
  <span class="n">action</span> <span class="ss">:remove</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="apt-update">
<h3>apt_update<a class="headerlink" href="#apt-update" title="Permalink to this headline">¶</a></h3>
<p>Use the <strong>apt_update</strong> resource to manage Apt repository updates on Debian and Ubuntu platforms.</p>
<div class="section" id="id15">
<h4>Syntax<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h4>
<p>A <strong>apt_update</strong> resource block defines the update frequency for Apt repositories:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">apt_update</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
  <span class="n">frequency</span>                  <span class="nb">Integer</span>
  <span class="n">action</span>                     <span class="no">Symbol</span> <span class="c1"># defaults to :periodic if not specified</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">apt_update</span></tt> is the resource</li>
<li><tt class="docutils literal"><span class="pre">name</span></tt> is the name of the resource block</li>
<li><tt class="docutils literal"><span class="pre">action</span></tt> identifies the steps the chef-client will take to bring the node into the desired state</li>
<li><tt class="docutils literal"><span class="pre">frequency</span></tt> is a property of this resource, with the Ruby type shown. See &#8220;Properties&#8221; section below for more information about all of the properties that may be used with this resource.</li>
</ul>
</div>
<div class="section" id="id16">
<h4>Actions<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h4>
<p>This resource has the following actions:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:nothing</span></tt></dt>
<dd>Define this resource block to do nothing until notified by another resource to take action. When this resource is notified, this resource block is either run immediately or it is queued up to be run at the end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:periodic</span></tt></dt>
<dd>Update the Apt repository at the interval specified by the <tt class="docutils literal"><span class="pre">frequency</span></tt> property.</dd>
<dt><tt class="docutils literal"><span class="pre">:update</span></tt></dt>
<dd>Update the Apt repository at the start of the chef-client run.</dd>
</dl>
</div>
<div class="section" id="id17">
<h4>Properties<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h4>
<p>This resource has the following properties:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">frequency</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The frequency at which Apt repository updates are made. Use this property when the <tt class="docutils literal"><span class="pre">:periodic</span></tt> action is specified. Default value: <tt class="docutils literal"><span class="pre">86400</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">ignore_failure</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Continue running a recipe if a resource fails for any reason. Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">notifies</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may notify another resource to take action when its state changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> that resource should take, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action. A resource may notifiy more than one resource; use a <tt class="docutils literal"><span class="pre">notifies</span></tt> statement for each resource to be notified.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">notifies</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">notifies</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">provider</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Chef Class</p>
<p class="last">Optional. Explicitly specifies a provider.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retries</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The number of times to catch exceptions and retry the resource. Default value: <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retry_delay</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The retry delay (in seconds). Default value: <tt class="docutils literal"><span class="pre">2</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">subscribes</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> to be taken, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">subscribes</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">subscribes</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="id18">
<h4>Examples<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h4>
<p><strong>Update the Apt repository at a specified interval</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">apt_update</span> <span class="s1">&#39;all platforms&#39;</span> <span class="k">do</span>
  <span class="n">frequency</span> <span class="mi">86400</span>
  <span class="n">action</span> <span class="ss">:periodic</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Update the Apt repository at the start of a chef-client run</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">apt_update</span> <span class="k">if</span> <span class="n">node</span><span class="o">[</span><span class="s1">&#39;platform_family&#39;</span><span class="o">]</span> <span class="o">==</span> <span class="s1">&#39;debian&#39;</span> <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:update</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="new-chef-client-options">
<h3>New chef-client options<a class="headerlink" href="#new-chef-client-options" title="Permalink to this headline">¶</a></h3>
<p>The chef-client has the following new options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--delete-entire-chef-repo</span></tt></dt>
<dd>Delete the entire chef-repo. This option may only be used when running the chef-client in local mode (<tt class="docutils literal"><span class="pre">--local-mode</span></tt>) mode. This options requires <tt class="docutils literal"><span class="pre">--recipe-url</span></tt> to be specified.</dd>
</dl>
</div>
</div>
<div class="section" id="what-s-new-in-12-6">
<h2>What&#8217;s New in 12.6<a class="headerlink" href="#what-s-new-in-12-6" title="Permalink to this headline">¶</a></h2>
<p>The following items are new for chef-client 12.6 and/or are changes from previous versions. The short version:</p>
<ul class="simple">
<li><strong>New timer for resource notifications</strong> Use the <tt class="docutils literal"><span class="pre">:before</span></tt> timer with the <tt class="docutils literal"><span class="pre">notifies</span></tt> and <tt class="docutils literal"><span class="pre">subscribes</span></tt> properties to specify that the action on a notified resource should be run before processing the resource block in which the notification is located.</li>
<li><strong>New ksh resource</strong> The <strong>ksh</strong> resource is added and is based on the <strong>script</strong> resource.</li>
<li><strong>New metadata.rb settings</strong> The metadata.rb file has settings for <tt class="docutils literal"><span class="pre">chef_version</span></tt> and <tt class="docutils literal"><span class="pre">ohai_version</span></tt> that allow ranges to be specified that declare the supported versions of the chef-client and Ohai.</li>
<li><strong>dsc_resource supports reboots</strong> The <strong>dsc_resource</strong> resource supports immediate and queued reboots. This uses the <strong>reboot</strong> resource and its <tt class="docutils literal"><span class="pre">:reboot_now</span></tt> or <tt class="docutils literal"><span class="pre">:request_reboot</span></tt> actions.</li>
<li><strong>New and changed knife bootstrap options</strong> The <tt class="docutils literal"><span class="pre">--identify-file</span></tt> option for the <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">bootstrap</span></tt> subcommand is renamed to <tt class="docutils literal"><span class="pre">--ssh-identity-file</span></tt>; the <tt class="docutils literal"><span class="pre">--sudo-preserve-home</span></tt> is new.</li>
<li><strong>New installer types for the windows_package resource</strong> The <strong>windows_package</strong> resource now supports the following installer types: <tt class="docutils literal"><span class="pre">:custom</span></tt>, Inno Setup (<tt class="docutils literal"><span class="pre">:inno</span></tt>), InstallShield (<tt class="docutils literal"><span class="pre">:installshield</span></tt>), Microsoft Installer Package (MSI) (<tt class="docutils literal"><span class="pre">:msi</span></tt>), Nullsoft Scriptable Install System (NSIS) (<tt class="docutils literal"><span class="pre">:nsis</span></tt>), Wise (<tt class="docutils literal"><span class="pre">:wise</span></tt>). Prior versions of Chef supported only <tt class="docutils literal"><span class="pre">:msi</span></tt>.</li>
<li><strong>dsc_resource resource may be run in non-disabled refresh mode</strong> The latest version of Windows Management Framework (WMF) 5 has relaxed the limitation that prevented the chef-client from running in non-disabled refresh mode. Requires Windows PowerShell 5.0.10586.0 or higher.</li>
<li><strong>dsc_script and dsc_resource resources may be in the same run-list</strong> The latest version of Windows Management Framework (WMF) 5 has relaxed the limitation that prevented the chef-client from running in non-disabled refresh mode, which allows the Local Configuration Manager to be set to <tt class="docutils literal"><span class="pre">Push</span></tt>. Requires Windows PowerShell 5.0.10586.0 or higher.</li>
<li><strong>New &#8211;profile-ruby option</strong> Use the <tt class="docutils literal"><span class="pre">--profile-ruby</span></tt> option to dump a (large) profiling graph into <tt class="docutils literal"><span class="pre">/var/chef/cache/graph_profile.out</span></tt>.</li>
<li><strong>New live_stream property for the execute resource</strong> Set the <tt class="docutils literal"><span class="pre">live_stream</span></tt> property to <tt class="docutils literal"><span class="pre">true</span></tt> to send the output of a command run by the <strong>execute</strong> resource to the chef-client event stream.</li>
</ul>
<div class="section" id="notification-timers">
<h3>Notification Timers<a class="headerlink" href="#notification-timers" title="Permalink to this headline">¶</a></h3>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
</div>
<div class="section" id="ksh">
<h3>ksh<a class="headerlink" href="#ksh" title="Permalink to this headline">¶</a></h3>
<p>Use the <strong>ksh</strong> resource to execute scripts using the Korn shell (ksh) interpreter. This resource may also use any of the actions and properties that are available to the <strong>execute</strong> resource. Commands that are executed with this resource are (by their nature) not idempotent, as they are typically unique to the environment in which they are run. Use <tt class="docutils literal"><span class="pre">not_if</span></tt> and <tt class="docutils literal"><span class="pre">only_if</span></tt> to guard this resource for idempotence.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <strong>ksh</strong> script resource (which is based on the <strong>script</strong> resource) is different from the <strong>ruby_block</strong> resource because Ruby code that is run with this resource is created as a temporary file and executed like other script resources, rather than run inline.</p>
</div>
<div class="section" id="id19">
<h4>Syntax<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h4>
<p>A <strong>ksh</strong> resource block executes scripts using ksh:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">ksh</span> <span class="s1">&#39;hello world&#39;</span> <span class="k">do</span>
  <span class="n">code</span> <span class="o">&lt;&lt;-</span><span class="no">EOH</span>
<span class="sh">    echo &quot;Hello world!&quot;</span>
<span class="sh">    echo &quot;Current directory: &quot; $cwd</span>
<span class="no">    EOH</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">code</span></tt> specifies the command to run</li>
</ul>
<p>The full syntax for all of the properties that are available to the <strong>ksh</strong> resource is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">ksh</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
  <span class="n">code</span>                       <span class="nb">String</span>
  <span class="n">creates</span>                    <span class="nb">String</span>
  <span class="n">cwd</span>                        <span class="nb">String</span>
  <span class="n">environment</span>                <span class="no">Hash</span>
  <span class="n">flags</span>                      <span class="nb">String</span>
  <span class="n">group</span>                      <span class="nb">String</span><span class="p">,</span> <span class="nb">Integer</span>
  <span class="n">notifies</span>                   <span class="c1"># see description</span>
  <span class="n">path</span>                       <span class="nb">Array</span>
  <span class="n">provider</span>                   <span class="no">Chef</span><span class="o">::</span><span class="no">Provider</span><span class="o">::</span><span class="no">Script</span><span class="o">::</span><span class="no">Ksh</span>
  <span class="n">returns</span>                    <span class="nb">Integer</span><span class="p">,</span> <span class="nb">Array</span>
  <span class="n">subscribes</span>                 <span class="c1"># see description</span>
  <span class="n">timeout</span>                    <span class="nb">Integer</span><span class="p">,</span> <span class="nb">Float</span>
  <span class="n">user</span>                       <span class="nb">String</span><span class="p">,</span> <span class="nb">Integer</span>
  <span class="n">umask</span>                      <span class="nb">String</span><span class="p">,</span> <span class="nb">Integer</span>
  <span class="n">action</span>                     <span class="no">Symbol</span> <span class="c1"># defaults to :run if not specified</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">ksh</span></tt> is the resource</li>
<li><tt class="docutils literal"><span class="pre">name</span></tt> is the name of the resource block</li>
<li><tt class="docutils literal"><span class="pre">action</span></tt> identifies the steps the chef-client will take to bring the node into the desired state</li>
<li><tt class="docutils literal"><span class="pre">code</span></tt>, <tt class="docutils literal"><span class="pre">creates</span></tt>, <tt class="docutils literal"><span class="pre">cwd</span></tt>, <tt class="docutils literal"><span class="pre">environment</span></tt>, <tt class="docutils literal"><span class="pre">flags</span></tt>, <tt class="docutils literal"><span class="pre">group</span></tt>, <tt class="docutils literal"><span class="pre">path</span></tt>, <tt class="docutils literal"><span class="pre">provider</span></tt>, <tt class="docutils literal"><span class="pre">returns</span></tt>, <tt class="docutils literal"><span class="pre">timeout</span></tt>, <tt class="docutils literal"><span class="pre">user</span></tt>, and <tt class="docutils literal"><span class="pre">umask</span></tt> are properties of this resource, with the Ruby type shown. See &#8220;Properties&#8221; section below for more information about all of the properties that may be used with this resource.</li>
</ul>
</div>
<div class="section" id="id20">
<h4>Actions<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h4>
<p>This resource has the following actions:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:nothing</span></tt></dt>
<dd>Prevent a command from running. This action is used to specify that a command is run only when another resource notifies it.</dd>
<dt><tt class="docutils literal"><span class="pre">:run</span></tt></dt>
<dd>Default. Run a script.</dd>
</dl>
</div>
<div class="section" id="id21">
<h4>Properties<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h4>
<p>This resource has the following properties:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">code</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">A quoted (&#8221; &#8221;) string of code to be executed.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">creates</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">Prevent a command from creating a file when that file already exists.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">cwd</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The current working directory.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">environment</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Hash</p>
<p class="last">A Hash of environment variables in the form of <tt class="docutils literal"><span class="pre">({&quot;ENV_VARIABLE&quot;</span> <span class="pre">=&gt;</span> <span class="pre">&quot;VALUE&quot;})</span></tt>. (These variables must exist for a command to be run successfully.)</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">flags</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">One or more command line flags that are passed to the interpreter when a command is invoked.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">group</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> String, Integer</p>
<p class="last">The group name or group ID that must be changed before running a command.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">ignore_failure</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Continue running a recipe if a resource fails for any reason. Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">notifies</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may notify another resource to take action when its state changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> that resource should take, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action. A resource may notifiy more than one resource; use a <tt class="docutils literal"><span class="pre">notifies</span></tt> statement for each resource to be notified.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">notifies</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">notifies</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">path</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Array</p>
<p>An array of paths to use when searching for a command. These paths are not added to the command&#8217;s environment $PATH. The default value uses the system path.</p>
<div class="last admonition warning">
<p class="first admonition-title">Warning</p>
<p>For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">ksh</span> <span class="s1">&#39;mycommand&#39;</span> <span class="k">do</span>
  <span class="n">environment</span> <span class="s1">&#39;PATH&#39;</span> <span class="o">=&gt;</span> <span class="s2">&quot;/my/path/to/bin:</span><span class="si">#{</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;PATH&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">provider</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Chef Class</p>
<p class="last">Optional. Explicitly specifies a provider. See &#8220;Providers&#8221; section below for more information.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retries</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The number of times to catch exceptions and retry the resource. Default value: <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retry_delay</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The retry delay (in seconds). Default value: <tt class="docutils literal"><span class="pre">2</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">returns</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> Integer, Array</p>
<p class="last">The return value for a command. This may be an array of accepted values. An exception is raised when the return value(s) do not match. Default value: <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">subscribes</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> to be taken, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:before</span></tt></dt>
<dd>Specifies that the action on a notified resource should be run before processing the resource block in which the notification is located.</dd>
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">subscribes</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">subscribes</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">timeout</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> Integer, Float</p>
<p class="last">The amount of time (in seconds) a command is to wait before timing out. Default value: <tt class="docutils literal"><span class="pre">3600</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">user</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> String, Integer</p>
<p class="last">The user name or user ID that should be changed before running a command.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">umask</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> String, Integer</p>
<p class="last">The file mode creation mask, or umask.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="changes-for-powershell-5-0-10586-0">
<h3>Changes for PowerShell 5.0.10586.0<a class="headerlink" href="#changes-for-powershell-5-0-10586-0" title="Permalink to this headline">¶</a></h3>
<p>Using the <strong>dsc_resource</strong> has the following requirements:</p>
<ul>
<li><p class="first">Windows Management Framework (WMF) 5.0 February Preview (or higher), which includes Windows PowerShell 5.0.10018.0 (or higher).</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">RefreshMode</span></tt> configuration setting in the Local Configuration Manager must be set to <tt class="docutils literal"><span class="pre">Disabled</span></tt>.</p>
<p><strong>NOTE:</strong> Starting with the chef-client 12.6 release, this requirement applies only for versions of Windows PowerShell earlier than 5.0.10586.0. The latest version of Windows Management Framework (WMF) 5 has relaxed the limitation that prevented the chef-client from running in non-disabled refresh mode.</p>
</li>
<li><p class="first">The <strong>dsc_script</strong> resource  may not be used in the same run-list with the <strong>dsc_resource</strong>. This is because the <strong>dsc_script</strong> resource requires that <tt class="docutils literal"><span class="pre">RefreshMode</span></tt> in the Local Configuration Manager be set to <tt class="docutils literal"><span class="pre">Push</span></tt>, whereas the <strong>dsc_resource</strong> resource requires it to be set to <tt class="docutils literal"><span class="pre">Disabled</span></tt>.</p>
<p><strong>NOTE:</strong> Starting with the chef-client 12.6 release, this requirement applies only for versions of Windows PowerShell earlier than 5.0.10586.0. The latest version of Windows Management Framework (WMF) 5 has relaxed the limitation that prevented the chef-client from running in non-disabled refresh mode, which allows the Local Configuration Manager to be set to <tt class="docutils literal"><span class="pre">Push</span></tt>.</p>
</li>
<li><p class="first">The <strong>dsc_resource</strong> resource can only use binary- or script-based resources. Composite DSC resources may not be used.</p>
<p>This is because composite resources aren&#8217;t &#8220;real&#8221; resources from the perspective of the the Local Configuration Manager (LCM). Composite resources are used by the &#8220;configuration&#8221; keyword from the <tt class="docutils literal"><span class="pre">PSDesiredStateConfiguration</span></tt> module, and then evaluated in that context. When using DSC to create the configuration document (the Managed Object Framework (MOF) file) from the configuration command, the composite resource is evaluated. Any individual resources from that composite resource are written into the Managed Object Framework (MOF) document. As far as the Local Configuration Manager (LCM) is concerned, there is no such thing as a composite resource. Unless that changes, the <strong>dsc_resource</strong> resource and/or <tt class="docutils literal"><span class="pre">Invoke-DscResource</span></tt> command cannot directly use them.</p>
</li>
</ul>
</div>
<div class="section" id="new-metadata-rb-settings">
<h3>New metadata.rb Settings<a class="headerlink" href="#new-metadata-rb-settings" title="Permalink to this headline">¶</a></h3>
<p>The following settings are new for metadata.rb:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Setting</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">chef_version</span></tt></td>
<td><p class="first">A range of chef-client versions that are supported by this cookbook.</p>
<p>For example, to match any 12.x version of the chef-client, but not 11.x or 13.x:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">chef_version</span> <span class="s2">&quot;~&gt; 12&quot;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">ohai_version</span></tt></td>
<td><p class="first">A range of chef-client versions that are supported by this cookbook.</p>
<p>For example, to match any 8.x version of Ohai, but not 7.x or 9.x:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">ohai_version</span> <span class="s2">&quot;~&gt; 8&quot;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These settings are not visible in Chef Supermarket.</p>
</div>
</div>
<div class="section" id="knife-bootstrap-options">
<h3>knife bootstrap Options<a class="headerlink" href="#knife-bootstrap-options" title="Permalink to this headline">¶</a></h3>
<p>The following option is new for <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">bootstrap</span></tt>:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--sudo-preserve-home</span></tt></dt>
<dd>Use to preserve the non-root user&#8217;s <tt class="docutils literal"><span class="pre">HOME</span></tt> environment.</dd>
</dl>
<p>The <tt class="docutils literal"><span class="pre">--identify-file</span></tt> option is now <tt class="docutils literal"><span class="pre">--ssh-identify-file</span></tt>.</p>
</div>
<div class="section" id="profile-ruby-option">
<h3>&#8211;profile-ruby Option<a class="headerlink" href="#profile-ruby-option" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">--profile-ruby</span></tt> option to dump a (large) profiling graph into <tt class="docutils literal"><span class="pre">/var/chef/cache/graph_profile.out</span></tt>. Use the graph output to help identify, and then resolve performance bottlenecks in a chef-client run. This option:</p>
<ul class="simple">
<li>Generates a large amount of data about the chef-client run</li>
<li>Has a dependency on the <tt class="docutils literal"><span class="pre">ruby-prof</span></tt> gem, which is packaged as part of Chef and the Chef development kit</li>
<li>Increases the amount of time required to complete the chef-client run</li>
<li>Should not be used in a production environment</li>
</ul>
</div>
</div>
<div class="section" id="what-s-new-in-12-5">
<h2>What&#8217;s New in 12.5<a class="headerlink" href="#what-s-new-in-12-5" title="Permalink to this headline">¶</a></h2>
<p>The following items are new for chef-client 12.5 and/or are changes from previous versions. The short version:</p>
<ul class="simple">
<li><strong>New way to build custom resources</strong> The process for extending the collection of resources that are built into Chef has been simplified. It is defined only in the <tt class="docutils literal"><span class="pre">/resources</span></tt> directory using a simplified syntax that easily leverages the built-in collection of resources. (All of the ways you used to build custom resources still work.)</li>
<li><strong>&#8220;resource attributes&#8221; are now known as &#8220;resource properties&#8221;</strong> In previous releases of Chef, resource properties are referred to as attributes, but this is confusing for users because nodes also have attributes. Starting with chef-client 12.5 release&#8212;and retroactively updated for all previous releases of the documentation&#8212;&#8221;resource attributes&#8221; are now referred to as &#8220;resource properties&#8221; and the word &#8220;attribute&#8221; now refers specifically to &#8220;node attributes&#8221;.</li>
<li><strong>ps_credential helper to embed usernames and passwords</strong> Use the <tt class="docutils literal"><span class="pre">ps_credential</span></tt> helper on Microsoft Windows to create a <tt class="docutils literal"><span class="pre">PSCredential</span></tt> object&#8212;security credentials, such as a user name or password&#8212;that can be used in the <strong>dsc_script</strong> resource.</li>
<li><strong>New Handler DSL</strong> A new DSL exists to make it easier to use events that occur during the chef-client run from recipes. The <tt class="docutils literal"><span class="pre">on</span></tt> method is easily associated with events. The action the chef-client takes as a result of that event (when it occurs) is up to you.</li>
<li><strong>The -j / &#8211;json-attributes supports policy revisions and environments</strong> The JSON file used by the <tt class="docutils literal"><span class="pre">--json-attributes</span></tt> option for the chef-client may now contain the policy name and policy group associated with a policy revision or may contain the name of the environment to which the node is associated.</li>
<li><strong>verify property now uses path, not file</strong> The <tt class="docutils literal"><span class="pre">verify</span></tt> property, used by file-based resources such as <strong>remote_file</strong> and <strong>file</strong>, runs user-defined correctness checks against the proposed new file before making the change. For versions of the chef-client prior to 12.5, the name of the temporary file was stored as <tt class="docutils literal"><span class="pre">file</span></tt>; starting with chef-client 12.5, use <tt class="docutils literal"><span class="pre">path</span></tt>. This change is documented as a warning across all versions in any topic in which the <tt class="docutils literal"><span class="pre">version</span></tt> attribute is documented.</li>
<li><strong>depth property added to deploy resource</strong> The <tt class="docutils literal"><span class="pre">depth</span></tt> property allows the depth of a git repository to be truncated to the specified number of versions.</li>
<li><strong>The knife ssl check subcommand supports SNI</strong> Support for Server Name Indication (SNI) is added to the <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">ssl</span> <span class="pre">check</span></tt> subcommand.</li>
<li><strong>Chef Policy group and name can now be part of the node object</strong> Chef policy is a beta feature of the chef-client that will eventually replace roles, environments or manually specifying the run_list. Policy group and name can now be stored as part of the node object rather than in the client.rb file. A recent version of the Chef server, such as 12.2.0 or higher, is needed to fully utilize this feature.</li>
</ul>
<div class="section" id="custom-resources">
<h3>Custom Resources<a class="headerlink" href="#custom-resources" title="Permalink to this headline">¶</a></h3>
<p>A custom resource:</p>
<ul class="simple">
<li>Is a simple extension of Chef that adds your own resources</li>
<li>Is implemented and shipped as part of a cookbook</li>
<li>Follows easy, repeatable syntax patterns</li>
<li>Effectively leverages resources that are built into Chef and/or custom Ruby code</li>
<li>Is reusable in the same way as resources that are built into Chef</li>
</ul>
<p>For example, Chef includes built-in resources to manage files, packages, templates, and services, but it does not include a resource that manages websites.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">See <a class="reference external" href="https://docs.chef.io/custom_resources.html">https://docs.chef.io/custom_resources.html</a> for more information about custom resources, including a scenario that shows how to build a <tt class="docutils literal"><span class="pre">website</span></tt> resource.</p>
</div>
<div class="section" id="id22">
<h4>Syntax<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h4>
<p>A custom resource is defined as a Ruby file and is located in a cookbook&#8217;s <tt class="docutils literal"><span class="pre">/resources</span></tt> directory. This file</p>
<ul class="simple">
<li>Declares the properties of the custom resource</li>
<li>Loads current properties, if the resource already exists</li>
<li>Defines each action the custom resource may take</li>
</ul>
<p>The syntax for a custom resource is. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">property</span> <span class="ss">:name</span><span class="p">,</span> <span class="no">RubyType</span><span class="p">,</span> <span class="ss">default</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span>

<span class="n">load_current_value</span> <span class="k">do</span>
  <span class="c1"># some Ruby</span>
<span class="k">end</span>

<span class="n">action</span> <span class="ss">:name</span> <span class="k">do</span>
 <span class="c1"># a mix of built-in Chef resources and Ruby</span>
<span class="k">end</span>

<span class="n">action</span> <span class="ss">:name</span> <span class="k">do</span>
 <span class="c1"># a mix of built-in Chef resources and Ruby</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where the first action listed is the default action.</p>
<p>For example, the <tt class="docutils literal"><span class="pre">site.rb</span></tt> file in the <tt class="docutils literal"><span class="pre">exampleco</span></tt> cookbook could be similar to:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">property</span> <span class="ss">:homepage</span><span class="p">,</span> <span class="nb">String</span><span class="p">,</span> <span class="ss">default</span><span class="p">:</span> <span class="s1">&#39;&lt;h1&gt;Hello world!&lt;/h1&gt;&#39;</span>

<span class="n">load_current_value</span> <span class="k">do</span>
  <span class="k">if</span> <span class="o">::</span><span class="no">File</span><span class="o">.</span><span class="n">exist?</span><span class="p">(</span><span class="s1">&#39;/var/www/html/index.html&#39;</span><span class="p">)</span>
    <span class="n">homepage</span> <span class="no">IO</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;/var/www/html/index.html&#39;</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">action</span> <span class="ss">:create</span> <span class="k">do</span>
  <span class="n">package</span> <span class="s1">&#39;httpd&#39;</span>

  <span class="n">service</span> <span class="s1">&#39;httpd&#39;</span> <span class="k">do</span>
    <span class="n">action</span> <span class="o">[</span><span class="ss">:enable</span><span class="p">,</span> <span class="ss">:start</span><span class="o">]</span>
  <span class="k">end</span>

  <span class="n">file</span> <span class="s1">&#39;/var/www/html/index.html&#39;</span> <span class="k">do</span>
    <span class="n">content</span> <span class="n">homepage</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">action</span> <span class="ss">:delete</span> <span class="k">do</span>
  <span class="n">package</span> <span class="s1">&#39;httpd&#39;</span> <span class="k">do</span>
    <span class="n">action</span> <span class="ss">:delete</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">homepage</span></tt> is a property that sets the default HTML for the <tt class="docutils literal"><span class="pre">index.html</span></tt> file with a default value of <tt class="docutils literal"><span class="pre">'&lt;h1&gt;Hello</span> <span class="pre">world!&lt;/h1&gt;'</span></tt></li>
<li>the (optional) <tt class="docutils literal"><span class="pre">load_current_value</span></tt> block loads the current values for all specified properties, in this example there is just a single property: <tt class="docutils literal"><span class="pre">homepage</span></tt></li>
<li>the <tt class="docutils literal"><span class="pre">if</span></tt> statement checks to see if the <tt class="docutils literal"><span class="pre">index.html</span></tt> file is already present on the node. If that file is already present, its contents are loaded <strong>instead</strong> of the default value for <tt class="docutils literal"><span class="pre">homepage</span></tt></li>
<li>the <tt class="docutils literal"><span class="pre">action</span></tt> block uses the built-in collection of resources to tell the chef-client how to install Apache, start the service, and then create the contents of the file located at <tt class="docutils literal"><span class="pre">/var/www/html/index.html</span></tt></li>
<li><tt class="docutils literal"><span class="pre">action</span> <span class="pre">:create</span></tt> is the default resource; <tt class="docutils literal"><span class="pre">action</span> <span class="pre">:delete</span></tt> must be called specifically (because it is not the default resource)</li>
</ul>
<p>Once built, the custom resource may be used in a recipe just like the any of the resources that are built into Chef. The resource gets its name from the cookbook and from the file name in the <tt class="docutils literal"><span class="pre">/resources</span></tt> directory, with an underscore (<tt class="docutils literal"><span class="pre">_</span></tt>) separating them. For example, a cookbook named <tt class="docutils literal"><span class="pre">exampleco</span></tt> with a custom resource named <tt class="docutils literal"><span class="pre">site.rb</span></tt> is used in a recipe like this:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">exampleco_site</span> <span class="s1">&#39;httpd&#39;</span> <span class="k">do</span>
  <span class="n">homepage</span> <span class="s1">&#39;&lt;h1&gt;Welcome to the Example Co. website!&lt;/h1&gt;&#39;</span>
  <span class="n">action</span> <span class="ss">:create</span>
<span class="k">end</span>
</pre></div>
</div>
<p>and to delete the exampleco website, do the following:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">exampleco_site</span> <span class="s1">&#39;httpd&#39;</span> <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:delete</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="custom-resource-dsl">
<h3>Custom Resource DSL<a class="headerlink" href="#custom-resource-dsl" title="Permalink to this headline">¶</a></h3>
<p>Use the Custom Resource DSL to define property behaviors within custom resources, such as:</p>
<ul class="simple">
<li>Loading the value of a specific property</li>
<li>Comparing the current property value against a desired property value</li>
<li>Telling the chef-client when and how to make changes</li>
</ul>
<div class="section" id="action-class">
<h4>action_class<a class="headerlink" href="#action-class" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">action_class</span></tt> block to make methods available to the actions in the custom resource.  Modules with helper methods created as files in the cookbook library directory may be included. New action methods may also be defined directly in the <tt class="docutils literal"><span class="pre">action_class</span></tt> block.  Code in the <tt class="docutils literal"><span class="pre">action_class</span></tt> block has access to the new_resource properties.</p>
<p>Assume a helper module has been created in the cookbook <tt class="docutils literal"><span class="pre">libraries/helper.rb</span></tt> file.</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="k">module</span> <span class="nn">Sample</span>
  <span class="k">module</span> <span class="nn">Helper</span>
    <span class="k">def</span> <span class="nf">helper_method</span>
      <span class="c1"># code</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>Methods may be made available to the custom resource actions by using an <tt class="docutils literal"><span class="pre">action_class</span></tt> block.</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">property</span> <span class="n">file</span><span class="p">,</span> <span class="nb">String</span>

<span class="n">action_class</span> <span class="k">do</span>

  <span class="k">def</span> <span class="nf">file_exist</span>
    <span class="o">::</span><span class="no">File</span><span class="o">.</span><span class="n">exist?</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">file_ex</span>
    <span class="o">::</span><span class="no">File</span><span class="o">.</span><span class="n">exist?</span><span class="p">(</span><span class="n">new_resource</span><span class="o">.</span><span class="n">file</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="nb">require</span> <span class="s1">&#39;fileutils&#39;</span>

  <span class="kp">include</span> <span class="no">Sample</span><span class="o">::</span><span class="no">Helper</span>

<span class="k">end</span>

<span class="n">action</span> <span class="ss">:delete</span> <span class="k">do</span>
  <span class="n">helper_method</span>
  <span class="no">FileUtils</span><span class="o">.</span><span class="n">rm</span><span class="p">(</span><span class="n">file</span><span class="p">)</span> <span class="k">if</span> <span class="n">file_ex</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="section" id="converge-if-changed">
<h4>converge_if_changed<a class="headerlink" href="#converge-if-changed" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">converge_if_changed</span></tt> method inside an <tt class="docutils literal"><span class="pre">action</span></tt> block in a custom resource to compare the desired property values against the current property values (as loaded by the <tt class="docutils literal"><span class="pre">load_current_value</span></tt> method). Use the <tt class="docutils literal"><span class="pre">converge_if_changed</span></tt> method to ensure that updates only occur when property values on the system are not the desired property values and to otherwise prevent a resource from being converged.</p>
<p>To use the <tt class="docutils literal"><span class="pre">converge_if_changed</span></tt> method, wrap it around the part of a recipe or custom resource that should only be converged when the current state is not the desired state:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">action</span> <span class="ss">:some_action</span> <span class="k">do</span>

  <span class="n">converge_if_changed</span> <span class="k">do</span>
    <span class="c1"># some property</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div>
</div>
<p>For example, a custom resource defines two properties (<tt class="docutils literal"><span class="pre">content</span></tt> and <tt class="docutils literal"><span class="pre">path</span></tt>) and a single action (<tt class="docutils literal"><span class="pre">:create</span></tt>). Use the <tt class="docutils literal"><span class="pre">load_current_value</span></tt> method to load the property value to be compared, and then use the <tt class="docutils literal"><span class="pre">converge_if_changed</span></tt> method to tell the chef-client what to do if that value is not the desired value:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">property</span> <span class="ss">:content</span><span class="p">,</span> <span class="nb">String</span>
<span class="n">property</span> <span class="ss">:path</span><span class="p">,</span> <span class="nb">String</span><span class="p">,</span> <span class="ss">name_property</span><span class="p">:</span> <span class="kp">true</span>

<span class="n">load_current_value</span> <span class="k">do</span>
  <span class="k">if</span> <span class="o">::</span><span class="no">File</span><span class="o">.</span><span class="n">exist?</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="n">content</span> <span class="no">IO</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">action</span> <span class="ss">:create</span> <span class="k">do</span>
  <span class="n">converge_if_changed</span> <span class="k">do</span>
    <span class="no">IO</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>When the file does not exist, the <tt class="docutils literal"><span class="pre">IO.write(path,</span> <span class="pre">content)</span></tt> code is executed and the chef-client output will print something similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>Recipe: recipe_name::block
  * resource_name<span class="o">[</span>blah<span class="o">]</span> action create
    - update my_file<span class="o">[</span>blah<span class="o">]</span>
    -   <span class="nb">set</span> content to <span class="s2">&quot;hola mundo&quot;</span> <span class="o">(</span>was <span class="s2">&quot;hello world&quot;</span><span class="o">)</span>
</pre></div>
</div>
<div class="section" id="multiple-properties">
<h5>Multiple Properties<a class="headerlink" href="#multiple-properties" title="Permalink to this headline">¶</a></h5>
<p>The <tt class="docutils literal"><span class="pre">converge_if_changed</span></tt> method may be used multiple times. The following example shows how to use the <tt class="docutils literal"><span class="pre">converge_if_changed</span></tt> method to compare the multiple desired property values against the current property values (as loaded by the <tt class="docutils literal"><span class="pre">load_current_value</span></tt> method).</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">property</span> <span class="ss">:path</span><span class="p">,</span> <span class="nb">String</span><span class="p">,</span> <span class="ss">name_property</span><span class="p">:</span> <span class="kp">true</span>
<span class="n">property</span> <span class="ss">:content</span><span class="p">,</span> <span class="nb">String</span>
<span class="n">property</span> <span class="ss">:mode</span><span class="p">,</span> <span class="nb">String</span>

<span class="n">load_current_value</span> <span class="k">do</span>
  <span class="k">if</span> <span class="o">::</span><span class="no">File</span><span class="o">.</span><span class="n">exist?</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="n">content</span> <span class="no">IO</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="n">mode</span> <span class="o">::</span><span class="no">File</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">mode</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">action</span> <span class="ss">:create</span> <span class="k">do</span>
  <span class="n">converge_if_changed</span> <span class="ss">:content</span> <span class="k">do</span>
    <span class="no">IO</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>
  <span class="k">end</span>
  <span class="n">converge_if_changed</span> <span class="ss">:mode</span> <span class="k">do</span>
    <span class="o">::</span><span class="no">File</span><span class="o">.</span><span class="n">chmod</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">load_current_value</span></tt> loads the property values for both <tt class="docutils literal"><span class="pre">content</span></tt> and <tt class="docutils literal"><span class="pre">mode</span></tt></li>
<li>A <tt class="docutils literal"><span class="pre">converge_if_changed</span></tt> block tests only <tt class="docutils literal"><span class="pre">content</span></tt></li>
<li>A <tt class="docutils literal"><span class="pre">converge_if_changed</span></tt> block tests only <tt class="docutils literal"><span class="pre">mode</span></tt></li>
</ul>
<p>The chef-client will only update the property values that require updates and will not make changes when the property values are already in the desired state</p>
</div>
</div>
<div class="section" id="default-action">
<h4>default_action<a class="headerlink" href="#default-action" title="Permalink to this headline">¶</a></h4>
<p>The default action in a custom resource is, by default, the first action listed in the custom resource. For example, action <tt class="docutils literal"><span class="pre">aaaaa</span></tt> is the default resource:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">property</span> <span class="ss">:name</span><span class="p">,</span> <span class="no">RubyType</span><span class="p">,</span> <span class="ss">default</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span>

<span class="o">...</span>

<span class="n">action</span> <span class="ss">:aaaaa</span> <span class="k">do</span>
 <span class="c1"># the first action listed in the custom resource</span>
<span class="k">end</span>

<span class="n">action</span> <span class="ss">:bbbbb</span> <span class="k">do</span>
 <span class="c1"># the second action listed in the custom resource</span>
<span class="k">end</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">default_action</span></tt> method may also be used to specify the default action. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">property</span> <span class="ss">:name</span><span class="p">,</span> <span class="no">RubyType</span><span class="p">,</span> <span class="ss">default</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span>

<span class="n">default_action</span> <span class="ss">:aaaaa</span>

<span class="n">action</span> <span class="ss">:aaaaa</span> <span class="k">do</span>
 <span class="c1"># the first action listed in the custom resource</span>
<span class="k">end</span>

<span class="n">action</span> <span class="ss">:bbbbb</span> <span class="k">do</span>
 <span class="c1"># the second action listed in the custom resource</span>
<span class="k">end</span>
</pre></div>
</div>
<p>defines action <tt class="docutils literal"><span class="pre">aaaaa</span></tt> as the default action. If <tt class="docutils literal"><span class="pre">default_action</span> <span class="pre">:bbbbb</span></tt> is specified, then action <tt class="docutils literal"><span class="pre">bbbbb</span></tt> is the default action. Use this method for clarity in custom resources, if deliberately stating the default resource is desired, or to specify a default action that is not listed first in the custom resource.</p>
</div>
<div class="section" id="load-current-value">
<h4>load_current_value<a class="headerlink" href="#load-current-value" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">load_current_value</span></tt> method to load the specified property values from the node, and then use those values when the resource is converged. This method may take a block argument.</p>
<p>Use the <tt class="docutils literal"><span class="pre">load_current_value</span></tt> method to guard against property values being replaced. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">action</span> <span class="ss">:some_action</span> <span class="k">do</span>

  <span class="n">load_current_value</span> <span class="k">do</span>
    <span class="k">if</span> <span class="o">::</span><span class="no">File</span><span class="o">.</span><span class="n">exist?</span><span class="p">(</span><span class="s1">&#39;/var/www/html/index.html&#39;</span><span class="p">)</span>
      <span class="n">homepage</span> <span class="no">IO</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;/var/www/html/index.html&#39;</span><span class="p">)</span>
    <span class="k">end</span>
    <span class="k">if</span> <span class="o">::</span><span class="no">File</span><span class="o">.</span><span class="n">exist?</span><span class="p">(</span><span class="s1">&#39;/var/www/html/404.html&#39;</span><span class="p">)</span>
      <span class="n">page_not_found</span> <span class="no">IO</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;/var/www/html/404.html&#39;</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div>
</div>
<p>This ensures the values for <tt class="docutils literal"><span class="pre">homepage</span></tt> and <tt class="docutils literal"><span class="pre">page_not_found</span></tt> are not changed to the default values when the chef-client configures the node.</p>
</div>
<div class="section" id="new-resource-property">
<h4>new_resource.property<a class="headerlink" href="#new-resource-property" title="Permalink to this headline">¶</a></h4>
<p>Custom resources are designed to use core resources that are built into Chef. In some cases, it may be necessary to specify a property in the custom resource that is the same as a property in a core resource, for the purpose of overriding that property when used with the custom resource. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">resource_name</span> <span class="ss">:node_execute</span>

<span class="n">property</span> <span class="ss">:command</span><span class="p">,</span> <span class="nb">String</span><span class="p">,</span> <span class="ss">name_property</span><span class="p">:</span> <span class="kp">true</span>
<span class="n">property</span> <span class="ss">:version</span><span class="p">,</span> <span class="nb">String</span>

<span class="c1"># Useful properties from the `execute` resource</span>
<span class="n">property</span> <span class="ss">:cwd</span><span class="p">,</span> <span class="nb">String</span>
<span class="n">property</span> <span class="ss">:environment</span><span class="p">,</span> <span class="no">Hash</span><span class="p">,</span> <span class="ss">default</span><span class="p">:</span> <span class="p">{}</span>
<span class="n">property</span> <span class="ss">:user</span><span class="p">,</span> <span class="o">[</span><span class="nb">String</span><span class="p">,</span> <span class="nb">Integer</span><span class="o">]</span>
<span class="n">property</span> <span class="ss">:sensitive</span><span class="p">,</span> <span class="o">[</span><span class="no">TrueClass</span><span class="p">,</span> <span class="no">FalseClass</span><span class="o">]</span><span class="p">,</span> <span class="ss">default</span><span class="p">:</span> <span class="kp">false</span>

<span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;/opt/languages/node&#39;</span>

<span class="n">load_current_value</span> <span class="k">do</span>
  <span class="n">current_value_does_not_exist!</span> <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">run_state</span><span class="o">[</span><span class="s1">&#39;nodejs&#39;</span><span class="o">].</span><span class="n">nil?</span>
  <span class="n">version</span> <span class="n">node</span><span class="o">.</span><span class="n">run_state</span><span class="o">[</span><span class="s1">&#39;nodejs&#39;</span><span class="o">][</span><span class="ss">:version</span><span class="o">]</span>
<span class="k">end</span>

<span class="n">action</span> <span class="ss">:run</span> <span class="k">do</span>
  <span class="n">execute</span> <span class="s1">&#39;execute-node&#39;</span> <span class="k">do</span>
    <span class="n">cwd</span> <span class="n">cwd</span>
    <span class="n">environment</span> <span class="n">environment</span>
    <span class="n">user</span> <span class="n">user</span>
    <span class="n">sensitive</span> <span class="n">sensitive</span>
    <span class="c1"># gsub replaces 10+ spaces at the beginning of the line with nothing</span>
    <span class="n">command</span> <span class="o">&lt;&lt;-</span><span class="no">CODE</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/^ {10}/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="sh">      #{prefix}/#{version}/#{command}</span>
<span class="no">    CODE</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where the <tt class="docutils literal"><span class="pre">property</span> <span class="pre">:cwd</span></tt>, <tt class="docutils literal"><span class="pre">property</span> <span class="pre">:environment</span></tt>, <tt class="docutils literal"><span class="pre">property</span> <span class="pre">:user</span></tt>, and <tt class="docutils literal"><span class="pre">property</span> <span class="pre">:sensitive</span></tt> are identical to properties in the <strong>execute</strong> resource, embedded as part of the <tt class="docutils literal"><span class="pre">action</span> <span class="pre">:run</span></tt> action. Because both the custom properties and the <strong>execute</strong> properties are identical, this will result in an error message similar to:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="no">ArgumentError</span>
<span class="o">-------------</span>
<span class="n">wrong</span> <span class="n">number</span> <span class="n">of</span> <span class="n">arguments</span> <span class="p">(</span><span class="mi">0</span> <span class="k">for</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>To prevent this behavior, use <tt class="docutils literal"><span class="pre">new_resource.</span></tt> to tell the chef-client to process the properties from the core resource instead of the properties in the custom resource. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">resource_name</span> <span class="ss">:node_execute</span>

<span class="n">property</span> <span class="ss">:command</span><span class="p">,</span> <span class="nb">String</span><span class="p">,</span> <span class="ss">name_property</span><span class="p">:</span> <span class="kp">true</span>
<span class="n">property</span> <span class="ss">:version</span><span class="p">,</span> <span class="nb">String</span>

<span class="c1"># Useful properties from the `execute` resource</span>
<span class="n">property</span> <span class="ss">:cwd</span><span class="p">,</span> <span class="nb">String</span>
<span class="n">property</span> <span class="ss">:environment</span><span class="p">,</span> <span class="no">Hash</span><span class="p">,</span> <span class="ss">default</span><span class="p">:</span> <span class="p">{}</span>
<span class="n">property</span> <span class="ss">:user</span><span class="p">,</span> <span class="o">[</span><span class="nb">String</span><span class="p">,</span> <span class="nb">Integer</span><span class="o">]</span>
<span class="n">property</span> <span class="ss">:sensitive</span><span class="p">,</span> <span class="o">[</span><span class="no">TrueClass</span><span class="p">,</span> <span class="no">FalseClass</span><span class="o">]</span><span class="p">,</span> <span class="ss">default</span><span class="p">:</span> <span class="kp">false</span>

<span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;/opt/languages/node&#39;</span>

<span class="n">load_current_value</span> <span class="k">do</span>
  <span class="n">current_value_does_not_exist!</span> <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">run_state</span><span class="o">[</span><span class="s1">&#39;nodejs&#39;</span><span class="o">].</span><span class="n">nil?</span>
  <span class="n">version</span> <span class="n">node</span><span class="o">.</span><span class="n">run_state</span><span class="o">[</span><span class="s1">&#39;nodejs&#39;</span><span class="o">][</span><span class="ss">:version</span><span class="o">]</span>
<span class="k">end</span>

<span class="n">action</span> <span class="ss">:run</span> <span class="k">do</span>
  <span class="n">execute</span> <span class="s1">&#39;execute-node&#39;</span> <span class="k">do</span>
    <span class="n">cwd</span> <span class="n">new_resource</span><span class="o">.</span><span class="n">cwd</span>
    <span class="n">environment</span> <span class="n">new_resource</span><span class="o">.</span><span class="n">environment</span>
    <span class="n">user</span> <span class="n">new_resource</span><span class="o">.</span><span class="n">user</span>
    <span class="n">sensitive</span> <span class="n">new_resource</span><span class="o">.</span><span class="n">sensitive</span>
    <span class="c1"># gsub replaces 10+ spaces at the beginning of the line with nothing</span>
    <span class="n">command</span> <span class="o">&lt;&lt;-</span><span class="no">CODE</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/^ {10}/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="sh">      #{prefix}/#{new_resource.version}/#{new_resource.command}</span>
<span class="no">    CODE</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">cwd</span> <span class="pre">new_resource.cwd</span></tt>, <tt class="docutils literal"><span class="pre">environment</span> <span class="pre">new_resource.environment</span></tt>, <tt class="docutils literal"><span class="pre">user</span> <span class="pre">new_resource.user</span></tt>, and <tt class="docutils literal"><span class="pre">sensitive</span> <span class="pre">new_resource.sensitive</span></tt> correctly use the properties of the <strong>execute</strong> resource and not the identically-named override properties of the custom resource.</p>
</div>
<div class="section" id="property">
<h4>property<a class="headerlink" href="#property" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">property</span></tt> method to define properties for the custom resource. The syntax is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">property</span> <span class="ss">:name</span><span class="p">,</span> <span class="n">ruby_type</span><span class="p">,</span> <span class="ss">default</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="ss">parameter</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">:name</span></tt> is the name of the property</li>
<li><tt class="docutils literal"><span class="pre">ruby_type</span></tt> is the optional Ruby type or array of types, such as <tt class="docutils literal"><span class="pre">String</span></tt>, <tt class="docutils literal"><span class="pre">Integer</span></tt>, <tt class="docutils literal"><span class="pre">TrueClass</span></tt>, or <tt class="docutils literal"><span class="pre">FalseClass</span></tt></li>
<li><tt class="docutils literal"><span class="pre">default:</span> <span class="pre">'value'</span></tt> is the optional default value loaded into the resource</li>
<li><tt class="docutils literal"><span class="pre">parameter:</span> <span class="pre">'value'</span></tt> optional parameters</li>
</ul>
<p>For example, the following properties define <tt class="docutils literal"><span class="pre">username</span></tt> and <tt class="docutils literal"><span class="pre">password</span></tt> properties with no default values specified:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">property</span> <span class="ss">:username</span><span class="p">,</span> <span class="nb">String</span>
<span class="n">property</span> <span class="ss">:password</span><span class="p">,</span> <span class="nb">String</span>
</pre></div>
</div>
<div class="section" id="ruby-type">
<h5>ruby_type<a class="headerlink" href="#ruby-type" title="Permalink to this headline">¶</a></h5>
<p>The property ruby_type is a positional parameter. Use to ensure a property value is of a particular ruby class, such as <tt class="docutils literal"><span class="pre">TrueClass</span></tt>, <tt class="docutils literal"><span class="pre">FalseClass</span></tt>, <tt class="docutils literal"><span class="pre">NilClass</span></tt>, <tt class="docutils literal"><span class="pre">String</span></tt>, <tt class="docutils literal"><span class="pre">Array</span></tt>, <tt class="docutils literal"><span class="pre">Hash</span></tt>. Use an array of ruby classes to allow a value to be of more than one type. For example:</p>
<blockquote>
<div><div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">property</span> <span class="ss">:name</span><span class="p">,</span> <span class="nb">String</span>
</pre></div>
</div>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">property</span> <span class="ss">:name</span><span class="p">,</span> <span class="no">Fixnum</span>
</pre></div>
</div>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">property</span> <span class="ss">:name</span><span class="p">,</span> <span class="no">Hash</span>
</pre></div>
</div>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">property</span> <span class="ss">:name</span><span class="p">,</span> <span class="o">[</span><span class="no">TrueClass</span><span class="p">,</span> <span class="no">FalseClass</span><span class="o">]</span>
</pre></div>
</div>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">property</span> <span class="ss">:name</span><span class="p">,</span> <span class="o">[</span><span class="nb">String</span><span class="p">,</span> <span class="no">NilClass</span><span class="o">]</span>
</pre></div>
</div>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">property</span> <span class="ss">:name</span><span class="p">,</span> <span class="o">[</span><span class="no">Class</span><span class="p">,</span> <span class="nb">String</span><span class="p">,</span> <span class="no">Symbol</span><span class="o">]</span>
</pre></div>
</div>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">property</span> <span class="ss">:name</span><span class="p">,</span> <span class="o">[</span><span class="nb">Array</span><span class="p">,</span> <span class="no">Hash</span><span class="o">]</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="validators">
<h5>validators<a class="headerlink" href="#validators" title="Permalink to this headline">¶</a></h5>
<p>A validation parameter is used to add zero (or more) validation parameters to a property.</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">:callbacks</span></tt></td>
<td><p class="first">Use to define a collection of unique keys and values (a ruby hash) for which the key is the error message and the value is a lambda to validate the parameter. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="ss">callbacks</span><span class="p">:</span> <span class="p">{</span>
             <span class="s1">&#39;should be a valid non-system port&#39;</span> <span class="o">=&gt;</span> <span class="nb">lambda</span> <span class="p">{</span>
               <span class="o">|</span><span class="nb">p</span><span class="o">|</span> <span class="nb">p</span> <span class="o">&gt;</span> <span class="mi">1024</span> <span class="o">&amp;&amp;</span> <span class="nb">p</span> <span class="o">&lt;</span> <span class="mi">65535</span>
             <span class="p">}</span>
           <span class="p">}</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">:default</span></tt></td>
<td><p class="first">Use to specify the default value for a property. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="ss">default</span><span class="p">:</span> <span class="s1">&#39;a_string_value&#39;</span>
</pre></div>
</div>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="ss">default</span><span class="p">:</span> <span class="mi">123456789</span>
</pre></div>
</div>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="ss">default</span><span class="p">:</span> <span class="o">[]</span>
</pre></div>
</div>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="ss">default</span><span class="p">:</span> <span class="p">()</span>
</pre></div>
</div>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="ss">default</span><span class="p">:</span> <span class="p">{}</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">:equal_to</span></tt></td>
<td><p class="first">Use to match a value with <tt class="docutils literal"><span class="pre">==</span></tt>. Use an array of values to match any of those values with <tt class="docutils literal"><span class="pre">==</span></tt>. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="ss">equal_to</span><span class="p">:</span> <span class="o">[</span><span class="kp">true</span><span class="p">,</span> <span class="kp">false</span><span class="o">]</span>
</pre></div>
</div>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="ss">equal_to</span><span class="p">:</span> <span class="o">[</span><span class="s1">&#39;php&#39;</span><span class="p">,</span> <span class="s1">&#39;perl&#39;</span><span class="o">]</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">:regex</span></tt></td>
<td><p class="first">Use to match a value to a regular expression. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="ss">regex</span><span class="p">:</span> <span class="o">[</span> <span class="sr">/^([a-z]|[A-Z]|[0-9]|_|-)+$/</span><span class="p">,</span> <span class="sr">/^\d+$/</span> <span class="o">]</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">:required</span></tt></td>
<td><p class="first">Indicates that a property is required. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="ss">required</span><span class="p">:</span> <span class="kp">true</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">:respond_to</span></tt></td>
<td><p class="first">Use to ensure that a value has a given method. This can be a single method name or an array of method names. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="ss">respond_to</span><span class="p">:</span> <span class="n">valid_encoding?</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Some examples of combining validation parameters:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">property</span> <span class="ss">:spool_name</span><span class="p">,</span> <span class="nb">String</span><span class="p">,</span> <span class="ss">regex</span><span class="p">:</span> <span class="sr">/$\w+/</span>
</pre></div>
</div>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">property</span> <span class="ss">:enabled</span><span class="p">,</span> <span class="ss">equal_to</span><span class="p">:</span> <span class="o">[</span><span class="kp">true</span><span class="p">,</span> <span class="kp">false</span><span class="p">,</span> <span class="s1">&#39;true&#39;</span><span class="p">,</span> <span class="s1">&#39;false&#39;</span><span class="o">]</span><span class="p">,</span> <span class="ss">default</span><span class="p">:</span> <span class="kp">true</span>
</pre></div>
</div>
</div>
<div class="section" id="desired-state">
<h5>desired_state<a class="headerlink" href="#desired-state" title="Permalink to this headline">¶</a></h5>
<p>Add <tt class="docutils literal"><span class="pre">desired_state:</span></tt> to get or set the list of desired state properties for a resource, which describe the desired state of the node, such as permissions on an existing file. This value may be <tt class="docutils literal"><span class="pre">true</span></tt> or <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
<ul class="simple">
<li>When <tt class="docutils literal"><span class="pre">true</span></tt>, the state of the system will determine the value.</li>
<li>When <tt class="docutils literal"><span class="pre">false</span></tt>, the values defined by the recipe or custom resource will determine the value, i.e. &#8220;the desired state of this system includes setting the value defined in this custom resource or recipe&#8221;</li>
</ul>
<p>For example, the following properties define the <tt class="docutils literal"><span class="pre">owner</span></tt>, <tt class="docutils literal"><span class="pre">group</span></tt>, and <tt class="docutils literal"><span class="pre">mode</span></tt> properties for a file that already exists on the node, and with <tt class="docutils literal"><span class="pre">desired_state</span></tt> set to <tt class="docutils literal"><span class="pre">false</span></tt>:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">property</span> <span class="ss">:owner</span><span class="p">,</span> <span class="nb">String</span><span class="p">,</span> <span class="ss">default</span><span class="p">:</span> <span class="s1">&#39;root&#39;</span><span class="p">,</span> <span class="ss">desired_state</span><span class="p">:</span> <span class="kp">false</span>
<span class="n">property</span> <span class="ss">:group</span><span class="p">,</span> <span class="nb">String</span><span class="p">,</span> <span class="ss">default</span><span class="p">:</span> <span class="s1">&#39;root&#39;</span><span class="p">,</span> <span class="ss">desired_state</span><span class="p">:</span> <span class="kp">false</span>
<span class="n">property</span> <span class="ss">:mode</span><span class="p">,</span> <span class="nb">String</span><span class="p">,</span> <span class="ss">default</span><span class="p">:</span> <span class="s1">&#39;0755&#39;</span><span class="p">,</span> <span class="ss">desired_state</span><span class="p">:</span> <span class="kp">false</span>
</pre></div>
</div>
</div>
<div class="section" id="identity">
<h5>identity<a class="headerlink" href="#identity" title="Permalink to this headline">¶</a></h5>
<p>Add <tt class="docutils literal"><span class="pre">identity:</span></tt> to set a resource to a particular set of properties. This value may be <tt class="docutils literal"><span class="pre">true</span></tt> or <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
<ul class="simple">
<li>When <tt class="docutils literal"><span class="pre">true</span></tt>, data for that property is returned as part of the resource data set and may be available to external applications, such as reporting</li>
<li>When <tt class="docutils literal"><span class="pre">false</span></tt>, no data for that property is returned.</li>
</ul>
<p>If no properties are marked <tt class="docutils literal"><span class="pre">true</span></tt>, the property that defaults to the <tt class="docutils literal"><span class="pre">name</span></tt> of the resource is marked <tt class="docutils literal"><span class="pre">true</span></tt>.</p>
<p>For example, the following properties define <tt class="docutils literal"><span class="pre">username</span></tt> and <tt class="docutils literal"><span class="pre">password</span></tt> properties with no default values specified, but with <tt class="docutils literal"><span class="pre">identity</span></tt> set to <tt class="docutils literal"><span class="pre">true</span></tt> for the user name:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">property</span> <span class="ss">:username</span><span class="p">,</span> <span class="nb">String</span><span class="p">,</span> <span class="ss">identity</span><span class="p">:</span> <span class="kp">true</span>
<span class="n">property</span> <span class="ss">:password</span><span class="p">,</span> <span class="nb">String</span>
</pre></div>
</div>
</div>
<div class="section" id="block-arguments">
<h5>Block Arguments<a class="headerlink" href="#block-arguments" title="Permalink to this headline">¶</a></h5>
<p>Any properties that are marked <tt class="docutils literal"><span class="pre">identity:</span> <span class="pre">true</span></tt> or <tt class="docutils literal"><span class="pre">desired_state:</span> <span class="pre">false</span></tt> will be available from <tt class="docutils literal"><span class="pre">load_current_value</span></tt>. If access to other properties of a resource is needed, use a block argument that contains all of the properties of the requested resource. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">resource_name</span> <span class="ss">:file</span>

<span class="n">load_current_value</span> <span class="k">do</span> <span class="o">|</span><span class="n">desired</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="s2">&quot;The user typed content = </span><span class="si">#{</span><span class="n">desired</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="s2"> in the resource&quot;</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="property-is-set">
<h4>property_is_set?<a class="headerlink" href="#property-is-set" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">property_is_set?</span></tt> method to check if the value for a property is set. The syntax is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">property_is_set?</span><span class="p">(</span><span class="ss">:property_name</span><span class="p">)</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">property_is_set?</span></tt> method will return <tt class="docutils literal"><span class="pre">true</span></tt> if the property is set.</p>
<p>For example, the following custom resource creates and/or updates user properties, but not their password. The <tt class="docutils literal"><span class="pre">property_is_set?</span></tt> method checks if the user has specified a password and then tells the chef-client what to do if the password is not identical:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">action</span> <span class="ss">:create</span> <span class="k">do</span>
  <span class="n">converge_if_changed</span> <span class="k">do</span>
    <span class="nb">system</span><span class="p">(</span><span class="s2">&quot;rabbitmqctl create_or_update_user </span><span class="si">#{</span><span class="n">username</span><span class="si">}</span><span class="s2"> --prop1 </span><span class="si">#{</span><span class="n">prop1</span><span class="si">}</span><span class="s2"> ... &quot;</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">if</span> <span class="n">property_is_set?</span><span class="p">(</span><span class="ss">:password</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">system</span><span class="p">(</span><span class="s2">&quot;rabbitmqctl authenticate_user </span><span class="si">#{</span><span class="n">username</span><span class="si">}</span><span class="s2"> </span><span class="si">#{</span><span class="n">password</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span> <span class="k">do</span>
      <span class="n">converge_by</span> <span class="s2">&quot;Updating password for user </span><span class="si">#{</span><span class="n">username</span><span class="si">}</span><span class="s2"> ...&quot;</span> <span class="k">do</span>
    <span class="nb">system</span><span class="p">(</span><span class="s2">&quot;rabbitmqctl update_user </span><span class="si">#{</span><span class="n">username</span><span class="si">}</span><span class="s2"> --password </span><span class="si">#{</span><span class="n">password</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="section" id="provides">
<h4>provides<a class="headerlink" href="#provides" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">provides</span></tt> method to associate a custom resource with the Recipe DSL on different operating systems. When multiple custom resources use the same DSL, specificity rules are applied to determine the priority, from highest to lowest:</p>
<ol class="arabic simple">
<li>provides :resource_name, platform_version: ‘0.1.2’</li>
<li>provides :resource_name, platform: ‘platform_name’</li>
<li>provides :resource_name, platform_family: ‘platform_family’</li>
<li>provides :resource_name, os: ‘operating_system’</li>
<li>provides :resource_name</li>
</ol>
<p>For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">provides</span> <span class="ss">:my_custom_resource</span><span class="p">,</span> <span class="ss">platform</span><span class="p">:</span> <span class="s1">&#39;redhat&#39;</span> <span class="k">do</span> <span class="o">|</span><span class="n">node</span><span class="o">|</span>
  <span class="n">node</span><span class="o">[</span><span class="s1">&#39;platform_version&#39;</span><span class="o">].</span><span class="n">to_i</span> <span class="o">&gt;=</span> <span class="mi">7</span>
<span class="k">end</span>

<span class="n">provides</span> <span class="ss">:my_custom_resource</span><span class="p">,</span> <span class="ss">platform</span><span class="p">:</span> <span class="s1">&#39;redhat&#39;</span>

<span class="n">provides</span> <span class="ss">:my_custom_resource</span><span class="p">,</span> <span class="ss">platform_family</span><span class="p">:</span> <span class="s1">&#39;rhel&#39;</span>

<span class="n">provides</span> <span class="ss">:my_custom_resource</span><span class="p">,</span> <span class="ss">os</span><span class="p">:</span> <span class="s1">&#39;linux&#39;</span>

<span class="n">provides</span> <span class="ss">:my_custom_resource</span>
</pre></div>
</div>
<p>This allows you to use multiple custom resources files that provide the same resource to the user, but for different operating systems or operation system versions. With this you can eliminate the need for platform or platform version logic within your resources.</p>
<div class="section" id="override">
<h5>override<a class="headerlink" href="#override" title="Permalink to this headline">¶</a></h5>
<p>Chef will warn you if the Recipe DSL is provided by another custom resource or built-in resource. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">X</span> <span class="o">&lt;</span> <span class="no">Chef</span><span class="o">::</span><span class="no">Resource</span>
  <span class="n">provides</span> <span class="ss">:file</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">Y</span> <span class="o">&lt;</span> <span class="no">Chef</span><span class="o">::</span><span class="no">Resource</span>
  <span class="n">provides</span> <span class="ss">:file</span>
<span class="k">end</span>
</pre></div>
</div>
<p>This will emit a warning that <tt class="docutils literal"><span class="pre">Y</span></tt> is overriding <tt class="docutils literal"><span class="pre">X</span></tt>. To disable this warning, use <tt class="docutils literal"><span class="pre">override:</span> <span class="pre">true</span></tt>:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">X</span> <span class="o">&lt;</span> <span class="no">Chef</span><span class="o">::</span><span class="no">Resource</span>
  <span class="n">provides</span> <span class="ss">:file</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">Y</span> <span class="o">&lt;</span> <span class="no">Chef</span><span class="o">::</span><span class="no">Resource</span>
  <span class="n">provides</span> <span class="ss">:file</span><span class="p">,</span> <span class="ss">override</span><span class="p">:</span> <span class="kp">true</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="reset-property">
<h4>reset_property<a class="headerlink" href="#reset-property" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">reset_property</span></tt> method to clear the value for a property as if it had never been set, and then use the default value. For example, to clear the value for a property named <tt class="docutils literal"><span class="pre">password</span></tt>:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">reset_property</span><span class="p">(</span><span class="ss">:password</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="definition-vs-resource">
<h3>Definition vs. Resource<a class="headerlink" href="#definition-vs-resource" title="Permalink to this headline">¶</a></h3>
<p>The following examples show:</p>
<ol class="arabic simple">
<li>A definition</li>
<li>The same definition rewritten as a custom resource</li>
<li>The same definition, rewritten again to use a <a class="reference internal" href="resource_common.html"><em>common resource property</em></a></li>
</ol>
<div class="section" id="as-a-definition">
<h4>As a Definition<a class="headerlink" href="#as-a-definition" title="Permalink to this headline">¶</a></h4>
<p>The following definition processes unique hostnames and ports, passed on as parameters:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">define</span> <span class="ss">:host_porter</span><span class="p">,</span> <span class="ss">:port</span> <span class="o">=&gt;</span> <span class="mi">4000</span><span class="p">,</span> <span class="ss">:hostname</span> <span class="o">=&gt;</span> <span class="kp">nil</span> <span class="k">do</span>
  <span class="n">params</span><span class="o">[</span><span class="ss">:hostname</span><span class="o">]</span> <span class="o">||=</span> <span class="n">params</span><span class="o">[</span><span class="ss">:name</span><span class="o">]</span>

  <span class="n">directory</span> <span class="s1">&#39;/etc/#{params[:hostname]}&#39;</span> <span class="k">do</span>
    <span class="n">recursive</span> <span class="kp">true</span>
  <span class="k">end</span>

  <span class="n">file</span> <span class="s1">&#39;/etc/#{params[:hostname]}/#{params[:port]}&#39;</span> <span class="k">do</span>
    <span class="n">content</span> <span class="s1">&#39;some content&#39;</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="section" id="as-a-resource">
<h4>As a Resource<a class="headerlink" href="#as-a-resource" title="Permalink to this headline">¶</a></h4>
<p>The definition is improved by rewriting it as a custom resource:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">property</span> <span class="ss">:port</span><span class="p">,</span> <span class="nb">Integer</span><span class="p">,</span> <span class="ss">default</span><span class="p">:</span> <span class="mi">4000</span>
<span class="n">property</span> <span class="ss">:hostname</span><span class="p">,</span> <span class="nb">String</span><span class="p">,</span> <span class="ss">name_property</span><span class="p">:</span> <span class="kp">true</span>

<span class="n">action</span> <span class="ss">:create</span> <span class="k">do</span>

  <span class="n">directory</span> <span class="s2">&quot;/etc/</span><span class="si">#{</span><span class="n">hostname</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">do</span>
    <span class="n">recursive</span> <span class="kp">true</span>
  <span class="k">end</span>

  <span class="n">file</span> <span class="s2">&quot;/etc/</span><span class="si">#{</span><span class="n">hostname</span><span class="si">}</span><span class="s2">/</span><span class="si">#{</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">do</span>
    <span class="n">content</span> <span class="s1">&#39;some content&#39;</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div>
</div>
<p>Once built, the custom resource may be used in a recipe just like the any of the resources that are built into Chef. The resource gets its name from the cookbook and from the file name in the <tt class="docutils literal"><span class="pre">/resources</span></tt> directory, with an underscore (<tt class="docutils literal"><span class="pre">_</span></tt>) separating them. For example, a cookbook named <tt class="docutils literal"><span class="pre">host</span></tt> with a custom resource in the <tt class="docutils literal"><span class="pre">/resources</span></tt> directory named <tt class="docutils literal"><span class="pre">porter.rb</span></tt>. Use it in a recipe like this:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">host_porter</span> <span class="n">node</span><span class="o">[</span><span class="s1">&#39;hostname&#39;</span><span class="o">]</span> <span class="k">do</span>
  <span class="n">port</span> <span class="mi">4000</span>
<span class="k">end</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">host_porter</span> <span class="s1">&#39;www1&#39;</span> <span class="k">do</span>
  <span class="n">port</span> <span class="mi">4001</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="section" id="common-properties">
<h4>Common Properties<a class="headerlink" href="#common-properties" title="Permalink to this headline">¶</a></h4>
<p>Unlike definitions, custom resources are able to use <a class="reference internal" href="resource_common.html"><em>common resource properties</em></a>. For example, <tt class="docutils literal"><span class="pre">only_if</span></tt>:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">host_porter</span> <span class="s1">&#39;www1&#39;</span> <span class="k">do</span>
  <span class="n">port</span> <span class="mi">4001</span>
  <span class="n">only_if</span> <span class="s1">&#39;{ node[&#39;</span><span class="n">hostname</span><span class="s1">&#39;] == &#39;</span><span class="n">foo</span><span class="o">.</span><span class="n">bar</span><span class="o">.</span><span class="n">com</span><span class="s1">&#39; }&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="ps-credential-helper">
<h3>ps_credential Helper<a class="headerlink" href="#ps-credential-helper" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">ps_credential</span></tt> helper to embed a <tt class="docutils literal"><span class="pre">PSCredential</span></tt> object&#8212;<a class="reference external" href="https://technet.microsoft.com/en-us/magazine/ff714574.aspx">a set of security credentials, such as a user name or password</a>&#8212;within a script, which allows that script to be run using security credentials.</p>
<p>For example, assuming the <tt class="docutils literal"><span class="pre">CertificateID</span></tt> is configured in the local configuration manager, the <tt class="docutils literal"><span class="pre">SeaPower1&#64;3</span></tt> object is created and embedded within the <tt class="docutils literal"><span class="pre">seapower-user</span></tt> script:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span> <span class="n">dsc_script</span> <span class="s1">&#39;seapower-user&#39;</span> <span class="k">do</span>
   <span class="n">code</span> <span class="o">&lt;&lt;-</span><span class="no">EOH</span>
<span class="sh">     User AlbertAtom</span>
<span class="sh">     {</span>
<span class="sh">       UserName = &#39;AlbertAtom&#39;</span>
<span class="sh">       Password = #{ps_credential(&#39;SeaPower1@3&#39;)}</span>
<span class="sh">     }</span>
<span class="no">  EOH</span>
  <span class="n">configuration_data</span> <span class="o">&lt;&lt;-</span><span class="no">EOH</span>
<span class="sh">    @{</span>
<span class="sh">      AllNodes = @(</span>
<span class="sh">        @{</span>
<span class="sh">          NodeName = &quot;localhost&quot;;</span>
<span class="sh">          CertificateID = &#39;A8D1234559F349F7EF19104678908F701D4167&#39;</span>
<span class="sh">        }</span>
<span class="sh">      )</span>
<span class="sh">    }</span>
<span class="no">  EOH</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="section" id="handler-dsl">
<h3>Handler DSL<a class="headerlink" href="#handler-dsl" title="Permalink to this headline">¶</a></h3>
<p>Use the Handler DSL to attach a callback to an event. If the event occurs during the chef-client run, the associated callback is executed. For example:</p>
<ul class="simple">
<li>Sending email if a chef-client run fails</li>
<li>Sending a notification to chat application if an audit run fails</li>
<li>Aggregating statistics about resources updated during a chef-client runs to StatsD</li>
</ul>
<div class="section" id="on-method">
<h4>on Method<a class="headerlink" href="#on-method" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">on</span></tt> method to associate an event type with a callback. The callback defines what steps are taken if the event occurs during the chef-client run and is defined using arbitrary Ruby code. The syntax is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="no">Chef</span><span class="o">.</span><span class="n">event_handler</span> <span class="k">do</span>
  <span class="n">on</span> <span class="ss">:event_type</span> <span class="k">do</span>
    <span class="c1"># some Ruby</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">Chef.event_handler</span></tt> declares a block of code within a recipe that is processed when the named event occurs during a chef-client run</li>
<li><tt class="docutils literal"><span class="pre">on</span></tt> defines the block of code that will tell the chef-client how to handle the event</li>
<li><tt class="docutils literal"><span class="pre">:event_type</span></tt> is a valid exception event type, such as <tt class="docutils literal"><span class="pre">:run_start</span></tt>, <tt class="docutils literal"><span class="pre">:run_failed</span></tt>, <tt class="docutils literal"><span class="pre">:converge_failed</span></tt>, <tt class="docutils literal"><span class="pre">:resource_failed</span></tt>, or <tt class="docutils literal"><span class="pre">:recipe_not_found</span></tt></li>
</ul>
<p>For example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>Chef.event_handler <span class="k">do</span>
  on :converge_start <span class="k">do</span>
    puts <span class="s2">&quot;Ohai! I have started a converge.&quot;</span>
  end
end
</pre></div>
</div>
</div>
<div class="section" id="example-send-email">
<h4>Example: Send Email<a class="headerlink" href="#example-send-email" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">on</span></tt> method to create an event handler that sends email when the chef-client run fails. This will require:</p>
<ul class="simple">
<li>A way to tell the chef-client how to send email</li>
<li>An event handler that describes what to do when the <tt class="docutils literal"><span class="pre">:run_failed</span></tt> event is triggered</li>
<li>A way to trigger the exception and test the behavior of the event handler</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">See <a class="reference external" href="https://docs.chef.io/dsl_handler.html">https://docs.chef.io/dsl_handler.html</a> for more information about using event handlers in recipes.</p>
</div>
<p><strong>Define How Email is Sent</strong></p>
<p>Use a library to define the code that sends email when a chef-client run fails. Name the file <tt class="docutils literal"><span class="pre">helper.rb</span></tt> and add it to a cookbook&#8217;s <tt class="docutils literal"><span class="pre">/libraries</span></tt> directory:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="nb">require</span> <span class="s1">&#39;net/smtp&#39;</span>

<span class="k">module</span> <span class="nn">HandlerSendEmail</span>
  <span class="k">class</span> <span class="nc">Helper</span>

    <span class="k">def</span> <span class="nf">send_email_on_run_failure</span><span class="p">(</span><span class="n">node_name</span><span class="p">)</span>

      <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;From: Chef &lt;chef@chef.io&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
      <span class="n">message</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;To: Grant &lt;grantmc@chef.io&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
      <span class="n">message</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;Subject: Chef run failed</span><span class="se">\n</span><span class="s2">&quot;</span>
      <span class="n">message</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;Date: </span><span class="si">#{</span><span class="no">Time</span><span class="o">.</span><span class="n">now</span><span class="o">.</span><span class="n">rfc2822</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
      <span class="n">message</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;Chef run failed on </span><span class="si">#{</span><span class="n">node_name</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
      <span class="no">Net</span><span class="o">::</span><span class="no">SMTP</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">smtp</span><span class="o">|</span>
        <span class="n">smtp</span><span class="o">.</span><span class="n">send_message</span> <span class="n">message</span><span class="p">,</span> <span class="s1">&#39;chef@chef.io&#39;</span><span class="p">,</span> <span class="s1">&#39;grantmc@chef.io&#39;</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Add the Handler</strong></p>
<p>Invoke the library helper in a recipe:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="no">Chef</span><span class="o">.</span><span class="n">event_handler</span> <span class="k">do</span>
  <span class="n">on</span> <span class="ss">:run_failed</span> <span class="k">do</span>
    <span class="no">HandlerSendEmail</span><span class="o">::</span><span class="no">Helper</span><span class="o">.</span><span class="n">new</span><span class="o">.</span><span class="n">send_email_on_run_failure</span><span class="p">(</span>
      <span class="no">Chef</span><span class="o">.</span><span class="n">run_context</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">name</span>
    <span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<ul class="simple">
<li>Use <tt class="docutils literal"><span class="pre">Chef.event_handler</span></tt> to define the event handler</li>
<li>Use the <tt class="docutils literal"><span class="pre">on</span></tt> method to specify the event type</li>
</ul>
<p>Within the <tt class="docutils literal"><span class="pre">on</span></tt> block, tell the chef-client how to handle the event when it&#8217;s triggered.</p>
<p><strong>Test the Handler</strong></p>
<p>Use the following code block to trigger the exception and have the chef-client send email to the specified email address:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">ruby_block</span> <span class="s1">&#39;fail the run&#39;</span> <span class="k">do</span>
  <span class="n">block</span> <span class="k">do</span>
    <span class="nb">fail</span> <span class="s1">&#39;deliberately fail the run&#39;</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="new-resource-properties">
<h3>New Resource Properties<a class="headerlink" href="#new-resource-properties" title="Permalink to this headline">¶</a></h3>
<p>The following property is new for the <strong>deploy</strong> resource:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">depth</span></tt></td>
<td><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The depth of a git repository, truncated to the specified number of revisions.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="specify-policy-revision">
<h3>Specify Policy Revision<a class="headerlink" href="#specify-policy-revision" title="Permalink to this headline">¶</a></h3>
<p>Use the following command to specify a policy revision:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef client -j JSON
</pre></div>
</div>
<p>where the JSON file is similar to:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;policy_name&quot;</span><span class="o">:</span> <span class="s2">&quot;appserver&quot;</span><span class="p">,</span>
  <span class="s2">&quot;policy_group&quot;</span><span class="o">:</span> <span class="s2">&quot;staging&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Or use the following settings to specify a policy revision in the client.rb file:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Setting</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">policy_group</span></tt></td>
<td>The name of a policy, as identified by the <tt class="docutils literal"><span class="pre">name</span></tt> setting in a Policyfile.rb file.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">policy_name</span></tt></td>
<td>The name of a policy group that exists on the Chef server.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="new-configuration-settings">
<h3>New Configuration Settings<a class="headerlink" href="#new-configuration-settings" title="Permalink to this headline">¶</a></h3>
<p>The following settings are new for the client.rb file and enable the use of policy files:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Setting</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">named_run_list</span></tt></td>
<td>The run-list associated with a policy file.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">policy_group</span></tt></td>
<td>The name of a policy, as identified by the <tt class="docutils literal"><span class="pre">name</span></tt> setting in a Policyfile.rb file. (See &#8220;Specify Policy Revision&#8221; in this readme for more information.)</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">policy_name</span></tt></td>
<td>The name of a policy group that exists on the Chef server. (See &#8220;Specify Policy Revision&#8221; in this readme for more information.)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="chef-client-options">
<h3>chef-client Options<a class="headerlink" href="#chef-client-options" title="Permalink to this headline">¶</a></h3>
<p>The following options are new or updated for the chef-client executable and enable the use of policy files:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">-n</span> <span class="pre">NAME</span></tt>, <tt class="docutils literal"><span class="pre">--named-run-list</span> <span class="pre">NAME</span></tt></dt>
<dd>The run-list associated with a policy file.</dd>
<dt><tt class="docutils literal"><span class="pre">-j</span> <span class="pre">PATH</span></tt>, <tt class="docutils literal"><span class="pre">--json-attributes</span> <span class="pre">PATH</span></tt></dt>
<dd><p class="first">This option now supports using a JSON file to associate a policy revision.</p>
<p>Use this option to use policy files by specifying a JSON file that contains the following settings:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Setting</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">policy_group</span></tt></td>
<td>The name of a policy, as identified by the <tt class="docutils literal"><span class="pre">name</span></tt> setting in a Policyfile.rb file.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">policy_name</span></tt></td>
<td>The name of a policy group that exists on the Chef server.</td>
</tr>
</tbody>
</table>
<p>For example:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;policy_name&quot;</span><span class="o">:</span> <span class="s2">&quot;appserver&quot;</span><span class="p">,</span>
  <span class="s2">&quot;policy_group&quot;</span><span class="o">:</span> <span class="s2">&quot;staging&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This option also supports using a JSON file to associate an environment:</p>
<p>Use this option to set the <tt class="docutils literal"><span class="pre">chef_environment</span></tt> value for a node.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Any environment specified for <tt class="docutils literal"><span class="pre">chef_environment</span></tt> by a JSON file will take precedence over an environment specified by the <tt class="docutils literal"><span class="pre">--environment</span></tt> option when both options are part of the same command.</p>
</div>
<p>For example, run the following:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chef-client -j /path/to/file.json
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">/path/to/file.json</span></tt> is similar to:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;chef_environment&quot;</span><span class="o">:</span> <span class="s2">&quot;pre-production&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p class="last">This will set the environment for the node to <tt class="docutils literal"><span class="pre">pre-production</span></tt>.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="what-s-new-in-12-4">
<h2>What&#8217;s New in 12.4<a class="headerlink" href="#what-s-new-in-12-4" title="Permalink to this headline">¶</a></h2>
<p>The following items are new for chef-client 12.4 and/or are changes from previous versions. The short version:</p>
<ul class="simple">
<li><strong>Validatorless bootstrap now requires the node name</strong> Use of the <tt class="docutils literal"><span class="pre">-N</span> <span class="pre">node_name</span></tt> option with a validatorless bootstrap is now required.</li>
<li><strong>remote_file resource supports Windows UNC paths for source location</strong> A Microsoft Windows UNC path may be used to specify the location of a remote file.</li>
<li><strong>Run PowerShell commands without excessive quoting</strong> Use the <tt class="docutils literal"><span class="pre">Import-Module</span> <span class="pre">chef</span></tt> module to run Windows PowerShell commands without excessive quotation.</li>
<li><strong>Logging may use the Windows Event Logger</strong> Log files may be sent to the Windows Event Logger. Set the <tt class="docutils literal"><span class="pre">log_location</span></tt> setting in the client.rb file to <tt class="docutils literal"><span class="pre">Chef::Log::WinEvt.new</span></tt>.</li>
<li><strong>Logging may be configured to use daemon facility available to the chef-client</strong> Log files may be sent to the syslog available to the chef-client. Set the <tt class="docutils literal"><span class="pre">log_location</span></tt> setting in the client.rb file to <tt class="docutils literal"><span class="pre">Chef::Log::Syslog.new(&quot;chef-client&quot;,</span> <span class="pre">::Syslog::LOG_DAEMON)</span></tt>.</li>
<li><strong>Package locations on the Windows platform may be specified using a URL</strong> The location of a package may be at URL when using the <strong>windows_package</strong> resource.</li>
<li><strong>Package locations on the Windows platform may be specified by passing attributes to the remote_file resource</strong> Use the <tt class="docutils literal"><span class="pre">remote_file_attributes</span></tt> attribute to pass a Hash of attributes that modifies the <strong>remote_file</strong> resource.</li>
<li><strong>Public key management for users and clients</strong> The <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">client</span></tt> and <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">user</span></tt> subcommands may now create, delete, edit, list, and show public keys.</li>
<li><strong>knife client create and knife user create options have changed</strong> With the new key management subcommands, the options for <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">client</span> <span class="pre">create</span></tt> and <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">user</span> <span class="pre">create</span></tt> have changed.</li>
<li><strong>chef-client audit-mode is no longer marked as &#8220;experimental&#8221;</strong> The recommended version of audit-mode is chef-client 12.4, where it is no longer marked as experimental. The chef-client will report audit failures independently of converge failures.</li>
</ul>
<div class="section" id="unc-paths-remote-file">
<h3>UNC paths, <strong>remote_file</strong><a class="headerlink" href="#unc-paths-remote-file" title="Permalink to this headline">¶</a></h3>
<p>When using the <strong>remote_file</strong> resource, the location of a source file may be specified using a Microsoft Windows UNC. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="s2">&quot;</span><span class="se">\\\\</span><span class="s2">path</span><span class="se">\\</span><span class="s2">to</span><span class="se">\\</span><span class="s2">img</span><span class="se">\\</span><span class="s2">sketch.png&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="import-module-chef">
<h3>Import-Module chef<a class="headerlink" href="#import-module-chef" title="Permalink to this headline">¶</a></h3>
<p>The chef-client version 12.4 release adds an optional feature to the Microsoft Installer Package (MSI) for Chef. This feature enables the ability to pass quoted strings from the Windows PowerShell command line without the need for triple single quotes (<tt class="docutils literal"><span class="pre">'''</span> <span class="pre">'''</span></tt>). This feature installs a Windows PowerShell module (typically in <tt class="docutils literal"><span class="pre">C:\opscode\chef\modules</span></tt>) that is also appended to the <tt class="docutils literal"><span class="pre">PSModulePath</span></tt> environment variable. This feature is not enabled by default. To activate this feature, run the following command from within Windows PowerShell:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ Import-Module chef
</pre></div>
</div>
<p>or add <tt class="docutils literal"><span class="pre">Import-Module</span> <span class="pre">chef</span></tt> to the profile for Windows PowerShell located at:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>~<span class="se">\D</span>ocuments<span class="se">\W</span>indowsPowerShell<span class="se">\M</span>icrosoft.PowerShell_profile.ps1
</pre></div>
</div>
<p>This module exports cmdlets that have the same name as the command-line tools&#8212;chef-client, knife, chef-apply&#8212;that are built into Chef.</p>
<p>For example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife <span class="nb">exec</span> -E <span class="s1">&#39;puts ARGV&#39;</span> <span class="s2">&quot;&quot;&quot;&amp;s0meth1ng&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>is now:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife <span class="nb">exec</span> -E <span class="s1">&#39;puts ARGV&#39;</span> <span class="s1">&#39;&amp;s0meth1ng&#39;</span>
</pre></div>
</div>
<p>and:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife node run_list <span class="nb">set</span> test-node <span class="s1">&#39;&#39;&#39;role[ssssssomething]&#39;&#39;&#39;</span>
</pre></div>
</div>
<p>is now:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife node run_list <span class="nb">set</span> test-node <span class="s1">&#39;role[ssssssomething]&#39;</span>
</pre></div>
</div>
<p>To remove this feature, run the following command from within Windows PowerShell:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ Remove-Module chef
</pre></div>
</div>
</div>
<div class="section" id="client-rb-settings">
<h3>client.rb Settings<a class="headerlink" href="#client-rb-settings" title="Permalink to this headline">¶</a></h3>
<p>The following settings have changed:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Setting</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">log_location</span></tt></td>
<td>The location of the log file. Possible values: <tt class="docutils literal"><span class="pre">/path/to/log_location</span></tt>, <tt class="docutils literal"><span class="pre">STDOUT</span></tt>, <tt class="docutils literal"><span class="pre">STDERR</span></tt>, <tt class="docutils literal"><span class="pre">Chef::Log::WinEvt.new</span></tt> (Windows Event Logger), or <tt class="docutils literal"><span class="pre">Chef::Log::Syslog.new(&quot;chef-client&quot;,</span> <span class="pre">::Syslog::LOG_DAEMON)</span></tt> (writes to the syslog daemon facility with the originator set as <tt class="docutils literal"><span class="pre">chef-client</span></tt>). The application log will specify the source as <tt class="docutils literal"><span class="pre">Chef</span></tt>. Default value: <tt class="docutils literal"><span class="pre">STDOUT</span></tt>.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="windows-package-updates">
<h3><strong>windows_package</strong> Updates<a class="headerlink" href="#windows-package-updates" title="Permalink to this headline">¶</a></h3>
<p>The <strong>windows_package</strong> resource has two new attributes (<tt class="docutils literal"><span class="pre">checksum</span></tt> and <tt class="docutils literal"><span class="pre">remote_file_attributes</span></tt>) and the <tt class="docutils literal"><span class="pre">source</span></tt> attribute now supports using a URL:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">checksum</span></tt></td>
<td>The SHA-256 checksum of the file. Use to prevent a file from being re-downloaded. When the local file matches the checksum, the chef-client does not download it. Use when a URL is specified by the <tt class="docutils literal"><span class="pre">source</span></tt> attribute.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">remote_file_attributes</span></tt></td>
<td>A package at a remote location define as a Hash of properties that modifes the properties of the <strong>remote_file</strong> resource.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">source</span></tt></td>
<td>Optional. The path to a package in the local file system. The location of the package may be at a URL. Default value: the <tt class="docutils literal"><span class="pre">name</span></tt> of the resource block. See &#8220;Syntax&#8221; section above for more information.</td>
</tr>
</tbody>
</table>
<p>Examples:</p>
<p><strong>Specify a URL for the source attribute</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">windows_package</span> <span class="s1">&#39;7zip&#39;</span> <span class="k">do</span>
  <span class="n">source</span> <span class="s1">&#39;http://www.7-zip.org/a/7z938-x64.msi&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Specify path and checksum</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">windows_package</span> <span class="s1">&#39;7zip&#39;</span> <span class="k">do</span>
  <span class="n">source</span> <span class="s1">&#39;http://www.7-zip.org/a/7z938-x64.msi&#39;</span>
  <span class="n">checksum</span> <span class="s1">&#39;7c8e873991c82ad9cfc123415254ea6101e9a645e12977dcd518979e50fdedf3&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Modify remote_file resource attributes</strong></p>
<p>The <strong>windows_package</strong> resource may specify a package at a remote location using the <tt class="docutils literal"><span class="pre">remote_file_attributes</span></tt> property. This uses the <strong>remote_file</strong> resource to download the contents at the specified URL and passes in a Hash that modifes the properties of the <a class="reference external" href="https://docs.chef.io/resource_remote_file.html">remote_file resource</a>.</p>
<p>For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">windows_package</span> <span class="s1">&#39;7zip&#39;</span> <span class="k">do</span>
  <span class="n">source</span> <span class="s1">&#39;http://www.7-zip.org/a/7z938-x64.msi&#39;</span>
  <span class="n">remote_file_attributes</span> <span class="p">({</span>
    <span class="ss">:path</span> <span class="o">=&gt;</span> <span class="s1">&#39;C:\\7zip.msi&#39;</span><span class="p">,</span>
    <span class="ss">:checksum</span> <span class="o">=&gt;</span> <span class="s1">&#39;7c8e873991c82ad9cfc123415254ea6101e9a645e12977dcd518979e50fdedf3&#39;</span>
  <span class="p">})</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="section" id="knife-client-key">
<h3>knife client key<a class="headerlink" href="#knife-client-key" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">client</span></tt> subcommand is used to manage an API client list and their associated RSA public key-pairs. This allows authentication requests to be made to the Chef server by any entity that uses the Chef server API, such as the chef-client and knife.</p>
<div class="section" id="key-create">
<h4>key create<a class="headerlink" href="#key-create" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">key</span> <span class="pre">create</span></tt> argument to create a public key.</p>
<div class="section" id="id23">
<h5>Syntax<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h5>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife client key create CLIENT_NAME <span class="o">(</span>options<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="options">
<h5>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h5>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">-e</span> <span class="pre">DATE</span></tt>, <tt class="docutils literal"><span class="pre">--expiration-date</span> <span class="pre">DATE</span></tt></dt>
<dd>The expiration date for the public key, specified as an ISO 8601 formatted string: <tt class="docutils literal"><span class="pre">YYYY-MM-DDTHH:MM:SSZ</span></tt>. If this option is not specified, the public key will not have an expiration date. For example: <tt class="docutils literal"><span class="pre">2013-12-24T21:00:00Z</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-f</span> <span class="pre">FILE</span></tt>, <tt class="docutils literal"><span class="pre">--file</span> <span class="pre">FILE</span></tt></dt>
<dd>Save a private key to the specified file name. If the <tt class="docutils literal"><span class="pre">--public-key</span></tt> option is not specified the Chef server will generate a private key.</dd>
<dt><tt class="docutils literal"><span class="pre">-k</span> <span class="pre">NAME</span></tt>, <tt class="docutils literal"><span class="pre">--key-name</span> <span class="pre">NAME</span></tt></dt>
<dd>The name of the public key.</dd>
<dt><tt class="docutils literal"><span class="pre">-p</span> <span class="pre">FILE_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--public-key</span> <span class="pre">FILE_NAME</span></tt></dt>
<dd>The path to a file that contains the public key. If this option is not specified, and only if <tt class="docutils literal"><span class="pre">--key-name</span></tt> is specified, the Chef server will generate a public/private key pair.</dd>
</dl>
</div>
</div>
<div class="section" id="key-delete">
<h4>key delete<a class="headerlink" href="#key-delete" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">key</span> <span class="pre">delete</span></tt> argument to delete a public key.</p>
<div class="section" id="id24">
<h5>Syntax<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h5>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife client key delete CLIENT_NAME KEY_NAME
</pre></div>
</div>
</div>
</div>
<div class="section" id="key-edit">
<h4>key edit<a class="headerlink" href="#key-edit" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">key</span> <span class="pre">edit</span></tt> argument to modify or rename a public key.</p>
<div class="section" id="id25">
<h5>Syntax<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h5>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife client key edit CLIENT_NAME KEY_NAME <span class="o">(</span>options<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id26">
<h5>Options<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h5>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">-c</span></tt>, <tt class="docutils literal"><span class="pre">--create-key</span></tt></dt>
<dd>Generate a new public/private key pair and replace an existing public key with the newly-generated public key. To replace the public key with an existing public key, use <tt class="docutils literal"><span class="pre">--public-key</span></tt> instead.</dd>
<dt><tt class="docutils literal"><span class="pre">-e</span> <span class="pre">DATE</span></tt>, <tt class="docutils literal"><span class="pre">--expiration-date</span> <span class="pre">DATE</span></tt></dt>
<dd>The expiration date for the public key, specified as an ISO 8601 formatted string: <tt class="docutils literal"><span class="pre">YYYY-MM-DDTHH:MM:SSZ</span></tt>. If this option is not specified, the public key will not have an expiration date. For example: <tt class="docutils literal"><span class="pre">2013-12-24T21:00:00Z</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-f</span> <span class="pre">FILE</span></tt>, <tt class="docutils literal"><span class="pre">--file</span> <span class="pre">FILE</span></tt></dt>
<dd>Save a private key to the specified file name. If the <tt class="docutils literal"><span class="pre">--public-key</span></tt> option is not specified the Chef server will generate a private key.</dd>
<dt><tt class="docutils literal"><span class="pre">-k</span> <span class="pre">NAME</span></tt>, <tt class="docutils literal"><span class="pre">--key-name</span> <span class="pre">NAME</span></tt></dt>
<dd>The name of the public key.</dd>
<dt><tt class="docutils literal"><span class="pre">-p</span> <span class="pre">FILE_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--public-key</span> <span class="pre">FILE_NAME</span></tt></dt>
<dd>The path to a file that contains the public key. If this option is not specified, and only if <tt class="docutils literal"><span class="pre">--key-name</span></tt> is specified, the Chef server will generate a public/private key pair.</dd>
</dl>
</div>
</div>
<div class="section" id="key-list">
<h4>key list<a class="headerlink" href="#key-list" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">key</span> <span class="pre">list</span></tt> argument to view a list of public keys for the named client.</p>
<div class="section" id="id27">
<h5>Syntax<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h5>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife client key list CLIENT_NAME <span class="o">(</span>options<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id28">
<h5>Options<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h5>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">-e</span></tt>, <tt class="docutils literal"><span class="pre">--only-expired</span></tt></dt>
<dd>Show a list of public keys that have expired.</dd>
<dt><tt class="docutils literal"><span class="pre">-n</span></tt>, <tt class="docutils literal"><span class="pre">--only-non-expired</span></tt></dt>
<dd>Show a list of public keys that have not expired.</dd>
<dt><tt class="docutils literal"><span class="pre">-w</span></tt>, <tt class="docutils literal"><span class="pre">--with-details</span></tt></dt>
<dd>Show a list of public keys, including URIs and expiration status.</dd>
</dl>
</div>
</div>
<div class="section" id="key-show">
<h4>key show<a class="headerlink" href="#key-show" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">key</span> <span class="pre">show</span></tt> argument to view details for a specific public key.</p>
<div class="section" id="id29">
<h5>Syntax<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h5>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife client key show CLIENT_NAME KEY_NAME
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="knife-user-key">
<h3>knife user key<a class="headerlink" href="#knife-user-key" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">user</span></tt> subcommand is used to manage the list of users and their associated RSA public key-pairs.</p>
<div class="section" id="id30">
<h4>key create<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">key</span> <span class="pre">create</span></tt> argument to create a public key.</p>
<div class="section" id="id31">
<h5>Syntax<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h5>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife user key create USER_NAME <span class="o">(</span>options<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id32">
<h5>Options<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h5>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">-e</span> <span class="pre">DATE</span></tt>, <tt class="docutils literal"><span class="pre">--expiration-date</span> <span class="pre">DATE</span></tt></dt>
<dd>The expiration date for the public key, specified as an ISO 8601 formatted string: <tt class="docutils literal"><span class="pre">YYYY-MM-DDTHH:MM:SSZ</span></tt>. If this option is not specified, the public key will not have an expiration date. For example: <tt class="docutils literal"><span class="pre">2013-12-24T21:00:00Z</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-f</span> <span class="pre">FILE</span></tt>, <tt class="docutils literal"><span class="pre">--file</span> <span class="pre">FILE</span></tt></dt>
<dd>Save a private key to the specified file name.</dd>
<dt><tt class="docutils literal"><span class="pre">-k</span> <span class="pre">NAME</span></tt>, <tt class="docutils literal"><span class="pre">--key-name</span> <span class="pre">NAME</span></tt></dt>
<dd>The name of the public key.</dd>
<dt><tt class="docutils literal"><span class="pre">-p</span> <span class="pre">FILE_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--public-key</span> <span class="pre">FILE_NAME</span></tt></dt>
<dd>The path to a file that contains the public key. If this option is not specified, and only if <tt class="docutils literal"><span class="pre">--key-name</span></tt> is specified, the Chef server will generate a public/private key pair.</dd>
</dl>
</div>
</div>
<div class="section" id="id33">
<h4>key delete<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">key</span> <span class="pre">delete</span></tt> argument to delete a public key.</p>
<div class="section" id="id34">
<h5>Syntax<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h5>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife user key delete USER_NAME KEY_NAME
</pre></div>
</div>
</div>
</div>
<div class="section" id="id35">
<h4>key edit<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">key</span> <span class="pre">edit</span></tt> argument to modify or rename a public key.</p>
<div class="section" id="id36">
<h5>Syntax<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h5>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife user key edit USER_NAME KEY_NAME <span class="o">(</span>options<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id37">
<h5>Options<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h5>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">-c</span></tt>, <tt class="docutils literal"><span class="pre">--create-key</span></tt></dt>
<dd>Generate a new public/private key pair and replace an existing public key with the newly-generated public key. To replace the public key with an existing public key, use <tt class="docutils literal"><span class="pre">--public-key</span></tt> instead.</dd>
<dt><tt class="docutils literal"><span class="pre">-e</span> <span class="pre">DATE</span></tt>, <tt class="docutils literal"><span class="pre">--expiration-date</span> <span class="pre">DATE</span></tt></dt>
<dd>The expiration date for the public key, specified as an ISO 8601 formatted string: <tt class="docutils literal"><span class="pre">YYYY-MM-DDTHH:MM:SSZ</span></tt>. If this option is not specified, the public key will not have an expiration date. For example: <tt class="docutils literal"><span class="pre">2013-12-24T21:00:00Z</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">-f</span> <span class="pre">FILE</span></tt>, <tt class="docutils literal"><span class="pre">--file</span> <span class="pre">FILE</span></tt></dt>
<dd>Save a private key to the specified file name. If the <tt class="docutils literal"><span class="pre">--public-key</span></tt> option is not specified the Chef server will generate a private key.</dd>
<dt><tt class="docutils literal"><span class="pre">-k</span> <span class="pre">NAME</span></tt>, <tt class="docutils literal"><span class="pre">--key-name</span> <span class="pre">NAME</span></tt></dt>
<dd>The name of the public key.</dd>
<dt><tt class="docutils literal"><span class="pre">-p</span> <span class="pre">FILE_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--public-key</span> <span class="pre">FILE_NAME</span></tt></dt>
<dd>The path to a file that contains the public key. If this option is not specified, and only if <tt class="docutils literal"><span class="pre">--key-name</span></tt> is specified, the Chef server will generate a public/private key pair.</dd>
</dl>
</div>
</div>
<div class="section" id="id38">
<h4>key list<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">key</span> <span class="pre">list</span></tt> argument to view a list of public keys for the named user.</p>
<div class="section" id="id39">
<h5>Syntax<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h5>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife user key list USER_NAME <span class="o">(</span>options<span class="o">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id40">
<h5>Options<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h5>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">-e</span></tt>, <tt class="docutils literal"><span class="pre">--only-expired</span></tt></dt>
<dd>Show a list of public keys that have expired.</dd>
<dt><tt class="docutils literal"><span class="pre">-n</span></tt>, <tt class="docutils literal"><span class="pre">--only-non-expired</span></tt></dt>
<dd>Show a list of public keys that have not expired.</dd>
<dt><tt class="docutils literal"><span class="pre">-w</span></tt>, <tt class="docutils literal"><span class="pre">--with-details</span></tt></dt>
<dd>Show a list of public keys, including URIs and expiration status.</dd>
</dl>
</div>
</div>
<div class="section" id="id41">
<h4>key show<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h4>
<p>Use the <tt class="docutils literal"><span class="pre">key</span> <span class="pre">show</span></tt> argument to view details for a specific public key.</p>
<div class="section" id="id42">
<h5>Syntax<a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h5>
<p>This argument has the following syntax:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife user key show USER_NAME KEY_NAME
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="updated-knife-options">
<h3>Updated knife Options<a class="headerlink" href="#updated-knife-options" title="Permalink to this headline">¶</a></h3>
<p>With the new key management subcommands, the options for <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">client</span> <span class="pre">create</span></tt> and <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">user</span> <span class="pre">create</span></tt> have changed.</p>
<div class="section" id="knife-client-create">
<h4>knife client create<a class="headerlink" href="#knife-client-create" title="Permalink to this headline">¶</a></h4>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">-a</span></tt>, <tt class="docutils literal"><span class="pre">--admin</span></tt></dt>
<dd>Create a client as an admin client. This is required for any user to access Open Source Chef as an administrator.  This option only works when used with the open source Chef server and will have no effect when used with Enterprise Chef or Chef server 12.x.</dd>
<dt><tt class="docutils literal"><span class="pre">-f</span> <span class="pre">FILE</span></tt>, <tt class="docutils literal"><span class="pre">--file</span> <span class="pre">FILE</span></tt></dt>
<dd>Save a private key to the specified file name.</dd>
<dt><tt class="docutils literal"><span class="pre">-k</span></tt>, <tt class="docutils literal"><span class="pre">--prevent-keygen</span></tt></dt>
<dd><p class="first">Create a user without a public key. This key may be managed later by using the <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">user</span> <span class="pre">key</span></tt> subcommands.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This option is valid only with Chef server API, version 1.0, which was released with Chef server 12.1. If this option or the <tt class="docutils literal"><span class="pre">--user-key</span></tt> option are not passed in the command, the Chef server will create a user with a public key named <tt class="docutils literal"><span class="pre">default</span></tt> and will return the private key. For the Chef server versions earlier than 12.1, this option will not work; a public key is always generated unless <tt class="docutils literal"><span class="pre">--user-key</span></tt> is passed in the command.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">-p</span> <span class="pre">FILE</span></tt>, <tt class="docutils literal"><span class="pre">--public-key</span> <span class="pre">FILE</span></tt></dt>
<dd>The path to a file that contains the public key. This option may not be passed in the same command with <tt class="docutils literal"><span class="pre">--prevent-keygen</span></tt>. When using Open Source Chef a default key is generated if this option is not passed in the command. For Chef server version 12.x, see the <tt class="docutils literal"><span class="pre">--prevent-keygen</span></tt> option.</dd>
<dt><tt class="docutils literal"><span class="pre">--validator</span></tt></dt>
<dd>Create the client as the chef-validator. Default value: <tt class="docutils literal"><span class="pre">true</span></tt>.</dd>
</dl>
</div>
<div class="section" id="knife-user-create">
<h4>knife user create<a class="headerlink" href="#knife-user-create" title="Permalink to this headline">¶</a></h4>
<p>This argument has the following options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">-a</span></tt>, <tt class="docutils literal"><span class="pre">--admin</span></tt></dt>
<dd>Create a client as an admin client. This is required for any user to access Open Source Chef as an administrator. This option only works when used with the open source Chef server and will have no effect when used with Enterprise Chef or Chef server 12.x.</dd>
<dt><tt class="docutils literal"><span class="pre">-f</span> <span class="pre">FILE_NAME</span></tt>, <tt class="docutils literal"><span class="pre">--file</span> <span class="pre">FILE_NAME</span></tt></dt>
<dd>Save a private key to the specified file name.</dd>
<dt><tt class="docutils literal"><span class="pre">-k</span></tt>, <tt class="docutils literal"><span class="pre">--prevent-keygen</span></tt></dt>
<dd><p class="first">Create a user without a public key. This key may be managed later by using the <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">user</span> <span class="pre">key</span></tt> subcommands.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This option is valid only with Chef server API, version 1.0, which was released with Chef server 12.1. If this option or the <tt class="docutils literal"><span class="pre">--user-key</span></tt> option are not passed in the command, the Chef server will create a user with a public key named <tt class="docutils literal"><span class="pre">default</span></tt> and will return the private key. For the Chef server versions earlier than 12.1, this option will not work; a public key is always generated unless <tt class="docutils literal"><span class="pre">--user-key</span></tt> is passed in the command.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">-p</span> <span class="pre">PASSWORD</span></tt>, <tt class="docutils literal"><span class="pre">--password</span> <span class="pre">PASSWORD</span></tt></dt>
<dd>The user password. This option only works when used with the open source Chef server and will have no effect when used with Enterprise Chef or Chef server 12.x.</dd>
<dt><tt class="docutils literal"><span class="pre">--user-key</span> <span class="pre">FILE_NAME</span></tt></dt>
<dd>The path to a file that contains the public key. When using Open Source Chef a default key is generated if this option is not passed in the command. For Chef server version 12.x, see the <tt class="docutils literal"><span class="pre">--prevent-keygen</span></tt> option.</dd>
</dl>
</div>
</div>
</div>
<div class="section" id="what-s-new-in-12-3">
<h2>What&#8217;s New in 12.3<a class="headerlink" href="#what-s-new-in-12-3" title="Permalink to this headline">¶</a></h2>
<p>The following items are new for chef-client 12.3 and/or are changes from previous versions. The short version:</p>
<ul class="simple">
<li><strong>Socketless local mode with chef-zero</strong> Port binding and HTTP requests on localhost may be disabled in favor of socketless mode.</li>
<li><strong>Minimal Ohai plugins</strong> Run only the plugins required for name resolution and resource/provider detection.</li>
<li><strong>Dynamic resource and provider resolution</strong> Four helper methods may be used in a library file to get resource and/or provider mapping details, and then set them per-resource or provider.</li>
<li><strong>New clear_soruces attribute for the chef_gem and gem_package resources</strong> Set to <tt class="docutils literal"><span class="pre">true</span></tt> to download a gem from the path specified by the <tt class="docutils literal"><span class="pre">source</span></tt> property (and not from RubyGems).</li>
</ul>
<div class="section" id="socketless-local-mode">
<h3>Socketless Local Mode<a class="headerlink" href="#socketless-local-mode" title="Permalink to this headline">¶</a></h3>
<p>The chef-client may disable port binding and HTTP requests on localhost by making a socketless request to chef-zero. This may be done from the command line or with a configuration setting.</p>
<p>Use the following command-line option:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--[no-]listen</span></tt></dt>
<dd>Run chef-zero in socketless mode. Use <tt class="docutils literal"><span class="pre">--no-listen</span></tt> to disable port binding and HTTP requests on localhost.</dd>
</dl>
<p>Or add the following setting to the client.rb file:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Setting</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">listen</span></tt></td>
<td>Run chef-zero in socketless mode. Set to <tt class="docutils literal"><span class="pre">false</span></tt> to disable port binding and HTTP requests on localhost.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="minimal-ohai">
<h3>Minimal Ohai<a class="headerlink" href="#minimal-ohai" title="Permalink to this headline">¶</a></h3>
<p>The following option may be used with chef-client, chef-solo, and chef-apply to speed up testing intervals:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--minimal-ohai</span></tt></dt>
<dd>Run the Ohai plugins for name detection and resource/provider selection and no other Ohai plugins. Set to <tt class="docutils literal"><span class="pre">true</span></tt> during integration testing to speed up test cycles.</dd>
</dl>
<p>This setting may be configured using the <tt class="docutils literal"><span class="pre">minimal_ohai</span></tt> setting in the client.rb file.</p>
</div>
<div class="section" id="dynamic-resolution">
<h3>Dynamic Resolution<a class="headerlink" href="#dynamic-resolution" title="Permalink to this headline">¶</a></h3>
<p>Resources and providers are resolved dynamically and can handle multiple <tt class="docutils literal"><span class="pre">provides</span></tt> lines for a specific platform. When multiple <tt class="docutils literal"><span class="pre">provides</span></tt> lines exist, such as <tt class="docutils literal"><span class="pre">Homebrew</span></tt> and <tt class="docutils literal"><span class="pre">MacPorts</span></tt> packages for the Mac OS X platform, then one is selected based on resource priority mapping performed by the chef-client during the chef-client run.</p>
<p>Use the following helpers in a library file to get and/or set resource and/or provider priority mapping before any recipes are compiled:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">Chef.get_provider_priority_array(resource_name)</span></tt></dt>
<dd>Get the priority mapping for a provider.</dd>
<dt><tt class="docutils literal"><span class="pre">Chef.get_resource_priority_array(resource_name)</span></tt></dt>
<dd>Get the priority mapping for a resource.</dd>
<dt><tt class="docutils literal"><span class="pre">Chef.set_provider_priority_array(resource_name,</span> <span class="pre">Array&lt;Class&gt;,</span> <span class="pre">*filter)</span></tt></dt>
<dd>Set the priority mapping for a provider.</dd>
<dt><tt class="docutils literal"><span class="pre">Chef.set_resource_priority_array(resource_name,</span> <span class="pre">Array&lt;Class&gt;,</span> <span class="pre">*filter)</span></tt></dt>
<dd>Set the priority mapping for a resource.</dd>
</dl>
<p>For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="no">Chef</span><span class="o">.</span><span class="n">set_resource_priority_array</span><span class="p">(</span><span class="ss">:package</span><span class="p">,</span> <span class="o">[</span> <span class="no">Chef</span><span class="o">::</span><span class="no">Resource</span><span class="o">::</span><span class="no">MacportsPackage</span> <span class="o">]</span><span class="p">,</span> <span class="ss">os</span><span class="p">:</span> <span class="s1">&#39;darwin&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="what-s-new-in-12-2">
<h2>What&#8217;s New in 12.2<a class="headerlink" href="#what-s-new-in-12-2" title="Permalink to this headline">¶</a></h2>
<p>The following items are new for chef-client 12.2 and/or are changes from previous versions. The short version:</p>
<ul class="simple">
<li><strong>New dsc_resource</strong> Use the <strong>dsc_resource</strong> resource to use any DSC resource in a Chef recipe.</li>
<li><strong>New &#8211;exit-on-error option for knife-ssh</strong> Use the <tt class="docutils literal"><span class="pre">--exit-on-error</span></tt> option to have the <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">ssh</span></tt> subcommand exit on any error.</li>
</ul>
<div class="section" id="dsc-resource">
<h3>dsc_resource<a class="headerlink" href="#dsc-resource" title="Permalink to this headline">¶</a></h3>
<p>Windows PowerShell is a task-based command-line shell and scripting language developed by Microsoft. Windows PowerShell uses a document-oriented approach for managing Microsoft Windows-based machines, similar to the approach that is used for managing UNIX- and Linux-based machines. Windows PowerShell is <a class="reference external" href="http://technet.microsoft.com/en-us/library/bb978526.aspx">a tool-agnostic platform</a> that supports using Chef for configuration management.</p>
<p>Desired State Configuration (DSC) is a feature of Windows PowerShell that provides <a class="reference external" href="http://technet.microsoft.com/en-us/library/dn249912.aspx">a set of language extensions, cmdlets, and resources</a> that can be used to declaratively configure software. DSC is similar to Chef, in that both tools are idempotent, take similar approaches to the concept of resources, describe the configuration of a system, and then take the steps required to do that configuration. The most important difference between Chef and DSC is that Chef uses Ruby and DSC is exposed as configuration data from within Windows PowerShell.</p>
<p>The <strong>dsc_resource</strong> resource allows any DSC resource to be used in a Chef recipe, as well as any custom resources that have been added to your Windows PowerShell environment. Microsoft <a class="reference external" href="https://github.com/powershell/DscResources">frequently adds new resources</a> to the DSC resource collection.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Using the <strong>dsc_resource</strong> has the following requirements:</p>
<ul class="last">
<li><p class="first">Windows Management Framework (WMF) 5.0 February Preview (or higher), which includes Windows PowerShell 5.0.10018.0 (or higher).</p>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">RefreshMode</span></tt> configuration setting in the Local Configuration Manager must be set to <tt class="docutils literal"><span class="pre">Disabled</span></tt>.</p>
<p><strong>NOTE:</strong> Starting with the chef-client 12.6 release, this requirement applies only for versions of Windows PowerShell earlier than 5.0.10586.0. The latest version of Windows Management Framework (WMF) 5 has relaxed the limitation that prevented the chef-client from running in non-disabled refresh mode.</p>
</li>
<li><p class="first">The <strong>dsc_script</strong> resource  may not be used in the same run-list with the <strong>dsc_resource</strong>. This is because the <strong>dsc_script</strong> resource requires that <tt class="docutils literal"><span class="pre">RefreshMode</span></tt> in the Local Configuration Manager be set to <tt class="docutils literal"><span class="pre">Push</span></tt>, whereas the <strong>dsc_resource</strong> resource requires it to be set to <tt class="docutils literal"><span class="pre">Disabled</span></tt>.</p>
<p><strong>NOTE:</strong> Starting with the chef-client 12.6 release, this requirement applies only for versions of Windows PowerShell earlier than 5.0.10586.0. The latest version of Windows Management Framework (WMF) 5 has relaxed the limitation that prevented the chef-client from running in non-disabled refresh mode, which allows the Local Configuration Manager to be set to <tt class="docutils literal"><span class="pre">Push</span></tt>.</p>
</li>
<li><p class="first">The <strong>dsc_resource</strong> resource can only use binary- or script-based resources. Composite DSC resources may not be used.</p>
<p>This is because composite resources aren&#8217;t &#8220;real&#8221; resources from the perspective of the the Local Configuration Manager (LCM). Composite resources are used by the &#8220;configuration&#8221; keyword from the <tt class="docutils literal"><span class="pre">PSDesiredStateConfiguration</span></tt> module, and then evaluated in that context. When using DSC to create the configuration document (the Managed Object Framework (MOF) file) from the configuration command, the composite resource is evaluated. Any individual resources from that composite resource are written into the Managed Object Framework (MOF) document. As far as the Local Configuration Manager (LCM) is concerned, there is no such thing as a composite resource. Unless that changes, the <strong>dsc_resource</strong> resource and/or <tt class="docutils literal"><span class="pre">Invoke-DscResource</span></tt> command cannot directly use them.</p>
</li>
</ul>
</div>
<div class="section" id="id43">
<h4>Syntax<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h4>
<p>A <strong>dsc_resource</strong> resource block allows DSC resourcs to be used in a Chef recipe. For example, the DSC <tt class="docutils literal"><span class="pre">Archive</span></tt> resource:</p>
<div class="highlight-powershell"><div class="highlight"><pre><span></span><span class="n">Archive</span> <span class="n">ExampleArchive</span> <span class="p">{</span>
  <span class="n">Ensure</span> <span class="p">=</span> <span class="s2">&quot;Present&quot;</span>
  <span class="n">Path</span> <span class="p">=</span> <span class="s2">&quot;C:\Users\Public\Documents\example.zip&quot;</span>
  <span class="n">Destination</span> <span class="p">=</span> <span class="s2">&quot;C:\Users\Public\Documents\ExtractionPath&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and then the same <strong>dsc_resource</strong> with Chef:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">dsc_resource</span> <span class="s1">&#39;example&#39;</span> <span class="k">do</span>
   <span class="n">resource</span> <span class="ss">:archive</span>
   <span class="n">property</span> <span class="ss">:ensure</span><span class="p">,</span> <span class="s1">&#39;Present&#39;</span>
   <span class="n">property</span> <span class="ss">:path</span><span class="p">,</span> <span class="s2">&quot;C:\Users\Public\Documents</span><span class="se">\e</span><span class="s2">xample.zip&quot;</span>
   <span class="n">property</span> <span class="ss">:destination</span><span class="p">,</span> <span class="s2">&quot;C:\Users\Public\Documents\ExtractionPath&quot;</span>
 <span class="k">end</span>
</pre></div>
</div>
<p>The full syntax for all of the properties that are available to the <strong>dsc_resource</strong> resource is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">dsc_resource</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
  <span class="n">module_name</span>                <span class="nb">String</span>
  <span class="n">notifies</span>                   <span class="c1"># see description</span>
  <span class="n">property</span>                   <span class="no">Symbol</span>
  <span class="n">resource</span>                   <span class="nb">String</span>
  <span class="n">subscribes</span>                 <span class="c1"># see description</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">dsc_resource</span></tt> is the resource</li>
<li><tt class="docutils literal"><span class="pre">name</span></tt> is the name of the resource block</li>
<li><tt class="docutils literal"><span class="pre">property</span></tt> is zero (or more) properties in the DSC resource, where each property is entered on a separate line, <tt class="docutils literal"><span class="pre">:dsc_property_name</span></tt> is the case-insensitive name of that property, and <tt class="docutils literal"><span class="pre">&quot;property_value&quot;</span></tt> is a Ruby value to be applied by the chef-client</li>
<li><tt class="docutils literal"><span class="pre">module_name</span></tt>, <tt class="docutils literal"><span class="pre">property</span></tt>, and <tt class="docutils literal"><span class="pre">resource</span></tt> are properties of this resource, with the Ruby type shown. See &#8220;Properties&#8221; section below for more information about all of the properties that may be used with this resource.</li>
</ul>
</div>
<div class="section" id="attributes">
<h4>Attributes<a class="headerlink" href="#attributes" title="Permalink to this headline">¶</a></h4>
<p>This resource has the following properties:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">ignore_failure</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Continue running a recipe if a resource fails for any reason. Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">module_name</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The name of the module from which a DSC resource originates. If this property is not specified, it will be inferred.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">notifies</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may notify another resource to take action when its state changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> that resource should take, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action. A resource may notifiy more than one resource; use a <tt class="docutils literal"><span class="pre">notifies</span></tt> statement for each resource to be notified.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">notifies</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">notifies</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">property</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol</p>
<p>A property from a Desired State Configuration (DSC) resource. Use this property multiple times, one for each property in the Desired State Configuration (DSC) resource. The format for this property must follow <tt class="docutils literal"><span class="pre">property</span> <span class="pre">:dsc_property_name,</span> <span class="pre">&quot;property_value&quot;</span></tt> for each DSC property added to the resource block.</p>
<p>The <tt class="docutils literal"><span class="pre">:dsc_property_name</span></tt> must be a symbol.</p>
<p>Use the following Ruby types to define <tt class="docutils literal"><span class="pre">property_value</span></tt>:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Ruby</th>
<th class="head">Windows PowerShell</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">Array</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Object[]</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">Chef::Util::Powershell:PSCredential</span></tt></td>
<td><tt class="docutils literal"><span class="pre">PSCredential</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">FalseClass</span></tt></td>
<td><tt class="docutils literal"><span class="pre">bool($false)</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">Fixnum</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Integer</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">Float</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Double</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">Hash</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Hashtable</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">TrueClass</span></tt></td>
<td><tt class="docutils literal"><span class="pre">bool($true)</span></tt></td>
</tr>
</tbody>
</table>
<p class="last">These are converted into the corresponding Windows PowerShell type during the chef-client run.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">resource</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p>The name of the DSC resource. This value is case-insensitive and must be a symbol that matches the name of the DSC resource.</p>
<p>For built-in DSC resources, use the following values:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">:archive</span></tt></td>
<td>Use to to <a class="reference external" href="https://msdn.microsoft.com/en-us/powershell/dsc/archiveresource">unpack archive (.zip) files</a>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">:environment</span></tt></td>
<td>Use to to <a class="reference external" href="https://msdn.microsoft.com/en-us/powershell/dsc/environmentresource">manage system environment variables</a>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">:file</span></tt></td>
<td>Use to to <a class="reference external" href="https://msdn.microsoft.com/en-us/powershell/dsc/fileresource">manage files and directories</a>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">:group</span></tt></td>
<td>Use to to <a class="reference external" href="https://msdn.microsoft.com/en-us/powershell/dsc/groupresource">manage local groups</a>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">:log</span></tt></td>
<td>Use to to <a class="reference external" href="https://msdn.microsoft.com/en-us/powershell/dsc/logresource">log configuration messages</a>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">:package</span></tt></td>
<td>Use to to <a class="reference external" href="https://msdn.microsoft.com/en-us/powershell/dsc/packageresource">install and manage packages</a>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">:registry</span></tt></td>
<td>Use to to <a class="reference external" href="https://msdn.microsoft.com/en-us/powershell/dsc/registryresource">manage registry keys and registry key values</a>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">:script</span></tt></td>
<td>Use to to <a class="reference external" href="https://msdn.microsoft.com/en-us/powershell/dsc/scriptresource">run Powershell script blocks</a>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">:service</span></tt></td>
<td>Use to to <a class="reference external" href="https://msdn.microsoft.com/en-us/powershell/dsc/serviceresource">manage services</a>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">:user</span></tt></td>
<td>Use to to <a class="reference external" href="https://msdn.microsoft.com/en-us/powershell/dsc/userresource">manage local user accounts</a>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">:windowsfeature</span></tt></td>
<td>Use to to <a class="reference external" href="https://msdn.microsoft.com/en-us/powershell/dsc/windowsfeatureresource">add or remove Windows features and roles</a>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">:windowsoptionalfeature</span></tt></td>
<td>Use to configure Microsoft Windows optional features.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">:windowsprocess</span></tt></td>
<td>Use to to <a class="reference external" href="https://msdn.microsoft.com/en-us/powershell/dsc/windowsprocessresource">configure Windows processes</a>.</td>
</tr>
</tbody>
</table>
<p class="last">Any DSC resource may be used in a Chef recipe. For example, the DSC Resource Kit contains resources for <a class="reference external" href="http://www.powershellgallery.com/packages/xActiveDirectory/2.8.0.0">configuring Active Directory components</a>, such as <tt class="docutils literal"><span class="pre">xADDomain</span></tt>, <tt class="docutils literal"><span class="pre">xADDomainController</span></tt>, and <tt class="docutils literal"><span class="pre">xADUser</span></tt>. Assuming that these resources are available to the chef-client, the corresponding values for the <tt class="docutils literal"><span class="pre">resource</span></tt> attribute would be: <tt class="docutils literal"><span class="pre">:xADDomain</span></tt>, <tt class="docutils literal"><span class="pre">:xADDomainController</span></tt>, and <tt class="docutils literal"><span class="pre">xADUser</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retries</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The number of times to catch exceptions and retry the resource. Default value: <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retry_delay</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The retry delay (in seconds). Default value: <tt class="docutils literal"><span class="pre">2</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">subscribes</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> to be taken, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">subscribes</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">subscribes</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="id44">
<h4>Examples<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h4>
<p><strong>Open a Zip file</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">dsc_resource</span> <span class="s1">&#39;example&#39;</span> <span class="k">do</span>
   <span class="n">resource</span> <span class="ss">:archive</span>
   <span class="n">property</span> <span class="ss">:ensure</span><span class="p">,</span> <span class="s1">&#39;Present&#39;</span>
   <span class="n">property</span> <span class="ss">:path</span><span class="p">,</span> <span class="s1">&#39;C:\Users\Public\Documents\example.zip&#39;</span>
   <span class="n">property</span> <span class="ss">:destination</span><span class="p">,</span> <span class="s1">&#39;C:\Users\Public\Documents\ExtractionPath&#39;</span>
 <span class="k">end</span>
</pre></div>
</div>
<p><strong>Manage users and groups</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">dsc_resource</span> <span class="s1">&#39;demogroupadd&#39;</span> <span class="k">do</span>
  <span class="n">resource</span> <span class="ss">:group</span>
  <span class="n">property</span> <span class="ss">:groupname</span><span class="p">,</span> <span class="s1">&#39;demo1&#39;</span>
  <span class="n">property</span> <span class="ss">:ensure</span><span class="p">,</span> <span class="s1">&#39;present&#39;</span>
<span class="k">end</span>

<span class="n">dsc_resource</span> <span class="s1">&#39;useradd&#39;</span> <span class="k">do</span>
  <span class="n">resource</span> <span class="ss">:user</span>
  <span class="n">property</span> <span class="ss">:username</span><span class="p">,</span> <span class="s1">&#39;Foobar1&#39;</span>
  <span class="n">property</span> <span class="ss">:fullname</span><span class="p">,</span> <span class="s1">&#39;Foobar1&#39;</span>
  <span class="n">property</span> <span class="ss">:password</span><span class="p">,</span> <span class="n">ps_credential</span><span class="p">(</span><span class="s1">&#39;P@assword!&#39;</span><span class="p">)</span>
  <span class="n">property</span> <span class="ss">:ensure</span><span class="p">,</span> <span class="s1">&#39;present&#39;</span>
<span class="k">end</span>

<span class="n">dsc_resource</span> <span class="s1">&#39;AddFoobar1ToUsers&#39;</span> <span class="k">do</span>
  <span class="n">resource</span> <span class="ss">:Group</span>
  <span class="n">property</span> <span class="ss">:GroupName</span><span class="p">,</span> <span class="s1">&#39;demo1&#39;</span>
  <span class="n">property</span> <span class="ss">:MembersToInclude</span><span class="p">,</span> <span class="o">[</span><span class="s1">&#39;Foobar1&#39;</span><span class="o">]</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="what-s-new-in-12-1">
<h2>What&#8217;s New in 12.1<a class="headerlink" href="#what-s-new-in-12-1" title="Permalink to this headline">¶</a></h2>
<p>The following items are new for chef-client 12.1 and/or are changes from previous versions. The short version:</p>
<ul class="simple">
<li><strong>chef-client may be run in audit-mode</strong> Use audit-mode to run audit tests against a node.</li>
<li><strong>control method added to Recipe DSL</strong> Use the <tt class="docutils literal"><span class="pre">control</span></tt> method to define specific tests that match directories, files, packages, ports, and services. A <tt class="docutils literal"><span class="pre">control</span></tt> method must be contained within a <tt class="docutils literal"><span class="pre">control_group</span></tt> block.</li>
<li><strong>control_group method added to Recipe DSL</strong> Use the <tt class="docutils literal"><span class="pre">control_group</span></tt> method to group one (or more) <tt class="docutils literal"><span class="pre">control</span></tt> methods into a single audit.</li>
<li><strong>Bootstrap nodes without using the ORGANIZATION-validator.key file</strong> A node may now be bootstrapped using the USER.pem file, instead of the ORGANIZATION-validator.pem file. Also known as a &#8220;validatorless bootstrap&#8221;.</li>
<li><strong>New options for knife-bootstrap</strong> Use the <tt class="docutils literal"><span class="pre">--bootstrap-vault-file</span></tt>, <tt class="docutils literal"><span class="pre">--bootstrap-vault-item</span></tt>, and <tt class="docutils literal"><span class="pre">--bootstrap-vault-json</span></tt> options with <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">bootstrap</span></tt> to specify items that are stored in chef-vault.</li>
<li><strong>New verify attribute for cookbook_file, file, remote_file, and template resources</strong> Use the <tt class="docutils literal"><span class="pre">verify</span></tt> attribute to test a file using a block of code or a string.</li>
<li><strong>New imports attribute for dsc_script resource</strong> Use the <tt class="docutils literal"><span class="pre">imports</span></tt> attribute to import DSC resources from modules.</li>
<li><strong>New attribute for chef_gem resource</strong> Use the <tt class="docutils literal"><span class="pre">compile_time</span></tt> attribute to disable compile-time installation of gems.</li>
<li><strong>New openbsd_package resource</strong> Use the <strong>openbsd_package</strong> resource to install packages on the OpenBSD platform.</li>
<li><strong>New &#8211;proxy-auth option for knife raw subcommand</strong> Enable proxy authentication to the Chef server web user interface..</li>
<li><strong>New watchdog_timeout setting for the Windows platform</strong> Use the <tt class="docutils literal"><span class="pre">windows_service.watchdog_timeout</span></tt> setting in the client.rb file to specify the maximum amount of time allowed for a chef-client run on the Microsoft Windows platform.</li>
<li><strong>Support for multiple packages and versions</strong> Multiple packages and versions may be specified for platforms that use Yum or Apt.</li>
<li><strong>New attributes for windows_service resource</strong> Use the <tt class="docutils literal"><span class="pre">run_as_user</span></tt> and <tt class="docutils literal"><span class="pre">run_as_password</span></tt> attributes to specify the user under which a Microsoft Windows service should run.</li>
</ul>
<div class="section" id="chef-client-audit-mode">
<h3>chef-client, audit-mode<a class="headerlink" href="#chef-client-audit-mode" title="Permalink to this headline">¶</a></h3>
<p>The chef-client may be run in audit-mode. Use audit-mode to evaluate custom rules&#8212;also referred to as audits&#8212;that are defined in recipes. audit-mode may be run in the following ways:</p>
<ul class="simple">
<li>By itself (i.e. a chef-client run that does not build the resource collection or converge the node)</li>
<li>As part of the chef-client run, where audit-mode runs after all resources have been converged on the node</li>
</ul>
<p>Each audit is authored within a recipe using the <tt class="docutils literal"><span class="pre">control_group</span></tt> and <tt class="docutils literal"><span class="pre">control</span></tt> methods that are part of the Recipe DSL. Recipes that contain audits are added to the run-list, after which they can be processed by the chef-client. Output will appear in the same location as the regular chef-client run (as specified by the <tt class="docutils literal"><span class="pre">log_location</span></tt> setting in the client.rb file).</p>
<p>Finished audits are reported back to the Chef server. From there, audits are sent to the Chef Analytics platform for further analysis, such as rules processing and visibility from the actions web user interface.</p>
<p>Use following option to run the chef-client in audit-mode mode:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--audit-mode</span> <span class="pre">MODE</span></tt></dt>
<dd>Enable audit-mode. Set to <tt class="docutils literal"><span class="pre">audit-only</span></tt> to skip the converge phase of the chef-client run and only perform audits. Possible values: <tt class="docutils literal"><span class="pre">audit-only</span></tt>, <tt class="docutils literal"><span class="pre">disabled</span></tt>, and <tt class="docutils literal"><span class="pre">enabled</span></tt>. Default value: <tt class="docutils literal"><span class="pre">disabled</span></tt>.</dd>
</dl>
<div class="section" id="the-audit-run">
<h4>The Audit Run<a class="headerlink" href="#the-audit-run" title="Permalink to this headline">¶</a></h4>
<p>The following diagram shows the stages of the audit-mode phase of the chef-client run, and then the list below the diagram describes in greater detail each of those stages.</p>
<img alt="_images/audit_run.png" src="_images/audit_run.png" />
<p>When the chef-client is run in audit-mode, the following happens:</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Stages</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>chef-client Run ID</strong></td>
<td>The chef-client run identifier is associated with each audit.</td>
</tr>
<tr class="row-odd"><td><strong>Configure the Node</strong></td>
<td>If audit-mode is run as part of the full chef-client run, audit-mode occurs after the chef-client has finished converging all resources in the resource collection.</td>
</tr>
<tr class="row-even"><td><strong>Audit node based on controls in cookbooks</strong></td>
<td>Each <tt class="docutils literal"><span class="pre">control_group</span></tt> and <tt class="docutils literal"><span class="pre">control</span></tt> block found in any recipe that was part of the run-list of for the node is evaluated, with each expression in each <tt class="docutils literal"><span class="pre">control</span></tt> block verified against the state of the node.</td>
</tr>
<tr class="row-odd"><td><strong>Upload audit data to the Chef server</strong></td>
<td>When audit-mode mode is complete, the data is uploaded to the Chef server.</td>
</tr>
<tr class="row-even"><td><strong>Send to Chef Analytics</strong></td>
<td>Most of this data is passed to the Chef Analytics platform for further analysis, such as rules processing (for notification events triggered by expected or unexpected audit outcomes) and visibility from the actions web user interface.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="control">
<h3>control<a class="headerlink" href="#control" title="Permalink to this headline">¶</a></h3>
<p>A control is an automated test that is built into a cookbook, and then used to test the state of the system for compliance. Compliance can be many things. For example, ensuring that file and directory management meets specific internal IT policies&#8212;&#8221;Does the file exist?&#8221;, &#8220;Do the correct users or groups have access to this directory?&#8221;. Compliance may also be complex, such as helping to ensure goals defined by large-scale compliance frameworks such as PCI, HIPAA, and Sarbanes-Oxley can be met.</p>
<p>Use the <tt class="docutils literal"><span class="pre">control</span></tt> method to define a specific series of tests that comprise an individual audit. A <tt class="docutils literal"><span class="pre">control</span></tt> method MUST be contained within a <tt class="docutils literal"><span class="pre">control_group</span></tt> block. A <tt class="docutils literal"><span class="pre">control_group</span></tt> block may contain multiple <tt class="docutils literal"><span class="pre">control</span></tt> methods.</p>
<p>The syntax for the <tt class="docutils literal"><span class="pre">control</span></tt> method is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">control_group</span> <span class="s1">&#39;audit name&#39;</span> <span class="k">do</span>
  <span class="n">control</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s1">&#39;should do something&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">something</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="o">/.</span><span class="n">to_not</span> <span class="n">be_something</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">control_group</span></tt> groups one (or more) <tt class="docutils literal"><span class="pre">control</span></tt> blocks</li>
<li><tt class="docutils literal"><span class="pre">control</span> <span class="pre">'name'</span> <span class="pre">do</span></tt> defines an individual audit</li>
<li>Each <tt class="docutils literal"><span class="pre">control</span></tt> block must define at least one validation</li>
<li>Each <tt class="docutils literal"><span class="pre">it</span></tt> statement defines a single validation. <tt class="docutils literal"><span class="pre">it</span></tt> statements are processed individually when the chef-client is run in audit-mode</li>
<li>An <tt class="docutils literal"><span class="pre">expect(something).to/.to_not</span> <span class="pre">be_something</span></tt> is a statement that represents the individual test. In other words, this statement tests if something is expected to be (or not be) something. For example, a test that expects the PostgreSQL pacakge to not be installed would be similar to <tt class="docutils literal"><span class="pre">expect(package('postgresql')).to_not</span> <span class="pre">be_installed</span></tt> and a test that ensures a service is enabled would be similar to <tt class="docutils literal"><span class="pre">expect(service('init')).to</span> <span class="pre">be_enabled</span></tt></li>
<li>An <tt class="docutils literal"><span class="pre">it</span></tt> statement may contain multiple <tt class="docutils literal"><span class="pre">expect</span></tt> statements</li>
</ul>
<div class="section" id="directory-matcher">
<h4>directory Matcher<a class="headerlink" href="#directory-matcher" title="Permalink to this headline">¶</a></h4>
<p>Matchers are available for directories. Use this matcher to define audits for directories that test if the directory exists, is mounted, and if it is linked to. This matcher uses the same matching syntax&#8212;<tt class="docutils literal"><span class="pre">expect(file('foo'))</span></tt>&#8212;as the files. The following matchers are available for directories:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Matcher</th>
<th class="head">Description, Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">be_directory</span></tt></td>
<td><p class="first">Use to test if directory exists. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be a directory&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/var/directory&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_directory</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">be_linked_to</span></tt></td>
<td><p class="first">Use to test if a subject is linked to the named directory. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be linked to the named directory&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/directory&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_linked_to</span><span class="p">(</span><span class="s1">&#39;/etc/some/other/directory&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">be_mounted</span></tt></td>
<td><p class="first">Use to test if a directory is mounted. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be mounted&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_mounted</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For directories with a single attribute that requires testing:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be mounted with an ext4 partition&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_mounted</span><span class="o">.</span><span class="n">with</span><span class="p">(</span> <span class="ss">:type</span> <span class="o">=&gt;</span> <span class="s1">&#39;ext4&#39;</span> <span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For directories with multiple attributes that require testing:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be mounted only with certain attributes&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_mounted</span><span class="o">.</span><span class="n">only_with</span><span class="p">(</span>
    <span class="ss">:attribute</span> <span class="o">=&gt;</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span>
    <span class="ss">:attribute</span> <span class="o">=&gt;</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span>
<span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="file-matcher">
<h4>file Matcher<a class="headerlink" href="#file-matcher" title="Permalink to this headline">¶</a></h4>
<p>Matchers are available for files and directories. Use this matcher to define audits for files that test if the file exists, its version, if it is is executable, writable, or readable, who owns it, verify checksums (both MD5 and SHA-256) and so on. The following matchers are available for files:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Matcher</th>
<th class="head">Description, Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">be_executable</span></tt></td>
<td><p class="first">Use to test if a file is executable. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be executable&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_executable</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For a file that is executable by its owner:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be executable by owner&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_executable</span><span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="s1">&#39;owner&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For a file that is executable by a group:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be executable by group members&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_executable</span><span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="s1">&#39;group&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For a file that is executable by a specific user:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be executable by user foo&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_executable</span><span class="o">.</span><span class="n">by_user</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">be_file</span></tt></td>
<td><p class="first">Use to test if a file exists. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be a file&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_file</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">be_grouped_into</span></tt></td>
<td><p class="first">Use to test if a file is grouped into the named group. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be grouped into foo&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_grouped_into</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">be_linked_to</span></tt></td>
<td><p class="first">Use to test if a subject is linked to the named file. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be linked to the named file&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_linked_to</span><span class="p">(</span><span class="s1">&#39;/etc/some/other/file&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">be_mode</span></tt></td>
<td><p class="first">Use to test if a file is set to the specified mode. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be mode 440&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_mode</span><span class="p">(</span><span class="mi">440</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">be_owned_by</span></tt></td>
<td><p class="first">Use to test if a file is owned by the named owner. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be owned by the root user&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/sudoers&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_owned_by</span><span class="p">(</span><span class="s1">&#39;root&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">be_readable</span></tt></td>
<td><p class="first">Use to test if a file is readable. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be readable&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_readable</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For a file that is readable by its owner:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be readable by owner&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_readable</span><span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="s1">&#39;owner&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For a file that is readable by a group:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be readable by group members&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_readable</span><span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="s1">&#39;group&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For a file that is readable by a specific user:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be readable by user foo&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_readable</span><span class="o">.</span><span class="n">by_user</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">be_socket</span></tt></td>
<td><p class="first">Use to test if a file exists as a socket. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be a socket&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/var/file.sock&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_socket</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">be_symlink</span></tt></td>
<td><p class="first">Use to test if a file exists as a symbolic link. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be a symlink&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_symlink</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">be_version</span></tt></td>
<td><p class="first">Microsoft Windows only. Use to test if a file is the specified version. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be version 1.2&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;C:\\Windows\\path\\to\\file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_version</span><span class="p">(</span><span class="s1">&#39;1.2&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">be_writable</span></tt></td>
<td><p class="first">Use to test if a file is writable. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be writable&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_writable</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For a file that is writable by its owner:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be writable by owner&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_writable</span><span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="s1">&#39;owner&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For a file that is writable by a group:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be writable by group members&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_writable</span><span class="o">.</span><span class="n">by</span><span class="p">(</span><span class="s1">&#39;group&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For a file that is writable by a specific user:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be writable by user foo&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_writable</span><span class="o">.</span><span class="n">by_user</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">contain</span></tt></td>
<td><p class="first">Use to test if a file contains specific contents. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should contain docs.chef.io&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/file&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">contain</span><span class="p">(</span><span class="s1">&#39;docs.chef.io&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="package-matcher">
<h4>package Matcher<a class="headerlink" href="#package-matcher" title="Permalink to this headline">¶</a></h4>
<p>Matchers are available for packages and may be used to define audits that test if a package or a package version is installed. The following matchers are available:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Matcher</th>
<th class="head">Description, Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">be_installed</span></tt></td>
<td><p class="first">Use to test if the named package is installed. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be installed&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">package</span><span class="p">(</span><span class="s1">&#39;httpd&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_installed</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For a specific package version:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be installed&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">package</span><span class="p">(</span><span class="s1">&#39;httpd&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_installed</span><span class="o">.</span><span class="n">with_version</span><span class="p">(</span><span class="s1">&#39;0.1.2&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="port-matcher">
<h4>port Matcher<a class="headerlink" href="#port-matcher" title="Permalink to this headline">¶</a></h4>
<p>Matchers are available for ports and may be used to define audits that test if a port is listening. The following matchers are available:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Matcher</th>
<th class="head">Description, Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">be_listening</span></tt></td>
<td><p class="first">Use to test if the named port is listening. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be listening&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">port</span><span class="p">(</span><span class="mi">23</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_listening</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For a named port that is not listening:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should not be listening&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">port</span><span class="p">(</span><span class="mi">23</span><span class="p">))</span><span class="o">.</span><span class="n">to_not</span> <span class="n">be_listening</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For a specific port type use <tt class="docutils literal"><span class="pre">.with('port_type')</span></tt>. For example, UDP:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be listening with UDP&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">port</span><span class="p">(</span><span class="mi">23</span><span class="p">))</span><span class="o">.</span><span class="n">to_not</span> <span class="n">be_listening</span><span class="o">.</span><span class="n">with</span><span class="p">(</span><span class="s1">&#39;udp&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For UDP, version 6:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be listening with UDP6&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">port</span><span class="p">(</span><span class="mi">23</span><span class="p">))</span><span class="o">.</span><span class="n">to_not</span> <span class="n">be_listening</span><span class="o">.</span><span class="n">with</span><span class="p">(</span><span class="s1">&#39;udp6&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For TCP/IP:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be listening with TCP&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">port</span><span class="p">(</span><span class="mi">23</span><span class="p">))</span><span class="o">.</span><span class="n">to_not</span> <span class="n">be_listening</span><span class="o">.</span><span class="n">with</span><span class="p">(</span><span class="s1">&#39;tcp&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For TCP/IP, version 6:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be listening with TCP6&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">port</span><span class="p">(</span><span class="mi">23</span><span class="p">))</span><span class="o">.</span><span class="n">to_not</span> <span class="n">be_listening</span><span class="o">.</span><span class="n">with</span><span class="p">(</span><span class="s1">&#39;tcp6&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="service-matcher">
<h4>service Matcher<a class="headerlink" href="#service-matcher" title="Permalink to this headline">¶</a></h4>
<p>Matchers are available for services and may be used to define audits that test for conditions related to services, such as if they are enabled, running, have the correct startup mode, and so on. The following matchers are available:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Matcher</th>
<th class="head">Description, Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">be_enabled</span></tt></td>
<td><p class="first">Use to test if the named service is enabled (i.e. will start up automatically). For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be enabled&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">service</span><span class="p">(</span><span class="s1">&#39;ntpd&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_enabled</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For a service that is enabled at a given run level:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be enabled at the specified run level&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">service</span><span class="p">(</span><span class="s1">&#39;ntpd&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_enabled</span><span class="o">.</span><span class="n">with_level</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">be_installed</span></tt></td>
<td><p class="first">Microsoft Windows only. Use to test if the named service is installed on the Microsoft Windows platform. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be installed&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">service</span><span class="p">(</span><span class="s1">&#39;DNS Client&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_installed</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">be_running</span></tt></td>
<td><p class="first">Use to test if the named service is running. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be running&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">service</span><span class="p">(</span><span class="s1">&#39;ntpd&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_running</span>
<span class="k">end</span>
</pre></div>
</div>
<p>For a service that is running under supervisor:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be running under supervisor&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">service</span><span class="p">(</span><span class="s1">&#39;ntpd&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_running</span><span class="o">.</span><span class="n">under</span><span class="p">(</span><span class="s1">&#39;supervisor&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<p>or daemontools:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be running under daemontools&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">service</span><span class="p">(</span><span class="s1">&#39;ntpd&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_running</span><span class="o">.</span><span class="n">under</span><span class="p">(</span><span class="s1">&#39;daemontools&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
<p>or Upstart:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be running under upstart&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">service</span><span class="p">(</span><span class="s1">&#39;ntpd&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_running</span><span class="o">.</span><span class="n">under</span><span class="p">(</span><span class="s1">&#39;upstart&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">be_monitored_by</span></tt></td>
<td><p class="first">Use to test if the named service is being monitored by the named monitoring application. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should be monitored by&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">service</span><span class="p">(</span><span class="s1">&#39;ntpd&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_monitored_by</span><span class="p">(</span><span class="s1">&#39;monit&#39;</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">have_start_mode</span></tt></td>
<td><p class="first">Microsoft Windows only. Use to test if the named service&#8217;s startup mode is correct on the Microsoft Windows platform. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="s1">&#39;should start manually&#39;</span> <span class="k">do</span>
  <span class="n">expect</span><span class="p">(</span><span class="n">service</span><span class="p">(</span><span class="s1">&#39;DNS Client&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">have_start_mode</span><span class="o">.</span><span class="n">Manual</span>
<span class="k">end</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id45">
<h4>Examples<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h4>
<p><strong>A package is installed</strong></p>
<p>For example, a package is installed:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">control_group</span> <span class="s1">&#39;audit name&#39;</span> <span class="k">do</span>
  <span class="n">control</span> <span class="s1">&#39;mysql package&#39;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s1">&#39;should be installed&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">package</span><span class="p">(</span><span class="s1">&#39;mysql&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_installed</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">control_group</span></tt> block is processed when the chef-client run is run in audit-mode. If the audit was successful, the chef-client will return output similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>Audit Mode
  mysql package
    should be installed
</pre></div>
</div>
<p>If an audit was unsuccessful, the chef-client will return output similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>Starting audit phase

Audit Mode
  mysql package
  should be installed <span class="o">(</span>FAILED - 1<span class="o">)</span>

Failures:

1<span class="o">)</span> Audit Mode mysql package should be installed
  Failure/Error: expect<span class="o">(</span>package<span class="o">(</span><span class="s1">&#39;mysql&#39;</span><span class="o">))</span>.to be_installed.with_version<span class="o">(</span><span class="s1">&#39;5.6&#39;</span><span class="o">)</span>
    expected Package <span class="s1">&#39;mysql&#39;</span> to be installed
  <span class="c1"># /var/chef/cache/cookbooks/grantmc/recipes/default.rb:22:in &#39;block (3 levels) in from_file&#39;</span>

Finished in 0.5745 seconds <span class="o">(</span>files took 0.46481 seconds to load<span class="o">)</span>
<span class="m">1</span> examples, <span class="m">1</span> failures

Failed examples:

rspec /var/chef/cache/cookbooks/grantmc/recipes/default.rb:21 <span class="c1"># Audit Mode mysql package should be installed</span>
</pre></div>
</div>
<p><strong>A package version is installed</strong></p>
<p>A package that is installed with a specific version:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">control_group</span> <span class="s1">&#39;audit name&#39;</span> <span class="k">do</span>
  <span class="n">control</span> <span class="s1">&#39;mysql package&#39;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s1">&#39;should be installed&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">package</span><span class="p">(</span><span class="s1">&#39;mysql&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_installed</span><span class="o">.</span><span class="n">with_version</span><span class="p">(</span><span class="s1">&#39;5.6&#39;</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>A package is not installed</strong></p>
<p>A package that is not installed:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">control_group</span> <span class="s1">&#39;audit name&#39;</span> <span class="k">do</span>
  <span class="n">control</span> <span class="s1">&#39;postgres package&#39;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s1">&#39;should not be installed&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">package</span><span class="p">(</span><span class="s1">&#39;postgresql&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to_not</span> <span class="n">be_installed</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>If the audit was successful, the chef-client will return output similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>Audit Mode
  postgres audit
    postgres package
      is not installed
</pre></div>
</div>
<p><strong>A service is enabled</strong></p>
<p>A service that is enabled and running:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">control_group</span> <span class="s1">&#39;audit name&#39;</span> <span class="k">do</span>
  <span class="n">control</span> <span class="s1">&#39;mysql service&#39;</span> <span class="k">do</span>
    <span class="n">let</span><span class="p">(</span><span class="ss">:mysql_service</span><span class="p">)</span> <span class="p">{</span> <span class="n">service</span><span class="p">(</span><span class="s1">&#39;mysql&#39;</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="s1">&#39;should be enabled&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">mysql_service</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_enabled</span>
    <span class="k">end</span>
    <span class="n">it</span> <span class="s1">&#39;should be running&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">mysql_service</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_running</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>If the audit was successful, the chef-client will return output similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>Audit Mode
  mysql service audit
    mysql service
      is enabled
      is running
</pre></div>
</div>
<p><strong>A configuration file contains specific settings</strong></p>
<p>The following example shows how to verify <tt class="docutils literal"><span class="pre">sshd</span></tt> configration, including whether it&#8217;s installed, what the permissions are, and how it can be accessed:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">control_group</span> <span class="s1">&#39;check sshd configuration&#39;</span> <span class="k">do</span>

  <span class="n">control</span> <span class="s1">&#39;sshd package&#39;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s1">&#39;should be installed&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">package</span><span class="p">(</span><span class="s1">&#39;openssh-server&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_installed</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="n">control</span> <span class="s1">&#39;sshd configuration&#39;</span> <span class="k">do</span>
    <span class="n">let</span><span class="p">(</span><span class="ss">:config_file</span><span class="p">)</span> <span class="p">{</span> <span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/ssh/sshd_config&#39;</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="s1">&#39;should exist with the right permissions&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_file</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_mode</span><span class="p">(</span><span class="mi">644</span><span class="p">)</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_owned_by</span><span class="p">(</span><span class="s1">&#39;root&#39;</span><span class="p">)</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_grouped_into</span><span class="p">(</span><span class="s1">&#39;root&#39;</span><span class="p">)</span>
    <span class="k">end</span>
    <span class="n">it</span> <span class="s1">&#39;should not permit RootLogin&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_file</span><span class="o">.</span><span class="n">content</span><span class="p">)</span><span class="o">.</span><span class="n">to_not</span> <span class="n">match</span><span class="p">(</span><span class="sr">/^PermitRootLogin yes/</span><span class="p">)</span>
    <span class="k">end</span>
    <span class="n">it</span> <span class="s1">&#39;should explicitly not permit PasswordAuthentication&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_file</span><span class="o">.</span><span class="n">content</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">match</span><span class="p">(</span><span class="sr">/^PasswordAuthentication no/</span><span class="p">)</span>
    <span class="k">end</span>
    <span class="n">it</span> <span class="s1">&#39;should force privilege separation&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_file</span><span class="o">.</span><span class="n">content</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">match</span><span class="p">(</span><span class="sr">/^UsePrivilegeSeparation sandbox/</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">let(:config_file)</span> <span class="pre">{</span> <span class="pre">file('/etc/ssh/sshd_config')</span> <span class="pre">}</span></tt> uses the <tt class="docutils literal"><span class="pre">file</span></tt> matcher to test specific settings within the <tt class="docutils literal"><span class="pre">sshd</span></tt> configuration file</li>
</ul>
<p><strong>A file contains desired permissions and contents</strong></p>
<p>The following example shows how to verify that a file has the desired permissions and contents:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">controls</span> <span class="s1">&#39;mysql config&#39;</span> <span class="k">do</span>
  <span class="n">control</span> <span class="s1">&#39;mysql config file&#39;</span> <span class="k">do</span>
    <span class="n">let</span><span class="p">(</span><span class="ss">:config_file</span><span class="p">)</span> <span class="p">{</span> <span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/mysql/my.cnf&#39;</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="s1">&#39;exists with correct permissions&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_file</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_mode</span><span class="p">(</span><span class="mo">0400</span><span class="p">)</span>
    <span class="k">end</span>
    <span class="n">it</span> <span class="s1">&#39;contains required configuration&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">its</span><span class="p">(</span><span class="s1">&#39;contents&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">match</span><span class="p">(</span><span class="sr">/default-time-zone=&#39;UTC&#39;/</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>If the audit was successful, the chef-client will return output similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>Audit Mode
  mysql config
    mysql config file
      exists with correct permissions
      contains required configuration
</pre></div>
</div>
</div>
</div>
<div class="section" id="control-group">
<h3>control_group<a class="headerlink" href="#control-group" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">control_group</span></tt> method to define a group of <tt class="docutils literal"><span class="pre">control</span></tt> methods that comprise a single audit. The name of each <tt class="docutils literal"><span class="pre">control_group</span></tt> must be unique within the organization.</p>
<p>The syntax for the <tt class="docutils literal"><span class="pre">control_group</span></tt> method is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">control_group</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
  <span class="n">control</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s1">&#39;should do something&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">something</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="o">/.</span><span class="n">to_not</span> <span class="n">be_something</span>
    <span class="k">end</span>
  <span class="k">end</span>
  <span class="n">control</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
    <span class="o">...</span>
  <span class="k">end</span>
  <span class="o">...</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">control_group</span></tt> groups one (or more) <tt class="docutils literal"><span class="pre">control</span></tt> blocks</li>
<li><tt class="docutils literal"><span class="pre">'name'</span></tt> is the unique name for the <tt class="docutils literal"><span class="pre">control_group</span></tt>; the chef-client will raise an exception if duplicate <tt class="docutils literal"><span class="pre">control_group</span></tt> names are present</li>
<li><tt class="docutils literal"><span class="pre">control</span></tt> defines each individual audit within the <tt class="docutils literal"><span class="pre">control_group</span></tt> block. There is no limit to the number of <tt class="docutils literal"><span class="pre">control</span></tt> blocks that may defined within a <tt class="docutils literal"><span class="pre">control_group</span></tt> block</li>
</ul>
<div class="section" id="id46">
<h4>Examples<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h4>
<p><strong>control_group block with multiple control blocks</strong></p>
<p>The following <tt class="docutils literal"><span class="pre">control_group</span></tt> ensures that MySQL is installed, that PostgreSQL is not installed, and that the services and configuration files associated with MySQL are configured correctly:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">control_group</span> <span class="s1">&#39;Audit Mode&#39;</span> <span class="k">do</span>

  <span class="n">control</span> <span class="s1">&#39;mysql package&#39;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s1">&#39;should be installed&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">package</span><span class="p">(</span><span class="s1">&#39;mysql&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_installed</span><span class="o">.</span><span class="n">with_version</span><span class="p">(</span><span class="s1">&#39;5.6&#39;</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="n">control</span> <span class="s1">&#39;postgres package&#39;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s1">&#39;should not be installed&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">package</span><span class="p">(</span><span class="s1">&#39;postgresql&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to_not</span> <span class="n">be_installed</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="n">control</span> <span class="s1">&#39;mysql service&#39;</span> <span class="k">do</span>
    <span class="n">let</span><span class="p">(</span><span class="ss">:mysql_service</span><span class="p">)</span> <span class="p">{</span> <span class="n">service</span><span class="p">(</span><span class="s1">&#39;mysql&#39;</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="s1">&#39;should be enabled&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">mysql_service</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_enabled</span>
    <span class="k">end</span>
    <span class="n">it</span> <span class="s1">&#39;should be running&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">mysql_service</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_running</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="n">control</span> <span class="s1">&#39;mysql config directory&#39;</span> <span class="k">do</span>
    <span class="n">let</span><span class="p">(</span><span class="ss">:config_dir</span><span class="p">)</span> <span class="p">{</span> <span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/mysql&#39;</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="s1">&#39;should exist with correct permissions&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_dir</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_directory</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_dir</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_mode</span><span class="p">(</span><span class="mo">0700</span><span class="p">)</span>
    <span class="k">end</span>
    <span class="n">it</span> <span class="s1">&#39;should be owned by the db user&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_dir</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_owned_by</span><span class="p">(</span><span class="s1">&#39;db_service_user&#39;</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="n">control</span> <span class="s1">&#39;mysql config file&#39;</span> <span class="k">do</span>
    <span class="n">let</span><span class="p">(</span><span class="ss">:config_file</span><span class="p">)</span> <span class="p">{</span> <span class="n">file</span><span class="p">(</span><span class="s1">&#39;/etc/mysql/my.cnf&#39;</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="s1">&#39;should exist with correct permissions&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_file</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">be_mode</span><span class="p">(</span><span class="mo">0400</span><span class="p">)</span>
    <span class="k">end</span>
    <span class="n">it</span> <span class="s1">&#39;should contain required configuration&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">config_file</span><span class="o">.</span><span class="n">content</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">match</span><span class="p">(</span><span class="sr">/default-time-zone=&#39;UTC&#39;/</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>

<span class="k">end</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">control_group</span></tt> block is processed when the chef-client is run in audit-mode. If the chef-client run was successful, the chef-client will return output similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>Audit Mode
  mysql package
    should be installed
  postgres package
    should not be installed
  mysql service
    should be enabled
    should be running
  mysql config directory
    should exist with correct permissions
    should be owned by the db user
  mysql config file
    should exist with correct permissions
    should contain required configuration
</pre></div>
</div>
<p>If an audit was unsuccessful, the chef-client will return output similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>Starting audit phase

Audit Mode
  mysql package
  should be installed <span class="o">(</span>FAILED - 1<span class="o">)</span>
postgres package
  should not be installed
mysql service
  should be enabled <span class="o">(</span>FAILED - 2<span class="o">)</span>
  should be running <span class="o">(</span>FAILED - 3<span class="o">)</span>
mysql config directory
  should exist with correct permissions <span class="o">(</span>FAILED - 4<span class="o">)</span>
  should be owned by the db user <span class="o">(</span>FAILED - 5<span class="o">)</span>
mysql config file
  should exist with correct permissions <span class="o">(</span>FAILED - 6<span class="o">)</span>
  should contain required configuration <span class="o">(</span>FAILED - 7<span class="o">)</span>

Failures:

1<span class="o">)</span> Audit Mode mysql package should be installed
  Failure/Error: expect<span class="o">(</span>package<span class="o">(</span><span class="s1">&#39;mysql&#39;</span><span class="o">))</span>.to be_installed.with_version<span class="o">(</span><span class="s1">&#39;5.6&#39;</span><span class="o">)</span>
    expected Package <span class="s1">&#39;mysql&#39;</span> to be installed
  <span class="c1"># /var/chef/cache/cookbooks/grantmc/recipes/default.rb:22:in &#39;block (3 levels) in from_file&#39;</span>

2<span class="o">)</span> Audit Mode mysql service should be enabled
  Failure/Error: expect<span class="o">(</span>mysql_service<span class="o">)</span>.to be_enabled
    expected Service <span class="s1">&#39;mysql&#39;</span> to be enabled
  <span class="c1"># /var/chef/cache/cookbooks/grantmc/recipes/default.rb:35:in &#39;block (3 levels) in from_file&#39;</span>

3<span class="o">)</span> Audit Mode mysql service should be running
   Failure/Error: expect<span class="o">(</span>mysql_service<span class="o">)</span>.to be_running
    expected Service <span class="s1">&#39;mysql&#39;</span> to be running
  <span class="c1"># /var/chef/cache/cookbooks/grantmc/recipes/default.rb:38:in &#39;block (3 levels) in from_file&#39;</span>

4<span class="o">)</span> Audit Mode mysql config directory should exist with correct permissions
  Failure/Error: expect<span class="o">(</span>config_dir<span class="o">)</span>.to be_directory
    expected <span class="sb">`</span>File <span class="s1">&#39;/etc/mysql&#39;</span>.directory?<span class="sb">`</span> to <span class="k">return</span> true, got <span class="nb">false</span>
  <span class="c1"># /var/chef/cache/cookbooks/grantmc/recipes/default.rb:45:in &#39;block (3 levels) in from_file&#39;</span>

5<span class="o">)</span> Audit Mode mysql config directory should be owned by the db user
  Failure/Error: expect<span class="o">(</span>config_dir<span class="o">)</span>.to be_owned_by<span class="o">(</span><span class="s1">&#39;db_service_user&#39;</span><span class="o">)</span>
    expected <span class="sb">`</span>File <span class="s1">&#39;/etc/mysql&#39;</span>.owned_by?<span class="o">(</span><span class="s1">&#39;db_service_user&#39;</span><span class="o">)</span><span class="sb">`</span> to <span class="k">return</span> true, got <span class="nb">false</span>
  <span class="c1"># /var/chef/cache/cookbooks/grantmc/recipes/default.rb:49:in &#39;block (3 levels) in from_file&#39;</span>

6<span class="o">)</span> Audit Mode mysql config file should exist with correct permissions
  Failure/Error: expect<span class="o">(</span>config_file<span class="o">)</span>.to be_file
    expected <span class="sb">`</span>File <span class="s1">&#39;/etc/mysql/my.cnf&#39;</span>.file?<span class="sb">`</span> to <span class="k">return</span> true, got <span class="nb">false</span>
  <span class="c1"># /var/chef/cache/cookbooks/grantmc/recipes/default.rb:56:in &#39;block (3 levels) in from_file&#39;</span>

7<span class="o">)</span> Audit Mode mysql config file should contain required configuration
  Failure/Error: expect<span class="o">(</span>config_file.content<span class="o">)</span>.to match<span class="o">(</span>/default-time-zone<span class="o">=</span><span class="s1">&#39;UTC&#39;</span>/<span class="o">)</span>
    expected <span class="s1">&#39;-n\n&#39;</span> to match /default-time-zone<span class="o">=</span><span class="s1">&#39;UTC&#39;</span>/
    Diff:
    @@ -1,2 +1,2 @@
    -/default-time-zone<span class="o">=</span><span class="s1">&#39;UTC&#39;</span>/
    +-n
  <span class="c1"># /var/chef/cache/cookbooks/grantmc/recipes/default.rb:60:in &#39;block (3 levels) in from_file&#39;</span>

Finished in 0.5745 seconds <span class="o">(</span>files took 0.46481 seconds to load<span class="o">)</span>
<span class="m">8</span> examples, <span class="m">7</span> failures

Failed examples:

rspec /var/chef/cache/cookbooks/grantmc/recipes/default.rb:21 <span class="c1"># Audit Mode mysql package should be installed</span>
rspec /var/chef/cache/cookbooks/grantmc/recipes/default.rb:34 <span class="c1"># Audit Mode mysql service should be enabled</span>
rspec /var/chef/cache/cookbooks/grantmc/recipes/default.rb:37 <span class="c1"># Audit Mode mysql service should be running</span>
rspec /var/chef/cache/cookbooks/grantmc/recipes/default.rb:44 <span class="c1"># Audit Mode mysql config directory should exist with correct permissions</span>
rspec /var/chef/cache/cookbooks/grantmc/recipes/default.rb:48 <span class="c1"># Audit Mode mysql config directory should be owned by the db user</span>
rspec /var/chef/cache/cookbooks/grantmc/recipes/default.rb:55 <span class="c1"># Audit Mode mysql config file should exist with correct permissions</span>
rspec /var/chef/cache/cookbooks/grantmc/recipes/default.rb:59 <span class="c1"># Audit Mode mysql config file should contain required configuration</span>
Auditing <span class="nb">complete</span>
</pre></div>
</div>
<p><strong>Duplicate control_group names</strong></p>
<p>If two <tt class="docutils literal"><span class="pre">control_group</span></tt> blocks have the same name, the chef-client will raise an exception. For example, the following <tt class="docutils literal"><span class="pre">control_group</span></tt> blocks exist in different cookbooks:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">control_group</span> <span class="s1">&#39;basic control group&#39;</span> <span class="k">do</span>
  <span class="n">it</span> <span class="s1">&#39;should pass&#39;</span> <span class="k">do</span>
    <span class="n">expect</span><span class="p">(</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">control_group</span> <span class="s1">&#39;basic control group&#39;</span> <span class="k">do</span>
  <span class="n">it</span> <span class="s1">&#39;should pass&#39;</span> <span class="k">do</span>
    <span class="n">expect</span><span class="p">(</span><span class="mi">3</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">eq</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>Because the two <tt class="docutils literal"><span class="pre">control_group</span></tt> block names are identical, the chef-client will return an exception similar to:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="no">Synchronizing</span> <span class="ss">Cookbooks</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">audit_test</span>
<span class="no">Compiling</span> <span class="no">Cookbooks</span><span class="o">...</span>

<span class="o">================================================================================</span>
<span class="no">Recipe</span> <span class="no">Compile</span> <span class="no">Error</span> <span class="k">in</span> <span class="sr">/Users/</span><span class="n">grantmc</span><span class="o">/.</span><span class="n">cache</span><span class="o">/</span><span class="n">chef</span><span class="o">/</span><span class="n">cache</span><span class="o">/</span><span class="n">cookbooks</span>
                        <span class="sr">/audit_test/</span><span class="n">recipes</span><span class="o">/</span><span class="n">error_duplicate_control_groups</span><span class="o">.</span><span class="n">rb</span>
<span class="o">================================================================================</span>

<span class="no">Chef</span><span class="o">::</span><span class="no">Exceptions</span><span class="o">::</span><span class="no">AuditControlGroupDuplicate</span>
<span class="o">--------------------------------------------</span>
<span class="no">Audit</span> <span class="n">control</span> <span class="n">group</span> <span class="n">with</span> <span class="nb">name</span> <span class="s1">&#39;basic control group&#39;</span> <span class="n">has</span> <span class="n">already</span> <span class="n">been</span> <span class="n">defined</span>

<span class="no">Cookbook</span> <span class="ss">Trace</span><span class="p">:</span>
<span class="o">---------------</span>
<span class="sr">/Users/</span><span class="n">grantmc</span><span class="o">/.</span><span class="n">cache</span><span class="o">/</span><span class="n">chef</span><span class="o">/</span><span class="n">cache</span><span class="o">/</span><span class="n">cookbooks</span>
<span class="sr">/audit_test/</span><span class="n">recipes</span><span class="o">/</span><span class="n">error_duplicate_control_groups</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span><span class="mi">13</span><span class="ss">:in</span> <span class="s1">&#39;from_file&#39;</span>

<span class="no">Relevant</span> <span class="no">File</span> <span class="ss">Content</span><span class="p">:</span>
<span class="o">----------------------</span>
<span class="sr">/Users/</span><span class="n">grantmc</span><span class="o">/.</span><span class="n">cache</span><span class="o">/</span><span class="n">chef</span><span class="o">/</span><span class="n">cache</span><span class="o">/</span><span class="n">cookbooks</span><span class="o">/</span><span class="n">audit_test</span><span class="o">/</span><span class="n">recipes</span><span class="o">/</span><span class="n">error_duplicate_control_groups</span><span class="o">.</span><span class="n">rb</span><span class="p">:</span>

<span class="n">control_group</span> <span class="s1">&#39;basic control group&#39;</span> <span class="k">do</span>
  <span class="n">it</span> <span class="s1">&#39;should pass&#39;</span> <span class="k">do</span>
    <span class="n">expect</span><span class="p">(</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">control_group</span> <span class="s1">&#39;basic control group&#39;</span> <span class="k">do</span>
  <span class="n">it</span> <span class="s1">&#39;should pass&#39;</span> <span class="k">do</span>
    <span class="n">expect</span><span class="p">(</span><span class="mi">3</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">to</span> <span class="n">eq</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="no">Running</span> <span class="ss">handlers</span><span class="p">:</span>
<span class="o">[</span><span class="mi">2015</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mi">15</span><span class="ss">T09</span><span class="p">:</span><span class="mi">36</span><span class="p">:</span><span class="mi">14</span><span class="o">-</span><span class="mi">08</span><span class="p">:</span><span class="mo">00</span><span class="o">]</span> <span class="ss">ERROR</span><span class="p">:</span> <span class="no">Running</span> <span class="n">exception</span> <span class="n">handlers</span>
<span class="no">Running</span> <span class="n">handlers</span> <span class="n">complete</span>
</pre></div>
</div>
<p><strong>Verify a package is installed</strong></p>
<p>The following <tt class="docutils literal"><span class="pre">control_group</span></tt> verifies that the <tt class="docutils literal"><span class="pre">git</span></tt> package has been installed:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="s1">&#39;git&#39;</span> <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:install</span>
<span class="k">end</span>

<span class="n">execute</span> <span class="s1">&#39;list packages&#39;</span> <span class="k">do</span>
  <span class="n">command</span> <span class="s1">&#39;dpkg -l&#39;</span>
<span class="k">end</span>

<span class="n">execute</span> <span class="s1">&#39;list directory&#39;</span> <span class="k">do</span>
  <span class="n">command</span> <span class="s1">&#39;ls -R ~&#39;</span>
<span class="k">end</span>

<span class="n">control_group</span> <span class="s1">&#39;my audits&#39;</span> <span class="k">do</span>
  <span class="n">control</span> <span class="s1">&#39;check git&#39;</span> <span class="k">do</span>
    <span class="n">it</span> <span class="s1">&#39;should be installed&#39;</span> <span class="k">do</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">package</span><span class="p">(</span><span class="s1">&#39;git&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">to</span> <span class="n">be_installed</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="validatorless-bootstrap">
<h3>Validatorless Bootstrap<a class="headerlink" href="#validatorless-bootstrap" title="Permalink to this headline">¶</a></h3>
<p>The ORGANIZATION-validator.pem is typically added to the .chef directory on the workstation. When a node is bootstrapped from that workstation, the ORGANIZATION-validator.pem is used to authenticate the newly-created node to the Chef server during the initial chef-client run. Starting with Chef client 12.1, it is possible to bootstrap a node using the USER.pem file instead of the ORGANIZATION-validator.pem file. This is known as a &#8220;validatorless bootstrap&#8221;.</p>
<p>To create a node via the USER.pem file, simply delete the ORGANIZATION-validator.pem file on the workstation. For example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ rm -f /home/lamont/.chef/myorg-validator.pem
</pre></div>
</div>
<p>and then make the following changes in the knife.rb file:</p>
<ul class="simple">
<li>Remove the <tt class="docutils literal"><span class="pre">validation_client_name</span></tt> setting</li>
<li>Edit the <tt class="docutils literal"><span class="pre">validation_key</span></tt> setting to be something that isn&#8217;t a path to an existent ORGANIZATION-validator.pem file. For example: <tt class="docutils literal"><span class="pre">/nonexist</span></tt>.</li>
</ul>
<p>As long as a USER.pem is also present on the workstation from which the validatorless bootstrap operation will be initiated, the bootstrap operation will run and will use the USER.pem file instead of the ORGANIZATION-validator.pem file.</p>
<p>When running a validatorless <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">bootstrap</span></tt> operation, the output is similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>desktop% knife bootstrap 10.1.1.1 -N foo01.acme.org <span class="se">\</span>
  -E dev -r <span class="s1">&#39;role[base]&#39;</span> -j <span class="s1">&#39;{ &quot;foo&quot;: &quot;bar&quot; }&#39;</span> <span class="se">\</span>
  --ssh-user vagrant --sudo
Node foo01.acme.org exists, overwrite it? <span class="o">(</span>Y/N<span class="o">)</span>
Client foo01.acme.org exists, overwrite it? <span class="o">(</span>Y/N<span class="o">)</span>
Creating new client <span class="k">for</span> foo01.acme.org
Creating new node <span class="k">for</span> foo01.acme.org
Connecting to 10.1.1.1
10.1.1.1 Starting first Chef Client run...
<span class="o">[</span>....etc...<span class="o">]</span>
</pre></div>
</div>
<div class="section" id="id47">
<h4>knife bootstrap Options<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h4>
<p>Use the following options to specify items that are stored in chef-vault:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--bootstrap-vault-file</span> <span class="pre">VAULT_FILE</span></tt></dt>
<dd>The path to a JSON file that contains a list of vaults and items to be updated.</dd>
<dt><tt class="docutils literal"><span class="pre">--bootstrap-vault-item</span> <span class="pre">VAULT_ITEM</span></tt></dt>
<dd>A single vault and item to update as <tt class="docutils literal"><span class="pre">vault:item</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--bootstrap-vault-json</span> <span class="pre">VAULT_JSON</span></tt></dt>
<dd><p class="first">A JSON string that contains a list of vaults and items to be updated.</p>
<p>For example:</p>
<div class="last highlight-none"><div class="highlight"><pre><span></span>--bootstrap-vault-json &#39;{ &quot;vault1&quot;: [&quot;item1&quot;, &quot;item2&quot;], &quot;vault2&quot;: &quot;item2&quot; }&#39;
</pre></div>
</div>
</dd>
</dl>
</div>
</div>
<div class="section" id="new-resource-attributes">
<h3>New Resource Attributes<a class="headerlink" href="#new-resource-attributes" title="Permalink to this headline">¶</a></h3>
<p>The following attributes are new for chef-client 12.1.</p>
<div class="section" id="verify">
<h4>verify<a class="headerlink" href="#verify" title="Permalink to this headline">¶</a></h4>
<p>The <tt class="docutils literal"><span class="pre">verify</span></tt> attribute may be used with the <strong>cookbook_file</strong>, <strong>file</strong>, <strong>remote_file</strong>, and <strong>template</strong> resources.</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">verify</span></tt></dt>
<dd><p class="first">A block or a string that returns <tt class="docutils literal"><span class="pre">true</span></tt> or <tt class="docutils literal"><span class="pre">false</span></tt>. A string, when <tt class="docutils literal"><span class="pre">true</span></tt> is executed as a system command.</p>
<p>The following examples show how the <tt class="docutils literal"><span class="pre">verify</span></tt> attribute is used with the <strong>template</strong> resource. The same approach (but with different resource names) is true for the <strong>cookbook_file</strong>, <strong>file</strong>, and <strong>remote_file</strong> resources:</p>
<p>A block is arbitrary Ruby defined within the resource block by using the <tt class="docutils literal"><span class="pre">verify</span></tt> property. When a block is <tt class="docutils literal"><span class="pre">true</span></tt>, the chef-client will continue to update the file as appropriate.</p>
<p>For example, this should return <tt class="docutils literal"><span class="pre">true</span></tt>:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">template</span> <span class="s1">&#39;/tmp/baz&#39;</span> <span class="k">do</span>
  <span class="n">verify</span> <span class="p">{</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">}</span>
<span class="k">end</span>
</pre></div>
</div>
<p>This should return <tt class="docutils literal"><span class="pre">true</span></tt>:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">template</span> <span class="s1">&#39;/etc/nginx.conf&#39;</span> <span class="k">do</span>
  <span class="n">verify</span> <span class="s1">&#39;nginx -t -c %{path}&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>For releases of the chef-client prior to 12.5 (chef-client 12.4 and earlier) the correct syntax is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">template</span> <span class="s1">&#39;/etc/nginx.conf&#39;</span> <span class="k">do</span>
  <span class="n">verify</span> <span class="s1">&#39;nginx -t -c %{file}&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
<p class="last">See GitHub issues <a class="reference external" href="https://github.com/chef/chef/issues/3232">https://github.com/chef/chef/issues/3232</a> and <a class="reference external" href="https://github.com/chef/chef/pull/3693">https://github.com/chef/chef/pull/3693</a> for more information about these differences.</p>
</div>
<p>This should return <tt class="docutils literal"><span class="pre">true</span></tt>:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">template</span> <span class="s1">&#39;/tmp/bar&#39;</span> <span class="k">do</span>
  <span class="n">verify</span> <span class="p">{</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">1</span><span class="p">}</span>
<span class="k">end</span>
</pre></div>
</div>
<p>And this should return <tt class="docutils literal"><span class="pre">true</span></tt>:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">template</span> <span class="s1">&#39;/tmp/foo&#39;</span> <span class="k">do</span>
  <span class="n">verify</span> <span class="k">do</span> <span class="o">|</span><span class="n">path</span><span class="o">|</span>
    <span class="kp">true</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<p>Whereas, this should return <tt class="docutils literal"><span class="pre">false</span></tt>:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">template</span> <span class="s1">&#39;/tmp/turtle&#39;</span> <span class="k">do</span>
  <span class="n">verify</span> <span class="s1">&#39;/usr/bin/false&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
<p class="last">If a string or a block return <tt class="docutils literal"><span class="pre">false</span></tt>, the chef-client run will stop and an error is returned.</p>
</dd>
</dl>
</div>
<div class="section" id="imports">
<h4>imports<a class="headerlink" href="#imports" title="Permalink to this headline">¶</a></h4>
<p>The following attribute is new for the <strong>dsc_script</strong> resource:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">imports</span></tt></dt>
<dd><p class="first">Use to import DSC resources from a module. To import all resources from a module, specify only the module name:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">imports</span> <span class="s2">&quot;module_name&quot;</span>
</pre></div>
</div>
<p>To import specific resources, specify the module name and then the name for each resource in that module to import:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">imports</span> <span class="s2">&quot;module_name&quot;</span><span class="p">,</span> <span class="s2">&quot;resource_name_a&quot;</span><span class="p">,</span> <span class="s2">&quot;resource_name_b&quot;</span><span class="p">,</span> <span class="o">...</span>
</pre></div>
</div>
<p>For example, to import all resources from a module named <tt class="docutils literal"><span class="pre">cRDPEnabled</span></tt>:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">imports</span> <span class="s2">&quot;cRDPEnabled&quot;</span>
</pre></div>
</div>
<p>And to import only the <tt class="docutils literal"><span class="pre">PSHOrg_cRDPEnabled</span></tt> resource:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">imports</span> <span class="s2">&quot;cRDPEnabled&quot;</span><span class="p">,</span> <span class="s2">&quot;PSHOrg_cRDPEnabled&quot;</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="compile-time">
<h4>compile_time<a class="headerlink" href="#compile-time" title="Permalink to this headline">¶</a></h4>
<p>The following attribute is new for the <strong>chef_gem</strong> resource:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">compile_time</span></tt></dt>
<dd><p class="first">Controls the phase during which a gem is installed on a node. Set to <tt class="docutils literal"><span class="pre">true</span></tt> to install a gem while the resource collection is being built (the &#8220;compile phase&#8221;). Set to <tt class="docutils literal"><span class="pre">false</span></tt> to install a gem while the chef-client is configuring the node (the &#8220;converge phase&#8221;). Possible values: <tt class="docutils literal"><span class="pre">nil</span></tt> (for verbose warnings), <tt class="docutils literal"><span class="pre">true</span></tt> (to warn once per chef-client run), or <tt class="docutils literal"><span class="pre">false</span></tt> (to remove all warnings). Recommended value: <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
<p>To suppress warnings for cookbooks authored prior to chef-client 12.1, use a <tt class="docutils literal"><span class="pre">respond_to?</span></tt> check to ensure backward compatibility. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">chef_gem</span> <span class="s1">&#39;aws-sdk&#39;</span> <span class="k">do</span>
  <span class="n">compile_time</span> <span class="kp">false</span> <span class="k">if</span> <span class="nb">respond_to?</span><span class="p">(</span><span class="ss">:compile_time</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="run-as">
<h4><a class="reference internal" href="#run-as">run_as</a><a class="headerlink" href="#run-as" title="Permalink to this headline">¶</a></h4>
<p>The following attributes are new for the <strong>windows_service</strong> resource:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">run_as_password</span></tt></dt>
<dd>The password for the user specified by <tt class="docutils literal"><span class="pre">run_as_user</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">run_as_user</span></tt></dt>
<dd>The user under which a Microsoft Windows service runs.</dd>
</dl>
</div>
</div>
<div class="section" id="paludis-package">
<h3>paludis_package<a class="headerlink" href="#paludis-package" title="Permalink to this headline">¶</a></h3>
<p>Use the <strong>paludis_package</strong> resource to manage packages for the Paludis platform.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In many cases, it is better to use the package resource instead of this one. This is because when the package resource is used in a recipe, the chef-client will use details that are collected by Ohai at the start of the chef-client run to determine the correct package application. Using the package resource allows a recipe to be authored in a way that allows it to be used across many platforms.</p>
</div>
<div class="section" id="id48">
<h4>Syntax<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h4>
<p>A <strong>paludis_package</strong> resource block manages a package on a node, typically by installing it. The simplest use of the <strong>paludis_package</strong> resource is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">paludis_package</span> <span class="s1">&#39;package_name&#39;</span>
</pre></div>
</div>
<p>which will install the named package using all of the default options and the default action (<tt class="docutils literal"><span class="pre">:install</span></tt>).</p>
<p>The full syntax for all of the properties that are available to the <strong>paludis_package</strong> resource is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">paludis_package</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
  <span class="n">notifies</span>                   <span class="c1"># see description</span>
  <span class="n">options</span>                    <span class="nb">String</span>
  <span class="n">package_name</span>               <span class="nb">String</span><span class="p">,</span> <span class="nb">Array</span> <span class="c1"># defaults to &#39;name&#39; if not specified</span>
  <span class="n">provider</span>                   <span class="no">Chef</span><span class="o">::</span><span class="no">Provider</span><span class="o">::</span><span class="no">Package</span><span class="o">::</span><span class="no">Paludis</span>
  <span class="n">source</span>                     <span class="nb">String</span>
  <span class="n">subscribes</span>                 <span class="c1"># see description</span>
  <span class="n">timeout</span>                    <span class="nb">String</span><span class="p">,</span> <span class="nb">Integer</span>
  <span class="n">version</span>                    <span class="nb">String</span><span class="p">,</span> <span class="nb">Array</span>
  <span class="n">action</span>                     <span class="no">Symbol</span> <span class="c1"># defaults to :install if not specified</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">paludis_package</span></tt> tells the chef-client to manage a package</li>
<li><tt class="docutils literal"><span class="pre">'name'</span></tt> is the name of the package</li>
<li><tt class="docutils literal"><span class="pre">action</span></tt> identifies which steps the chef-client will take to bring the node into the desired state</li>
<li><tt class="docutils literal"><span class="pre">options</span></tt>, <tt class="docutils literal"><span class="pre">package_name</span></tt>, <tt class="docutils literal"><span class="pre">provider</span></tt>, <tt class="docutils literal"><span class="pre">source</span></tt>, <tt class="docutils literal"><span class="pre">recursive</span></tt>, <tt class="docutils literal"><span class="pre">timeout</span></tt>, and <tt class="docutils literal"><span class="pre">version</span></tt> are properties of this resource, with the Ruby type shown. See &#8220;Properties&#8221; section below for more information about all of the properties that may be used with this resource.</li>
</ul>
</div>
<div class="section" id="id49">
<h4>Actions<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h4>
<p>This resource has the following actions:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:install</span></tt></dt>
<dd>Default. Install a package. If a version is specified, install the specified version of the package.</dd>
<dt><tt class="docutils literal"><span class="pre">:nothing</span></tt></dt>
<dd>Define this resource block to do nothing until notified by another resource to take action. When this resource is notified, this resource block is either run immediately or it is queued up to be run at the end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:remove</span></tt></dt>
<dd>Remove a package.</dd>
<dt><tt class="docutils literal"><span class="pre">:upgrade</span></tt></dt>
<dd>Install a package and/or ensure that a package is the latest version.</dd>
</dl>
</div>
<div class="section" id="id50">
<h4>Attributes<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h4>
<p>This resource has the following properties:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">ignore_failure</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Continue running a recipe if a resource fails for any reason. Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">notifies</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may notify another resource to take action when its state changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> that resource should take, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action. A resource may notifiy more than one resource; use a <tt class="docutils literal"><span class="pre">notifies</span></tt> statement for each resource to be notified.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">notifies</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">notifies</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">options</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">One (or more) additional options that are passed to the command.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">package_name</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> String, Array</p>
<p class="last">The name of the package. Default value: the <tt class="docutils literal"><span class="pre">name</span></tt> of the resource block See &#8220;Syntax&#8221; section above for more information.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">provider</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Chef Class</p>
<p class="last">Optional. Explicitly specifies a provider. See &#8220;Providers&#8221; section below for more information.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retries</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The number of times to catch exceptions and retry the resource. Default value: <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retry_delay</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The retry delay (in seconds). Default value: <tt class="docutils literal"><span class="pre">2</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">source</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">Optional. The path to a package in the local file system.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">subscribes</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> to be taken, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">subscribes</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">subscribes</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">timeout</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> String, Integer</p>
<p class="last">The amount of time (in seconds) to wait before timing out.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">version</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> String, Array</p>
<p class="last">The version of a package to be installed or upgraded.</p>
</dd>
</dl>
</div>
<div class="section" id="id51">
<h4>Examples<a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h4>
<p><strong>Install a package</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">paludis_package</span> <span class="s1">&#39;name of package&#39;</span> <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:install</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="openbsd-package">
<h3>openbsd_package<a class="headerlink" href="#openbsd-package" title="Permalink to this headline">¶</a></h3>
<p>Use the <strong>openbsd_package</strong> resource to manage packages for the OpenBSD platform.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In many cases, it is better to use the package resource instead of this one. This is because when the package resource is used in a recipe, the chef-client will use details that are collected by Ohai at the start of the chef-client run to determine the correct package application. Using the package resource allows a recipe to be authored in a way that allows it to be used across many platforms.</p>
</div>
<div class="section" id="id52">
<h4>Syntax<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h4>
<p>A <strong>openbsd_package</strong> resource block manages a package on a node, typically by installing it. The simplest use of the <strong>openbsd_package</strong> resource is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">openbsd_package</span> <span class="s1">&#39;package_name&#39;</span>
</pre></div>
</div>
<p>which will install the named package using all of the default options and the default action (<tt class="docutils literal"><span class="pre">:install</span></tt>).</p>
<p>The full syntax for all of the properties that are available to the <strong>openbsd_package</strong> resource is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">openbsd_package</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
  <span class="n">notifies</span>                   <span class="c1"># see description</span>
  <span class="n">options</span>                    <span class="nb">String</span>
  <span class="n">package_name</span>               <span class="nb">String</span><span class="p">,</span> <span class="nb">Array</span> <span class="c1"># defaults to &#39;name&#39; if not specified</span>
  <span class="n">provider</span>                   <span class="no">Chef</span><span class="o">::</span><span class="no">Provider</span><span class="o">::</span><span class="no">Package</span><span class="o">::</span><span class="no">Openbsd</span>
  <span class="n">source</span>                     <span class="nb">String</span>
  <span class="n">subscribes</span>                 <span class="c1"># see description</span>
  <span class="n">timeout</span>                    <span class="nb">String</span><span class="p">,</span> <span class="nb">Integer</span>
  <span class="n">version</span>                    <span class="nb">String</span><span class="p">,</span> <span class="nb">Array</span>
  <span class="n">action</span>                     <span class="no">Symbol</span> <span class="c1"># defaults to :install if not specified</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">openbsd_package</span></tt> tells the chef-client to manage a package</li>
<li><tt class="docutils literal"><span class="pre">'name'</span></tt> is the name of the package</li>
<li><tt class="docutils literal"><span class="pre">action</span></tt> identifies which steps the chef-client will take to bring the node into the desired state</li>
<li><tt class="docutils literal"><span class="pre">options</span></tt>, <tt class="docutils literal"><span class="pre">package_name</span></tt>, <tt class="docutils literal"><span class="pre">provider</span></tt>, <tt class="docutils literal"><span class="pre">source</span></tt>, <tt class="docutils literal"><span class="pre">timeout</span></tt>, and <tt class="docutils literal"><span class="pre">version</span></tt> are properties of this resource, with the Ruby type shown. See &#8220;Properties&#8221; section below for more information about all of the properties that may be used with this resource.</li>
</ul>
</div>
<div class="section" id="id53">
<h4>Actions<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h4>
<p>This resource has the following actions:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:install</span></tt></dt>
<dd>Default. Install a package. If a version is specified, install the specified version of the package.</dd>
<dt><tt class="docutils literal"><span class="pre">:nothing</span></tt></dt>
<dd>Define this resource block to do nothing until notified by another resource to take action. When this resource is notified, this resource block is either run immediately or it is queued up to be run at the end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:remove</span></tt></dt>
<dd>Remove a package.</dd>
</dl>
</div>
<div class="section" id="id54">
<h4>Attributes<a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h4>
<p>This resource has the following properties:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">ignore_failure</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Continue running a recipe if a resource fails for any reason. Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">notifies</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may notify another resource to take action when its state changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> that resource should take, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action. A resource may notifiy more than one resource; use a <tt class="docutils literal"><span class="pre">notifies</span></tt> statement for each resource to be notified.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">notifies</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">notifies</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">options</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">One (or more) additional options that are passed to the command.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">package_name</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> String, Array</p>
<p class="last">The name of the package. Default value: the <tt class="docutils literal"><span class="pre">name</span></tt> of the resource block See &#8220;Syntax&#8221; section above for more information.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">provider</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Chef Class</p>
<p class="last">Optional. Explicitly specifies a provider. See &#8220;Providers&#8221; section below for more information.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retries</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The number of times to catch exceptions and retry the resource. Default value: <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retry_delay</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The retry delay (in seconds). Default value: <tt class="docutils literal"><span class="pre">2</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">source</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">Optional. The path to a package in the local file system.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">subscribes</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> to be taken, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">subscribes</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">subscribes</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">timeout</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> String, Integer</p>
<p class="last">The amount of time (in seconds) to wait before timing out.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">version</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> String, Array</p>
<p class="last">The version of a package to be installed or upgraded.</p>
</dd>
</dl>
</div>
<div class="section" id="id55">
<h4>Examples<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h4>
<p><strong>Install a package</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">openbsd_package</span> <span class="s1">&#39;name of package&#39;</span> <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:install</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="new-client-rb-settings">
<h3>New client.rb Settings<a class="headerlink" href="#new-client-rb-settings" title="Permalink to this headline">¶</a></h3>
<p>The following client.rb settings are new:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">chef_gem_compile_time</span></tt></dt>
<dd><p class="first">Controls the phase during which a gem is installed on a node. Set to <tt class="docutils literal"><span class="pre">true</span></tt> to install a gem while the resource collection is being built (the &#8220;compile phase&#8221;). Set to <tt class="docutils literal"><span class="pre">false</span></tt> to install a gem while the chef-client is configuring the node (the &#8220;converge phase&#8221;). Recommended value: <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p>To suppress warnings for cookbooks authored prior to chef-client 12.1, use a <tt class="docutils literal"><span class="pre">respond_to?</span></tt> check to ensure backward compatibility. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">chef_gem</span> <span class="s1">&#39;aws-sdk&#39;</span> <span class="k">do</span>
  <span class="n">compile_time</span> <span class="kp">false</span> <span class="k">if</span> <span class="nb">respond_to?</span><span class="p">(</span><span class="ss">:compile_time</span><span class="p">)</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">windows_service.watchdog_timeout</span></tt></dt>
<dd>The maximum amount of time (in seconds) available to the chef-client run when the chef-client is run as a service on the Microsoft Windows platform. If the chef-client run does not complete within the specified timeframe, the chef-client run is terminated. Default value: <tt class="docutils literal"><span class="pre">2</span> <span class="pre">*</span> <span class="pre">(60</span> <span class="pre">*</span> <span class="pre">60)</span></tt>.</dd>
</dl>
</div>
<div class="section" id="multiple-packages-and-versions">
<h3>Multiple Packages and Versions<a class="headerlink" href="#multiple-packages-and-versions" title="Permalink to this headline">¶</a></h3>
<p>A resource may specify multiple packages and/or versions for platforms that use Yum, Apt, Zypper, or Chocolatey package managers. Specifing multiple packages and/or versions allows a single transaction to:</p>
<ul class="simple">
<li>Download the specified packages and versions via a single HTTP transaction</li>
<li>Update or install multiple packages with a single resource during the chef-client run</li>
</ul>
<p>For example, installing multiple packages:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="o">[</span><span class="s1">&#39;package1&#39;</span><span class="p">,</span> <span class="s1">&#39;package2&#39;</span><span class="o">]</span>
</pre></div>
</div>
<p>Upgrading multiple packages:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="o">[</span><span class="s1">&#39;package1&#39;</span><span class="p">,</span> <span class="s1">&#39;package2&#39;</span><span class="o">]</span>  <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:upgrade</span>
<span class="k">end</span>
</pre></div>
</div>
<p>Removing multiple packages:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="o">[</span><span class="s1">&#39;package1&#39;</span><span class="p">,</span> <span class="s1">&#39;package2&#39;</span><span class="o">]</span>  <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:remove</span>
<span class="k">end</span>
</pre></div>
</div>
<p>Purging multiple packages:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="o">[</span><span class="s1">&#39;package1&#39;</span><span class="p">,</span> <span class="s1">&#39;package2&#39;</span><span class="o">]</span>  <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:purge</span>
<span class="k">end</span>
</pre></div>
</div>
<p>Notifications, via an implicit name:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="o">[</span><span class="s1">&#39;package1&#39;</span><span class="p">,</span> <span class="s1">&#39;package2&#39;</span><span class="o">]</span>  <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:nothing</span>
<span class="k">end</span>

<span class="n">log</span> <span class="s1">&#39;call a notification&#39;</span> <span class="k">do</span>
  <span class="n">notifies</span> <span class="ss">:install</span><span class="p">,</span> <span class="s1">&#39;package[package1, package2]&#39;</span><span class="p">,</span> <span class="ss">:immediately</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Notifications and subscriptions do not need to be updated when packages and versions are added or removed from the <tt class="docutils literal"><span class="pre">package_name</span></tt> or <tt class="docutils literal"><span class="pre">version</span></tt> properties.</p>
</div>
</div>
</div>
<div class="section" id="what-s-new-in-12-0">
<h2>What&#8217;s New in 12.0<a class="headerlink" href="#what-s-new-in-12-0" title="Permalink to this headline">¶</a></h2>
<p>The following items are new for chef-client 12.0 and/or are changes from previous versions. The short version:</p>
<ul class="simple">
<li><strong>Changing attributes</strong> Attributes may be modified for named precedence levels, all precedence levels, and be fully assigned. These changes were <a class="reference external" href="https://github.com/chef/chef-rfc/blob/master/rfc023-chef-12-attributes-changes.md">based on RFC-23</a>.</li>
<li><strong>Ruby 2.0 (or higher) for Windows; and Ruby 2.1 (or higher) for Unix/Linux</strong> Ruby versions 1.8.7, 1.9.1, 1.9.2, and 1.9.3 are no longer supported. See <a class="reference external" href="https://www.chef.io/blog/2014/11/25/ruby-1-9-3-eol-and-chef-12/">this blog post</a> for more info.</li>
<li><strong>The number of changes between Ruby 1.9 and 2.0 is small</strong> Please review the <a class="reference external" href="https://github.com/ruby/ruby/blob/v2_0_0_0/NEWS">Ruby 2.0 release notes</a> or <a class="reference external" href="https://github.com/ruby/ruby/blob/v2_1_0/NEWS">Ruby 2.1 release notes</a> for the full list of changes.</li>
<li><strong>provides method for building custom resources</strong> Use the <tt class="docutils literal"><span class="pre">provides</span></tt> method to associate a custom resource with a built-in chef-client resource and to specify platforms on which the custom resource may be used.</li>
<li><strong>The chef-client supports the AIX platform</strong> The chef-client may now be used to configure nodes that are running on the AIX platform, versions 6.1 (TL6 or higher, recommended) and 7.1 (TL0 SP3 or higher, recommended). The <strong>service</strong> resource supports starting, stopping, and restarting services that are managed by System Resource Controller (SRC), as well as managing all service states with BSD-based init systems.</li>
<li><strong>New bff_package resource</strong> Use the <strong>bff_package</strong> resource to install packages on the AIX platform.</li>
<li><strong>New homebrew_package resource</strong> Use the <strong>homebrew_package</strong> resource to install packages on the Mac OS X platform. The <strong>homebrew_package</strong> resource also replaces the <strong>macports_package</strong> resource as the default package installer on the Mac OS X platform.</li>
<li><strong>New reboot resource</strong> Use the <strong>reboot</strong> resource to reboot a node during or at the end of a chef-client run.</li>
<li><strong>New windows_service resource</strong> Use the <strong>windows_service</strong> resource to manage services on the Microsoft Windows platform.</li>
<li><strong>New &#8211;bootstrap-template option</strong> Use the <tt class="docutils literal"><span class="pre">--bootstrap-template</span></tt> option to install the chef-client with a bootstrap template. Specify the name of a template, such as <tt class="docutils literal"><span class="pre">chef-full</span></tt>, or specify the path to a custom bootstrap template. This option deprecates the <tt class="docutils literal"><span class="pre">--distro</span></tt> and <tt class="docutils literal"><span class="pre">--template-file</span></tt> options.</li>
<li><strong>New SSL options for bootstrap operations</strong> The <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">bootstrap</span></tt> subcommand has new options that support SSL with bootstrap operations. Use the <tt class="docutils literal"><span class="pre">--[no-]node-verify-api-cert</span></tt> option to to perform SSL validation of the connection to the Chef server. Use the <tt class="docutils literal"><span class="pre">--node-ssl-verify-mode</span></tt> option to validate SSL certificates.</li>
<li><strong>New format options for knife status</strong> Use the <tt class="docutils literal"><span class="pre">--medium</span></tt> and <tt class="docutils literal"><span class="pre">--long</span></tt> options to include attributes in the output and to format that output as JSON.</li>
<li><strong>New fsck_device property for mount resource</strong> The <strong>mount</strong> resource supports fsck devices for the Solaris platform with the <tt class="docutils literal"><span class="pre">fsck_device</span></tt> property.</li>
<li><strong>New settings for metadata.rb</strong> The metadata.rb file has two new settings: <tt class="docutils literal"><span class="pre">issues_url</span></tt> and <tt class="docutils literal"><span class="pre">source_url</span></tt>. These settings are used to capture the source location and issues tracking location for a cookbook. These settings are also used with Chef Supermarket. In addition, the <tt class="docutils literal"><span class="pre">name</span></tt> setting is now <strong>required</strong>.</li>
<li><strong>The http_request GET and HEAD requests drop the hard-coded query string</strong> The <tt class="docutils literal"><span class="pre">:get</span></tt> and <tt class="docutils literal"><span class="pre">:head</span></tt> actions appended a hard-coded query string&#8212;<tt class="docutils literal"><span class="pre">?message=resource_name</span></tt>&#8212;that cannot be overridden. This hard-coded string is deprecated in the chef-client 12.0 release. Cookbooks that rely on this string need to be updated to manually add it to the URL as it is passed to the resource.</li>
<li><strong>New Recipe DSL methods</strong> The Recipe DSL has three new methods: <tt class="docutils literal"><span class="pre">shell_out</span></tt>, <tt class="docutils literal"><span class="pre">shell_out!</span></tt>, and <tt class="docutils literal"><span class="pre">shell_out_with_systems_locale</span></tt>.</li>
<li><strong>File specificity updates</strong> File specificity for the <strong>template</strong> and <strong>cookbook_file</strong> resources now supports using the <tt class="docutils literal"><span class="pre">source</span></tt> attribute to define an explicit lookup path as an array.</li>
<li><strong>Improved user password security for the user resource, Mac OS X platform</strong> The <strong>user</strong> resource now supports salted password hashes for Mac OS X 10.7 (and higher). Use the <tt class="docutils literal"><span class="pre">iterations</span></tt> and <tt class="docutils literal"><span class="pre">salt</span></tt> attributes to calculate SALTED-SHA512 password shadow hashes for Mac OS X version 10.7 and SALTED-SHA512-PBKDF2 password shadow hashes for version 10.8 (and higher).</li>
<li><strong>data_bag_item method in the Recipe DSL supports encrypted data bag items</strong> Use <tt class="docutils literal"><span class="pre">data_bag_item(bag_name,</span> <span class="pre">item,</span> <span class="pre">secret)</span></tt> to specify the secret to use for an encrypted data bag item. If <tt class="docutils literal"><span class="pre">secret</span></tt> is not specified, the chef-client looks for a secret at the path specified by the <tt class="docutils literal"><span class="pre">encrypted_data_bag_secret</span></tt> setting in the client.rb file.</li>
<li><strong>value_for_platform method in the Recipe DSL supports version constraints</strong> Version constraints&#8212;<tt class="docutils literal"><span class="pre">&gt;</span></tt>, <tt class="docutils literal"><span class="pre">&lt;</span></tt>, <tt class="docutils literal"><span class="pre">&gt;=</span></tt>, <tt class="docutils literal"><span class="pre">&lt;=</span></tt>, <tt class="docutils literal"><span class="pre">~&gt;</span></tt>&#8212;may be used when specifying a version. An exception is raised if two version constraints match. An exact match will always take precedence over a match made from a version constraint.</li>
<li><strong>knife cookbook site share supports &#8211;dry-run</strong> Use the <tt class="docutils literal"><span class="pre">--dry-run</span></tt> option with the <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">cookbook</span> <span class="pre">site</span></tt> to take no action and only print out results.</li>
<li><strong>chef-client configuration setting updates</strong> The chef-client now supports running an override run-list (via the <tt class="docutils literal"><span class="pre">--override-runlist</span></tt> option) without clearing the cookbook cache on the node. In addition, the <tt class="docutils literal"><span class="pre">--chef-zero-port</span></tt> option allows specifying a range of ports.</li>
<li><strong>Unforked interval runs are no longer allowed</strong> The <tt class="docutils literal"><span class="pre">--[no-]fork</span></tt> option may no longer be used in the same command with the <tt class="docutils literal"><span class="pre">--daemonize</span></tt> and <tt class="docutils literal"><span class="pre">--interval</span></tt> options.</li>
<li><strong>Splay and interval values are applied before the chef-client run</strong> The <tt class="docutils literal"><span class="pre">--interval</span></tt> and <tt class="docutils literal"><span class="pre">--splay</span></tt> values are applied before the chef-client run when using the chef-client and chef-solo executables.</li>
<li><strong>All files and templates in a cookbook are synchronized at the start of the chef-client run</strong> The <tt class="docutils literal"><span class="pre">no_lazy_load</span></tt> configuration setting in the client.rb file now defaults to <tt class="docutils literal"><span class="pre">true</span></tt>. This avoids issues where time-sensitive URLs in a cookbook manifest timeout before the <strong>cookbook_file</strong> or <strong>template</strong> resources converged.</li>
<li><strong>File staging now defaults to the destination directory by default</strong> Staging into a system&#8217;s temporary directory&#8212;typically <tt class="docutils literal"><span class="pre">/tmp</span></tt> or <tt class="docutils literal"><span class="pre">/var/tmp</span></tt>&#8212;as opposed to the destination directory may cause issues with permissions, available space, or cross-device renames. Files are now staged to the destination directory by default.</li>
<li><strong>Partial search updates</strong> Use <tt class="docutils literal"><span class="pre">:filter_result</span></tt> to build search results into a Hash. This replaces the previous functionality that was provided by the <tt class="docutils literal"><span class="pre">partial_search</span></tt> cookbook, albeit with a different API. Use the <tt class="docutils literal"><span class="pre">--filter-result</span></tt> option to return only attributes that match the specified filter. For example: <tt class="docutils literal"><span class="pre">\&quot;ServerName=name,</span> <span class="pre">Kernel=kernel.version\&quot;</span></tt>.</li>
<li><strong>Client-side key generation is enabled by default</strong> When a new chef-client is created using the validation client account, the Chef server allows the chef-client to generate a key-pair locally, and then send the public key to the Chef server. This behavior is controlled by the <tt class="docutils literal"><span class="pre">local_key_generation</span></tt> attribute in the client.rb file and now defaults to <tt class="docutils literal"><span class="pre">true</span></tt>.</li>
<li><strong>New guard_interpreter property defaults</strong> The <tt class="docutils literal"><span class="pre">guard_interpreter</span></tt> property now defaults to <tt class="docutils literal"><span class="pre">:batch</span></tt> for the <strong>batch</strong> resource and <tt class="docutils literal"><span class="pre">:powershell_script</span></tt> for the <strong>powershell_script</strong> resource.</li>
<li><strong>Events are sent to the Application event log on the Windows platform by default</strong> Events are sent to the Microsoft Windows &#8220;Application&#8221; event log at the start and end of a chef-client run, and also if a chef-client run fails. Set the <tt class="docutils literal"><span class="pre">disable_event_logger</span></tt> configuration setting in the client.rb file to <tt class="docutils literal"><span class="pre">true</span></tt> to disable event logging.</li>
<li><strong>The installer_type property for the windows_package resource uses a symbol instead of a string</strong> Previous versions of the chef-client (starting with version 11.8) used a string.</li>
<li><strong>The path property is deprecated for the execute resource</strong> Use the <tt class="docutils literal"><span class="pre">environment</span></tt> property instead.</li>
<li><strong>SSL certificate validation improvements</strong> The default settings for SSL certificate validation now default in favor of validation. In addition, using the <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">ssl</span> <span class="pre">fetch</span></tt> subcommand is now an important part of setting up your workstation.</li>
<li><strong>New property for git resource</strong> The <strong>git</strong> resource has a new property: <tt class="docutils literal"><span class="pre">environment</span></tt>, which takes a Hash of environment variables in the form of <tt class="docutils literal"><span class="pre">{&quot;ENV_VARIABLE&quot;</span> <span class="pre">=&gt;</span> <span class="pre">&quot;VALUE&quot;}</span></tt>.</li>
</ul>
<p>Please <a class="reference external" href="https://docs.chef.io/upgrade_client_notes.html">view the notes</a> for more background on the upgrade process from chef-client 11 to chef-client 12.</p>
<div class="section" id="change-attributes">
<h3>Change Attributes<a class="headerlink" href="#change-attributes" title="Permalink to this headline">¶</a></h3>
<p>Starting with chef-client 12.0, attribute precedence levels may be</p>
<ul class="simple">
<li>Removed for a specific, named attribute precedence level</li>
<li>Removed for all attribute precedence levels</li>
<li>Fully assigned attributes</li>
</ul>
<div class="section" id="remove-precedence-level">
<h4>Remove Precedence Level<a class="headerlink" href="#remove-precedence-level" title="Permalink to this headline">¶</a></h4>
<p>A specific attribute precedence level for default, normal, and override attributes may be removed by using one of the following syntax patterns.</p>
<p>For default attributes:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">node.rm_default('foo',</span> <span class="pre">'bar')</span></tt></li>
</ul>
<p>For normal attributes:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">node.rm_normal('foo',</span> <span class="pre">'bar')</span></tt></li>
</ul>
<p>For override attributes:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">node.rm_override('foo',</span> <span class="pre">'bar')</span></tt></li>
</ul>
<p>These patterns return the computed value of the key being deleted for the specified precedence level.</p>
<div class="section" id="id56">
<h5>Examples<a class="headerlink" href="#id56" title="Permalink to this headline">¶</a></h5>
<p>The following examples show how to remove a specific, named attribute precedence level.</p>
<p><strong>Delete a default value when only default values exist</strong></p>
<p>Given the following code structure under <tt class="docutils literal"><span class="pre">'foo'</span></tt>:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">default</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;bar&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="s1">&#39;baz&#39;</span> <span class="o">=&gt;</span> <span class="mi">52</span><span class="p">,</span>
    <span class="s1">&#39;thing&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;stuff&#39;</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="s1">&#39;bat&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="s1">&#39;things&#39;</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="o">]</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>And some role attributes:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="c1"># Please don&#39;t ever do this in real code :)</span>
<span class="n">node</span><span class="o">.</span><span class="n">role_default</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">][</span><span class="s1">&#39;bar&#39;</span><span class="o">][</span><span class="s1">&#39;thing&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;otherstuff&#39;</span>
</pre></div>
</div>
<p>And a force attribute:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">force_default</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">][</span><span class="s1">&#39;bar&#39;</span><span class="o">][</span><span class="s1">&#39;thing&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;allthestuff&#39;</span>
</pre></div>
</div>
<p>When the default attribute precedence <tt class="docutils literal"><span class="pre">node['foo']['bar']</span></tt> is removed:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">rm_default</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">)</span> <span class="c1">#=&gt; {&#39;baz&#39; =&gt; 52, &#39;thing&#39; =&gt; &#39;allthestuff&#39;}</span>
</pre></div>
</div>
<p>What is left under <tt class="docutils literal"><span class="pre">'foo'</span></tt> is only <tt class="docutils literal"><span class="pre">'bat'</span></tt>:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">combined_default</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">]</span> <span class="c1">#=&gt; {&#39;bat&#39; =&gt; { &#39;things&#39; =&gt; [5,6] } }</span>
</pre></div>
</div>
<p><strong>Delete default without touching higher precedence attributes</strong></p>
<p>Given the following code structure:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">default</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;bar&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="s1">&#39;baz&#39;</span> <span class="o">=&gt;</span> <span class="mi">52</span><span class="p">,</span>
    <span class="s1">&#39;thing&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;stuff&#39;</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="s1">&#39;bat&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="s1">&#39;things&#39;</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="o">]</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>And some role attributes:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="c1"># Please don&#39;t ever do this in real code :)</span>
<span class="n">node</span><span class="o">.</span><span class="n">role_default</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">][</span><span class="s1">&#39;bar&#39;</span><span class="o">][</span><span class="s1">&#39;thing&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;otherstuff&#39;</span>
</pre></div>
</div>
<p>And a force attribute:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">force_default</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">][</span><span class="s1">&#39;bar&#39;</span><span class="o">][</span><span class="s1">&#39;thing&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="s1">&#39;allthestuff&#39;</span>
</pre></div>
</div>
<p>And also some override attributes:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">override</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">][</span><span class="s1">&#39;bar&#39;</span><span class="o">][</span><span class="s1">&#39;baz&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="mi">99</span>
</pre></div>
</div>
<p>Same delete as before:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">rm_default</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">)</span> <span class="c1">#=&gt; { &#39;baz&#39; =&gt; 52, &#39;thing&#39; =&gt; &#39;allthestuff&#39; }</span>
</pre></div>
</div>
<p>The other attribute precedence levels are unaffected:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">combined_override</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">]</span> <span class="c1">#=&gt; { &#39;bar&#39; =&gt; {&#39;baz&#39; =&gt; 99} }</span>
<span class="n">node</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">]</span> <span class="c1">#=&gt; { &#39;bar&#39; =&gt; {&#39;baz&#39; =&gt; 99}, &#39;bat&#39; =&gt; { &#39;things&#39; =&gt; [5,6] }</span>
</pre></div>
</div>
<p><strong>Delete override without touching lower precedence attributes</strong></p>
<p>Given the following code structure, which has an override attribute:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">override</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;bar&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="s1">&#39;baz&#39;</span> <span class="o">=&gt;</span> <span class="mi">52</span><span class="p">,</span>
    <span class="s1">&#39;thing&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;stuff&#39;</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="s1">&#39;bat&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="s1">&#39;things&#39;</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="o">]</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>with a single default value:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">default</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">][</span><span class="s1">&#39;bar&#39;</span><span class="o">][</span><span class="s1">&#39;baz&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="mi">11</span>
</pre></div>
</div>
<p>and a force at each attribute precedence:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">force_default</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">][</span><span class="s1">&#39;bar&#39;</span><span class="o">][</span><span class="s1">&#39;baz&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="mi">55</span>
<span class="n">node</span><span class="o">.</span><span class="n">force_override</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">][</span><span class="s1">&#39;bar&#39;</span><span class="o">][</span><span class="s1">&#39;baz&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="mi">99</span>
</pre></div>
</div>
<p>Delete the override:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">rm_override</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">)</span> <span class="c1">#=&gt; { &#39;baz&#39; =&gt; 99, &#39;thing&#39; =&gt; &#39;stuff&#39; }</span>
</pre></div>
</div>
<p>The other attribute precedence levels are unaffected:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">combined_default</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">]</span> <span class="c1">#=&gt; { &#39;bar&#39; =&gt; {&#39;baz&#39; =&gt; 55} }</span>
</pre></div>
</div>
<p><strong>Non-existent key deletes return nil</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">rm_default</span><span class="p">(</span><span class="s2">&quot;no&quot;</span><span class="p">,</span> <span class="s2">&quot;such&quot;</span><span class="p">,</span> <span class="s2">&quot;thing&quot;</span><span class="p">)</span> <span class="c1">#=&gt; nil</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="remove-all-levels">
<h4>Remove All Levels<a class="headerlink" href="#remove-all-levels" title="Permalink to this headline">¶</a></h4>
<p>All attribute precedence levels may be removed by using the following syntax pattern:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">node.rm('foo',</span> <span class="pre">'bar')</span></tt></li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Using <tt class="docutils literal"><span class="pre">node['foo'].delete('bar')</span></tt> will throw an exception that points to the new API.</p>
</div>
<div class="section" id="id57">
<h5>Examples<a class="headerlink" href="#id57" title="Permalink to this headline">¶</a></h5>
<p>The following examples show how to remove all attribute precedence levels.</p>
<p><strong>Delete all attribute precedence levels</strong></p>
<p>Given the following code structure:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">default</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;bar&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="s1">&#39;baz&#39;</span> <span class="o">=&gt;</span> <span class="mi">52</span><span class="p">,</span>
    <span class="s1">&#39;thing&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;stuff&#39;</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="s1">&#39;bat&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="s1">&#39;things&#39;</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="o">]</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>With override attributes:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">override</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">][</span><span class="s1">&#39;bar&#39;</span><span class="o">][</span><span class="s1">&#39;baz&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="mi">999</span>
</pre></div>
</div>
<p>Removing the <tt class="docutils literal"><span class="pre">'bar'</span></tt> key returns the computed value:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">rm</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">)</span> <span class="c1">#=&gt; {&#39;baz&#39; =&gt; 999, &#39;thing&#39; =&gt; &#39;stuff&#39;}</span>
</pre></div>
</div>
<p>Looking at <tt class="docutils literal"><span class="pre">'foo'</span></tt>, all that&#8217;s left is the <tt class="docutils literal"><span class="pre">'bat'</span></tt> entry:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">]</span> <span class="c1">#=&gt; {&#39;bat&#39; =&gt; { &#39;things&#39; =&gt; [5,6] } }</span>
</pre></div>
</div>
<p><strong>Non-existent key deletes return nil</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">rm_default</span><span class="p">(</span><span class="s2">&quot;no&quot;</span><span class="p">,</span> <span class="s2">&quot;such&quot;</span><span class="p">,</span> <span class="s2">&quot;thing&quot;</span><span class="p">)</span> <span class="c1">#=&gt; nil</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="full-assignment">
<h4>Full Assignment<a class="headerlink" href="#full-assignment" title="Permalink to this headline">¶</a></h4>
<p>Use <tt class="docutils literal"><span class="pre">!</span></tt> to clear out the key for the named attribute precedence level, and then complete the write by using one of the following syntax patterns:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">node.default!['foo']['bar']</span> <span class="pre">=</span> <span class="pre">{...}</span></tt></li>
<li><tt class="docutils literal"><span class="pre">node.force_default!['foo']['bar']</span> <span class="pre">=</span> <span class="pre">{...}</span></tt></li>
<li><tt class="docutils literal"><span class="pre">node.normal!['foo']['bar']</span> <span class="pre">=</span> <span class="pre">{...}</span></tt></li>
<li><tt class="docutils literal"><span class="pre">node.override!['foo']['bar']</span> <span class="pre">=</span> <span class="pre">{...}</span></tt></li>
<li><tt class="docutils literal"><span class="pre">node.force_override!['foo']['bar']</span> <span class="pre">=</span> <span class="pre">{...}</span></tt></li>
</ul>
<div class="section" id="id58">
<h5>Examples<a class="headerlink" href="#id58" title="Permalink to this headline">¶</a></h5>
<p>The following examples show how to remove all attribute precedence levels.</p>
<p><strong>Just one component</strong></p>
<p>Given the following code structure:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">default</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">][</span><span class="s1">&#39;bar&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;b&#39;</span><span class="p">}</span>
<span class="n">node</span><span class="o">.</span><span class="n">default!</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">][</span><span class="s1">&#39;bar&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;c&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;d&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">'!'</span></tt> caused the entire &#8216;bar&#8217; key to be overwritten:
.. code-block:: ruby</p>
<blockquote>
<div>node[&#8216;foo&#8217;] #=&gt; {&#8216;bar&#8217; =&gt; {&#8216;c&#8217; =&gt; &#8216;d&#8217;}</div></blockquote>
<p><strong>Multiple components; one &#8220;after&#8221;</strong></p>
<p>Given the following code structure:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">default</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">][</span><span class="s1">&#39;bar&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;b&#39;</span><span class="p">}</span>
<span class="c1"># Please don&#39;t ever do this in real code :)</span>
<span class="n">node</span><span class="o">.</span><span class="n">role_default</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">][</span><span class="s1">&#39;bar&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;c&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;d&#39;</span><span class="p">}</span>
<span class="n">node</span><span class="o">.</span><span class="n">default!</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">][</span><span class="s1">&#39;bar&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;d&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;e&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">'!'</span></tt> write overwrote the &#8220;cookbook-default&#8221; value of <tt class="docutils literal"><span class="pre">'bar'</span></tt>, but since role data is later in the resolution list, it was unaffected:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">]</span> <span class="c1">#=&gt; {&#39;bar&#39; =&gt; {&#39;c&#39; =&gt; &#39;d&#39;, &#39;d&#39; =&gt; &#39;e&#39;}</span>
</pre></div>
</div>
<p><strong>Multiple components; all &#8220;before&#8221;</strong></p>
<p>Given the following code structure:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">default</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">][</span><span class="s1">&#39;bar&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;b&#39;</span><span class="p">}</span>
<span class="c1"># Please don&#39;t ever do this in real code :)</span>
<span class="n">node</span><span class="o">.</span><span class="n">role_default</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">][</span><span class="s1">&#39;bar&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;c&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;d&#39;</span><span class="p">}</span>
<span class="n">node</span><span class="o">.</span><span class="n">force_default!</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">][</span><span class="s1">&#39;bar&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;d&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;e&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>With <tt class="docutils literal"><span class="pre">force_default!</span></tt> there is no other data under <tt class="docutils literal"><span class="pre">'bar'</span></tt>:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">]</span> <span class="c1">#=&gt; {&#39;bar&#39; =&gt; {&#39;d&#39; =&gt; &#39;e&#39;}</span>
</pre></div>
</div>
<p><strong>Multiple precedence levels</strong></p>
<p>Given the following code structure:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">default</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;bar&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="s1">&#39;baz&#39;</span> <span class="o">=&gt;</span> <span class="mi">52</span><span class="p">,</span>
    <span class="s1">&#39;thing&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;stuff&#39;</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="s1">&#39;bat&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span>
   <span class="s1">&#39;things&#39;</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="o">]</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>And some attributes:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="c1"># Please don&#39;t ever do this in real code :)</span>
<span class="n">node</span><span class="o">.</span><span class="n">role_default</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">][</span><span class="s1">&#39;bar&#39;</span><span class="o">][</span><span class="s1">&#39;baz&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="mi">55</span>
<span class="n">node</span><span class="o">.</span><span class="n">force_default</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">][</span><span class="s1">&#39;bar&#39;</span><span class="o">][</span><span class="s1">&#39;baz&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="mi">66</span>
</pre></div>
</div>
<p>And other precedence levels:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">normal</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">][</span><span class="s1">&#39;bar&#39;</span><span class="o">][</span><span class="s1">&#39;baz&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="mi">88</span>
<span class="n">node</span><span class="o">.</span><span class="n">override</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">][</span><span class="s1">&#39;bar&#39;</span><span class="o">][</span><span class="s1">&#39;baz&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="mi">99</span>
</pre></div>
</div>
<p>With a full assignment:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">default!</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">][</span><span class="s1">&#39;bar&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="p">{}</span>
</pre></div>
</div>
<p>Role default and force default are left in default, plus other precedence levels:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">combined_default</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">]</span> <span class="c1">#=&gt; {&#39;bar&#39; =&gt; {&#39;baz&#39; =&gt; 66}, &#39;bat&#39;=&gt;{&#39;things&#39;=&gt;[5, 6]}}</span>
<span class="n">node</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">normal</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">]</span> <span class="c1">#=&gt; {&#39;bar&#39; =&gt; {&#39;baz&#39; =&gt; 88}}</span>
<span class="n">node</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">combined_override</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">]</span> <span class="c1">#=&gt; {&#39;bar&#39; =&gt; {&#39;baz&#39; =&gt; 99}}</span>
<span class="n">node</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">][</span><span class="s1">&#39;bar&#39;</span><span class="o">]</span> <span class="c1">#=&gt; {&#39;baz&#39; =&gt; 99}</span>
</pre></div>
</div>
<p>If <tt class="docutils literal"><span class="pre">force_default!</span></tt> is written:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">force_default!</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">][</span><span class="s1">&#39;bar&#39;</span><span class="o">]</span> <span class="o">=</span> <span class="p">{}</span>
</pre></div>
</div>
<p>the difference is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">node</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">combined_default</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">]</span> <span class="c1">#=&gt; {&#39;bat&#39;=&gt;{&#39;things&#39;=&gt;[5, 6]}, &#39;bar&#39; =&gt; {}}</span>
<span class="n">node</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">normal</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">]</span> <span class="c1">#=&gt; {&#39;bar&#39; =&gt; {&#39;baz&#39; =&gt; 88}}</span>
<span class="n">node</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">combined_override</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">]</span> <span class="c1">#=&gt; {&#39;bar&#39; =&gt; {&#39;baz&#39; =&gt; 99}}</span>
<span class="n">node</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">][</span><span class="s1">&#39;bar&#39;</span><span class="o">]</span> <span class="c1">#=&gt; {&#39;baz&#39; =&gt; 99}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="provides-method">
<h3>provides Method<a class="headerlink" href="#provides-method" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">provides</span></tt> method to map a custom resource/provider to an existing resource/provider, and then to also specify the platform(s) on which the behavior of the custom resource/provider will be applied. This method enables scenarios like:</p>
<ul class="simple">
<li>Building a custom resource that is based on an existing resource</li>
<li>Defining platform mapping specific to a custom resource</li>
<li>Handling situations where a resource on a particular platform may have more than one provider, such as the behavior on the Ubuntu platform where both SysVInit and systemd are present</li>
<li>Allowing the custom resource to declare what platforms are supported, enabling the creator of the custom resource to use arbitrary criteria if desired</li>
<li>Not using the previous naming convention&#8212;<tt class="docutils literal"><span class="pre">#{cookbook_name}_#{provider_filename}</span></tt></li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The <tt class="docutils literal"><span class="pre">provides</span></tt> method must be defined in both the custom resource and custom provider files and both files must have identical <tt class="docutils literal"><span class="pre">provides</span></tt> statement(s).</p>
</div>
<p>The syntax for the <tt class="docutils literal"><span class="pre">provides</span></tt> method is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">provides</span> <span class="ss">:resource_name</span><span class="p">,</span> <span class="ss">os</span><span class="p">:</span> <span class="o">[</span> <span class="s1">&#39;platform&#39;</span><span class="p">,</span> <span class="s1">&#39;platform&#39;</span><span class="p">,</span> <span class="o">...]</span><span class="p">,</span> <span class="ss">platform_family</span><span class="p">:</span> <span class="s1">&#39;family&#39;</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">:resource_name</span></tt> is a chef-client resource: <tt class="docutils literal"><span class="pre">:cookbook_file</span></tt>, <tt class="docutils literal"><span class="pre">:package</span></tt>, <tt class="docutils literal"><span class="pre">:rpm_package</span></tt>, and so on</li>
<li><tt class="docutils literal"><span class="pre">'platform'</span></tt> is a comma-separated list of platforms: <tt class="docutils literal"><span class="pre">'windows'</span></tt>, <tt class="docutils literal"><span class="pre">'solaris2'</span></tt>, <tt class="docutils literal"><span class="pre">'linux'</span></tt>, and so on</li>
<li><tt class="docutils literal"><span class="pre">platform_family</span></tt> is optional and may specify the same parameters as the <tt class="docutils literal"><span class="pre">platform_family?</span></tt> method in the Recipe DSL; <tt class="docutils literal"><span class="pre">platform</span></tt> is optional and also supported (and is the same as the <tt class="docutils literal"><span class="pre">platform?</span></tt> method in the Recipe DSL)</li>
</ul>
<p>A custom resource/provider may be mapped to more than one existing resource/provider. Multiple platform associations may be made. For example, to completely map a custom resource/provider to an existing custom resource/provider, only specificy the resource name:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">provides</span> <span class="ss">:cookbook_file</span>
</pre></div>
</div>
<p>The same mapping, but only for the Linux platform:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">provides</span> <span class="ss">:cookbook_file</span><span class="p">,</span> <span class="ss">os</span><span class="p">:</span> <span class="s1">&#39;linux&#39;</span>
</pre></div>
</div>
<p>A similar mapping, but also for packages on the Microsoft Windows platform:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">provides</span> <span class="ss">:cookbook_file</span>
<span class="n">provides</span> <span class="ss">:package</span><span class="p">,</span> <span class="ss">os</span><span class="p">:</span> <span class="s1">&#39;windows&#39;</span>
</pre></div>
</div>
<p>Use multiple <tt class="docutils literal"><span class="pre">provides</span></tt> statements to define multiple conditions: Use an array to match any of the platforms within the array:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">provides</span> <span class="ss">:cookbook_file</span>
<span class="n">provides</span> <span class="ss">:package</span><span class="p">,</span> <span class="ss">os</span><span class="p">:</span> <span class="s1">&#39;windows&#39;</span>
<span class="n">provides</span> <span class="ss">:rpm_package</span><span class="p">,</span> <span class="ss">os</span><span class="p">:</span> <span class="o">[</span> <span class="s1">&#39;linux&#39;</span><span class="p">,</span> <span class="s1">&#39;aix&#39;</span> <span class="o">]</span>
</pre></div>
</div>
<p>Use an array to match any of the platforms within the array:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">provides</span> <span class="ss">:package</span><span class="p">,</span> <span class="ss">os</span><span class="p">:</span> <span class="s1">&#39;solaris2&#39;</span><span class="p">,</span> <span class="ss">platform_family</span><span class="p">:</span> <span class="s1">&#39;solaris2&#39;</span> <span class="k">do</span> <span class="o">|</span><span class="n">node</span><span class="o">|</span>
  <span class="n">node</span><span class="o">[</span><span class="ss">:platform_version</span><span class="o">].</span><span class="n">to_f</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="o">.</span><span class="mi">10</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="section" id="aix-platform-support">
<h3>AIX Platform Support<a class="headerlink" href="#aix-platform-support" title="Permalink to this headline">¶</a></h3>
<p>The chef-client may now be used to configure nodes that are running on the AIX platform, versions 6.1 (TL6 or higher, recommended) and 7.1 (TL0 SP3 or higher, recommended). The <strong>service</strong> resource supports starting, stopping, and restarting services that are managed by System Resource Controller (SRC), as well as managing all service states with BSD-based init systems.</p>
<p><strong>System Requirements</strong></p>
<p>The chef-client has the <a class="reference external" href="https://docs.chef.io/chef_system_requirements.html#chef-client">same system requirements</a> on the AIX platform as any other platform, with the following notes:</p>
<ul class="simple">
<li>Expand the file system on the AIX platform using <tt class="docutils literal"><span class="pre">chfs</span></tt> or by passing the <tt class="docutils literal"><span class="pre">-X</span></tt> flag to <tt class="docutils literal"><span class="pre">installp</span></tt> to automatically expand the logical partition (LPAR)</li>
<li>The EN_US (UTF-8) character set should be installed on the logical partition prior to installing the chef-client</li>
</ul>
<p><strong>Install the chef-client on the AIX platform</strong></p>
<p>The chef-client is distributed as a Backup File Format (BFF) binary and is installed on the AIX platform using the following command run as a root user:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span># installp -aYgd chef-12.0.0-1.powerpc.bff all
</pre></div>
</div>
<p><strong>Increase system process limits</strong></p>
<p>The out-of-the-box system process limits for maximum process memory size (RSS) and number of open files are typically too low to run the chef-client on a logical partition (LPAR). When the system process limits are too low, the chef-client will not be able to create threads. To increase the system process limits:</p>
<ol class="arabic">
<li><p class="first">Validate that the system process limits have not already been increased.</p>
</li>
<li><p class="first">If they have not been increased, run the following commands as a root user:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chsec -f /etc/security/limits -s default -a <span class="s2">&quot;rss=-1&quot;</span>
</pre></div>
</div>
<p>and then:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chsec -f /etc/security/limits -s default -a <span class="s2">&quot;data=-1&quot;</span>
</pre></div>
</div>
<p>and then:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ chsec -f /etc/security/limits -s default -a <span class="s2">&quot;nofiles=50000&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The previous commands may be run against the root user, instead of default. For example:</p>
<div class="last highlight-bash"><div class="highlight"><pre><span></span>$ chsec -f /etc/security/limits -s root_user -a <span class="s2">&quot;rss=-1&quot;</span>
</pre></div>
</div>
</div>
</li>
<li><p class="first">Reboot the logical partition (LPAR) to apply the updated system process limits.</p>
</li>
</ol>
<p>When the system process limits are too low, an error is returned similar to:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>Error Syncing Cookbooks:
==================================================================

Unexpected Error:
-----------------
ThreadError: can&#39;t create Thread: Resource temporarily unavailable
</pre></div>
</div>
<p><strong>Install the UTF-8 character set</strong></p>
<p>The chef-client uses the EN_US (UTF-8) character set. By default, the AIX base operating system does not include the EN_US (UTF-8) character set and it must be installed prior to installing the chef-client. The EN_US (UTF-8) character set may be installed from the first disc in the AIX media or may be copied from <tt class="docutils literal"><span class="pre">/installp/ppc/*EN_US*</span></tt> to a location on the logical partition (LPAR). This topic assumes this location to be <tt class="docutils literal"><span class="pre">/tmp/rte</span></tt>.</p>
<p>Use <tt class="docutils literal"><span class="pre">smit</span></tt> to install the EN_US (UTF-8) character set. This ensures that any workload partitions (WPARs) also have UTF-8 applied.</p>
<p>Remember to point <tt class="docutils literal"><span class="pre">INPUT</span> <span class="pre">device/directory</span></tt> to <tt class="docutils literal"><span class="pre">/tmp/rte</span></tt> when not installing from CD.</p>
<ol class="arabic">
<li><p class="first">From a root shell type:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span># smit lang
</pre></div>
</div>
<p>A screen similar to the following is returned:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>                       Manage Language Environment

Move cursor to desired item and press Enter.

  Change/Show Primary Language Environment
  Add Additional Language Environments
  Remove Language Environments
  Change/Show Language Hierarchy
  Set User Languages
  Change/Show Applications <span class="k">for</span> a Language
  Convert System Messages and Flat Files

<span class="nv">F1</span><span class="o">=</span>Help             <span class="nv">F2</span><span class="o">=</span>Refresh          <span class="nv">F3</span><span class="o">=</span>Cancel           <span class="nv">F8</span><span class="o">=</span>Image
<span class="nv">F9</span><span class="o">=</span>Shell            <span class="nv">F10</span><span class="o">=</span>Exit            <span class="nv">Enter</span><span class="o">=</span>Do
</pre></div>
</div>
</li>
<li><p class="first">Select <tt class="docutils literal"><span class="pre">Add</span> <span class="pre">Additional</span> <span class="pre">Language</span> <span class="pre">Environments</span></tt> and press <tt class="docutils literal"><span class="pre">Enter</span></tt>. A screen similar to the following is returned:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>                   Add Additional Language Environments

Type or <span class="k">select</span> values in entry fields.
Press Enter AFTER making all desired changes.

                                                        <span class="o">[</span>Entry Fields<span class="o">]</span>
  CULTURAL convention to install                                             +
  LANGUAGE translation to install                                            +
* INPUT device/directory <span class="k">for</span> software                <span class="o">[</span>/dev/cd0<span class="o">]</span>              +
  EXTEND file systems <span class="k">if</span> space needed?                yes                    +

  WPAR Management
      Perform Operation in Global Environment         yes                    +
      Perform Operation on Detached WPARs             no                     +
          Detached WPAR Names                        <span class="o">[</span>_all_wpars<span class="o">]</span>            +
      Remount Installation Device in WPARs            yes                    +
      Alternate WPAR Installation Device             <span class="o">[]</span>

<span class="nv">F1</span><span class="o">=</span>Help             <span class="nv">F2</span><span class="o">=</span>Refresh          <span class="nv">F3</span><span class="o">=</span>Cancel           <span class="nv">F4</span><span class="o">=</span>List
<span class="nv">F5</span><span class="o">=</span>Reset            <span class="nv">F6</span><span class="o">=</span>Command          <span class="nv">F7</span><span class="o">=</span>Edit             <span class="nv">F8</span><span class="o">=</span>Image
<span class="nv">F9</span><span class="o">=</span>Shell            <span class="nv">F10</span><span class="o">=</span>Exit            <span class="nv">Enter</span><span class="o">=</span>Do
</pre></div>
</div>
</li>
<li><p class="first">Cursor over the first two entries&#8212;<tt class="docutils literal"><span class="pre">CULTURAL</span> <span class="pre">convention</span> <span class="pre">to</span> <span class="pre">install</span></tt> and <tt class="docutils literal"><span class="pre">LANGUAGE</span> <span class="pre">translation</span> <span class="pre">to</span> <span class="pre">install</span></tt>&#8212;and use <tt class="docutils literal"><span class="pre">F4</span></tt> to navigate through the list until <tt class="docutils literal"><span class="pre">UTF-8</span> <span class="pre">English</span> <span class="pre">(United</span> <span class="pre">States)</span> <span class="pre">[EN_US]</span></tt> is selected. (EN_US is in capital letters!)</p>
</li>
<li><p class="first">Press <tt class="docutils literal"><span class="pre">Enter</span></tt> to apply and install the language set.</p>
</li>
</ol>
<p><strong>New providers</strong></p>
<p>The <strong>service</strong> resource has the following providers to support the AIX platform:</p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="15%" />
<col width="58%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Long name</th>
<th class="head">Short name</th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">Chef::Provider::Service::Aix</span></tt></td>
<td><tt class="docutils literal"><span class="pre">service</span></tt></td>
<td>The provider that is used with the AIX platforms. Use the <tt class="docutils literal"><span class="pre">service</span></tt> short name to start, stop, and restart services with System Resource Controller (SRC).</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">Chef::Provider::Service::AixInit</span></tt></td>
<td><tt class="docutils literal"><span class="pre">service</span></tt></td>
<td>The provider that is used to manage BSD-based init services on AIX.</td>
</tr>
</tbody>
</table>
<p><strong>Enable a service on AIX using the mkitab command</strong></p>
<p>The <strong>service</strong> resource does not support using the <tt class="docutils literal"><span class="pre">:enable</span></tt> and <tt class="docutils literal"><span class="pre">:disable</span></tt> actions with resources that are managed using System Resource Controller (SRC). This is because System Resource Controller (SRC) does not have a standard mechanism for enabling and disabling services on system boot.</p>
<p>One approach for enabling or disabling services that are managed by System Resource Controller (SRC) is to use the <strong>execute</strong> resource to invoke <tt class="docutils literal"><span class="pre">mkitab</span></tt>, and then use that command to enable or disable the service.</p>
<p>The following example shows how to install a service:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">execute</span> <span class="s2">&quot;install </span><span class="si">#{</span><span class="n">node</span><span class="o">[</span><span class="s1">&#39;chef_client&#39;</span><span class="o">][</span><span class="s1">&#39;svc_name&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2"> in SRC&quot;</span> <span class="k">do</span>
  <span class="n">command</span> <span class="s2">&quot;mkssys -s </span><span class="si">#{</span><span class="n">node</span><span class="o">[</span><span class="s1">&#39;chef_client&#39;</span><span class="o">][</span><span class="s1">&#39;svc_name&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2"></span>
<span class="s2">                  -p </span><span class="si">#{</span><span class="n">node</span><span class="o">[</span><span class="s1">&#39;chef_client&#39;</span><span class="o">][</span><span class="s1">&#39;bin&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2"></span>
<span class="s2">                  -u root</span>
<span class="s2">                  -S</span>
<span class="s2">                  -n 15</span>
<span class="s2">                  -f 9</span>
<span class="s2">                  -o </span><span class="si">#{</span><span class="n">node</span><span class="o">[</span><span class="s1">&#39;chef_client&#39;</span><span class="o">][</span><span class="s1">&#39;log_dir&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">/client.log</span>
<span class="s2">                  -e </span><span class="si">#{</span><span class="n">node</span><span class="o">[</span><span class="s1">&#39;chef_client&#39;</span><span class="o">][</span><span class="s1">&#39;log_dir&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">/client.log -a &#39;</span>
<span class="s2">                  -i </span><span class="si">#{</span><span class="n">node</span><span class="o">[</span><span class="s1">&#39;chef_client&#39;</span><span class="o">][</span><span class="s1">&#39;interval&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2"></span>
<span class="s2">                  -s </span><span class="si">#{</span><span class="n">node</span><span class="o">[</span><span class="s1">&#39;chef_client&#39;</span><span class="o">][</span><span class="s1">&#39;splay&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
  <span class="n">not_if</span> <span class="s2">&quot;lssrc -s </span><span class="si">#{</span><span class="n">node</span><span class="o">[</span><span class="s1">&#39;chef_client&#39;</span><span class="o">][</span><span class="s1">&#39;svc_name&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span>
  <span class="n">action</span> <span class="ss">:run</span>
<span class="k">end</span>
</pre></div>
</div>
<p>and then enable it using the <tt class="docutils literal"><span class="pre">mkitab</span></tt> command:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">execute</span> <span class="s2">&quot;enable </span><span class="si">#{</span><span class="n">node</span><span class="o">[</span><span class="s1">&#39;chef_client&#39;</span><span class="o">][</span><span class="s1">&#39;svc_name&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">do</span>
  <span class="n">command</span> <span class="s2">&quot;mkitab &#39;</span><span class="si">#{</span><span class="n">node</span><span class="o">[</span><span class="s1">&#39;chef_client&#39;</span><span class="o">][</span><span class="s1">&#39;svc_name&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">:2:once:/usr/bin/startsrc</span>
<span class="s2">                  -s </span><span class="si">#{</span><span class="n">node</span><span class="o">[</span><span class="s1">&#39;chef_client&#39;</span><span class="o">][</span><span class="s1">&#39;svc_name&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2"> &gt; /dev/console 2&gt;&amp;1&#39;&quot;</span>
  <span class="n">not_if</span> <span class="s2">&quot;lsitab </span><span class="si">#{</span><span class="n">node</span><span class="o">[</span><span class="s1">&#39;chef_client&#39;</span><span class="o">][</span><span class="s1">&#39;svc_name&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="section" id="recipe-dsl-encrypted-data-bags">
<h3>Recipe DSL, Encrypted Data Bags<a class="headerlink" href="#recipe-dsl-encrypted-data-bags" title="Permalink to this headline">¶</a></h3>
<p>The Recipe DSL provides access to data bags and data bag items (including encrypted data bag items) with the following methods:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">data_bag(bag)</span></tt>, where <tt class="docutils literal"><span class="pre">bag</span></tt> is the name of the data bag.</li>
<li><tt class="docutils literal"><span class="pre">data_bag_item('bag_name',</span> <span class="pre">'item',</span> <span class="pre">'secret')</span></tt>, where <tt class="docutils literal"><span class="pre">bag</span></tt> is the name of the data bag and <tt class="docutils literal"><span class="pre">item</span></tt> is the name of the data bag item. If <tt class="docutils literal"><span class="pre">'secret'</span></tt> is not specified, the chef-client will look for a secret at the path specified by the <tt class="docutils literal"><span class="pre">encrypted_data_bag_secret</span></tt> setting in the client.rb file.</li>
</ul>
<p>The <tt class="docutils literal"><span class="pre">data_bag</span></tt> method returns an array with a key for each of the data bag items that are found in the data bag.</p>
<p>Some examples:</p>
<p>To load the secret from a file:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">data_bag_item</span><span class="p">(</span><span class="s1">&#39;bag&#39;</span><span class="p">,</span> <span class="s1">&#39;item&#39;</span><span class="p">,</span> <span class="no">IO</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s1">&#39;secret_file&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>To load a single data bag item named <tt class="docutils literal"><span class="pre">admins</span></tt>:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">data_bag</span><span class="p">(</span><span class="s1">&#39;admins&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The contents of a data bag item named <tt class="docutils literal"><span class="pre">justin</span></tt>:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">data_bag_item</span><span class="p">(</span><span class="s1">&#39;admins&#39;</span><span class="p">,</span> <span class="s1">&#39;justin&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>will return something similar to:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="c1"># =&gt; {&#39;comment&#39;=&gt;&#39;Justin Currie&#39;, &#39;gid&#39;=&gt;1005, &#39;id&#39;=&gt;&#39;justin&#39;, &#39;uid&#39;=&gt;1005, &#39;shell&#39;=&gt;&#39;/bin/zsh&#39;}</span>
</pre></div>
</div>
<p>If <tt class="docutils literal"><span class="pre">item</span></tt> is encrypted, <tt class="docutils literal"><span class="pre">data_bag_item</span></tt> will automatically decrypt it using the key specified above, or (if none is specified) by the <tt class="docutils literal"><span class="pre">Chef::Config[:encrypted_data_bag_secret]</span></tt> method, which defaults to <tt class="docutils literal"><span class="pre">/etc/chef/encrypted_data_bag_secret</span></tt>.</p>
</div>
<div class="section" id="bff-package">
<h3>bff_package<a class="headerlink" href="#bff-package" title="Permalink to this headline">¶</a></h3>
<p>Use the <strong>bff_package</strong> resource to manage packages for the AIX platform using the installp utility. When a package is installed from a local file, it must be added to the node using the <strong>remote_file</strong> or <strong>cookbook_file</strong> resources.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A Backup File Format (BFF) package may not have a <tt class="docutils literal"><span class="pre">.bff</span></tt> file extension. The chef-client will still identify the correct provider to use based on the platform, regardless of the file extension.</p>
</div>
<div class="section" id="id59">
<h4>Syntax<a class="headerlink" href="#id59" title="Permalink to this headline">¶</a></h4>
<p>A <strong>bff_package</strong> resource block manages a package on a node, typically by installing it. The simplest use of the <strong>bff_package</strong> resource is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">bff_package</span> <span class="s1">&#39;package_name&#39;</span>
</pre></div>
</div>
<p>which will install the named package using all of the default options and the default action (<tt class="docutils literal"><span class="pre">:install</span></tt>).</p>
<p>The full syntax for all of the properties that are available to the <strong>bff_package</strong> resource is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">bff_package</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
  <span class="n">notifies</span>                   <span class="c1"># see description</span>
  <span class="n">options</span>                    <span class="nb">String</span>
  <span class="n">package_name</span>               <span class="nb">String</span><span class="p">,</span> <span class="nb">Array</span> <span class="c1"># defaults to &#39;name&#39; if not specified</span>
  <span class="n">provider</span>                   <span class="no">Chef</span><span class="o">::</span><span class="no">Provider</span><span class="o">::</span><span class="no">Package</span><span class="o">::</span><span class="no">Aix</span>
  <span class="n">source</span>                     <span class="nb">String</span>
  <span class="n">subscribes</span>                 <span class="c1"># see description</span>
  <span class="n">timeout</span>                    <span class="nb">String</span><span class="p">,</span> <span class="nb">Integer</span>
  <span class="n">version</span>                    <span class="nb">String</span><span class="p">,</span> <span class="nb">Array</span>
  <span class="n">action</span>                     <span class="no">Symbol</span> <span class="c1"># defaults to :install if not specified</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">bff_package</span></tt> tells the chef-client to manage a package</li>
<li><tt class="docutils literal"><span class="pre">'name'</span></tt> is the name of the package</li>
<li><tt class="docutils literal"><span class="pre">action</span></tt> identifies which steps the chef-client will take to bring the node into the desired state</li>
<li><tt class="docutils literal"><span class="pre">options</span></tt>, <tt class="docutils literal"><span class="pre">package_name</span></tt>, <tt class="docutils literal"><span class="pre">provider</span></tt>, <tt class="docutils literal"><span class="pre">source</span></tt>, <tt class="docutils literal"><span class="pre">timeout</span></tt>, and <tt class="docutils literal"><span class="pre">version</span></tt> are properties of this resource, with the Ruby type shown. See &#8220;Properties&#8221; section below for more information about all of the properties that may be used with this resource.</li>
</ul>
</div>
<div class="section" id="id60">
<h4>Actions<a class="headerlink" href="#id60" title="Permalink to this headline">¶</a></h4>
<p>This resource has the following actions:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:install</span></tt></dt>
<dd>Default. Install a package. If a version is specified, install the specified version of the package.</dd>
<dt><tt class="docutils literal"><span class="pre">:nothing</span></tt></dt>
<dd>Define this resource block to do nothing until notified by another resource to take action. When this resource is notified, this resource block is either run immediately or it is queued up to be run at the end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:purge</span></tt></dt>
<dd>Purge a package. This action typically removes the configuration files as well as the package.</dd>
<dt><tt class="docutils literal"><span class="pre">:remove</span></tt></dt>
<dd>Remove a package.</dd>
</dl>
</div>
<div class="section" id="id61">
<h4>Properties<a class="headerlink" href="#id61" title="Permalink to this headline">¶</a></h4>
<p>This resource has the following properties:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">ignore_failure</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Continue running a recipe if a resource fails for any reason. Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">notifies</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may notify another resource to take action when its state changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> that resource should take, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action. A resource may notifiy more than one resource; use a <tt class="docutils literal"><span class="pre">notifies</span></tt> statement for each resource to be notified.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">notifies</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">notifies</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">options</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">One (or more) additional options that are passed to the command.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">package_name</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> String, Array</p>
<p class="last">The name of the package. Default value: the <tt class="docutils literal"><span class="pre">name</span></tt> of the resource block See &#8220;Syntax&#8221; section above for more information.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">provider</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Chef Class</p>
<p class="last">Optional. Explicitly specifies a provider. See &#8220;Providers&#8221; section below for more information.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retries</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The number of times to catch exceptions and retry the resource. Default value: <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retry_delay</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The retry delay (in seconds). Default value: <tt class="docutils literal"><span class="pre">2</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">source</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">Required. The path to a package in the local file system. The AIX platform requires <tt class="docutils literal"><span class="pre">source</span></tt> to be a local file system path because <tt class="docutils literal"><span class="pre">installp</span></tt> does not retrieve packages using HTTP or FTP.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">subscribes</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> to be taken, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">subscribes</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">subscribes</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">timeout</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> String, Integer</p>
<p class="last">The amount of time (in seconds) to wait before timing out.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">version</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> String, Array</p>
<p class="last">The version of a package to be installed or upgraded.</p>
</dd>
</dl>
</div>
<div class="section" id="providers">
<h4>Providers<a class="headerlink" href="#providers" title="Permalink to this headline">¶</a></h4>
<p>This resource has the following providers:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">Chef::Provider::Package</span></tt>, <tt class="docutils literal"><span class="pre">package</span></tt></dt>
<dd>When this short name is used, the chef-client will attempt to determine the correct provider during the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">Chef::Provider::Package::Aix</span></tt>, <tt class="docutils literal"><span class="pre">bff_package</span></tt></dt>
<dd>The provider for the AIX platform. Can be used with the <tt class="docutils literal"><span class="pre">options</span></tt> attribute.</dd>
</dl>
</div>
<div class="section" id="example">
<h4>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h4>
<p><strong>Install a package</strong></p>
<p>The <strong>bff_package</strong> resource is the default package provider on the AIX platform. The base <strong>package</strong> resource may be used, and then when the platform is AIX, the chef-client will identify the correct package provider. The following examples show how to install part of the IBM XL C/C++ compiler.</p>
<p>Using the base <strong>package</strong> resource:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">package</span> <span class="s1">&#39;xlccmp.13.1.0&#39;</span> <span class="k">do</span>
  <span class="n">source</span> <span class="s1">&#39;/var/tmp/IBM_XL_C_13.1.0/usr/sys/inst.images/xlccmp.13.1.0&#39;</span>
  <span class="n">action</span> <span class="ss">:install</span>
<span class="k">end</span>
</pre></div>
</div>
<p>Using the <strong>bff_package</strong> resource:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">bff_package</span> <span class="s1">&#39;xlccmp.13.1.0&#39;</span> <span class="k">do</span>
  <span class="n">source</span> <span class="s1">&#39;/var/tmp/IBM_XL_C_13.1.0/usr/sys/inst.images/xlccmp.13.1.0&#39;</span>
  <span class="n">action</span> <span class="ss">:install</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="homebrew-package">
<h3>homebrew_package<a class="headerlink" href="#homebrew-package" title="Permalink to this headline">¶</a></h3>
<p>Use the <strong>homebrew_package</strong> resource to manage packages for the Mac OS X platform.</p>
<div class="section" id="id62">
<h4>Syntax<a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h4>
<p>A <strong>homebrew_package</strong> resource block manages a package on a node, typically by installing it. The simplest use of the <strong>homebrew_package</strong> resource is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">homebrew_package</span> <span class="s1">&#39;package_name&#39;</span>
</pre></div>
</div>
<p>which will install the named package using all of the default options and the default action (<tt class="docutils literal"><span class="pre">:install</span></tt>).</p>
<p>The full syntax for all of the properties that are available to the <strong>homebrew_package</strong> resource is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">homebrew_package</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
  <span class="n">homebrew_user</span>              <span class="nb">String</span><span class="p">,</span> <span class="nb">Integer</span>
  <span class="n">notifies</span>                   <span class="c1"># see description</span>
  <span class="n">options</span>                    <span class="nb">String</span>
  <span class="n">package_name</span>               <span class="nb">String</span><span class="p">,</span> <span class="nb">Array</span> <span class="c1"># defaults to &#39;name&#39; if not specified</span>
  <span class="n">provider</span>                   <span class="no">Chef</span><span class="o">::</span><span class="no">Provider</span><span class="o">::</span><span class="no">Package</span><span class="o">::</span><span class="no">Homebrew</span>
  <span class="n">source</span>                     <span class="nb">String</span>
  <span class="n">subscribes</span>                 <span class="c1"># see description</span>
  <span class="n">timeout</span>                    <span class="nb">String</span><span class="p">,</span> <span class="nb">Integer</span>
  <span class="n">version</span>                    <span class="nb">String</span><span class="p">,</span> <span class="nb">Array</span>
  <span class="n">action</span>                     <span class="no">Symbol</span> <span class="c1"># defaults to :install if not specified</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">homebrew_package</span></tt> tells the chef-client to manage a package</li>
<li><tt class="docutils literal"><span class="pre">'name'</span></tt> is the name of the package</li>
<li><tt class="docutils literal"><span class="pre">action</span></tt> identifies which steps the chef-client will take to bring the node into the desired state</li>
<li><tt class="docutils literal"><span class="pre">homebrew_user</span></tt>, <tt class="docutils literal"><span class="pre">options</span></tt>, <tt class="docutils literal"><span class="pre">package_name</span></tt>, <tt class="docutils literal"><span class="pre">provider</span></tt>, <tt class="docutils literal"><span class="pre">source</span></tt>, <tt class="docutils literal"><span class="pre">timeout</span></tt>, and <tt class="docutils literal"><span class="pre">version</span></tt> are properties of this resource, with the Ruby type shown. See &#8220;Properties&#8221; section below for more information about all of the properties that may be used with this resource.</li>
</ul>
</div>
<div class="section" id="id63">
<h4>Actions<a class="headerlink" href="#id63" title="Permalink to this headline">¶</a></h4>
<p>This resource has the following actions:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:install</span></tt></dt>
<dd>Default. Install a package. If a version is specified, install the specified version of the package.</dd>
<dt><tt class="docutils literal"><span class="pre">:nothing</span></tt></dt>
<dd>Define this resource block to do nothing until notified by another resource to take action. When this resource is notified, this resource block is either run immediately or it is queued up to be run at the end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:purge</span></tt></dt>
<dd>Purge a package. This action typically removes the configuration files as well as the package.</dd>
<dt><tt class="docutils literal"><span class="pre">:remove</span></tt></dt>
<dd>Remove a package.</dd>
<dt><tt class="docutils literal"><span class="pre">:upgrade</span></tt></dt>
<dd>Install a package and/or ensure that a package is the latest version.</dd>
</dl>
</div>
<div class="section" id="id64">
<h4>Properties<a class="headerlink" href="#id64" title="Permalink to this headline">¶</a></h4>
<p>This resource has the following properties:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">homebrew_user</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> String, Integer</p>
<p>The name of the Homebrew owner to be used by the chef-client when executing a command.</p>
<p class="last">The chef-client, by default, will attempt to execute a Homebrew command as the owner of <tt class="docutils literal"><span class="pre">/usr/local/bin/brew</span></tt>. If that executable does not exist, the chef-client will attempt to find the user by executing <tt class="docutils literal"><span class="pre">which</span> <span class="pre">brew</span></tt>. If that executable cannot be found, the chef-client will print an error message: <tt class="docutils literal"><span class="pre">Could</span> <span class="pre">not</span> <span class="pre">find</span> <span class="pre">the</span> <span class="pre">&quot;brew&quot;</span> <span class="pre">executable</span> <span class="pre">in</span> <span class="pre">/usr/local/bin</span> <span class="pre">or</span> <span class="pre">anywhere</span> <span class="pre">on</span> <span class="pre">the</span> <span class="pre">path.</span></tt>. Use the <tt class="docutils literal"><span class="pre">homebrew_user</span></tt> attribute to specify the Homebrew owner for situations where the chef-client cannot automatically detect the correct owner.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">ignore_failure</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Continue running a recipe if a resource fails for any reason. Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">notifies</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may notify another resource to take action when its state changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> that resource should take, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action. A resource may notifiy more than one resource; use a <tt class="docutils literal"><span class="pre">notifies</span></tt> statement for each resource to be notified.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">notifies</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">notifies</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">options</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">One (or more) additional options that are passed to the command.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">package_name</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> String, Array</p>
<p class="last">The name of the package. Default value: the <tt class="docutils literal"><span class="pre">name</span></tt> of the resource block See &#8220;Syntax&#8221; section above for more information.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">provider</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Chef Class</p>
<p class="last">Optional. Explicitly specifies a provider. See &#8220;Providers&#8221; section below for more information.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retries</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The number of times to catch exceptions and retry the resource. Default value: <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retry_delay</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The retry delay (in seconds). Default value: <tt class="docutils literal"><span class="pre">2</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">source</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">Optional. The path to a package in the local file system.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">subscribes</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> to be taken, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">subscribes</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">subscribes</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">timeout</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> String, Integer</p>
<p class="last">The amount of time (in seconds) to wait before timing out.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">version</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> String, Array</p>
<p class="last">The version of a package to be installed or upgraded.</p>
</dd>
</dl>
</div>
<div class="section" id="id65">
<h4>Providers<a class="headerlink" href="#id65" title="Permalink to this headline">¶</a></h4>
<p>This resource has the following providers:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">Chef::Provider::Package</span></tt>, <tt class="docutils literal"><span class="pre">package</span></tt></dt>
<dd>When this short name is used, the chef-client will attempt to determine the correct provider during the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">Chef::Provider::Package::Homebrew</span></tt>, <tt class="docutils literal"><span class="pre">homebrew_package</span></tt></dt>
<dd>The provider for the Mac OS X platform.</dd>
</dl>
</div>
<div class="section" id="id66">
<h4>Example<a class="headerlink" href="#id66" title="Permalink to this headline">¶</a></h4>
<p><strong>Install a package</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">homebrew_package</span> <span class="s1">&#39;name of package&#39;</span> <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:install</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Specify the Homebrew user with a UUID</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">homebrew_package</span> <span class="s1">&#39;emacs&#39;</span> <span class="k">do</span>
  <span class="n">homebrew_user</span> <span class="mi">1001</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Specify the Homebrew user with a string</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">homebrew_package</span> <span class="s1">&#39;vim&#39;</span> <span class="k">do</span>
  <span class="n">homebrew_user</span> <span class="s1">&#39;user1&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="reboot">
<h3>reboot<a class="headerlink" href="#reboot" title="Permalink to this headline">¶</a></h3>
<p>Use the <strong>reboot</strong> resource to reboot a node, a necessary step with some installations on certain platforms. This resource is supported for use on the Microsoft Windows, Mac OS X, and Linux platforms.</p>
<div class="section" id="id67">
<h4>Syntax<a class="headerlink" href="#id67" title="Permalink to this headline">¶</a></h4>
<p>A <strong>reboot</strong> resource block reboots a node:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">reboot</span> <span class="s1">&#39;app_requires_reboot&#39;</span> <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:request_reboot</span>
  <span class="n">reason</span> <span class="s1">&#39;Need to reboot when the run completes successfully.&#39;</span>
  <span class="n">delay_mins</span> <span class="mi">5</span>
<span class="k">end</span>
</pre></div>
</div>
<p>The full syntax for all of the properties that are available to the <strong>reboot</strong> resource is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">reboot</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
  <span class="n">delay_mins</span>                 <span class="no">Fixnum</span>
  <span class="n">notifies</span>                   <span class="c1"># see description</span>
  <span class="n">reason</span>                     <span class="nb">String</span>
  <span class="n">subscribes</span>                 <span class="c1"># see description</span>
  <span class="n">action</span>                     <span class="no">Symbol</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">reboot</span></tt> is the resource</li>
<li><tt class="docutils literal"><span class="pre">name</span></tt> is the name of the resource block</li>
<li><tt class="docutils literal"><span class="pre">action</span></tt> identifies the steps the chef-client will take to bring the node into the desired state</li>
<li><tt class="docutils literal"><span class="pre">delay_mins</span></tt> and <tt class="docutils literal"><span class="pre">reason</span></tt> are properties of this resource, with the Ruby type shown. See &#8220;Properties&#8221; section below for more information about all of the properties that may be used with this resource.</li>
</ul>
</div>
<div class="section" id="id68">
<h4>Actions<a class="headerlink" href="#id68" title="Permalink to this headline">¶</a></h4>
<p>This resource has the following actions:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:cancel</span></tt></dt>
<dd>Cancel a reboot request.</dd>
<dt><tt class="docutils literal"><span class="pre">:nothing</span></tt></dt>
<dd>Define this resource block to do nothing until notified by another resource to take action. When this resource is notified, this resource block is either run immediately or it is queued up to be run at the end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:reboot_now</span></tt></dt>
<dd>Reboot a node so that the chef-client may continue the installation process.</dd>
<dt><tt class="docutils literal"><span class="pre">:request_reboot</span></tt></dt>
<dd>Reboot a node at the end of a chef-client run.</dd>
</dl>
</div>
<div class="section" id="id69">
<h4>Properties<a class="headerlink" href="#id69" title="Permalink to this headline">¶</a></h4>
<p>This resource has the following properties:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">delay_mins</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Fixnum</p>
<p class="last">The amount of time (in minutes) to delay a reboot request.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">ignore_failure</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Continue running a recipe if a resource fails for any reason. Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">notifies</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may notify another resource to take action when its state changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> that resource should take, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action. A resource may notifiy more than one resource; use a <tt class="docutils literal"><span class="pre">notifies</span></tt> statement for each resource to be notified.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timer is available:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">reason</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">A string that describes the reboot action.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retries</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The number of times to catch exceptions and retry the resource. Default value: <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retry_delay</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The retry delay (in seconds). Default value: <tt class="docutils literal"><span class="pre">2</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">subscribes</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> to be taken, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timer is available:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="id70">
<h4>Providers<a class="headerlink" href="#id70" title="Permalink to this headline">¶</a></h4>
<p>This resource has the following providers:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">Chef::Provider::Reboot</span></tt>, <tt class="docutils literal"><span class="pre">reboot</span></tt></dt>
<dd>The provider that is used to reboot a node.</dd>
</dl>
</div>
<div class="section" id="id71">
<h4>Example<a class="headerlink" href="#id71" title="Permalink to this headline">¶</a></h4>
<p><strong>Reboot a node immediately</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">reboot</span> <span class="s1">&#39;now&#39;</span> <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:nothing</span>
  <span class="n">reason</span> <span class="s1">&#39;Cannot continue Chef run without a reboot.&#39;</span>
  <span class="n">delay_mins</span> <span class="mi">2</span>
<span class="k">end</span>

<span class="n">execute</span> <span class="s1">&#39;foo&#39;</span> <span class="k">do</span>
  <span class="n">command</span> <span class="s1">&#39;...&#39;</span>
  <span class="n">notifies</span> <span class="ss">:reboot_now</span><span class="p">,</span> <span class="s1">&#39;reboot[now]&#39;</span><span class="p">,</span> <span class="ss">:immediately</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Reboot a node at the end of a chef-client run</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">reboot</span> <span class="s1">&#39;app_requires_reboot&#39;</span> <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:request_reboot</span>
  <span class="n">reason</span> <span class="s1">&#39;Need to reboot when the run completes successfully.&#39;</span>
  <span class="n">delay_mins</span> <span class="mi">5</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Cancel a reboot</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">reboot</span> <span class="s1">&#39;cancel_reboot_request&#39;</span> <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:cancel</span>
  <span class="n">reason</span> <span class="s1">&#39;Cancel a previous end-of-run reboot request.&#39;</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="windows-service">
<h3>windows_service<a class="headerlink" href="#windows-service" title="Permalink to this headline">¶</a></h3>
<p>Use the <strong>windows_service</strong> resource to manage a service on the Microsoft Windows platform.</p>
<div class="section" id="id72">
<h4>Syntax<a class="headerlink" href="#id72" title="Permalink to this headline">¶</a></h4>
<p>A <strong>windows_service</strong> resource block manages the state of a service on a machine that is running Microsoft Windows. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">windows_service</span> <span class="s1">&#39;BITS&#39;</span> <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:configure_startup</span>
  <span class="n">startup_type</span> <span class="ss">:manual</span>
<span class="k">end</span>
</pre></div>
</div>
<p>The full syntax for all of the properties that are available to the <strong>windows_service</strong> resource is:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">windows_service</span> <span class="s1">&#39;name&#39;</span> <span class="k">do</span>
  <span class="n">init_command</span>               <span class="nb">String</span>
  <span class="n">notifies</span>                   <span class="c1"># see description</span>
  <span class="n">pattern</span>                    <span class="nb">String</span>
  <span class="n">provider</span>                   <span class="no">Chef</span><span class="o">::</span><span class="no">Provider</span><span class="o">::</span><span class="no">Service</span><span class="o">::</span><span class="no">Windows</span>
  <span class="n">reload_command</span>             <span class="nb">String</span>
  <span class="n">restart_command</span>            <span class="nb">String</span>
  <span class="n">run_as_password</span>            <span class="nb">String</span>
  <span class="n">run_as_user</span>                <span class="nb">String</span>
  <span class="n">service_name</span>               <span class="nb">String</span> <span class="c1"># defaults to &#39;name&#39; if not specified</span>
  <span class="n">start_command</span>              <span class="nb">String</span>
  <span class="n">startup_type</span>               <span class="no">Symbol</span>
  <span class="n">status_command</span>             <span class="nb">String</span>
  <span class="n">stop_command</span>               <span class="nb">String</span>
  <span class="n">subscribes</span>                 <span class="c1"># see description</span>
  <span class="n">supports</span>                   <span class="no">Hash</span>
  <span class="n">timeout</span>                    <span class="nb">Integer</span>
  <span class="n">action</span>                     <span class="no">Symbol</span> <span class="c1"># defaults to :nothing if not specified</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">windows_service</span></tt> is the resource</li>
<li><tt class="docutils literal"><span class="pre">name</span></tt> is the name of the resource block</li>
<li><tt class="docutils literal"><span class="pre">action</span></tt> identifies the steps the chef-client will take to bring the node into the desired state</li>
<li><tt class="docutils literal"><span class="pre">init_command</span></tt>, <tt class="docutils literal"><span class="pre">pattern</span></tt>, <tt class="docutils literal"><span class="pre">provider</span></tt>, <tt class="docutils literal"><span class="pre">reload_command</span></tt>, <tt class="docutils literal"><span class="pre">restart_command</span></tt>, <tt class="docutils literal"><span class="pre">run_as_password</span></tt>, <tt class="docutils literal"><span class="pre">run_as_user</span></tt>, <tt class="docutils literal"><span class="pre">service_name</span></tt>, <tt class="docutils literal"><span class="pre">start_command</span></tt>, <tt class="docutils literal"><span class="pre">startup_type</span></tt>, <tt class="docutils literal"><span class="pre">status_command</span></tt>, <tt class="docutils literal"><span class="pre">stop_command</span></tt>, <tt class="docutils literal"><span class="pre">supports</span></tt>, and <tt class="docutils literal"><span class="pre">timeout</span></tt> are properties of this resource, with the Ruby type shown. See &#8220;Properties&#8221; section below for more information about all of the properties that may be used with this resource.</li>
</ul>
</div>
<div class="section" id="id73">
<h4>Actions<a class="headerlink" href="#id73" title="Permalink to this headline">¶</a></h4>
<p>This resource has the following actions:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:configure_startup</span></tt></dt>
<dd>Configure a service based on the value of the <tt class="docutils literal"><span class="pre">startup_type</span></tt> property.</dd>
<dt><tt class="docutils literal"><span class="pre">:disable</span></tt></dt>
<dd>Disable a service. This action is equivalent to a <tt class="docutils literal"><span class="pre">Disabled</span></tt> startup type on the Microsoft Windows platform.</dd>
<dt><tt class="docutils literal"><span class="pre">:enable</span></tt></dt>
<dd>Enable a service at boot. This action is equivalent to an <tt class="docutils literal"><span class="pre">Automatic</span></tt> startup type on the Microsoft Windows platform.</dd>
<dt><tt class="docutils literal"><span class="pre">:nothing</span></tt></dt>
<dd>Default. Do nothing with a service.</dd>
<dt><tt class="docutils literal"><span class="pre">:reload</span></tt></dt>
<dd>Reload the configuration for this service.</dd>
<dt><tt class="docutils literal"><span class="pre">:restart</span></tt></dt>
<dd>Restart a service.</dd>
<dt><tt class="docutils literal"><span class="pre">:start</span></tt></dt>
<dd>Start a service, and keep it running until stopped or disabled.</dd>
<dt><tt class="docutils literal"><span class="pre">:stop</span></tt></dt>
<dd>Stop a service.</dd>
</dl>
</div>
<div class="section" id="id74">
<h4>Properties<a class="headerlink" href="#id74" title="Permalink to this headline">¶</a></h4>
<p>This resource has the following properties:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">ignore_failure</span></tt></dt>
<dd><p class="first"><strong>Ruby Types:</strong> TrueClass, FalseClass</p>
<p class="last">Continue running a recipe if a resource fails for any reason. Default value: <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">init_command</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The path to the init script that is associated with the service. This is typically <tt class="docutils literal"><span class="pre">/etc/init.d/SERVICE_NAME</span></tt>. The <tt class="docutils literal"><span class="pre">init_command</span></tt> property can be used to prevent the need to specify  overrides for the <tt class="docutils literal"><span class="pre">start_command</span></tt>, <tt class="docutils literal"><span class="pre">stop_command</span></tt>, and <tt class="docutils literal"><span class="pre">restart_command</span></tt> attributes. Default value: <tt class="docutils literal"><span class="pre">nil</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">notifies</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may notify another resource to take action when its state changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> that resource should take, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action. A resource may notifiy more than one resource; use a <tt class="docutils literal"><span class="pre">notifies</span></tt> statement for each resource to be notified.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">notifies</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">notifies</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">pattern</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The pattern to look for in the process table. Default value: <tt class="docutils literal"><span class="pre">service_name</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">provider</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Chef Class</p>
<p class="last">Optional. Explicitly specifies a provider.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">reload_command</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The command used to tell a service to reload its configuration.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">restart_command</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The command used to restart a service.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retries</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The number of times to catch exceptions and retry the resource. Default value: <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">retry_delay</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The retry delay (in seconds). Default value: <tt class="docutils literal"><span class="pre">2</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">run_as_password</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The password for the user specified by <tt class="docutils literal"><span class="pre">run_as_user</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">run_as_user</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The user under which a Microsoft Windows service runs.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">service_name</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The name of the service. Default value: the <tt class="docutils literal"><span class="pre">name</span></tt> of the resource block See &#8220;Syntax&#8221; section above for more information.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">start_command</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The command used to start a service.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">startup_type</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol</p>
<p class="last">Use to specify the startup type for a Microsoft Windows service. Possible values: <tt class="docutils literal"><span class="pre">:automatic</span></tt>, <tt class="docutils literal"><span class="pre">:disabled</span></tt>, or <tt class="docutils literal"><span class="pre">:manual</span></tt>. Default value: <tt class="docutils literal"><span class="pre">:automatic</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">status_command</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The command used to check the run status for a service.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">stop_command</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> String</p>
<p class="last">The command used to stop a service.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">subscribes</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Symbol, &#8216;Chef::Resource[String]&#8217;</p>
<p>A resource may listen to another resource, and then take action if the state of the resource being listened to changes. Specify a <tt class="docutils literal"><span class="pre">'resource[name]'</span></tt>, the <tt class="docutils literal"><span class="pre">:action</span></tt> to be taken, and then the <tt class="docutils literal"><span class="pre">:timer</span></tt> for that action.</p>
<p>A timer specifies the point during the chef-client run at which a notification is run. The following timers are available:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">:delayed</span></tt></dt>
<dd>Default. Specifies that a notification should be queued up, and then executed at the very end of the chef-client run.</dd>
<dt><tt class="docutils literal"><span class="pre">:immediate</span></tt>, <tt class="docutils literal"><span class="pre">:immediately</span></tt></dt>
<dd>Specifies that a notification should be run immediately, per resource notified.</dd>
</dl>
<p>The syntax for <tt class="docutils literal"><span class="pre">subscribes</span></tt> is:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">subscribes</span> <span class="ss">:action</span><span class="p">,</span> <span class="s1">&#39;resource[name]&#39;</span><span class="p">,</span> <span class="ss">:timer</span>
</pre></div>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">supports</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Hash</p>
<p class="last">A list of properties that controls how the chef-client is to attempt to manage a service: <tt class="docutils literal"><span class="pre">:restart</span></tt>, <tt class="docutils literal"><span class="pre">:reload</span></tt>, <tt class="docutils literal"><span class="pre">:status</span></tt>. For <tt class="docutils literal"><span class="pre">:restart</span></tt>, the init script or other service provider can use a restart command; if <tt class="docutils literal"><span class="pre">:restart</span></tt> is not specified, the chef-client attempts to stop and then start a service. For <tt class="docutils literal"><span class="pre">:reload</span></tt>, the init script or other service provider can use a reload command. For <tt class="docutils literal"><span class="pre">:status</span></tt>, the init script or other service provider can use a status command to determine if the service is running; if <tt class="docutils literal"><span class="pre">:status</span></tt> is not specified, the chef-client attempts to match the <tt class="docutils literal"><span class="pre">service_name</span></tt> against the process table as a regular expression, unless a pattern is specified as a parameter property. Default value: <tt class="docutils literal"><span class="pre">{</span> <span class="pre">:restart</span> <span class="pre">=&gt;</span> <span class="pre">false,</span> <span class="pre">:reload</span> <span class="pre">=&gt;</span> <span class="pre">false,</span> <span class="pre">:status</span> <span class="pre">=&gt;</span> <span class="pre">false</span> <span class="pre">}</span></tt> for all platforms (except for the Red Hat platform family, which defaults to <tt class="docutils literal"><span class="pre">{</span> <span class="pre">:restart</span> <span class="pre">=&gt;</span> <span class="pre">false,</span> <span class="pre">:reload</span> <span class="pre">=&gt;</span> <span class="pre">false,</span> <span class="pre">:status</span> <span class="pre">=&gt;</span> <span class="pre">true</span> <span class="pre">}</span></tt>.)</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">timeout</span></tt></dt>
<dd><p class="first"><strong>Ruby Type:</strong> Integer</p>
<p class="last">The amount of time (in seconds) to wait before timing out. Default value: <tt class="docutils literal"><span class="pre">60</span></tt>.</p>
</dd>
</dl>
</div>
<div class="section" id="id75">
<h4>Providers<a class="headerlink" href="#id75" title="Permalink to this headline">¶</a></h4>
<p>The <strong>windows_service</strong> resource does not have service-specific short names. This is because the chef-client identifies the platform at the start of every chef-client run based on data collected by Ohai. The chef-client looks up the platform, and then determines the correct provider for that platform. In certain situations, such as when more than one init system is available on a node, a specific provider may need to be identified by using the <tt class="docutils literal"><span class="pre">provider</span></tt> attribute and the long name for that provider.</p>
<p>This resource has the following providers:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">Chef::Provider::Service::Windows</span></tt>, <tt class="docutils literal"><span class="pre">windows_service</span></tt></dt>
<dd>The provider that is used with the Microsoft Windows platform.</dd>
</dl>
</div>
<div class="section" id="id76">
<h4>Example<a class="headerlink" href="#id76" title="Permalink to this headline">¶</a></h4>
<p><strong>Start a service manually</strong></p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">windows_service</span> <span class="s1">&#39;BITS&#39;</span> <span class="k">do</span>
  <span class="n">action</span> <span class="ss">:configure_startup</span>
  <span class="n">startup_type</span> <span class="ss">:manual</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="knife-bootstrap-settings">
<h3>knife bootstrap Settings<a class="headerlink" href="#knife-bootstrap-settings" title="Permalink to this headline">¶</a></h3>
<p>The following options are new:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--[no-]node-verify-api-cert</span></tt></dt>
<dd>Verify the SSL certificate on the Chef server. When <tt class="docutils literal"><span class="pre">true</span></tt>, the chef-client always verifies the SSL certificate. When <tt class="docutils literal"><span class="pre">false</span></tt>, the chef-client uses the value of <tt class="docutils literal"><span class="pre">ssl_verify_mode</span></tt> to determine if the SSL certificate requires verification. If this option is not specified, the setting for <tt class="docutils literal"><span class="pre">verify_api_cert</span></tt> in the configuration file is applied.</dd>
<dt><tt class="docutils literal"><span class="pre">--node-ssl-verify-mode</span> <span class="pre">PEER_OR_NONE</span></tt></dt>
<dd><p class="first">Set the verify mode for HTTPS requests.</p>
<p>Use <tt class="docutils literal"><span class="pre">none</span></tt> to do no validation of SSL certificates.</p>
<p class="last">Use <tt class="docutils literal"><span class="pre">peer</span></tt> to do validation of all SSL certificates, including the Chef server connections, S3 connections, and any HTTPS <strong>remote_file</strong> resource URLs used in the chef-client run. This is the recommended setting.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">-t</span> <span class="pre">TEMPLATE</span></tt>, <tt class="docutils literal"><span class="pre">--bootstrap-template</span> <span class="pre">TEMPLATE</span></tt></dt>
<dd><p class="first">The bootstrap template to use. This may be the name of a bootstrap template&#8212;<tt class="docutils literal"><span class="pre">chef-full</span></tt>, for example&#8212;or it may be the full path to an Embedded Ruby (ERB) template that defines a custom bootstrap. Default value: <tt class="docutils literal"><span class="pre">chef-full</span></tt>, which installs the chef-client using the omnibus installer on all supported platforms.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">--distro</span></tt> and <tt class="docutils literal"><span class="pre">--template-file</span></tt> options are deprecated.</p>
</div>
</dd>
</dl>
</div>
<div class="section" id="knife-status-settings">
<h3>knife status Settings<a class="headerlink" href="#knife-status-settings" title="Permalink to this headline">¶</a></h3>
<p>The following options are new:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">-l</span></tt>, <tt class="docutils literal"><span class="pre">--long</span></tt></dt>
<dd>Display all attributes in the output and show the output as JSON.</dd>
<dt><tt class="docutils literal"><span class="pre">-m</span></tt>, <tt class="docutils literal"><span class="pre">--medium</span></tt></dt>
<dd>Display normal attributes in the output and to show the output as JSON.</dd>
</dl>
</div>
<div class="section" id="fsck-device-property">
<h3>fsck_device Property<a class="headerlink" href="#fsck-device-property" title="Permalink to this headline">¶</a></h3>
<p>The following property is new for the <strong>mount</strong> resource:</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">fsck_device</span></tt></td>
<td>The fsck device on the Solaris platform. Default value: <tt class="docutils literal"><span class="pre">-</span></tt>.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="metadata-rb-settings">
<h3>metadata.rb Settings<a class="headerlink" href="#metadata-rb-settings" title="Permalink to this headline">¶</a></h3>
<p>The following settings are new:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Setting</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">issues_url</span></tt></td>
<td><p class="first">The URL for the location in which a cookbook&#8217;s issue tracking is maintained. This setting is also used by Chef Supermarket. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">source_url</span> <span class="s2">&quot;https://github.com/chef-cookbooks/chef-client/issues&quot;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">source_url</span></tt></td>
<td><p class="first">The URL for the location in which a cookbook&#8217;s source code is maintained. This setting is also used by Chef Supermarket. For example:</p>
<div class="last highlight-ruby"><div class="highlight"><pre><span></span><span class="n">source_url</span> <span class="s2">&quot;https://github.com/chef-cookbooks/chef-client&quot;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The <tt class="docutils literal"><span class="pre">name</span></tt> attribute is now a required setting in the metadata.rb file.</p>
</div>
</div>
<div class="section" id="http-request-actions">
<h3>http_request Actions<a class="headerlink" href="#http-request-actions" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">:get</span></tt> and <tt class="docutils literal"><span class="pre">:head</span></tt> actions appended a hard-coded query string&#8212;<tt class="docutils literal"><span class="pre">?message=resource_name</span></tt>&#8212;that cannot be overridden. This hard-coded string is deprecated in the chef-client 12.0 release. Cookbooks that rely on this string need to be updated to manually add it to the URL as it is passed to the resource.</p>
</div>
<div class="section" id="recipe-dsl">
<h3>Recipe DSL<a class="headerlink" href="#recipe-dsl" title="Permalink to this headline">¶</a></h3>
<p>The following methods have been added to the Recipe DSL: <tt class="docutils literal"><span class="pre">shell_out</span></tt>, <tt class="docutils literal"><span class="pre">shell_out!</span></tt>, and <tt class="docutils literal"><span class="pre">shell_out_with_systems_locale</span></tt>.</p>
<div class="section" id="shell-out">
<h4>shell_out<a class="headerlink" href="#shell-out" title="Permalink to this headline">¶</a></h4>
<p>The <tt class="docutils literal"><span class="pre">shell_out</span></tt> method can be used to run a command against the node, and then display the output to the console when the log level is set to <tt class="docutils literal"><span class="pre">debug</span></tt>.</p>
<p>The syntax for the <tt class="docutils literal"><span class="pre">shell_out</span></tt> method is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">shell_out</span><span class="p">(</span><span class="n">command_args</span><span class="p">)</span>
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">command_args</span></tt> is the command that is run against the node.</p>
</div>
<div class="section" id="id77">
<h4>shell_out!<a class="headerlink" href="#id77" title="Permalink to this headline">¶</a></h4>
<p>The <tt class="docutils literal"><span class="pre">shell_out!</span></tt> method can be used to run a command against the node, display the output to the console when the log level is set to <tt class="docutils literal"><span class="pre">debug</span></tt>, and then raise an error when the method returns <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
<p>The syntax for the <tt class="docutils literal"><span class="pre">shell_out!</span></tt> method is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">shell_out!</span><span class="p">(</span><span class="n">command_args</span><span class="p">)</span>
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">command_args</span></tt> is the command that is run against the node. This method will return <tt class="docutils literal"><span class="pre">true</span></tt> or <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
</div>
<div class="section" id="shell-out-with-systems-locale">
<h4>shell_out_with_systems_locale<a class="headerlink" href="#shell-out-with-systems-locale" title="Permalink to this headline">¶</a></h4>
<p>The <tt class="docutils literal"><span class="pre">shell_out_with_systems_locale</span></tt> method can be used to run a command against the node (via the <tt class="docutils literal"><span class="pre">shell_out</span></tt> method), but using the <tt class="docutils literal"><span class="pre">LC_ALL</span></tt> environment variable.</p>
<p>The syntax for the <tt class="docutils literal"><span class="pre">shell_out_with_systems_locale</span></tt> method is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">shell_out_with_systems_locale</span><span class="p">(</span><span class="n">command_args</span><span class="p">)</span>
</pre></div>
</div>
<p>where <tt class="docutils literal"><span class="pre">command_args</span></tt> is the command that is run against the node.</p>
</div>
<div class="section" id="value-for-platform">
<h4>value_for_platform<a class="headerlink" href="#value-for-platform" title="Permalink to this headline">¶</a></h4>
<p>The <tt class="docutils literal"><span class="pre">value_for_platform</span></tt> helper may use version constraints, such as <tt class="docutils literal"><span class="pre">&gt;=</span></tt> and <tt class="docutils literal"><span class="pre">~&gt;</span></tt> to help resolve situations where version numbers look like <tt class="docutils literal"><span class="pre">7.0.&lt;buildnumber&gt;</span></tt>. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">value_for_platform</span><span class="p">(</span>
  <span class="s2">&quot;redhat&quot;</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="s2">&quot;~&gt; 7.0&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;version 7.x.y&quot;</span>
    <span class="s2">&quot;&gt;= 8.0&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;version 8.0.0 and greater&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When two version constraints match it is considered ambiguous and will raise an exception. An exact match, however, will always take precedence over a version constraint.</p>
</div>
</div>
</div>
<div class="section" id="file-specificity">
<h3>File Specificity<a class="headerlink" href="#file-specificity" title="Permalink to this headline">¶</a></h3>
<p>The pattern for file specificity depends on two things: the lookup path and the source attribute. The first pattern that matches is used:</p>
<ol class="arabic simple">
<li>/host-$fqdn/$source</li>
<li>/$platform-$platform_version/$source</li>
<li>/$platform/$source</li>
<li>/default/$source</li>
<li>/$source</li>
</ol>
<p>Use an array with the <tt class="docutils literal"><span class="pre">source</span></tt> attribute to define an explicit lookup path. For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">file</span> <span class="s1">&#39;/conf.py&#39;</span> <span class="k">do</span>
  <span class="n">source</span> <span class="o">[</span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">node</span><span class="o">.</span><span class="n">chef_environment</span><span class="si">}</span><span class="s2">.py&quot;</span><span class="p">,</span> <span class="s1">&#39;conf.py&#39;</span><span class="o">]</span>
<span class="k">end</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">template</span> <span class="s1">&#39;/test&#39;</span> <span class="k">do</span>
  <span class="n">source</span> <span class="o">[</span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">node</span><span class="o">.</span><span class="n">chef_environment</span><span class="si">}</span><span class="s2">.erb&quot;</span><span class="p">,</span> <span class="s1">&#39;default.erb&#39;</span><span class="o">]</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="section" id="mac-os-x-passwords">
<h3>Mac OS X, Passwords<a class="headerlink" href="#mac-os-x-passwords" title="Permalink to this headline">¶</a></h3>
<p>The following properties are new for the <strong>user</strong> resource:</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">iterations</span></tt></td>
<td>The number of iterations for a password with a SALTED-SHA512-PBKDF2 shadow hash.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">salt</span></tt></td>
<td>The salt value for a password shadow hash. Mac OS X version 10.7 uses SALTED-SHA512 and version 10.8 (and higher) uses SALTED-SHA512-PBKDF2 to calculate password shadow hashes.</td>
</tr>
</tbody>
</table>
<p><strong>Use SALTED-SHA512 passwords</strong></p>
<p>Mac OS X 10.7 calculates the password shadow hash using SALTED-SHA512. The length of the shadow hash value is 68 bytes, the salt value is the first 4 bytes, with the remaining 64 being the shadow hash itself. The following code will calculate password shadow hashes for Mac OS X 10.7:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">password</span> <span class="o">=</span> <span class="s1">&#39;my_awesome_password&#39;</span>
<span class="n">salt</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">Random</span><span class="o">.</span><span class="n">random_bytes</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">encoded_password</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">Digest</span><span class="o">::</span><span class="no">SHA512</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">(</span><span class="n">salt</span> <span class="o">+</span> <span class="n">password</span><span class="p">)</span>
<span class="n">shadow_hash</span> <span class="o">=</span> <span class="n">salt</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;H*&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span> <span class="o">+</span> <span class="n">encoded_password</span>
</pre></div>
</div>
<p>Use the calculated password shadow hash with the <strong>user</strong> resource:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">user</span> <span class="s1">&#39;my_awesome_user&#39;</span> <span class="k">do</span>
  <span class="n">password</span> <span class="s1">&#39;c9b3bd....d843&#39;</span>  <span class="c1"># Length: 136</span>
<span class="k">end</span>
</pre></div>
</div>
<p><strong>Use SALTED-SHA512-PBKDF2 passwords</strong></p>
<p>Mac OS X 10.8 (and higher) calculates the password shadow hash using SALTED-SHA512-PBKDF2. The length of the shadow hash value is 128 bytes, the salt value is 32 bytes, and an integer specifies the number of iterations. The following code will calculate password shadow hashes for Mac OS X 10.8 (and higher):</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">password</span> <span class="o">=</span> <span class="s1">&#39;my_awesome_password&#39;</span>
<span class="n">salt</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">Random</span><span class="o">.</span><span class="n">random_bytes</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>
<span class="n">iterations</span> <span class="o">=</span> <span class="mi">25000</span> <span class="c1"># Any value above 20k should be fine.</span>

<span class="n">shadow_hash</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">PKCS5</span><span class="o">::</span><span class="n">pbkdf2_hmac</span><span class="p">(</span>
  <span class="n">password</span><span class="p">,</span>
  <span class="n">salt</span><span class="p">,</span>
  <span class="n">iterations</span><span class="p">,</span>
  <span class="mi">128</span><span class="p">,</span>
  <span class="no">OpenSSL</span><span class="o">::</span><span class="no">Digest</span><span class="o">::</span><span class="no">SHA512</span><span class="o">.</span><span class="n">new</span>
<span class="p">)</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;H*&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span>
<span class="n">salt_value</span> <span class="o">=</span> <span class="n">salt</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;H*&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span>
</pre></div>
</div>
<p>Use the calculated password shadow hash with the <strong>user</strong> resource:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">user</span> <span class="s1">&#39;my_awesome_user&#39;</span> <span class="k">do</span>
  <span class="n">password</span> <span class="s1">&#39;cbd1a....fc843&#39;</span>  <span class="c1"># Length: 256</span>
  <span class="n">salt</span> <span class="s1">&#39;bd1a....fc83&#39;</span>        <span class="c1"># Length: 64</span>
  <span class="n">iterations</span> <span class="mi">25000</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="section" id="id78">
<h3>chef-client Options<a class="headerlink" href="#id78" title="Permalink to this headline">¶</a></h3>
<p>The following options are updated for the chef-client executable:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--chef-zero-port</span> <span class="pre">PORT</span></tt></dt>
<dd>The port on which chef-zero listens. If a port is not specified&#8212;individually or as range of ports from within the command&#8212;the chef-client will scan for ports between 8889-9999 and will pick the first port that is available. This port or port range may also be specified using the <tt class="docutils literal"><span class="pre">chef_zero.port</span></tt> setting in the client.rb file.</dd>
<dt><tt class="docutils literal"><span class="pre">-o</span> <span class="pre">RUN_LIST_ITEM</span></tt>, <tt class="docutils literal"><span class="pre">--override-runlist</span> <span class="pre">RUN_LIST_ITEM</span></tt></dt>
<dd>Replace the current run-list with the specified items. This option will not clear the list of cookbooks (and related files) that is cached on the node.</dd>
</dl>
<p>The following configuration settings are updated for the client.rb file and now default to <tt class="docutils literal"><span class="pre">true</span></tt>:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Setting</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">disable_event_logger</span></tt></td>
<td>Enable or disable sending events to the Microsoft Windows &#8220;Application&#8221; event log. When <tt class="docutils literal"><span class="pre">false</span></tt>, events are sent to the Microsoft Windows &#8220;Application&#8221; event log at the start and end of a chef-client run, and also if a chef-client run fails. Set to <tt class="docutils literal"><span class="pre">true</span></tt> to disable event logging. Default value: <tt class="docutils literal"><span class="pre">true</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">no_lazy_load</span></tt></td>
<td>Download all cookbook files and templates at the beginning of the chef-client run. Default value: <tt class="docutils literal"><span class="pre">true</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">file_staging_uses_destdir</span></tt></td>
<td>How file staging (via temporary files) is done. When <tt class="docutils literal"><span class="pre">true</span></tt>, temporary files are created in the directory in which files will reside. When <tt class="docutils literal"><span class="pre">false</span></tt>, temporary files are created under <tt class="docutils literal"><span class="pre">ENV['TMP']</span></tt>. Default value: <tt class="docutils literal"><span class="pre">true</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">local_key_generation</span></tt></td>
<td>Use to specify whether the Chef server or chef-client will generate the private/public key pair. When <tt class="docutils literal"><span class="pre">true</span></tt>, the chef-client will generate the key pair, and then send the public key to the Chef server. Default value: <tt class="docutils literal"><span class="pre">true</span></tt>.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="filter-search-results">
<h3>Filter Search Results<a class="headerlink" href="#filter-search-results" title="Permalink to this headline">¶</a></h3>
<p>Use <tt class="docutils literal"><span class="pre">:filter_result</span></tt> as part of a search query to filter the search output based on the pattern specified by a Hash. Only attributes in the Hash will be returned.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Prior to chef-client 12.0, this functionality was available from the <tt class="docutils literal"><span class="pre">partial_search</span></tt> cookbook and was referred to as &#8220;partial search&#8221;.</p>
</div>
<p>The syntax for the <tt class="docutils literal"><span class="pre">search</span></tt> method that uses <tt class="docutils literal"><span class="pre">:filter_result</span></tt> is as follows:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">search</span><span class="p">(</span><span class="ss">:index</span><span class="p">,</span> <span class="s1">&#39;query&#39;</span><span class="p">,</span>
  <span class="ss">:filter_result</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="o">[</span> <span class="s1">&#39;abc&#39;</span> <span class="o">]</span><span class="p">,</span>
                      <span class="s1">&#39;bar&#39;</span> <span class="o">=&gt;</span> <span class="o">[</span> <span class="s1">&#39;123&#39;</span> <span class="o">]</span><span class="p">,</span>
                      <span class="s1">&#39;baz&#39;</span> <span class="o">=&gt;</span> <span class="o">[</span> <span class="s1">&#39;sea&#39;</span><span class="p">,</span> <span class="s1">&#39;power&#39;</span> <span class="o">]</span>
                    <span class="p">}</span>
      <span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">result</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="n">result</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="o">]</span>
  <span class="nb">puts</span> <span class="n">result</span><span class="o">[</span><span class="s1">&#39;bar&#39;</span><span class="o">]</span>
  <span class="nb">puts</span> <span class="n">result</span><span class="o">[</span><span class="s1">&#39;baz&#39;</span><span class="o">]</span>
<span class="k">end</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">:index</span></tt> is of name of the index on the Chef server against which the search query will run: <tt class="docutils literal"><span class="pre">:client</span></tt>, <tt class="docutils literal"><span class="pre">:data_bag_name</span></tt>, <tt class="docutils literal"><span class="pre">:environment</span></tt>, <tt class="docutils literal"><span class="pre">:node</span></tt>, and <tt class="docutils literal"><span class="pre">:role</span></tt></li>
<li><tt class="docutils literal"><span class="pre">'query'</span></tt> is a valid search query against an object on the Chef server</li>
<li><tt class="docutils literal"><span class="pre">:filter_result</span></tt> defines a Hash of values to be returned</li>
</ul>
<p>For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="n">search</span><span class="p">(</span><span class="ss">:node</span><span class="p">,</span> <span class="s1">&#39;role:web&#39;</span><span class="p">,</span>
  <span class="ss">:filter_result</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="o">[</span> <span class="s1">&#39;name&#39;</span> <span class="o">]</span><span class="p">,</span>
                      <span class="s1">&#39;ip&#39;</span> <span class="o">=&gt;</span> <span class="o">[</span> <span class="s1">&#39;ipaddress&#39;</span> <span class="o">]</span><span class="p">,</span>
                      <span class="s1">&#39;kernel_version&#39;</span> <span class="o">=&gt;</span> <span class="o">[</span> <span class="s1">&#39;kernel&#39;</span><span class="p">,</span> <span class="s1">&#39;version&#39;</span> <span class="o">]</span>
                    <span class="p">}</span>
      <span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">result</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="n">result</span><span class="o">[</span><span class="s1">&#39;name&#39;</span><span class="o">]</span>
  <span class="nb">puts</span> <span class="n">result</span><span class="o">[</span><span class="s1">&#39;ip&#39;</span><span class="o">]</span>
  <span class="nb">puts</span> <span class="n">result</span><span class="o">[</span><span class="s1">&#39;kernel_version&#39;</span><span class="o">]</span>
<span class="k">end</span>
</pre></div>
</div>
<div class="section" id="knife-search">
<h4>knife search<a class="headerlink" href="#knife-search" title="Permalink to this headline">¶</a></h4>
<p>The <tt class="docutils literal"><span class="pre">knife</span> <span class="pre">search</span></tt> subcommand allows filtering search results with a new option:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">-f</span> <span class="pre">FILTER</span></tt>, <tt class="docutils literal"><span class="pre">--filter-result</span> <span class="pre">FILTER</span></tt></dt>
<dd>Use to return only attributes that match the specified <tt class="docutils literal"><span class="pre">FILTER</span></tt>. For example: <tt class="docutils literal"><span class="pre">\&quot;ServerName=name,</span> <span class="pre">Kernel=kernel.version\&quot;</span></tt>.</dd>
</dl>
</div>
</div>
<div class="section" id="execute-resource-path-property">
<h3><strong>execute</strong> Resource, <tt class="docutils literal"><span class="pre">path</span></tt> Property<a class="headerlink" href="#execute-resource-path-property" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">path</span></tt> property is not implemented by any provider in any version of the chef-client. Starting with chef-client 12, using the <tt class="docutils literal"><span class="pre">path</span></tt> property will return a warning. Starting with chef-client 13, the <tt class="docutils literal"><span class="pre">path</span></tt> property is deprecated and using it will return an exception. Cookbooks that currently use the <tt class="docutils literal"><span class="pre">path</span></tt> property should be updated to use the <tt class="docutils literal"><span class="pre">environment</span></tt> property instead.</p>
</div>
<div class="section" id="git-property">
<h3><strong>git</strong> Property<a class="headerlink" href="#git-property" title="Permalink to this headline">¶</a></h3>
<p>The following property is new for the <strong>git</strong> resource:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">environment</span></tt></td>
<td><p class="first">A Hash of environment variables in the form of <tt class="docutils literal"><span class="pre">({&quot;ENV_VARIABLE&quot;</span> <span class="pre">=&gt;</span> <span class="pre">&quot;VALUE&quot;})</span></tt>. (These variables must exist for a command to be run successfully.)</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <strong>git</strong> provider automatically sets the <tt class="docutils literal"><span class="pre">ENV['HOME']</span></tt> and <tt class="docutils literal"><span class="pre">ENV['GIT_SSH']</span></tt> environment variables. To override this behavior and provide different values, add <tt class="docutils literal"><span class="pre">ENV['HOME']</span></tt> and/or <tt class="docutils literal"><span class="pre">ENV['GIT_SSH']</span></tt> to the <tt class="docutils literal"><span class="pre">environment</span></tt> Hash.</p>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="chef-provider-custom-resources">
<h3>Chef::Provider, Custom Resources<a class="headerlink" href="#chef-provider-custom-resources" title="Permalink to this headline">¶</a></h3>
<p>If a custom resource was created in the <tt class="docutils literal"><span class="pre">/libraries</span></tt> directory of a cookbook that also uses a core resource from the chef-client within the custom resource, the base class that is associated with that custom resource must be updated. In previous versions of the chef-client, the <tt class="docutils literal"><span class="pre">Chef::Provider</span></tt> class was all that was necessary because the Recipe DSL was included in the <tt class="docutils literal"><span class="pre">Chef::Provider</span></tt> base class.</p>
<p>For example, the <tt class="docutils literal"><span class="pre">lvm_logical_volume</span></tt> custom resource from the <a class="reference external" href="https://github.com/chef-cookbooks/lvm/blob/master/libraries/provider_lvm_logical_volume.rb">lvm cookbook</a> uses the <strong>directory</strong> and <strong>mount</strong> resources:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Chef</span>
  <span class="k">class</span> <span class="nc">Provider</span>
    <span class="k">class</span> <span class="nc">LvmLogicalVolume</span> <span class="o">&lt;</span> <span class="no">Chef</span><span class="o">::</span><span class="no">Provider</span>
      <span class="kp">include</span> <span class="no">Chef</span><span class="o">::</span><span class="no">Mixin</span><span class="o">::</span><span class="no">ShellOut</span>

      <span class="o">...</span>
      <span class="k">if</span> <span class="n">new_resource</span><span class="o">.</span><span class="n">mount_point</span>
        <span class="k">if</span> <span class="n">new_resource</span><span class="o">.</span><span class="n">mount_point</span><span class="o">.</span><span class="n">is_a?</span><span class="p">(</span><span class="nb">String</span><span class="p">)</span>
          <span class="n">mount_spec</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">:location</span> <span class="o">=&gt;</span> <span class="n">new_resource</span><span class="o">.</span><span class="n">mount_point</span> <span class="p">}</span>
        <span class="k">else</span>
          <span class="n">mount_spec</span> <span class="o">=</span> <span class="n">new_resource</span><span class="o">.</span><span class="n">mount_point</span>
        <span class="k">end</span>

        <span class="n">dir_resource</span> <span class="o">=</span> <span class="n">directory</span> <span class="n">mount_spec</span><span class="o">[</span><span class="ss">:location</span><span class="o">]</span> <span class="k">do</span>
          <span class="n">mode</span> <span class="s1">&#39;0755&#39;</span>
          <span class="n">owner</span> <span class="s1">&#39;root&#39;</span>
          <span class="n">group</span> <span class="s1">&#39;root&#39;</span>
          <span class="n">recursive</span> <span class="kp">true</span>
          <span class="n">action</span> <span class="ss">:nothing</span>
          <span class="n">not_if</span> <span class="p">{</span> <span class="no">Pathname</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">mount_spec</span><span class="o">[</span><span class="ss">:location</span><span class="o">]</span><span class="p">)</span><span class="o">.</span><span class="n">mountpoint?</span> <span class="p">}</span>
        <span class="k">end</span>
        <span class="n">dir_resource</span><span class="o">.</span><span class="n">run_action</span><span class="p">(</span><span class="ss">:create</span><span class="p">)</span>
        <span class="n">updates</span> <span class="o">&lt;&lt;</span> <span class="n">dir_resource</span><span class="o">.</span><span class="n">updated?</span>

        <span class="n">mount_resource</span> <span class="o">=</span> <span class="n">mount</span> <span class="n">mount_spec</span><span class="o">[</span><span class="ss">:location</span><span class="o">]</span> <span class="k">do</span>
          <span class="n">options</span> <span class="n">mount_spec</span><span class="o">[</span><span class="ss">:options</span><span class="o">]</span>
          <span class="n">dump</span> <span class="n">mount_spec</span><span class="o">[</span><span class="ss">:dump</span><span class="o">]</span>
          <span class="n">pass</span> <span class="n">mount_spec</span><span class="o">[</span><span class="ss">:pass</span><span class="o">]</span>
          <span class="n">device</span> <span class="n">device_name</span>
          <span class="n">fstype</span> <span class="n">fs_type</span>
          <span class="n">action</span> <span class="ss">:nothing</span>
        <span class="k">end</span>
        <span class="n">mount_resource</span><span class="o">.</span><span class="n">run_action</span><span class="p">(</span><span class="ss">:mount</span><span class="p">)</span>
        <span class="n">mount_resource</span><span class="o">.</span><span class="n">run_action</span><span class="p">(</span><span class="ss">:enable</span><span class="p">)</span>
        <span class="n">updates</span> <span class="o">&lt;&lt;</span> <span class="n">mount_resource</span><span class="o">.</span><span class="n">updated?</span>
      <span class="k">end</span>
      <span class="n">new_resource</span><span class="o">.</span><span class="n">updated_by_last_action</span><span class="p">(</span><span class="n">updates</span><span class="o">.</span><span class="n">any?</span><span class="p">)</span>
    <span class="k">end</span>
</pre></div>
</div>
<p>Starting with chef-client 12, the Recipe DSL is removed from the <tt class="docutils literal"><span class="pre">Chef::Provider</span></tt> base class and is only available by using <tt class="docutils literal"><span class="pre">LWRPBase</span></tt>. Cookbooks that contain custom resources authored for the chef-client 11 version should be inspected and updated.</p>
<p>Cookbooks that contain custom resources in the <tt class="docutils literal"><span class="pre">/libraries</span></tt> directory of a cookbook should:</p>
<ul class="simple">
<li>Be inspected for instances of a) the <tt class="docutils literal"><span class="pre">Chef::Provider</span></tt> base class, and then b) for the presence of any core resources from the chef-client</li>
<li>Be updated to use the <tt class="docutils literal"><span class="pre">LWRPBase</span></tt> base class</li>
</ul>
<p>For example:</p>
<div class="highlight-ruby"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Chef</span>
  <span class="k">class</span> <span class="nc">Provider</span>
    <span class="k">class</span> <span class="nc">LvmLogicalVolume</span> <span class="o">&lt;</span> <span class="no">Chef</span><span class="o">::</span><span class="no">Provider</span><span class="o">::</span><span class="no">LWRPBase</span>
      <span class="kp">include</span> <span class="no">Chef</span><span class="o">::</span><span class="no">Mixin</span><span class="o">::</span><span class="no">ShellOut</span>

      <span class="o">...</span>
      <span class="k">if</span> <span class="n">new_resource</span><span class="o">.</span><span class="n">mount_point</span>
        <span class="k">if</span> <span class="n">new_resource</span><span class="o">.</span><span class="n">mount_point</span><span class="o">.</span><span class="n">is_a?</span><span class="p">(</span><span class="nb">String</span><span class="p">)</span>
          <span class="n">mount_spec</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">:location</span> <span class="o">=&gt;</span> <span class="n">new_resource</span><span class="o">.</span><span class="n">mount_point</span> <span class="p">}</span>
        <span class="k">else</span>
          <span class="n">mount_spec</span> <span class="o">=</span> <span class="n">new_resource</span><span class="o">.</span><span class="n">mount_point</span>
        <span class="k">end</span>

        <span class="n">dir_resource</span> <span class="o">=</span> <span class="n">directory</span> <span class="n">mount_spec</span><span class="o">[</span><span class="ss">:location</span><span class="o">]</span> <span class="k">do</span>
          <span class="n">mode</span> <span class="mo">0755</span>
          <span class="n">owner</span> <span class="s1">&#39;root&#39;</span>
          <span class="n">group</span> <span class="s1">&#39;root&#39;</span>
          <span class="n">recursive</span> <span class="kp">true</span>
          <span class="n">action</span> <span class="ss">:nothing</span>
          <span class="n">not_if</span> <span class="p">{</span> <span class="no">Pathname</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">mount_spec</span><span class="o">[</span><span class="ss">:location</span><span class="o">]</span><span class="p">)</span><span class="o">.</span><span class="n">mountpoint?</span> <span class="p">}</span>
        <span class="k">end</span>
        <span class="n">dir_resource</span><span class="o">.</span><span class="n">run_action</span><span class="p">(</span><span class="ss">:create</span><span class="p">)</span>
        <span class="n">updates</span> <span class="o">&lt;&lt;</span> <span class="n">dir_resource</span><span class="o">.</span><span class="n">updated?</span>

        <span class="n">mount_resource</span> <span class="o">=</span> <span class="n">mount</span> <span class="n">mount_spec</span><span class="o">[</span><span class="ss">:location</span><span class="o">]</span> <span class="k">do</span>
          <span class="n">options</span> <span class="n">mount_spec</span><span class="o">[</span><span class="ss">:options</span><span class="o">]</span>
          <span class="n">dump</span> <span class="n">mount_spec</span><span class="o">[</span><span class="ss">:dump</span><span class="o">]</span>
          <span class="n">pass</span> <span class="n">mount_spec</span><span class="o">[</span><span class="ss">:pass</span><span class="o">]</span>
          <span class="n">device</span> <span class="n">device_name</span>
          <span class="n">fstype</span> <span class="n">fs_type</span>
          <span class="n">action</span> <span class="ss">:nothing</span>
        <span class="k">end</span>
        <span class="n">mount_resource</span><span class="o">.</span><span class="n">run_action</span><span class="p">(</span><span class="ss">:mount</span><span class="p">)</span>
        <span class="n">mount_resource</span><span class="o">.</span><span class="n">run_action</span><span class="p">(</span><span class="ss">:enable</span><span class="p">)</span>
        <span class="n">updates</span> <span class="o">&lt;&lt;</span> <span class="n">mount_resource</span><span class="o">.</span><span class="n">updated?</span>
      <span class="k">end</span>
      <span class="n">new_resource</span><span class="o">.</span><span class="n">updated_by_last_action</span><span class="p">(</span><span class="n">updates</span><span class="o">.</span><span class="n">any?</span><span class="p">)</span>
    <span class="k">end</span>
</pre></div>
</div>
</div>
<div class="section" id="ssl-certificates">
<h3>SSL Certificates<a class="headerlink" href="#ssl-certificates" title="Permalink to this headline">¶</a></h3>
<p>Chef server 12 enables SSL verification by default for all requests made to the server, such as those made by knife and the chef-client. The certificate that is generated during the installation of the Chef server is self-signed, which means the certificate is not signed by a trusted certificate authority (CA) that ships with the chef-client. The certificate generated by the Chef server must be downloaded to any machine from which knife and/or the chef-client will make requests to the Chef server.</p>
<p>For example, without downloading the SSL certificate, the following knife command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ knife client list
</pre></div>
</div>
<p>responds with an error similar to:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>ERROR: SSL Validation failure connecting to host: chef-server.example.com ...
ERROR: OpenSSL::SSL::SSLError: SSL_connect <span class="nv">returned</span><span class="o">=</span><span class="m">1</span> <span class="nv">errno</span><span class="o">=</span><span class="m">0</span> <span class="nv">state</span><span class="o">=</span>SSLv3 ...
</pre></div>
</div>
<p>This is by design and will occur until a verifiable certificate is added to the machine from which the request is sent.</p>
<p>See <a class="reference external" href="https://docs.chef.io/chef_client_security.html#ssl-certificates">SSL Certificates</a> for more information about how knife and the chef-client use SSL certificates generated by the Chef server.</p>
</div>
</div>
<div class="section" id="changelog">
<h2>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/chef/chef/blob/master/CHANGELOG.md">https://github.com/chef/chef/blob/master/CHANGELOG.md</a></p>
</div>
</div>


          </div>


          <div class="footer" role="contentinfo">
                &copy; Copyright: This work is licensed under a Creative Commons Attribution 3.0 Unported License.
              This page is about: current version of Chef.
            <a href="/feedback.html">Provide feedback on Chef documentation</a>.
            </div>

<!-- Start of Async Google Analytics Code -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-6369228-7', 'auto', {'legacyCookieDomain': '.chef.io', 'allowLinker': true});
  ga('send', 'pageview');

  var trackOutboundLink = function(url) {
    if (ga.q) {
     document.location = url;
    } else {
      ga('send', 'event', 'outbound', 'click', url, {'hitCallback':
        function () {
          document.location = url;
        }
      });
    }
  };
</script>
<!-- End of Async Google Analytics Code -->

<!-- Start of Marketo Analytics Code -->
<script type="text/javascript">
(function() {
  var didInit = false;
  function initMunchkin() {
    if(didInit === false) {
      didInit = true;
      Munchkin.init('255-VFB-268');
    }
  }
  var s = document.createElement('script');
  s.type = 'text/javascript';
  s.async = true;
  s.src = document.location.protocol + '//munchkin.marketo.net/munchkin.js';
  s.onreadystatechange = function() {
    if (this.readyState == 'complete' || this.readyState == 'loaded') {
      initMunchkin();
    }
  };
  s.onload = initMunchkin;
  document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>
<!-- End of Marketo Analytics Code -->

<!-- Start of DemandBase Analytics Code -->
<script type="text/javascript">
	(function(d,b,a,s,e){ var t = b.createElement(a),
		fs = b.getElementsByTagName(a)[0]; t.async=1; t.id=e;
		t.src=('https:'==document.location.protocol ? 'https://' : 'http://') + s;
		fs.parentNode.insertBefore(t, fs); })
	(window,document,'script','scripts.demandbase.com/zH7sZrWR.min.js','demandbase_js_lib');
</script>
<!-- End of DemandBase Analytics Code -->

<!-- Start of Segment Analytics Code -->
<script type="text/javascript">
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="4.0.0";
  analytics.load("RtyoRfLf1ZETiJcIfkKND3Wq1K1LhYHx");
  analytics.page();
  }}();
</script>
<!-- End of Segment Analytics Code -->


        </div>
      </div>

      <div class="clearer"></div>
    </div>

  </div>
  </body>
</html>